/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(qn,Se){typeof exports=="object"&&typeof module<"u"?module.exports=Se():typeof define=="function"&&define.amd?define(Se):(qn=typeof globalThis<"u"?globalThis:qn||self).bootstrap=Se()})(this,function(){"use strict";const qn=new Map,Se={set(T,f,C){qn.has(T)||qn.set(T,new Map);const R=qn.get(T);R.has(f)||R.size===0?R.set(f,C):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(R.keys())[0]}.`)},get:(T,f)=>qn.has(T)&&qn.get(T).get(f)||null,remove(T,f){if(!qn.has(T))return;const C=qn.get(T);C.delete(f),C.size===0&&qn.delete(T)}},mr="transitionend",fo=T=>(T&&window.CSS&&window.CSS.escape&&(T=T.replace(/#([^\s"#']+)/g,(f,C)=>`#${CSS.escape(C)}`)),T),vt=T=>{T.dispatchEvent(new Event(mr))},fr=T=>!(!T||typeof T!="object")&&(T.jquery!==void 0&&(T=T[0]),T.nodeType!==void 0),un=T=>fr(T)?T.jquery?T[0]:T:typeof T=="string"&&T.length>0?document.querySelector(fo(T)):null,Gn=T=>{if(!fr(T)||T.getClientRects().length===0)return!1;const f=getComputedStyle(T).getPropertyValue("visibility")==="visible",C=T.closest("details:not([open])");if(!C)return f;if(C!==T){const R=T.closest("summary");if(R&&R.parentNode!==C||R===null)return!1}return f},tr=T=>!T||T.nodeType!==Node.ELEMENT_NODE||!!T.classList.contains("disabled")||(T.disabled!==void 0?T.disabled:T.hasAttribute("disabled")&&T.getAttribute("disabled")!=="false"),ni=T=>{if(!document.documentElement.attachShadow)return null;if(typeof T.getRootNode=="function"){const f=T.getRootNode();return f instanceof ShadowRoot?f:null}return T instanceof ShadowRoot?T:T.parentNode?ni(T.parentNode):null},Sr=()=>{},Rn=T=>{T.offsetHeight},se=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,rn=[],Sn=()=>document.documentElement.dir==="rtl",ct=T=>{var f;f=()=>{const C=se();if(C){const R=T.NAME,z=C.fn[R];C.fn[R]=T.jQueryInterface,C.fn[R].Constructor=T,C.fn[R].noConflict=()=>(C.fn[R]=z,T.jQueryInterface)}},document.readyState==="loading"?(rn.length||document.addEventListener("DOMContentLoaded",()=>{for(const C of rn)C()}),rn.push(f)):f()},Tt=(T,f=[],C=T)=>typeof T=="function"?T(...f):C,hr=(T,f,C=!0)=>{if(!C)return void Tt(T);const R=(ee=>{if(!ee)return 0;let{transitionDuration:ue,transitionDelay:Ne}=window.getComputedStyle(ee);const Ue=Number.parseFloat(ue),je=Number.parseFloat(Ne);return Ue||je?(ue=ue.split(",")[0],Ne=Ne.split(",")[0],1e3*(Number.parseFloat(ue)+Number.parseFloat(Ne))):0})(f)+5;let z=!1;const V=({target:ee})=>{ee===f&&(z=!0,f.removeEventListener(mr,V),Tt(T))};f.addEventListener(mr,V),setTimeout(()=>{z||vt(f)},R)},on=(T,f,C,R)=>{const z=T.length;let V=T.indexOf(f);return V===-1?!C&&R?T[z-1]:T[0]:(V+=C?1:-1,R&&(V=(V+z)%z),T[Math.max(0,Math.min(V,z-1))])},Wt=/[^.]*(?=\..*)\.|.*/,ie=/\..*/,dt=/::\d+$/,Jt={};let ho=1;const $e={mouseenter:"mouseover",mouseleave:"mouseout"},pn=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ri(T,f){return f&&`${f}::${ho++}`||T.uidEvent||ho++}function ce(T){const f=ri(T);return T.uidEvent=f,Jt[f]=Jt[f]||{},Jt[f]}function En(T,f,C=null){return Object.values(T).find(R=>R.callable===f&&R.delegationSelector===C)}function Er(T,f,C){const R=typeof f=="string",z=R?C:f||C;let V=go(T);return pn.has(V)||(V=T),[R,z,V]}function _e(T,f,C,R,z){if(typeof f!="string"||!T)return;let[V,ee,ue]=Er(f,C,R);f in $e&&(ee=(nt=>function(et){if(!et.relatedTarget||et.relatedTarget!==et.delegateTarget&&!et.delegateTarget.contains(et.relatedTarget))return nt.call(this,et)})(ee));const Ne=ce(T),Ue=Ne[ue]||(Ne[ue]={}),je=En(Ue,ee,V?C:null);if(je)return void(je.oneOff=je.oneOff&&z);const Oe=ri(ee,f.replace(Wt,"")),Ve=V?function(Ze,nt,et){return function tt(Qt){const nn=Ze.querySelectorAll(nt);for(let{target:mt}=Qt;mt&&mt!==this;mt=mt.parentNode)for(const Et of nn)if(Et===mt)return ht(Qt,{delegateTarget:mt}),tt.oneOff&&Z.off(Ze,Qt.type,nt,et),et.apply(mt,[Qt])}}(T,C,ee):function(Ze,nt){return function et(tt){return ht(tt,{delegateTarget:Ze}),et.oneOff&&Z.off(Ze,tt.type,nt),nt.apply(Ze,[tt])}}(T,ee);Ve.delegationSelector=V?C:null,Ve.callable=ee,Ve.oneOff=z,Ve.uidEvent=Oe,Ue[Oe]=Ve,T.addEventListener(ue,Ve,V)}function Jr(T,f,C,R,z){const V=En(f[C],R,z);V&&(T.removeEventListener(C,V,!!z),delete f[C][V.uidEvent])}function Hi(T,f,C,R){const z=f[C]||{};for(const[V,ee]of Object.entries(z))V.includes(R)&&Jr(T,f,C,ee.callable,ee.delegationSelector)}function go(T){return T=T.replace(ie,""),$e[T]||T}const Z={on(T,f,C,R){_e(T,f,C,R,!1)},one(T,f,C,R){_e(T,f,C,R,!0)},off(T,f,C,R){if(typeof f!="string"||!T)return;const[z,V,ee]=Er(f,C,R),ue=ee!==f,Ne=ce(T),Ue=Ne[ee]||{},je=f.startsWith(".");if(V===void 0){if(je)for(const Oe of Object.keys(Ne))Hi(T,Ne,Oe,f.slice(1));for(const[Oe,Ve]of Object.entries(Ue)){const Ze=Oe.replace(dt,"");ue&&!f.includes(Ze)||Jr(T,Ne,ee,Ve.callable,Ve.delegationSelector)}}else{if(!Object.keys(Ue).length)return;Jr(T,Ne,ee,V,z?C:null)}},trigger(T,f,C){if(typeof f!="string"||!T)return null;const R=se();let z=null,V=!0,ee=!0,ue=!1;f!==go(f)&&R&&(z=R.Event(f,C),R(T).trigger(z),V=!z.isPropagationStopped(),ee=!z.isImmediatePropagationStopped(),ue=z.isDefaultPrevented());const Ne=ht(new Event(f,{bubbles:V,cancelable:!0}),C);return ue&&Ne.preventDefault(),ee&&T.dispatchEvent(Ne),Ne.defaultPrevented&&z&&z.preventDefault(),Ne}};function ht(T,f={}){for(const[C,R]of Object.entries(f))try{T[C]=R}catch{Object.defineProperty(T,C,{configurable:!0,get:()=>R})}return T}function Zt(T){if(T==="true")return!0;if(T==="false")return!1;if(T===Number(T).toString())return Number(T);if(T===""||T==="null")return null;if(typeof T!="string")return T;try{return JSON.parse(decodeURIComponent(T))}catch{return T}}function S(T){return T.replace(/[A-Z]/g,f=>`-${f.toLowerCase()}`)}const ln={setDataAttribute(T,f,C){T.setAttribute(`data-bs-${S(f)}`,C)},removeDataAttribute(T,f){T.removeAttribute(`data-bs-${S(f)}`)},getDataAttributes(T){if(!T)return{};const f={},C=Object.keys(T.dataset).filter(R=>R.startsWith("bs")&&!R.startsWith("bsConfig"));for(const R of C){let z=R.replace(/^bs/,"");z=z.charAt(0).toLowerCase()+z.slice(1,z.length),f[z]=Zt(T.dataset[R])}return f},getDataAttribute:(T,f)=>Zt(T.getAttribute(`data-bs-${S(f)}`))};class ns{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(f){return f=this._mergeConfigObj(f),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}_configAfterMerge(f){return f}_mergeConfigObj(f,C){const R=fr(C)?ln.getDataAttribute(C,"config"):{};return{...this.constructor.Default,...typeof R=="object"?R:{},...fr(C)?ln.getDataAttributes(C):{},...typeof f=="object"?f:{}}}_typeCheckConfig(f,C=this.constructor.DefaultType){for(const[z,V]of Object.entries(C)){const ee=f[z],ue=fr(ee)?"element":(R=ee)==null?`${R}`:Object.prototype.toString.call(R).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(V).test(ue))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${z}" provided type "${ue}" but expected type "${V}".`)}var R}}class Lr extends ns{constructor(f,C){super(),(f=un(f))&&(this._element=f,this._config=this._getConfig(C),Se.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Se.remove(this._element,this.constructor.DATA_KEY),Z.off(this._element,this.constructor.EVENT_KEY);for(const f of Object.getOwnPropertyNames(this))this[f]=null}_queueCallback(f,C,R=!0){hr(f,C,R)}_getConfig(f){return f=this._mergeConfigObj(f,this._element),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}static getInstance(f){return Se.get(un(f),this.DATA_KEY)}static getOrCreateInstance(f,C={}){return this.getInstance(f)||new this(f,typeof C=="object"?C:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(f){return`${f}${this.EVENT_KEY}`}}const Io=T=>{let f=T.getAttribute("data-bs-target");if(!f||f==="#"){let C=T.getAttribute("href");if(!C||!C.includes("#")&&!C.startsWith("."))return null;C.includes("#")&&!C.startsWith("#")&&(C=`#${C.split("#")[1]}`),f=C&&C!=="#"?C.trim():null}return f?f.split(",").map(C=>fo(C)).join(","):null},fe={find:(T,f=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(f,T)),findOne:(T,f=document.documentElement)=>Element.prototype.querySelector.call(f,T),children:(T,f)=>[].concat(...T.children).filter(C=>C.matches(f)),parents(T,f){const C=[];let R=T.parentNode.closest(f);for(;R;)C.push(R),R=R.parentNode.closest(f);return C},prev(T,f){let C=T.previousElementSibling;for(;C;){if(C.matches(f))return[C];C=C.previousElementSibling}return[]},next(T,f){let C=T.nextElementSibling;for(;C;){if(C.matches(f))return[C];C=C.nextElementSibling}return[]},focusableChildren(T){const f=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(C=>`${C}:not([tabindex^="-"])`).join(",");return this.find(f,T).filter(C=>!tr(C)&&Gn(C))},getSelectorFromElement(T){const f=Io(T);return f&&fe.findOne(f)?f:null},getElementFromSelector(T){const f=Io(T);return f?fe.findOne(f):null},getMultipleElementsFromSelector(T){const f=Io(T);return f?fe.find(f):[]}},yt=(T,f="hide")=>{const C=`click.dismiss${T.EVENT_KEY}`,R=T.NAME;Z.on(document,C,`[data-bs-dismiss="${R}"]`,function(z){if(["A","AREA"].includes(this.tagName)&&z.preventDefault(),tr(this))return;const V=fe.getElementFromSelector(this)||this.closest(`.${R}`);T.getOrCreateInstance(V)[f]()})},Me=".bs.alert",Q=`close${Me}`,rs=`closed${Me}`;class Kn extends Lr{static get NAME(){return"alert"}close(){if(Z.trigger(this._element,Q).defaultPrevented)return;this._element.classList.remove("show");const f=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,f)}_destroyElement(){this._element.remove(),Z.trigger(this._element,rs),this.dispose()}static jQueryInterface(f){return this.each(function(){const C=Kn.getOrCreateInstance(this);if(typeof f=="string"){if(C[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);C[f](this)}})}}yt(Kn,"close"),ct(Kn);const De='[data-bs-toggle="button"]';class Nr extends Lr{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(f){return this.each(function(){const C=Nr.getOrCreateInstance(this);f==="toggle"&&C[f]()})}}Z.on(document,"click.bs.button.data-api",De,T=>{T.preventDefault();const f=T.target.closest(De);Nr.getOrCreateInstance(f).toggle()}),ct(Nr);const bn=".bs.swipe",oi=`touchstart${bn}`,Mt=`touchmove${bn}`,he=`touchend${bn}`,Be=`pointerdown${bn}`,gr=`pointerup${bn}`,Dn={endCallback:null,leftCallback:null,rightCallback:null},Fn={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class ot extends ns{constructor(f,C){super(),this._element=f,f&&ot.isSupported()&&(this._config=this._getConfig(C),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Dn}static get DefaultType(){return Fn}static get NAME(){return"swipe"}dispose(){Z.off(this._element,bn)}_start(f){this._supportPointerEvents?this._eventIsPointerPenTouch(f)&&(this._deltaX=f.clientX):this._deltaX=f.touches[0].clientX}_end(f){this._eventIsPointerPenTouch(f)&&(this._deltaX=f.clientX-this._deltaX),this._handleSwipe(),Tt(this._config.endCallback)}_move(f){this._deltaX=f.touches&&f.touches.length>1?0:f.touches[0].clientX-this._deltaX}_handleSwipe(){const f=Math.abs(this._deltaX);if(f<=40)return;const C=f/this._deltaX;this._deltaX=0,C&&Tt(C>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Z.on(this._element,Be,f=>this._start(f)),Z.on(this._element,gr,f=>this._end(f)),this._element.classList.add("pointer-event")):(Z.on(this._element,oi,f=>this._start(f)),Z.on(this._element,Mt,f=>this._move(f)),Z.on(this._element,he,f=>this._end(f)))}_eventIsPointerPenTouch(f){return this._supportPointerEvents&&(f.pointerType==="pen"||f.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ar=".bs.carousel",eo=".data-api",ft="next",en="prev",Un="left",xt="right",nr=`slide${Ar}`,pr=`slid${Ar}`,Ct=`keydown${Ar}`,Br=`mouseenter${Ar}`,it=`mouseleave${Ar}`,Ir=`dragstart${Ar}`,wc=`load${Ar}${eo}`,Ea=`click${Ar}${eo}`,os="carousel",Vt="active",to=".active",Fo=".carousel-item",St=to+Fo,He={ArrowLeft:xt,ArrowRight:Un},no={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Na={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Uo extends Lr{constructor(f,C){super(f,C),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=fe.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===os&&this.cycle()}static get Default(){return no}static get DefaultType(){return Na}static get NAME(){return"carousel"}next(){this._slide(ft)}nextWhenVisible(){!document.hidden&&Gn(this._element)&&this.next()}prev(){this._slide(en)}pause(){this._isSliding&&vt(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?Z.one(this._element,pr,()=>this.cycle()):this.cycle())}to(f){const C=this._getItems();if(f>C.length-1||f<0)return;if(this._isSliding)return void Z.one(this._element,pr,()=>this.to(f));const R=this._getItemIndex(this._getActive());if(R===f)return;const z=f>R?ft:en;this._slide(z,C[f])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(f){return f.defaultInterval=f.interval,f}_addEventListeners(){this._config.keyboard&&Z.on(this._element,Ct,f=>this._keydown(f)),this._config.pause==="hover"&&(Z.on(this._element,Br,()=>this.pause()),Z.on(this._element,it,()=>this._maybeEnableCycle())),this._config.touch&&ot.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const C of fe.find(".carousel-item img",this._element))Z.on(C,Ir,R=>R.preventDefault());const f={leftCallback:()=>this._slide(this._directionToOrder(Un)),rightCallback:()=>this._slide(this._directionToOrder(xt)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new ot(this._element,f)}_keydown(f){if(/input|textarea/i.test(f.target.tagName))return;const C=He[f.key];C&&(f.preventDefault(),this._slide(this._directionToOrder(C)))}_getItemIndex(f){return this._getItems().indexOf(f)}_setActiveIndicatorElement(f){if(!this._indicatorsElement)return;const C=fe.findOne(to,this._indicatorsElement);C.classList.remove(Vt),C.removeAttribute("aria-current");const R=fe.findOne(`[data-bs-slide-to="${f}"]`,this._indicatorsElement);R&&(R.classList.add(Vt),R.setAttribute("aria-current","true"))}_updateInterval(){const f=this._activeElement||this._getActive();if(!f)return;const C=Number.parseInt(f.getAttribute("data-bs-interval"),10);this._config.interval=C||this._config.defaultInterval}_slide(f,C=null){if(this._isSliding)return;const R=this._getActive(),z=f===ft,V=C||on(this._getItems(),R,z,this._config.wrap);if(V===R)return;const ee=this._getItemIndex(V),ue=Oe=>Z.trigger(this._element,Oe,{relatedTarget:V,direction:this._orderToDirection(f),from:this._getItemIndex(R),to:ee});if(ue(nr).defaultPrevented||!R||!V)return;const Ne=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(ee),this._activeElement=V;const Ue=z?"carousel-item-start":"carousel-item-end",je=z?"carousel-item-next":"carousel-item-prev";V.classList.add(je),Rn(V),R.classList.add(Ue),V.classList.add(Ue),this._queueCallback(()=>{V.classList.remove(Ue,je),V.classList.add(Vt),R.classList.remove(Vt,je,Ue),this._isSliding=!1,ue(pr)},R,this._isAnimated()),Ne&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return fe.findOne(St,this._element)}_getItems(){return fe.find(Fo,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(f){return Sn()?f===Un?en:ft:f===Un?ft:en}_orderToDirection(f){return Sn()?f===en?Un:xt:f===en?xt:Un}static jQueryInterface(f){return this.each(function(){const C=Uo.getOrCreateInstance(this,f);if(typeof f!="number"){if(typeof f=="string"){if(C[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);C[f]()}}else C.to(f)})}}Z.on(document,Ea,"[data-bs-slide], [data-bs-slide-to]",function(T){const f=fe.getElementFromSelector(this);if(!f||!f.classList.contains(os))return;T.preventDefault();const C=Uo.getOrCreateInstance(f),R=this.getAttribute("data-bs-slide-to");return R?(C.to(R),void C._maybeEnableCycle()):ln.getDataAttribute(this,"slide")==="next"?(C.next(),void C._maybeEnableCycle()):(C.prev(),void C._maybeEnableCycle())}),Z.on(window,wc,()=>{const T=fe.find('[data-bs-ride="carousel"]');for(const f of T)Uo.getOrCreateInstance(f)}),ct(Uo);const ss=".bs.collapse",Yi=`show${ss}`,$i=`shown${ss}`,Ts=`hide${ss}`,si=`hidden${ss}`,bl=`click${ss}.data-api`,br="show",Nn="collapse",Os="collapsing",is=`:scope .${Nn} .${Nn}`,Xn='[data-bs-toggle="collapse"]',zi={parent:null,toggle:!0},Rs={parent:"(null|element)",toggle:"boolean"};class jo extends Lr{constructor(f,C){super(f,C),this._isTransitioning=!1,this._triggerArray=[];const R=fe.find(Xn);for(const z of R){const V=fe.getSelectorFromElement(z),ee=fe.find(V).filter(ue=>ue===this._element);V!==null&&ee.length&&this._triggerArray.push(z)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return zi}static get DefaultType(){return Rs}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let f=[];if(this._config.parent&&(f=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(z=>z!==this._element).map(z=>jo.getOrCreateInstance(z,{toggle:!1}))),f.length&&f[0]._isTransitioning||Z.trigger(this._element,Yi).defaultPrevented)return;for(const z of f)z.hide();const C=this._getDimension();this._element.classList.remove(Nn),this._element.classList.add(Os),this._element.style[C]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const R=`scroll${C[0].toUpperCase()+C.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Os),this._element.classList.add(Nn,br),this._element.style[C]="",Z.trigger(this._element,$i)},this._element,!0),this._element.style[C]=`${this._element[R]}px`}hide(){if(this._isTransitioning||!this._isShown()||Z.trigger(this._element,Ts).defaultPrevented)return;const f=this._getDimension();this._element.style[f]=`${this._element.getBoundingClientRect()[f]}px`,Rn(this._element),this._element.classList.add(Os),this._element.classList.remove(Nn,br);for(const C of this._triggerArray){const R=fe.getElementFromSelector(C);R&&!this._isShown(R)&&this._addAriaAndCollapsedClass([C],!1)}this._isTransitioning=!0,this._element.style[f]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Os),this._element.classList.add(Nn),Z.trigger(this._element,si)},this._element,!0)}_isShown(f=this._element){return f.classList.contains(br)}_configAfterMerge(f){return f.toggle=!!f.toggle,f.parent=un(f.parent),f}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const f=this._getFirstLevelChildren(Xn);for(const C of f){const R=fe.getElementFromSelector(C);R&&this._addAriaAndCollapsedClass([C],this._isShown(R))}}_getFirstLevelChildren(f){const C=fe.find(is,this._config.parent);return fe.find(f,this._config.parent).filter(R=>!C.includes(R))}_addAriaAndCollapsedClass(f,C){if(f.length)for(const R of f)R.classList.toggle("collapsed",!C),R.setAttribute("aria-expanded",C)}static jQueryInterface(f){const C={};return typeof f=="string"&&/show|hide/.test(f)&&(C.toggle=!1),this.each(function(){const R=jo.getOrCreateInstance(this,C);if(typeof f=="string"){if(R[f]===void 0)throw new TypeError(`No method named "${f}"`);R[f]()}})}}Z.on(document,bl,Xn,function(T){(T.target.tagName==="A"||T.delegateTarget&&T.delegateTarget.tagName==="A")&&T.preventDefault();for(const f of fe.getMultipleElementsFromSelector(this))jo.getOrCreateInstance(f,{toggle:!1}).toggle()}),ct(jo);var gt="top",_t="bottom",Zn="right",Mn="left",Fr="auto",Ho=[gt,_t,Zn,Mn],po="start",jn="end",ro="clippingParents",as="viewport",Ot="popper",rr="reference",Wi=Ho.reduce(function(T,f){return T.concat([f+"-"+po,f+"-"+jn])},[]),Aa=[].concat(Ho,[Fr]).reduce(function(T,f){return T.concat([f,f+"-"+po,f+"-"+jn])},[]),Ds="beforeRead",oo="read",ii="afterRead",Ur="beforeMain",ai="main",Ta="afterMain",Oa="beforeWrite",vl="write",li="afterWrite",ci=[Ds,oo,ii,Ur,ai,Ta,Oa,vl,li];function jr(T){return T?(T.nodeName||"").toLowerCase():null}function or(T){if(T==null)return window;if(T.toString()!=="[object Window]"){var f=T.ownerDocument;return f&&f.defaultView||window}return T}function Yo(T){return T instanceof or(T).Element||T instanceof Element}function sr(T){return T instanceof or(T).HTMLElement||T instanceof HTMLElement}function Vi(T){return typeof ShadowRoot<"u"&&(T instanceof or(T).ShadowRoot||T instanceof ShadowRoot)}const di={name:"applyStyles",enabled:!0,phase:"write",fn:function(T){var f=T.state;Object.keys(f.elements).forEach(function(C){var R=f.styles[C]||{},z=f.attributes[C]||{},V=f.elements[C];sr(V)&&jr(V)&&(Object.assign(V.style,R),Object.keys(z).forEach(function(ee){var ue=z[ee];ue===!1?V.removeAttribute(ee):V.setAttribute(ee,ue===!0?"":ue)}))})},effect:function(T){var f=T.state,C={popper:{position:f.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(f.elements.popper.style,C.popper),f.styles=C,f.elements.arrow&&Object.assign(f.elements.arrow.style,C.arrow),function(){Object.keys(f.elements).forEach(function(R){var z=f.elements[R],V=f.attributes[R]||{},ee=Object.keys(f.styles.hasOwnProperty(R)?f.styles[R]:C[R]).reduce(function(ue,Ne){return ue[Ne]="",ue},{});sr(z)&&jr(z)&&(Object.assign(z.style,ee),Object.keys(V).forEach(function(ue){z.removeAttribute(ue)}))})}},requires:["computeStyles"]};function Hn(T){return T.split("-")[0]}var bo=Math.max,Ms=Math.min,ls=Math.round;function qi(){var T=navigator.userAgentData;return T!=null&&T.brands&&Array.isArray(T.brands)?T.brands.map(function(f){return f.brand+"/"+f.version}).join(" "):navigator.userAgent}function pt(){return!/^((?!chrome|android).)*safari/i.test(qi())}function cs(T,f,C){f===void 0&&(f=!1),C===void 0&&(C=!1);var R=T.getBoundingClientRect(),z=1,V=1;f&&sr(T)&&(z=T.offsetWidth>0&&ls(R.width)/T.offsetWidth||1,V=T.offsetHeight>0&&ls(R.height)/T.offsetHeight||1);var ee=(Yo(T)?or(T):window).visualViewport,ue=!pt()&&C,Ne=(R.left+(ue&&ee?ee.offsetLeft:0))/z,Ue=(R.top+(ue&&ee?ee.offsetTop:0))/V,je=R.width/z,Oe=R.height/V;return{width:je,height:Oe,top:Ue,right:Ne+je,bottom:Ue+Oe,left:Ne,x:Ne,y:Ue}}function vo(T){var f=cs(T),C=T.offsetWidth,R=T.offsetHeight;return Math.abs(f.width-C)<=1&&(C=f.width),Math.abs(f.height-R)<=1&&(R=f.height),{x:T.offsetLeft,y:T.offsetTop,width:C,height:R}}function ir(T,f){var C=f.getRootNode&&f.getRootNode();if(T.contains(f))return!0;if(C&&Vi(C)){var R=f;do{if(R&&T.isSameNode(R))return!0;R=R.parentNode||R.host}while(R)}return!1}function mn(T){return or(T).getComputedStyle(T)}function yo(T){return["table","td","th"].indexOf(jr(T))>=0}function _o(T){return((Yo(T)?T.ownerDocument:T.document)||window.document).documentElement}function Qe(T){return jr(T)==="html"?T:T.assignedSlot||T.parentNode||(Vi(T)?T.host:null)||_o(T)}function Gi(T){return sr(T)&&mn(T).position!=="fixed"?T.offsetParent:null}function $o(T){for(var f=or(T),C=Gi(T);C&&yo(C)&&mn(C).position==="static";)C=Gi(C);return C&&(jr(C)==="html"||jr(C)==="body"&&mn(C).position==="static")?f:C||function(R){var z=/firefox/i.test(qi());if(/Trident/i.test(qi())&&sr(R)&&mn(R).position==="fixed")return null;var V=Qe(R);for(Vi(V)&&(V=V.host);sr(V)&&["html","body"].indexOf(jr(V))<0;){var ee=mn(V);if(ee.transform!=="none"||ee.perspective!=="none"||ee.contain==="paint"||["transform","perspective"].indexOf(ee.willChange)!==-1||z&&ee.willChange==="filter"||z&&ee.filter&&ee.filter!=="none")return V;V=V.parentNode}return null}(T)||f}function Ps(T){return["top","bottom"].indexOf(T)>=0?"x":"y"}function oe(T,f,C){return bo(T,Ms(f,C))}function ds(T){return Object.assign({},{top:0,right:0,bottom:0,left:0},T)}function Ra(T,f){return f.reduce(function(C,R){return C[R]=T,C},{})}const Bt={name:"arrow",enabled:!0,phase:"main",fn:function(T){var f,C=T.state,R=T.name,z=T.options,V=C.elements.arrow,ee=C.modifiersData.popperOffsets,ue=Hn(C.placement),Ne=Ps(ue),Ue=[Mn,Zn].indexOf(ue)>=0?"height":"width";if(V&&ee){var je=function(Gt,Yt){return ds(typeof(Gt=typeof Gt=="function"?Gt(Object.assign({},Yt.rects,{placement:Yt.placement})):Gt)!="number"?Gt:Ra(Gt,Ho))}(z.padding,C),Oe=vo(V),Ve=Ne==="y"?gt:Mn,Ze=Ne==="y"?_t:Zn,nt=C.rects.reference[Ue]+C.rects.reference[Ne]-ee[Ne]-C.rects.popper[Ue],et=ee[Ne]-C.rects.reference[Ne],tt=$o(V),Qt=tt?Ne==="y"?tt.clientHeight||0:tt.clientWidth||0:0,nn=nt/2-et/2,mt=je[Ve],Et=Qt-Oe[Ue]-je[Ze],st=Qt/2-Oe[Ue]/2+nn,rt=oe(mt,st,Et),Ht=Ne;C.modifiersData[R]=((f={})[Ht]=rt,f.centerOffset=rt-st,f)}},effect:function(T){var f=T.state,C=T.options.element,R=C===void 0?"[data-popper-arrow]":C;R!=null&&(typeof R!="string"||(R=f.elements.popper.querySelector(R)))&&ir(f.elements.popper,R)&&(f.elements.arrow=R)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Pn(T){return T.split("-")[1]}var yl={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ki(T){var f,C=T.popper,R=T.popperRect,z=T.placement,V=T.variation,ee=T.offsets,ue=T.position,Ne=T.gpuAcceleration,Ue=T.adaptive,je=T.roundOffsets,Oe=T.isFixed,Ve=ee.x,Ze=Ve===void 0?0:Ve,nt=ee.y,et=nt===void 0?0:nt,tt=typeof je=="function"?je({x:Ze,y:et}):{x:Ze,y:et};Ze=tt.x,et=tt.y;var Qt=ee.hasOwnProperty("x"),nn=ee.hasOwnProperty("y"),mt=Mn,Et=gt,st=window;if(Ue){var rt=$o(C),Ht="clientHeight",Gt="clientWidth";rt===or(C)&&mn(rt=_o(C)).position!=="static"&&ue==="absolute"&&(Ht="scrollHeight",Gt="scrollWidth"),(z===gt||(z===Mn||z===Zn)&&V===jn)&&(Et=_t,et-=(Oe&&rt===st&&st.visualViewport?st.visualViewport.height:rt[Ht])-R.height,et*=Ne?1:-1),z!==Mn&&(z!==gt&&z!==_t||V!==jn)||(mt=Zn,Ze-=(Oe&&rt===st&&st.visualViewport?st.visualViewport.width:rt[Gt])-R.width,Ze*=Ne?1:-1)}var Yt,yn=Object.assign({position:ue},Ue&&yl),_r=je===!0?function(zn,Jn){var ao=zn.x,Gr=zn.y,gn=Jn.devicePixelRatio||1;return{x:ls(ao*gn)/gn||0,y:ls(Gr*gn)/gn||0}}({x:Ze,y:et},or(C)):{x:Ze,y:et};return Ze=_r.x,et=_r.y,Ne?Object.assign({},yn,((Yt={})[Et]=nn?"0":"",Yt[mt]=Qt?"0":"",Yt.transform=(st.devicePixelRatio||1)<=1?"translate("+Ze+"px, "+et+"px)":"translate3d("+Ze+"px, "+et+"px, 0)",Yt)):Object.assign({},yn,((f={})[Et]=nn?et+"px":"",f[mt]=Qt?Ze+"px":"",f.transform="",f))}const Xi={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(T){var f=T.state,C=T.options,R=C.gpuAcceleration,z=R===void 0||R,V=C.adaptive,ee=V===void 0||V,ue=C.roundOffsets,Ne=ue===void 0||ue,Ue={placement:Hn(f.placement),variation:Pn(f.placement),popper:f.elements.popper,popperRect:f.rects.popper,gpuAcceleration:z,isFixed:f.options.strategy==="fixed"};f.modifiersData.popperOffsets!=null&&(f.styles.popper=Object.assign({},f.styles.popper,Ki(Object.assign({},Ue,{offsets:f.modifiersData.popperOffsets,position:f.options.strategy,adaptive:ee,roundOffsets:Ne})))),f.modifiersData.arrow!=null&&(f.styles.arrow=Object.assign({},f.styles.arrow,Ki(Object.assign({},Ue,{offsets:f.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Ne})))),f.attributes.popper=Object.assign({},f.attributes.popper,{"data-popper-placement":f.placement})},data:{}};var ui={passive:!0};const Je={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(T){var f=T.state,C=T.instance,R=T.options,z=R.scroll,V=z===void 0||z,ee=R.resize,ue=ee===void 0||ee,Ne=or(f.elements.popper),Ue=[].concat(f.scrollParents.reference,f.scrollParents.popper);return V&&Ue.forEach(function(je){je.addEventListener("scroll",C.update,ui)}),ue&&Ne.addEventListener("resize",C.update,ui),function(){V&&Ue.forEach(function(je){je.removeEventListener("scroll",C.update,ui)}),ue&&Ne.removeEventListener("resize",C.update,ui)}},data:{}};var mi={left:"right",right:"left",bottom:"top",top:"bottom"};function zo(T){return T.replace(/left|right|bottom|top/g,function(f){return mi[f]})}var fi={start:"end",end:"start"};function Yn(T){return T.replace(/start|end/g,function(f){return fi[f]})}function sn(T){var f=or(T);return{scrollLeft:f.pageXOffset,scrollTop:f.pageYOffset}}function Zi(T){return cs(_o(T)).left+sn(T).scrollLeft}function Qi(T){var f=mn(T),C=f.overflow,R=f.overflowX,z=f.overflowY;return/auto|scroll|overlay|hidden/.test(C+z+R)}function us(T){return["html","body","#document"].indexOf(jr(T))>=0?T.ownerDocument.body:sr(T)&&Qi(T)?T:us(Qe(T))}function Wo(T,f){var C;f===void 0&&(f=[]);var R=us(T),z=R===((C=T.ownerDocument)==null?void 0:C.body),V=or(R),ee=z?[V].concat(V.visualViewport||[],Qi(R)?R:[]):R,ue=f.concat(ee);return z?ue:ue.concat(Wo(Qe(ee)))}function tn(T){return Object.assign({},T,{left:T.x,top:T.y,right:T.x+T.width,bottom:T.y+T.height})}function Hr(T,f,C){return f===as?tn(function(R,z){var V=or(R),ee=_o(R),ue=V.visualViewport,Ne=ee.clientWidth,Ue=ee.clientHeight,je=0,Oe=0;if(ue){Ne=ue.width,Ue=ue.height;var Ve=pt();(Ve||!Ve&&z==="fixed")&&(je=ue.offsetLeft,Oe=ue.offsetTop)}return{width:Ne,height:Ue,x:je+Zi(R),y:Oe}}(T,C)):Yo(f)?function(R,z){var V=cs(R,!1,z==="fixed");return V.top=V.top+R.clientTop,V.left=V.left+R.clientLeft,V.bottom=V.top+R.clientHeight,V.right=V.left+R.clientWidth,V.width=R.clientWidth,V.height=R.clientHeight,V.x=V.left,V.y=V.top,V}(f,C):tn(function(R){var z,V=_o(R),ee=sn(R),ue=(z=R.ownerDocument)==null?void 0:z.body,Ne=bo(V.scrollWidth,V.clientWidth,ue?ue.scrollWidth:0,ue?ue.clientWidth:0),Ue=bo(V.scrollHeight,V.clientHeight,ue?ue.scrollHeight:0,ue?ue.clientHeight:0),je=-ee.scrollLeft+Zi(R),Oe=-ee.scrollTop;return mn(ue||V).direction==="rtl"&&(je+=bo(V.clientWidth,ue?ue.clientWidth:0)-Ne),{width:Ne,height:Ue,x:je,y:Oe}}(_o(T)))}function cn(T){var f,C=T.reference,R=T.element,z=T.placement,V=z?Hn(z):null,ee=z?Pn(z):null,ue=C.x+C.width/2-R.width/2,Ne=C.y+C.height/2-R.height/2;switch(V){case gt:f={x:ue,y:C.y-R.height};break;case _t:f={x:ue,y:C.y+C.height};break;case Zn:f={x:C.x+C.width,y:Ne};break;case Mn:f={x:C.x-R.width,y:Ne};break;default:f={x:C.x,y:C.y}}var Ue=V?Ps(V):null;if(Ue!=null){var je=Ue==="y"?"height":"width";switch(ee){case po:f[Ue]=f[Ue]-(C[je]/2-R[je]/2);break;case jn:f[Ue]=f[Ue]+(C[je]/2-R[je]/2)}}return f}function vn(T,f){f===void 0&&(f={});var C=f,R=C.placement,z=R===void 0?T.placement:R,V=C.strategy,ee=V===void 0?T.strategy:V,ue=C.boundary,Ne=ue===void 0?ro:ue,Ue=C.rootBoundary,je=Ue===void 0?as:Ue,Oe=C.elementContext,Ve=Oe===void 0?Ot:Oe,Ze=C.altBoundary,nt=Ze!==void 0&&Ze,et=C.padding,tt=et===void 0?0:et,Qt=ds(typeof tt!="number"?tt:Ra(tt,Ho)),nn=Ve===Ot?rr:Ot,mt=T.rects.popper,Et=T.elements[nt?nn:Ve],st=function(Jn,ao,Gr,gn){var Co=ao==="clippingParents"?function(Kt){var wr=Wo(Qe(Kt)),Kr=["absolute","fixed"].indexOf(mn(Kt).position)>=0&&sr(Kt)?$o(Kt):Kt;return Yo(Kr)?wr.filter(function(Xo){return Yo(Xo)&&ir(Xo,Kr)&&jr(Xo)!=="body"}):[]}(Jn):[].concat(ao),ko=[].concat(Co,[Gr]),la=ko[0],_n=ko.reduce(function(Kt,wr){var Kr=Hr(Jn,wr,gn);return Kt.top=bo(Kr.top,Kt.top),Kt.right=Ms(Kr.right,Kt.right),Kt.bottom=Ms(Kr.bottom,Kt.bottom),Kt.left=bo(Kr.left,Kt.left),Kt},Hr(Jn,la,gn));return _n.width=_n.right-_n.left,_n.height=_n.bottom-_n.top,_n.x=_n.left,_n.y=_n.top,_n}(Yo(Et)?Et:Et.contextElement||_o(T.elements.popper),Ne,je,ee),rt=cs(T.elements.reference),Ht=cn({reference:rt,element:mt,strategy:"absolute",placement:z}),Gt=tn(Object.assign({},mt,Ht)),Yt=Ve===Ot?Gt:rt,yn={top:st.top-Yt.top+Qt.top,bottom:Yt.bottom-st.bottom+Qt.bottom,left:st.left-Yt.left+Qt.left,right:Yt.right-st.right+Qt.right},_r=T.modifiersData.offset;if(Ve===Ot&&_r){var zn=_r[z];Object.keys(yn).forEach(function(Jn){var ao=[Zn,_t].indexOf(Jn)>=0?1:-1,Gr=[gt,_t].indexOf(Jn)>=0?"y":"x";yn[Jn]+=zn[Gr]*ao})}return yn}function hi(T,f){f===void 0&&(f={});var C=f,R=C.placement,z=C.boundary,V=C.rootBoundary,ee=C.padding,ue=C.flipVariations,Ne=C.allowedAutoPlacements,Ue=Ne===void 0?Aa:Ne,je=Pn(R),Oe=je?ue?Wi:Wi.filter(function(nt){return Pn(nt)===je}):Ho,Ve=Oe.filter(function(nt){return Ue.indexOf(nt)>=0});Ve.length===0&&(Ve=Oe);var Ze=Ve.reduce(function(nt,et){return nt[et]=vn(T,{placement:et,boundary:z,rootBoundary:V,padding:ee})[Hn(et)],nt},{});return Object.keys(Ze).sort(function(nt,et){return Ze[nt]-Ze[et]})}const dn={name:"flip",enabled:!0,phase:"main",fn:function(T){var f=T.state,C=T.options,R=T.name;if(!f.modifiersData[R]._skip){for(var z=C.mainAxis,V=z===void 0||z,ee=C.altAxis,ue=ee===void 0||ee,Ne=C.fallbackPlacements,Ue=C.padding,je=C.boundary,Oe=C.rootBoundary,Ve=C.altBoundary,Ze=C.flipVariations,nt=Ze===void 0||Ze,et=C.allowedAutoPlacements,tt=f.options.placement,Qt=Hn(tt),nn=Ne||(Qt!==tt&&nt?function(Kt){if(Hn(Kt)===Fr)return[];var wr=zo(Kt);return[Yn(Kt),wr,Yn(wr)]}(tt):[zo(tt)]),mt=[tt].concat(nn).reduce(function(Kt,wr){return Kt.concat(Hn(wr)===Fr?hi(f,{placement:wr,boundary:je,rootBoundary:Oe,padding:Ue,flipVariations:nt,allowedAutoPlacements:et}):wr)},[]),Et=f.rects.reference,st=f.rects.popper,rt=new Map,Ht=!0,Gt=mt[0],Yt=0;Yt<mt.length;Yt++){var yn=mt[Yt],_r=Hn(yn),zn=Pn(yn)===po,Jn=[gt,_t].indexOf(_r)>=0,ao=Jn?"width":"height",Gr=vn(f,{placement:yn,boundary:je,rootBoundary:Oe,altBoundary:Ve,padding:Ue}),gn=Jn?zn?Zn:Mn:zn?_t:gt;Et[ao]>st[ao]&&(gn=zo(gn));var Co=zo(gn),ko=[];if(V&&ko.push(Gr[_r]<=0),ue&&ko.push(Gr[gn]<=0,Gr[Co]<=0),ko.every(function(Kt){return Kt})){Gt=yn,Ht=!1;break}rt.set(yn,ko)}if(Ht)for(var la=function(Kt){var wr=mt.find(function(Kr){var Xo=rt.get(Kr);if(Xo)return Xo.slice(0,Kt).every(function(Pl){return Pl})});if(wr)return Gt=wr,"break"},_n=nt?3:1;_n>0&&la(_n)!=="break";_n--);f.placement!==Gt&&(f.modifiersData[R]._skip=!0,f.placement=Gt,f.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Ls(T,f,C){return C===void 0&&(C={x:0,y:0}),{top:T.top-f.height-C.y,right:T.right-f.width+C.x,bottom:T.bottom-f.height+C.y,left:T.left-f.width-C.x}}function gi(T){return[gt,Zn,_t,Mn].some(function(f){return T[f]>=0})}const Vo={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(T){var f=T.state,C=T.name,R=f.rects.reference,z=f.rects.popper,V=f.modifiersData.preventOverflow,ee=vn(f,{elementContext:"reference"}),ue=vn(f,{altBoundary:!0}),Ne=Ls(ee,R),Ue=Ls(ue,z,V),je=gi(Ne),Oe=gi(Ue);f.modifiersData[C]={referenceClippingOffsets:Ne,popperEscapeOffsets:Ue,isReferenceHidden:je,hasPopperEscaped:Oe},f.attributes.popper=Object.assign({},f.attributes.popper,{"data-popper-reference-hidden":je,"data-popper-escaped":Oe})}},Yr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(T){var f=T.state,C=T.options,R=T.name,z=C.offset,V=z===void 0?[0,0]:z,ee=Aa.reduce(function(je,Oe){return je[Oe]=function(Ve,Ze,nt){var et=Hn(Ve),tt=[Mn,gt].indexOf(et)>=0?-1:1,Qt=typeof nt=="function"?nt(Object.assign({},Ze,{placement:Ve})):nt,nn=Qt[0],mt=Qt[1];return nn=nn||0,mt=(mt||0)*tt,[Mn,Zn].indexOf(et)>=0?{x:mt,y:nn}:{x:nn,y:mt}}(Oe,f.rects,V),je},{}),ue=ee[f.placement],Ne=ue.x,Ue=ue.y;f.modifiersData.popperOffsets!=null&&(f.modifiersData.popperOffsets.x+=Ne,f.modifiersData.popperOffsets.y+=Ue),f.modifiersData[R]=ee}},pi={name:"popperOffsets",enabled:!0,phase:"read",fn:function(T){var f=T.state,C=T.name;f.modifiersData[C]=cn({reference:f.rects.reference,element:f.rects.popper,strategy:"absolute",placement:f.placement})},data:{}},Ji={name:"preventOverflow",enabled:!0,phase:"main",fn:function(T){var f=T.state,C=T.options,R=T.name,z=C.mainAxis,V=z===void 0||z,ee=C.altAxis,ue=ee!==void 0&&ee,Ne=C.boundary,Ue=C.rootBoundary,je=C.altBoundary,Oe=C.padding,Ve=C.tether,Ze=Ve===void 0||Ve,nt=C.tetherOffset,et=nt===void 0?0:nt,tt=vn(f,{boundary:Ne,rootBoundary:Ue,padding:Oe,altBoundary:je}),Qt=Hn(f.placement),nn=Pn(f.placement),mt=!nn,Et=Ps(Qt),st=Et==="x"?"y":"x",rt=f.modifiersData.popperOffsets,Ht=f.rects.reference,Gt=f.rects.popper,Yt=typeof et=="function"?et(Object.assign({},f.rects,{placement:f.placement})):et,yn=typeof Yt=="number"?{mainAxis:Yt,altAxis:Yt}:Object.assign({mainAxis:0,altAxis:0},Yt),_r=f.modifiersData.offset?f.modifiersData.offset[f.placement]:null,zn={x:0,y:0};if(rt){if(V){var Jn,ao=Et==="y"?gt:Mn,Gr=Et==="y"?_t:Zn,gn=Et==="y"?"height":"width",Co=rt[Et],ko=Co+tt[ao],la=Co-tt[Gr],_n=Ze?-Gt[gn]/2:0,Kt=nn===po?Ht[gn]:Gt[gn],wr=nn===po?-Gt[gn]:-Ht[gn],Kr=f.elements.arrow,Xo=Ze&&Kr?vo(Kr):{width:0,height:0},Pl=f.modifiersData["arrow#persistent"]?f.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Ll=Pl[ao],za=Pl[Gr],js=oe(0,Ht[gn],Xo[gn]),ff=mt?Ht[gn]/2-_n-js-Ll-yn.mainAxis:Kt-js-Ll-yn.mainAxis,Ai=mt?-Ht[gn]/2+_n+js+za+yn.mainAxis:wr+js+za+yn.mainAxis,Wa=f.elements.arrow&&$o(f.elements.arrow),hf=Wa?Et==="y"?Wa.clientTop||0:Wa.clientLeft||0:0,Bl=(Jn=_r?.[Et])!=null?Jn:0,gf=Co+Ai-Bl,ca=oe(Ze?Ms(ko,Co+ff-Bl-hf):ko,Co,Ze?bo(la,gf):la);rt[Et]=ca,zn[Et]=ca-Co}if(ue){var jc,da=Et==="x"?gt:Mn,mu=Et==="x"?_t:Zn,Hs=rt[st],bt=st==="y"?"height":"width",fu=Hs+tt[da],Zo=Hs-tt[mu],Ti=[gt,Mn].indexOf(Qt)!==-1,Il=(jc=_r?.[st])!=null?jc:0,Hc=Ti?fu:Hs-Ht[bt]-Gt[bt]-Il+yn.altAxis,lo=Ti?Hs+Ht[bt]+Gt[bt]-Il-yn.altAxis:Zo,Wn=Ze&&Ti?function(Fl,Yc,Oi){var Ys=oe(Fl,Yc,Oi);return Ys>Oi?Oi:Ys}(Hc,Hs,lo):oe(Ze?Hc:fu,Hs,Ze?lo:Zo);rt[st]=Wn,zn[st]=Wn-Hs}f.modifiersData[R]=zn}},requiresIfExists:["offset"]};function ms(T,f,C){C===void 0&&(C=!1);var R,z,V=sr(f),ee=sr(f)&&function(Oe){var Ve=Oe.getBoundingClientRect(),Ze=ls(Ve.width)/Oe.offsetWidth||1,nt=ls(Ve.height)/Oe.offsetHeight||1;return Ze!==1||nt!==1}(f),ue=_o(f),Ne=cs(T,ee,C),Ue={scrollLeft:0,scrollTop:0},je={x:0,y:0};return(V||!V&&!C)&&((jr(f)!=="body"||Qi(ue))&&(Ue=(R=f)!==or(R)&&sr(R)?{scrollLeft:(z=R).scrollLeft,scrollTop:z.scrollTop}:sn(R)),sr(f)?((je=cs(f,!0)).x+=f.clientLeft,je.y+=f.clientTop):ue&&(je.x=Zi(ue))),{x:Ne.left+Ue.scrollLeft-je.x,y:Ne.top+Ue.scrollTop-je.y,width:Ne.width,height:Ne.height}}function ea(T){var f=new Map,C=new Set,R=[];function z(V){C.add(V.name),[].concat(V.requires||[],V.requiresIfExists||[]).forEach(function(ee){if(!C.has(ee)){var ue=f.get(ee);ue&&z(ue)}}),R.push(V)}return T.forEach(function(V){f.set(V.name,V)}),T.forEach(function(V){C.has(V.name)||z(V)}),R}var ar={placement:"bottom",modifiers:[],strategy:"absolute"};function so(){for(var T=arguments.length,f=new Array(T),C=0;C<T;C++)f[C]=arguments[C];return!f.some(function(R){return!(R&&typeof R.getBoundingClientRect=="function")})}function Qn(T){T===void 0&&(T={});var f=T,C=f.defaultModifiers,R=C===void 0?[]:C,z=f.defaultOptions,V=z===void 0?ar:z;return function(ee,ue,Ne){Ne===void 0&&(Ne=V);var Ue,je,Oe={placement:"bottom",orderedModifiers:[],options:Object.assign({},ar,V),modifiersData:{},elements:{reference:ee,popper:ue},attributes:{},styles:{}},Ve=[],Ze=!1,nt={state:Oe,setOptions:function(tt){var Qt=typeof tt=="function"?tt(Oe.options):tt;et(),Oe.options=Object.assign({},V,Oe.options,Qt),Oe.scrollParents={reference:Yo(ee)?Wo(ee):ee.contextElement?Wo(ee.contextElement):[],popper:Wo(ue)};var nn,mt,Et=function(st){var rt=ea(st);return ci.reduce(function(Ht,Gt){return Ht.concat(rt.filter(function(Yt){return Yt.phase===Gt}))},[])}((nn=[].concat(R,Oe.options.modifiers),mt=nn.reduce(function(st,rt){var Ht=st[rt.name];return st[rt.name]=Ht?Object.assign({},Ht,rt,{options:Object.assign({},Ht.options,rt.options),data:Object.assign({},Ht.data,rt.data)}):rt,st},{}),Object.keys(mt).map(function(st){return mt[st]})));return Oe.orderedModifiers=Et.filter(function(st){return st.enabled}),Oe.orderedModifiers.forEach(function(st){var rt=st.name,Ht=st.options,Gt=Ht===void 0?{}:Ht,Yt=st.effect;if(typeof Yt=="function"){var yn=Yt({state:Oe,name:rt,instance:nt,options:Gt});Ve.push(yn||function(){})}}),nt.update()},forceUpdate:function(){if(!Ze){var tt=Oe.elements,Qt=tt.reference,nn=tt.popper;if(so(Qt,nn)){Oe.rects={reference:ms(Qt,$o(nn),Oe.options.strategy==="fixed"),popper:vo(nn)},Oe.reset=!1,Oe.placement=Oe.options.placement,Oe.orderedModifiers.forEach(function(Yt){return Oe.modifiersData[Yt.name]=Object.assign({},Yt.data)});for(var mt=0;mt<Oe.orderedModifiers.length;mt++)if(Oe.reset!==!0){var Et=Oe.orderedModifiers[mt],st=Et.fn,rt=Et.options,Ht=rt===void 0?{}:rt,Gt=Et.name;typeof st=="function"&&(Oe=st({state:Oe,options:Ht,name:Gt,instance:nt})||Oe)}else Oe.reset=!1,mt=-1}}},update:(Ue=function(){return new Promise(function(tt){nt.forceUpdate(),tt(Oe)})},function(){return je||(je=new Promise(function(tt){Promise.resolve().then(function(){je=void 0,tt(Ue())})})),je}),destroy:function(){et(),Ze=!0}};if(!so(ee,ue))return nt;function et(){Ve.forEach(function(tt){return tt()}),Ve=[]}return nt.setOptions(Ne).then(function(tt){!Ze&&Ne.onFirstUpdate&&Ne.onFirstUpdate(tt)}),nt}}var $r=Qn(),Ft=Qn({defaultModifiers:[Je,pi,Xi,di]}),zr=Qn({defaultModifiers:[Je,pi,Xi,di,Yr,dn,Ji,Bt,Vo]});const M=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Ta,afterRead:ii,afterWrite:li,applyStyles:di,arrow:Bt,auto:Fr,basePlacements:Ho,beforeMain:Ur,beforeRead:Ds,beforeWrite:Oa,bottom:_t,clippingParents:ro,computeStyles:Xi,createPopper:zr,createPopperBase:$r,createPopperLite:Ft,detectOverflow:vn,end:jn,eventListeners:Je,flip:dn,hide:Vo,left:Mn,main:ai,modifierPhases:ci,offset:Yr,placements:Aa,popper:Ot,popperGenerator:Qn,popperOffsets:pi,preventOverflow:Ji,read:oo,reference:rr,right:Zn,start:po,top:gt,variationPlacements:Wi,viewport:as,write:vl},Symbol.toStringTag,{value:"Module"})),_l="dropdown",qo=".bs.dropdown",fn=".data-api",fs="ArrowUp",at="ArrowDown",vr=`hide${qo}`,hs=`hidden${qo}`,Wr=`show${qo}`,ut=`shown${qo}`,u=`click${qo}${fn}`,b=`keydown${qo}${fn}`,w=`keyup${qo}${fn}`,E="show",I='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',K=`${I}.${E}`,J=".dropdown-menu",le=Sn()?"top-end":"top-start",we=Sn()?"top-start":"top-end",ke=Sn()?"bottom-end":"bottom-start",Ge=Sn()?"bottom-start":"bottom-end",Ke=Sn()?"left-start":"right-start",It=Sn()?"right-start":"left-start",qt={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},yr={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class An extends Lr{constructor(f,C){super(f,C),this._popper=null,this._parent=this._element.parentNode,this._menu=fe.next(this._element,J)[0]||fe.prev(this._element,J)[0]||fe.findOne(J,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return qt}static get DefaultType(){return yr}static get NAME(){return _l}toggle(){return this._isShown()?this.hide():this.show()}show(){if(tr(this._element)||this._isShown())return;const f={relatedTarget:this._element};if(!Z.trigger(this._element,Wr,f).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const C of[].concat(...document.body.children))Z.on(C,"mouseover",Sr);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(E),this._element.classList.add(E),Z.trigger(this._element,ut,f)}}hide(){if(tr(this._element)||!this._isShown())return;const f={relatedTarget:this._element};this._completeHide(f)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(f){if(!Z.trigger(this._element,vr,f).defaultPrevented){if("ontouchstart"in document.documentElement)for(const C of[].concat(...document.body.children))Z.off(C,"mouseover",Sr);this._popper&&this._popper.destroy(),this._menu.classList.remove(E),this._element.classList.remove(E),this._element.setAttribute("aria-expanded","false"),ln.removeDataAttribute(this._menu,"popper"),Z.trigger(this._element,hs,f)}}_getConfig(f){if(typeof(f=super._getConfig(f)).reference=="object"&&!fr(f.reference)&&typeof f.reference.getBoundingClientRect!="function")throw new TypeError(`${_l.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return f}_createPopper(){if(M===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let f=this._element;this._config.reference==="parent"?f=this._parent:fr(this._config.reference)?f=un(this._config.reference):typeof this._config.reference=="object"&&(f=this._config.reference);const C=this._getPopperConfig();this._popper=zr(f,this._menu,C)}_isShown(){return this._menu.classList.contains(E)}_getPlacement(){const f=this._parent;if(f.classList.contains("dropend"))return Ke;if(f.classList.contains("dropstart"))return It;if(f.classList.contains("dropup-center"))return"top";if(f.classList.contains("dropdown-center"))return"bottom";const C=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return f.classList.contains("dropup")?C?we:le:C?Ge:ke}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:f}=this._config;return typeof f=="string"?f.split(",").map(C=>Number.parseInt(C,10)):typeof f=="function"?C=>f(C,this._element):f}_getPopperConfig(){const f={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(ln.setDataAttribute(this._menu,"popper","static"),f.modifiers=[{name:"applyStyles",enabled:!1}]),{...f,...Tt(this._config.popperConfig,[f])}}_selectMenuItem({key:f,target:C}){const R=fe.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(z=>Gn(z));R.length&&on(R,C,f===at,!R.includes(C)).focus()}static jQueryInterface(f){return this.each(function(){const C=An.getOrCreateInstance(this,f);if(typeof f=="string"){if(C[f]===void 0)throw new TypeError(`No method named "${f}"`);C[f]()}})}static clearMenus(f){if(f.button===2||f.type==="keyup"&&f.key!=="Tab")return;const C=fe.find(K);for(const R of C){const z=An.getInstance(R);if(!z||z._config.autoClose===!1)continue;const V=f.composedPath(),ee=V.includes(z._menu);if(V.includes(z._element)||z._config.autoClose==="inside"&&!ee||z._config.autoClose==="outside"&&ee||z._menu.contains(f.target)&&(f.type==="keyup"&&f.key==="Tab"||/input|select|option|textarea|form/i.test(f.target.tagName)))continue;const ue={relatedTarget:z._element};f.type==="click"&&(ue.clickEvent=f),z._completeHide(ue)}}static dataApiKeydownHandler(f){const C=/input|textarea/i.test(f.target.tagName),R=f.key==="Escape",z=[fs,at].includes(f.key);if(!z&&!R||C&&!R)return;f.preventDefault();const V=this.matches(I)?this:fe.prev(this,I)[0]||fe.next(this,I)[0]||fe.findOne(I,f.delegateTarget.parentNode),ee=An.getOrCreateInstance(V);if(z)return f.stopPropagation(),ee.show(),void ee._selectMenuItem(f);ee._isShown()&&(f.stopPropagation(),ee.hide(),V.focus())}}Z.on(document,b,I,An.dataApiKeydownHandler),Z.on(document,b,J,An.dataApiKeydownHandler),Z.on(document,u,An.clearMenus),Z.on(document,w,An.clearMenus),Z.on(document,u,I,function(T){T.preventDefault(),An.getOrCreateInstance(this).toggle()}),ct(An);const Cc="backdrop",Gd="show",bi=`mousedown.bs.${Cc}`,Kd={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},gs={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Bs extends ns{constructor(f){super(),this._config=this._getConfig(f),this._isAppended=!1,this._element=null}static get Default(){return Kd}static get DefaultType(){return gs}static get NAME(){return Cc}show(f){if(!this._config.isVisible)return void Tt(f);this._append();const C=this._getElement();this._config.isAnimated&&Rn(C),C.classList.add(Gd),this._emulateAnimation(()=>{Tt(f)})}hide(f){this._config.isVisible?(this._getElement().classList.remove(Gd),this._emulateAnimation(()=>{this.dispose(),Tt(f)})):Tt(f)}dispose(){this._isAppended&&(Z.off(this._element,bi),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const f=document.createElement("div");f.className=this._config.className,this._config.isAnimated&&f.classList.add("fade"),this._element=f}return this._element}_configAfterMerge(f){return f.rootElement=un(f.rootElement),f}_append(){if(this._isAppended)return;const f=this._getElement();this._config.rootElement.append(f),Z.on(f,bi,()=>{Tt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(f){hr(f,this._getElement(),this._config.isAnimated)}}const ta=".bs.focustrap",Da=`focusin${ta}`,wl=`keydown.tab${ta}`,vi="backward",yi={autofocus:!0,trapElement:null},ef={autofocus:"boolean",trapElement:"element"};class Ma extends ns{constructor(f){super(),this._config=this._getConfig(f),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return yi}static get DefaultType(){return ef}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Z.off(document,ta),Z.on(document,Da,f=>this._handleFocusin(f)),Z.on(document,wl,f=>this._handleKeydown(f)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Z.off(document,ta))}_handleFocusin(f){const{trapElement:C}=this._config;if(f.target===document||f.target===C||C.contains(f.target))return;const R=fe.focusableChildren(C);R.length===0?C.focus():this._lastTabNavDirection===vi?R[R.length-1].focus():R[0].focus()}_handleKeydown(f){f.key==="Tab"&&(this._lastTabNavDirection=f.shiftKey?vi:"forward")}}const na=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",kc=".sticky-top",Pa="padding-right",La="margin-right";class io{constructor(){this._element=document.body}getWidth(){const f=document.documentElement.clientWidth;return Math.abs(window.innerWidth-f)}hide(){const f=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Pa,C=>C+f),this._setElementAttributes(na,Pa,C=>C+f),this._setElementAttributes(kc,La,C=>C-f)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Pa),this._resetElementAttributes(na,Pa),this._resetElementAttributes(kc,La)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(f,C,R){const z=this.getWidth();this._applyManipulationCallback(f,V=>{if(V!==this._element&&window.innerWidth>V.clientWidth+z)return;this._saveInitialAttribute(V,C);const ee=window.getComputedStyle(V).getPropertyValue(C);V.style.setProperty(C,`${R(Number.parseFloat(ee))}px`)})}_saveInitialAttribute(f,C){const R=f.style.getPropertyValue(C);R&&ln.setDataAttribute(f,C,R)}_resetElementAttributes(f,C){this._applyManipulationCallback(f,R=>{const z=ln.getDataAttribute(R,C);z!==null?(ln.removeDataAttribute(R,C),R.style.setProperty(C,z)):R.style.removeProperty(C)})}_applyManipulationCallback(f,C){if(fr(f))C(f);else for(const R of fe.find(f,this._element))C(R)}}const Vr=".bs.modal",Cl=`hide${Vr}`,xc=`hidePrevented${Vr}`,Sc=`hidden${Vr}`,lr=`show${Vr}`,ps=`shown${Vr}`,Ec=`resize${Vr}`,hn=`click.dismiss${Vr}`,Xd=`mousedown.dismiss${Vr}`,_i=`keydown.dismiss${Vr}`,ra=`click${Vr}.data-api`,Pt="modal-open",bs="show",Ba="modal-static",Zd={backdrop:!0,focus:!0,keyboard:!0},kl={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class wi extends Lr{constructor(f,C){super(f,C),this._dialog=fe.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new io,this._addEventListeners()}static get Default(){return Zd}static get DefaultType(){return kl}static get NAME(){return"modal"}toggle(f){return this._isShown?this.hide():this.show(f)}show(f){this._isShown||this._isTransitioning||Z.trigger(this._element,lr,{relatedTarget:f}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Pt),this._adjustDialog(),this._backdrop.show(()=>this._showElement(f)))}hide(){this._isShown&&!this._isTransitioning&&(Z.trigger(this._element,Cl).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(bs),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){Z.off(window,Vr),Z.off(this._dialog,Vr),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Bs({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Ma({trapElement:this._element})}_showElement(f){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const C=fe.findOne(".modal-body",this._dialog);C&&(C.scrollTop=0),Rn(this._element),this._element.classList.add(bs),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Z.trigger(this._element,ps,{relatedTarget:f})},this._dialog,this._isAnimated())}_addEventListeners(){Z.on(this._element,_i,f=>{f.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),Z.on(window,Ec,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),Z.on(this._element,Xd,f=>{Z.one(this._element,hn,C=>{this._element===f.target&&this._element===C.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Pt),this._resetAdjustments(),this._scrollBar.reset(),Z.trigger(this._element,Sc)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(Z.trigger(this._element,xc).defaultPrevented)return;const f=this._element.scrollHeight>document.documentElement.clientHeight,C=this._element.style.overflowY;C==="hidden"||this._element.classList.contains(Ba)||(f||(this._element.style.overflowY="hidden"),this._element.classList.add(Ba),this._queueCallback(()=>{this._element.classList.remove(Ba),this._queueCallback(()=>{this._element.style.overflowY=C},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const f=this._element.scrollHeight>document.documentElement.clientHeight,C=this._scrollBar.getWidth(),R=C>0;if(R&&!f){const z=Sn()?"paddingLeft":"paddingRight";this._element.style[z]=`${C}px`}if(!R&&f){const z=Sn()?"paddingRight":"paddingLeft";this._element.style[z]=`${C}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(f,C){return this.each(function(){const R=wi.getOrCreateInstance(this,f);if(typeof f=="string"){if(R[f]===void 0)throw new TypeError(`No method named "${f}"`);R[f](C)}})}}Z.on(document,ra,'[data-bs-toggle="modal"]',function(T){const f=fe.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&T.preventDefault(),Z.one(f,lr,R=>{R.defaultPrevented||Z.one(f,Sc,()=>{Gn(this)&&this.focus()})});const C=fe.findOne(".modal.show");C&&wi.getInstance(C).hide(),wi.getOrCreateInstance(f).toggle(this)}),yt(wi),ct(wi);const vs=".bs.offcanvas",Nc=".data-api",oa=`load${vs}${Nc}`,Ia="show",xl="showing",Sl="hiding",Ac=".offcanvas.show",Qd=`show${vs}`,Jd=`shown${vs}`,eu=`hide${vs}`,Tc=`hidePrevented${vs}`,Ln=`hidden${vs}`,tu=`resize${vs}`,tf=`click${vs}${Nc}`,nu=`keydown.dismiss${vs}`,Cn={backdrop:!0,keyboard:!0,scroll:!1},Fa={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ut extends Lr{constructor(f,C){super(f,C),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Cn}static get DefaultType(){return Fa}static get NAME(){return"offcanvas"}toggle(f){return this._isShown?this.hide():this.show(f)}show(f){this._isShown||Z.trigger(this._element,Qd,{relatedTarget:f}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new io().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(xl),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Ia),this._element.classList.remove(xl),Z.trigger(this._element,Jd,{relatedTarget:f})},this._element,!0))}hide(){this._isShown&&(Z.trigger(this._element,eu).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Sl),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Ia,Sl),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new io().reset(),Z.trigger(this._element,Ln)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const f=!!this._config.backdrop;return new Bs({className:"offcanvas-backdrop",isVisible:f,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:f?()=>{this._config.backdrop!=="static"?this.hide():Z.trigger(this._element,Tc)}:null})}_initializeFocusTrap(){return new Ma({trapElement:this._element})}_addEventListeners(){Z.on(this._element,nu,f=>{f.key==="Escape"&&(this._config.keyboard?this.hide():Z.trigger(this._element,Tc))})}static jQueryInterface(f){return this.each(function(){const C=Ut.getOrCreateInstance(this,f);if(typeof f=="string"){if(C[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);C[f](this)}})}}Z.on(document,tf,'[data-bs-toggle="offcanvas"]',function(T){const f=fe.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&T.preventDefault(),tr(this))return;Z.one(f,Ln,()=>{Gn(this)&&this.focus()});const C=fe.findOne(Ac);C&&C!==f&&Ut.getInstance(C).hide(),Ut.getOrCreateInstance(f).toggle(this)}),Z.on(window,oa,()=>{for(const T of fe.find(Ac))Ut.getOrCreateInstance(T).show()}),Z.on(window,tu,()=>{for(const T of fe.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(T).position!=="fixed"&&Ut.getOrCreateInstance(T).hide()}),yt(Ut),ct(Ut);const El={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},nf=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),sa=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,ru=(T,f)=>{const C=T.nodeName.toLowerCase();return f.includes(C)?!nf.has(C)||!!sa.test(T.nodeValue):f.filter(R=>R instanceof RegExp).some(R=>R.test(C))},ou={allowList:El,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Ci={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Nl={entry:"(string|element|function|null)",selector:"(string|element)"};class xe extends ns{constructor(f){super(),this._config=this._getConfig(f)}static get Default(){return ou}static get DefaultType(){return Ci}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(f=>this._resolvePossibleFunction(f)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(f){return this._checkContent(f),this._config.content={...this._config.content,...f},this}toHtml(){const f=document.createElement("div");f.innerHTML=this._maybeSanitize(this._config.template);for(const[z,V]of Object.entries(this._config.content))this._setContent(f,V,z);const C=f.children[0],R=this._resolvePossibleFunction(this._config.extraClass);return R&&C.classList.add(...R.split(" ")),C}_typeCheckConfig(f){super._typeCheckConfig(f),this._checkContent(f.content)}_checkContent(f){for(const[C,R]of Object.entries(f))super._typeCheckConfig({selector:C,entry:R},Nl)}_setContent(f,C,R){const z=fe.findOne(R,f);z&&((C=this._resolvePossibleFunction(C))?fr(C)?this._putElementInTemplate(un(C),z):this._config.html?z.innerHTML=this._maybeSanitize(C):z.textContent=C:z.remove())}_maybeSanitize(f){return this._config.sanitize?function(C,R,z){if(!C.length)return C;if(z&&typeof z=="function")return z(C);const V=new window.DOMParser().parseFromString(C,"text/html"),ee=[].concat(...V.body.querySelectorAll("*"));for(const ue of ee){const Ne=ue.nodeName.toLowerCase();if(!Object.keys(R).includes(Ne)){ue.remove();continue}const Ue=[].concat(...ue.attributes),je=[].concat(R["*"]||[],R[Ne]||[]);for(const Oe of Ue)ru(Oe,je)||ue.removeAttribute(Oe.nodeName)}return V.body.innerHTML}(f,this._config.allowList,this._config.sanitizeFn):f}_resolvePossibleFunction(f){return Tt(f,[this])}_putElementInTemplate(f,C){if(this._config.html)return C.innerHTML="",void C.append(f);C.textContent=f.textContent}}const ys=new Set(["sanitize","allowList","sanitizeFn"]),ki="fade",Tr="show",Ua=".modal",Is="hide.bs.modal",Or="hover",Al="focus",Oc={AUTO:"auto",TOP:"top",RIGHT:Sn()?"left":"right",BOTTOM:"bottom",LEFT:Sn()?"right":"left"},ne={allowList:El,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},rf={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class xi extends Lr{constructor(f,C){if(M===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(f,C),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return ne}static get DefaultType(){return rf}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),Z.off(this._element.closest(Ua),Is,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const f=Z.trigger(this._element,this.constructor.eventName("show")),C=(ni(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(f.defaultPrevented||!C)return;this._disposePopper();const R=this._getTipElement();this._element.setAttribute("aria-describedby",R.getAttribute("id"));const{container:z}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(z.append(R),Z.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(R),R.classList.add(Tr),"ontouchstart"in document.documentElement)for(const V of[].concat(...document.body.children))Z.on(V,"mouseover",Sr);this._queueCallback(()=>{Z.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!Z.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Tr),"ontouchstart"in document.documentElement)for(const f of[].concat(...document.body.children))Z.off(f,"mouseover",Sr);this._activeTrigger.click=!1,this._activeTrigger[Al]=!1,this._activeTrigger[Or]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Z.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(f){const C=this._getTemplateFactory(f).toHtml();if(!C)return null;C.classList.remove(ki,Tr),C.classList.add(`bs-${this.constructor.NAME}-auto`);const R=(z=>{do z+=Math.floor(1e6*Math.random());while(document.getElementById(z));return z})(this.constructor.NAME).toString();return C.setAttribute("id",R),this._isAnimated()&&C.classList.add(ki),C}setContent(f){this._newContent=f,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(f){return this._templateFactory?this._templateFactory.changeContent(f):this._templateFactory=new xe({...this._config,content:f,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(f){return this.constructor.getOrCreateInstance(f.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ki)}_isShown(){return this.tip&&this.tip.classList.contains(Tr)}_createPopper(f){const C=Tt(this._config.placement,[this,f,this._element]),R=Oc[C.toUpperCase()];return zr(this._element,f,this._getPopperConfig(R))}_getOffset(){const{offset:f}=this._config;return typeof f=="string"?f.split(",").map(C=>Number.parseInt(C,10)):typeof f=="function"?C=>f(C,this._element):f}_resolvePossibleFunction(f){return Tt(f,[this._element])}_getPopperConfig(f){const C={placement:f,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:R=>{this._getTipElement().setAttribute("data-popper-placement",R.state.placement)}}]};return{...C,...Tt(this._config.popperConfig,[C])}}_setListeners(){const f=this._config.trigger.split(" ");for(const C of f)if(C==="click")Z.on(this._element,this.constructor.eventName("click"),this._config.selector,R=>{this._initializeOnDelegatedTarget(R).toggle()});else if(C!=="manual"){const R=C===Or?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),z=C===Or?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");Z.on(this._element,R,this._config.selector,V=>{const ee=this._initializeOnDelegatedTarget(V);ee._activeTrigger[V.type==="focusin"?Al:Or]=!0,ee._enter()}),Z.on(this._element,z,this._config.selector,V=>{const ee=this._initializeOnDelegatedTarget(V);ee._activeTrigger[V.type==="focusout"?Al:Or]=ee._element.contains(V.relatedTarget),ee._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},Z.on(this._element.closest(Ua),Is,this._hideModalHandler)}_fixTitle(){const f=this._element.getAttribute("title");f&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",f),this._element.setAttribute("data-bs-original-title",f),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(f,C){clearTimeout(this._timeout),this._timeout=setTimeout(f,C)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(f){const C=ln.getDataAttributes(this._element);for(const R of Object.keys(C))ys.has(R)&&delete C[R];return f={...C,...typeof f=="object"&&f?f:{}},f=this._mergeConfigObj(f),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}_configAfterMerge(f){return f.container=f.container===!1?document.body:un(f.container),typeof f.delay=="number"&&(f.delay={show:f.delay,hide:f.delay}),typeof f.title=="number"&&(f.title=f.title.toString()),typeof f.content=="number"&&(f.content=f.content.toString()),f}_getDelegateConfig(){const f={};for(const[C,R]of Object.entries(this._config))this.constructor.Default[C]!==R&&(f[C]=R);return f.selector=!1,f.trigger="manual",f}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(f){return this.each(function(){const C=xi.getOrCreateInstance(this,f);if(typeof f=="string"){if(C[f]===void 0)throw new TypeError(`No method named "${f}"`);C[f]()}})}}ct(xi);const Fs={...xi.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},ja={...xi.DefaultType,content:"(null|string|element|function)"};class ia extends xi{static get Default(){return Fs}static get DefaultType(){return ja}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(f){return this.each(function(){const C=ia.getOrCreateInstance(this,f);if(typeof f=="string"){if(C[f]===void 0)throw new TypeError(`No method named "${f}"`);C[f]()}})}}ct(ia);const jt=".bs.scrollspy",su=`activate${jt}`,qr=`click${jt}`,Lt=`load${jt}.data-api`,_s="active",Rc="[href]",wo=".nav-link",of=`${wo}, .nav-item > ${wo}, .list-group-item`,Dc={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},sf={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class aa extends Lr{constructor(f,C){super(f,C),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Dc}static get DefaultType(){return sf}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const f of this._observableSections.values())this._observer.observe(f)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(f){return f.target=un(f.target)||document.body,f.rootMargin=f.offset?`${f.offset}px 0px -30%`:f.rootMargin,typeof f.threshold=="string"&&(f.threshold=f.threshold.split(",").map(C=>Number.parseFloat(C))),f}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(Z.off(this._config.target,qr),Z.on(this._config.target,qr,Rc,f=>{const C=this._observableSections.get(f.target.hash);if(C){f.preventDefault();const R=this._rootElement||window,z=C.offsetTop-this._element.offsetTop;if(R.scrollTo)return void R.scrollTo({top:z,behavior:"smooth"});R.scrollTop=z}}))}_getNewObserver(){const f={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(C=>this._observerCallback(C),f)}_observerCallback(f){const C=ee=>this._targetLinks.get(`#${ee.target.id}`),R=ee=>{this._previousScrollData.visibleEntryTop=ee.target.offsetTop,this._process(C(ee))},z=(this._rootElement||document.documentElement).scrollTop,V=z>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=z;for(const ee of f){if(!ee.isIntersecting){this._activeTarget=null,this._clearActiveClass(C(ee));continue}const ue=ee.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(V&&ue){if(R(ee),!z)return}else V||ue||R(ee)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const f=fe.find(Rc,this._config.target);for(const C of f){if(!C.hash||tr(C))continue;const R=fe.findOne(decodeURI(C.hash),this._element);Gn(R)&&(this._targetLinks.set(decodeURI(C.hash),C),this._observableSections.set(C.hash,R))}}_process(f){this._activeTarget!==f&&(this._clearActiveClass(this._config.target),this._activeTarget=f,f.classList.add(_s),this._activateParents(f),Z.trigger(this._element,su,{relatedTarget:f}))}_activateParents(f){if(f.classList.contains("dropdown-item"))fe.findOne(".dropdown-toggle",f.closest(".dropdown")).classList.add(_s);else for(const C of fe.parents(f,".nav, .list-group"))for(const R of fe.prev(C,of))R.classList.add(_s)}_clearActiveClass(f){f.classList.remove(_s);const C=fe.find(`${Rc}.${_s}`,f);for(const R of C)R.classList.remove(_s)}static jQueryInterface(f){return this.each(function(){const C=aa.getOrCreateInstance(this,f);if(typeof f=="string"){if(C[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);C[f]()}})}}Z.on(window,Lt,()=>{for(const T of fe.find('[data-bs-spy="scroll"]'))aa.getOrCreateInstance(T)}),ct(aa);const Si=".bs.tab",af=`hide${Si}`,Mc=`hidden${Si}`,ws=`show${Si}`,$n=`shown${Si}`,iu=`click${Si}`,kn=`keydown${Si}`,lf=`load${Si}`,Cs="ArrowLeft",Pc="ArrowRight",Ei="ArrowUp",Tl="ArrowDown",Ol="Home",au="End",Go="active",Rl="fade",Dl="show",Lc=".dropdown-toggle",Ml=`:not(${Lc})`,lu='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ha=`.nav-link${Ml}, .list-group-item${Ml}, [role="tab"]${Ml}, ${lu}`,cf=`.${Go}[data-bs-toggle="tab"], .${Go}[data-bs-toggle="pill"], .${Go}[data-bs-toggle="list"]`;class ks extends Lr{constructor(f){super(f),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Z.on(this._element,kn,C=>this._keydown(C)))}static get NAME(){return"tab"}show(){const f=this._element;if(this._elemIsActive(f))return;const C=this._getActiveElem(),R=C?Z.trigger(C,af,{relatedTarget:f}):null;Z.trigger(f,ws,{relatedTarget:C}).defaultPrevented||R&&R.defaultPrevented||(this._deactivate(C,f),this._activate(f,C))}_activate(f,C){f&&(f.classList.add(Go),this._activate(fe.getElementFromSelector(f)),this._queueCallback(()=>{f.getAttribute("role")==="tab"?(f.removeAttribute("tabindex"),f.setAttribute("aria-selected",!0),this._toggleDropDown(f,!0),Z.trigger(f,$n,{relatedTarget:C})):f.classList.add(Dl)},f,f.classList.contains(Rl)))}_deactivate(f,C){f&&(f.classList.remove(Go),f.blur(),this._deactivate(fe.getElementFromSelector(f)),this._queueCallback(()=>{f.getAttribute("role")==="tab"?(f.setAttribute("aria-selected",!1),f.setAttribute("tabindex","-1"),this._toggleDropDown(f,!1),Z.trigger(f,Mc,{relatedTarget:C})):f.classList.remove(Dl)},f,f.classList.contains(Rl)))}_keydown(f){if(![Cs,Pc,Ei,Tl,Ol,au].includes(f.key))return;f.stopPropagation(),f.preventDefault();const C=this._getChildren().filter(z=>!tr(z));let R;if([Ol,au].includes(f.key))R=C[f.key===Ol?0:C.length-1];else{const z=[Pc,Tl].includes(f.key);R=on(C,f.target,z,!0)}R&&(R.focus({preventScroll:!0}),ks.getOrCreateInstance(R).show())}_getChildren(){return fe.find(Ha,this._parent)}_getActiveElem(){return this._getChildren().find(f=>this._elemIsActive(f))||null}_setInitialAttributes(f,C){this._setAttributeIfNotExists(f,"role","tablist");for(const R of C)this._setInitialAttributesOnChild(R)}_setInitialAttributesOnChild(f){f=this._getInnerElement(f);const C=this._elemIsActive(f),R=this._getOuterElement(f);f.setAttribute("aria-selected",C),R!==f&&this._setAttributeIfNotExists(R,"role","presentation"),C||f.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(f,"role","tab"),this._setInitialAttributesOnTargetPanel(f)}_setInitialAttributesOnTargetPanel(f){const C=fe.getElementFromSelector(f);C&&(this._setAttributeIfNotExists(C,"role","tabpanel"),f.id&&this._setAttributeIfNotExists(C,"aria-labelledby",`${f.id}`))}_toggleDropDown(f,C){const R=this._getOuterElement(f);if(!R.classList.contains("dropdown"))return;const z=(V,ee)=>{const ue=fe.findOne(V,R);ue&&ue.classList.toggle(ee,C)};z(Lc,Go),z(".dropdown-menu",Dl),R.setAttribute("aria-expanded",C)}_setAttributeIfNotExists(f,C,R){f.hasAttribute(C)||f.setAttribute(C,R)}_elemIsActive(f){return f.classList.contains(Go)}_getInnerElement(f){return f.matches(Ha)?f:fe.findOne(Ha,f)}_getOuterElement(f){return f.closest(".nav-item, .list-group-item")||f}static jQueryInterface(f){return this.each(function(){const C=ks.getOrCreateInstance(this);if(typeof f=="string"){if(C[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);C[f]()}})}}Z.on(document,iu,lu,function(T){["A","AREA"].includes(this.tagName)&&T.preventDefault(),tr(this)||ks.getOrCreateInstance(this).show()}),Z.on(window,lf,()=>{for(const T of fe.find(cf))ks.getOrCreateInstance(T)}),ct(ks);const Ko=".bs.toast",Bc=`mouseover${Ko}`,Ni=`mouseout${Ko}`,df=`focusin${Ko}`,Ic=`focusout${Ko}`,uf=`hide${Ko}`,cu=`hidden${Ko}`,du=`show${Ko}`,uu=`shown${Ko}`,Fc="hide",Ya="show",$a="showing",Uc={animation:"boolean",autohide:"boolean",delay:"number"},mf={animation:!0,autohide:!0,delay:5e3};class Us extends Lr{constructor(f,C){super(f,C),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return mf}static get DefaultType(){return Uc}static get NAME(){return"toast"}show(){Z.trigger(this._element,du).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Fc),Rn(this._element),this._element.classList.add(Ya,$a),this._queueCallback(()=>{this._element.classList.remove($a),Z.trigger(this._element,uu),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(Z.trigger(this._element,uf).defaultPrevented||(this._element.classList.add($a),this._queueCallback(()=>{this._element.classList.add(Fc),this._element.classList.remove($a,Ya),Z.trigger(this._element,cu)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ya),super.dispose()}isShown(){return this._element.classList.contains(Ya)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(f,C){switch(f.type){case"mouseover":case"mouseout":this._hasMouseInteraction=C;break;case"focusin":case"focusout":this._hasKeyboardInteraction=C}if(C)return void this._clearTimeout();const R=f.relatedTarget;this._element===R||this._element.contains(R)||this._maybeScheduleHide()}_setListeners(){Z.on(this._element,Bc,f=>this._onInteraction(f,!0)),Z.on(this._element,Ni,f=>this._onInteraction(f,!1)),Z.on(this._element,df,f=>this._onInteraction(f,!0)),Z.on(this._element,Ic,f=>this._onInteraction(f,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(f){return this.each(function(){const C=Us.getOrCreateInstance(this,f);if(typeof f=="string"){if(C[f]===void 0)throw new TypeError(`No method named "${f}"`);C[f](this)}})}}return yt(Us),ct(Us),{Alert:Kn,Button:Nr,Carousel:Uo,Collapse:jo,Dropdown:An,Modal:wi,Offcanvas:Ut,Popover:ia,ScrollSpy:aa,Tab:ks,Toast:Us,Tooltip:xi}}),function(qn,Se){typeof exports=="object"&&typeof module<"u"?module.exports=Se():typeof define=="function"&&define.amd?define(Se):qn.moment=Se()}(this,function(){"use strict";var qn;function Se(){return qn.apply(null,arguments)}function mr(u){return u instanceof Array||Object.prototype.toString.call(u)==="[object Array]"}function fo(u){return u!=null&&Object.prototype.toString.call(u)==="[object Object]"}function vt(u,b){return Object.prototype.hasOwnProperty.call(u,b)}function fr(u){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(u).length===0;for(var b in u)if(vt(u,b))return;return 1}function un(u){return u===void 0}function Gn(u){return typeof u=="number"||Object.prototype.toString.call(u)==="[object Number]"}function tr(u){return u instanceof Date||Object.prototype.toString.call(u)==="[object Date]"}function ni(u,b){for(var w=[],E=u.length,I=0;I<E;++I)w.push(b(u[I],I));return w}function Sr(u,b){for(var w in b)vt(b,w)&&(u[w]=b[w]);return vt(b,"toString")&&(u.toString=b.toString),vt(b,"valueOf")&&(u.valueOf=b.valueOf),u}function Rn(u,b,w,E){return qi(u,b,w,E,!0).utc()}function se(u){return u._pf==null&&(u._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),u._pf}function rn(u){var b,w,E=u._d&&!isNaN(u._d.getTime());return E&&(b=se(u),w=ct.call(b.parsedDateParts,function(I){return I!=null}),E=b.overflow<0&&!b.empty&&!b.invalidEra&&!b.invalidMonth&&!b.invalidWeekday&&!b.weekdayMismatch&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&w),u._strict)&&(E=E&&b.charsLeftOver===0&&b.unusedTokens.length===0&&b.bigHour===void 0),Object.isFrozen!=null&&Object.isFrozen(u)?E:(u._isValid=E,u._isValid)}function Sn(u){var b=Rn(NaN);return u!=null?Sr(se(b),u):se(b).userInvalidated=!0,b}var ct=Array.prototype.some||function(u){for(var b=Object(this),w=b.length>>>0,E=0;E<w;E++)if(E in b&&u.call(this,b[E],E,b))return!0;return!1},Tt=Se.momentProperties=[],hr=!1;function on(u,b){var w,E,I,K=Tt.length;if(un(b._isAMomentObject)||(u._isAMomentObject=b._isAMomentObject),un(b._i)||(u._i=b._i),un(b._f)||(u._f=b._f),un(b._l)||(u._l=b._l),un(b._strict)||(u._strict=b._strict),un(b._tzm)||(u._tzm=b._tzm),un(b._isUTC)||(u._isUTC=b._isUTC),un(b._offset)||(u._offset=b._offset),un(b._pf)||(u._pf=se(b)),un(b._locale)||(u._locale=b._locale),0<K)for(w=0;w<K;w++)un(I=b[E=Tt[w]])||(u[E]=I);return u}function Wt(u){on(this,u),this._d=new Date(u._d!=null?u._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),hr===!1&&(hr=!0,Se.updateOffset(this),hr=!1)}function ie(u){return u instanceof Wt||u!=null&&u._isAMomentObject!=null}function dt(u){Se.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+u)}function Jt(u,b){var w=!0;return Sr(function(){if(Se.deprecationHandler!=null&&Se.deprecationHandler(null,u),w){for(var E,I,K=[],J=arguments.length,le=0;le<J;le++){if(E="",typeof arguments[le]=="object"){for(I in E+=`
[`+le+"] ",arguments[0])vt(arguments[0],I)&&(E+=I+": "+arguments[0][I]+", ");E=E.slice(0,-2)}else E=arguments[le];K.push(E)}dt(u+`
Arguments: `+Array.prototype.slice.call(K).join("")+`
`+new Error().stack),w=!1}return b.apply(this,arguments)},b)}var ho={};function $e(u,b){Se.deprecationHandler!=null&&Se.deprecationHandler(u,b),ho[u]||(dt(b),ho[u]=!0)}function pn(u){return typeof Function<"u"&&u instanceof Function||Object.prototype.toString.call(u)==="[object Function]"}function ri(u,b){var w,E=Sr({},u);for(w in b)vt(b,w)&&(fo(u[w])&&fo(b[w])?(E[w]={},Sr(E[w],u[w]),Sr(E[w],b[w])):b[w]!=null?E[w]=b[w]:delete E[w]);for(w in u)vt(u,w)&&!vt(b,w)&&fo(u[w])&&(E[w]=Sr({},E[w]));return E}function ce(u){u!=null&&this.set(u)}Se.suppressDeprecationWarnings=!1,Se.deprecationHandler=null;var En=Object.keys||function(u){var b,w=[];for(b in u)vt(u,b)&&w.push(b);return w};function Er(u,b,w){var E=""+Math.abs(u);return(0<=u?w?"+":"":"-")+Math.pow(10,Math.max(0,b-E.length)).toString().substr(1)+E}var _e=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Jr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Hi={},go={};function Z(u,b,w,E){var I=typeof E=="string"?function(){return this[E]()}:E;u&&(go[u]=I),b&&(go[b[0]]=function(){return Er(I.apply(this,arguments),b[1],b[2])}),w&&(go[w]=function(){return this.localeData().ordinal(I.apply(this,arguments),u)})}function ht(u,b){return u.isValid()?(b=Zt(b,u.localeData()),Hi[b]=Hi[b]||function(w){for(var E,I=w.match(_e),K=0,J=I.length;K<J;K++)go[I[K]]?I[K]=go[I[K]]:I[K]=(E=I[K]).match(/\[[\s\S]/)?E.replace(/^\[|\]$/g,""):E.replace(/\\/g,"");return function(le){for(var we="",ke=0;ke<J;ke++)we+=pn(I[ke])?I[ke].call(le,w):I[ke];return we}}(b),Hi[b](u)):u.localeData().invalidDate()}function Zt(u,b){var w=5;function E(I){return b.longDateFormat(I)||I}for(Jr.lastIndex=0;0<=w&&Jr.test(u);)u=u.replace(Jr,E),Jr.lastIndex=0,--w;return u}var S={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ln(u){return typeof u=="string"?S[u]||S[u.toLowerCase()]:void 0}function ns(u){var b,w,E={};for(w in u)vt(u,w)&&(b=ln(w))&&(E[b]=u[w]);return E}var Lr={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1},Io=/\d/,fe=/\d\d/,yt=/\d{3}/,vn=/\d{4}/,$r=/[+-]?\d{6}/,Me=/\d\d?/,Q=/\d\d\d\d?/,rs=/\d\d\d\d\d\d?/,Kn=/\d{1,3}/,Ft=/\d{1,4}/,Qn=/[+-]?\d{1,6}/,De=/\d+/,Nr=/[+-]?\d+/,bn=/Z|[+-]\d\d:?\d\d/gi,oi=/Z|[+-]\d\d(?::?\d\d)?/gi,Mt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,he=/^[1-9]\d?/,M=/^([1-9]\d|\d)/;function Be(u,b,w){Ar[u]=pn(b)?b:function(E,I){return E&&w?w:b}}function gr(u,b){return vt(Ar,u)?Ar[u](b._strict,b._locale):new RegExp(Dn(u.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(w,E,I,K,J){return E||I||K||J})))}function Dn(u){return u.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Fn(u){return u<0?Math.ceil(u)||0:Math.floor(u)}function ot(b){var b=+b,w=0;return w=b!=0&&isFinite(b)?Fn(b):w}var Ar={},eo={};function ft(u,b){var w,E,I=b;for(typeof u=="string"&&(u=[u]),Gn(b)&&(I=function(K,J){J[b]=ot(K)}),E=u.length,w=0;w<E;w++)eo[u[w]]=I}function en(u,b){ft(u,function(w,E,I,K){I._w=I._w||{},b(w,I._w,I,K)})}function Un(u){return u%4==0&&u%100!=0||u%400==0}var xt=0,nr=1,pr=2,Ct=3,Br=4,it=5,Ir=6,wc=7,Ea=8;function os(u){return Un(u)?366:365}Z("Y",0,0,function(){var u=this.year();return u<=9999?Er(u,4):"+"+u}),Z(0,["YY",2],0,function(){return this.year()%100}),Z(0,["YYYY",4],0,"year"),Z(0,["YYYYY",5],0,"year"),Z(0,["YYYYYY",6,!0],0,"year"),Be("Y",Nr),Be("YY",Me,fe),Be("YYYY",Ft,vn),Be("YYYYY",Qn,$r),Be("YYYYYY",Qn,$r),ft(["YYYYY","YYYYYY"],xt),ft("YYYY",function(u,b){b[xt]=u.length===2?Se.parseTwoDigitYear(u):ot(u)}),ft("YY",function(u,b){b[xt]=Se.parseTwoDigitYear(u)}),ft("Y",function(u,b){b[xt]=parseInt(u,10)}),Se.parseTwoDigitYear=function(u){return ot(u)+(68<ot(u)?1900:2e3)};var Vt,zr=to("FullYear",!0);function to(u,b){return function(w){return w!=null?(St(this,u,w),Se.updateOffset(this,b),this):Fo(this,u)}}function Fo(u,b){if(!u.isValid())return NaN;var w=u._d,E=u._isUTC;switch(b){case"Milliseconds":return E?w.getUTCMilliseconds():w.getMilliseconds();case"Seconds":return E?w.getUTCSeconds():w.getSeconds();case"Minutes":return E?w.getUTCMinutes():w.getMinutes();case"Hours":return E?w.getUTCHours():w.getHours();case"Date":return E?w.getUTCDate():w.getDate();case"Day":return E?w.getUTCDay():w.getDay();case"Month":return E?w.getUTCMonth():w.getMonth();case"FullYear":return E?w.getUTCFullYear():w.getFullYear();default:return NaN}}function St(u,b,w){var E,I,K;if(u.isValid()&&!isNaN(w)){switch(E=u._d,I=u._isUTC,b){case"Milliseconds":return I?E.setUTCMilliseconds(w):E.setMilliseconds(w);case"Seconds":return I?E.setUTCSeconds(w):E.setSeconds(w);case"Minutes":return I?E.setUTCMinutes(w):E.setMinutes(w);case"Hours":return I?E.setUTCHours(w):E.setHours(w);case"Date":return I?E.setUTCDate(w):E.setDate(w);case"FullYear":break;default:return}b=w,K=u.month(),u=(u=u.date())!==29||K!==1||Un(b)?u:28,I?E.setUTCFullYear(b,K,u):E.setFullYear(b,K,u)}}function He(u,b){var w;return isNaN(u)||isNaN(b)?NaN:(w=(b%(w=12)+w)%w,u+=(b-w)/12,w==1?Un(u)?29:28:31-w%7%2)}Vt=Array.prototype.indexOf||function(u){for(var b=0;b<this.length;++b)if(this[b]===u)return b;return-1},Z("M",["MM",2],"Mo",function(){return this.month()+1}),Z("MMM",0,0,function(u){return this.localeData().monthsShort(this,u)}),Z("MMMM",0,0,function(u){return this.localeData().months(this,u)}),Be("M",Me,he),Be("MM",Me,fe),Be("MMM",function(u,b){return b.monthsShortRegex(u)}),Be("MMMM",function(u,b){return b.monthsRegex(u)}),ft(["M","MM"],function(u,b){b[nr]=ot(u)-1}),ft(["MMM","MMMM"],function(u,b,w,E){E=w._locale.monthsParse(u,E,w._strict),E!=null?b[nr]=E:se(w).invalidMonth=u});var no="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Na="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Uo=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ss=Mt,Yi=Mt;function $i(u,b){if(u.isValid()){if(typeof b=="string"){if(/^\d+$/.test(b))b=ot(b);else if(!Gn(b=u.localeData().monthsParse(b)))return}var w=(w=u.date())<29?w:Math.min(w,He(u.year(),b));u._isUTC?u._d.setUTCMonth(b,w):u._d.setMonth(b,w)}}function Ts(u){return u!=null?($i(this,u),Se.updateOffset(this,!0),this):Fo(this,"Month")}function si(){function u(le,we){return we.length-le.length}for(var b,w,E=[],I=[],K=[],J=0;J<12;J++)w=Rn([2e3,J]),b=Dn(this.monthsShort(w,"")),w=Dn(this.months(w,"")),E.push(b),I.push(w),K.push(w),K.push(b);E.sort(u),I.sort(u),K.sort(u),this._monthsRegex=new RegExp("^("+K.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+I.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+E.join("|")+")","i")}function bl(u,b,w,E,I,K,J){var le;return u<100&&0<=u?(le=new Date(u+400,b,w,E,I,K,J),isFinite(le.getFullYear())&&le.setFullYear(u)):le=new Date(u,b,w,E,I,K,J),le}function br(u){var b;return u<100&&0<=u?((b=Array.prototype.slice.call(arguments))[0]=u+400,b=new Date(Date.UTC.apply(null,b)),isFinite(b.getUTCFullYear())&&b.setUTCFullYear(u)):b=new Date(Date.UTC.apply(null,arguments)),b}function Nn(u,b,w){return w=7+b-w,w-(7+br(u,0,w).getUTCDay()-b)%7-1}function Os(u,J,le,E,I){var K,J=1+7*(J-1)+(7+le-E)%7+Nn(u,E,I),le=J<=0?os(K=u-1)+J:J>os(u)?(K=u+1,J-os(u)):(K=u,J);return{year:K,dayOfYear:le}}function is(u,b,w){var E,I,K=Nn(u.year(),b,w),K=Math.floor((u.dayOfYear()-K-1)/7)+1;return K<1?E=K+Xn(I=u.year()-1,b,w):K>Xn(u.year(),b,w)?(E=K-Xn(u.year(),b,w),I=u.year()+1):(I=u.year(),E=K),{week:E,year:I}}function Xn(u,I,w){var E=Nn(u,I,w),I=Nn(u+1,I,w);return(os(u)-E+I)/7}Z("w",["ww",2],"wo","week"),Z("W",["WW",2],"Wo","isoWeek"),Be("w",Me,he),Be("ww",Me,fe),Be("W",Me,he),Be("WW",Me,fe),en(["w","ww","W","WW"],function(u,b,w,E){b[E.substr(0,1)]=ot(u)});function zi(u,b){return u.slice(b,7).concat(u.slice(0,b))}Z("d",0,"do","day"),Z("dd",0,0,function(u){return this.localeData().weekdaysMin(this,u)}),Z("ddd",0,0,function(u){return this.localeData().weekdaysShort(this,u)}),Z("dddd",0,0,function(u){return this.localeData().weekdays(this,u)}),Z("e",0,0,"weekday"),Z("E",0,0,"isoWeekday"),Be("d",Me),Be("e",Me),Be("E",Me),Be("dd",function(u,b){return b.weekdaysMinRegex(u)}),Be("ddd",function(u,b){return b.weekdaysShortRegex(u)}),Be("dddd",function(u,b){return b.weekdaysRegex(u)}),en(["dd","ddd","dddd"],function(u,b,w,E){E=w._locale.weekdaysParse(u,E,w._strict),E!=null?b.d=E:se(w).invalidWeekday=u}),en(["d","e","E"],function(u,b,w,E){b[E]=ot(u)});var Rs="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),jo="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),gt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),_t=Mt,Zn=Mt,Mn=Mt;function Fr(){function u(ke,Ge){return Ge.length-ke.length}for(var b,w,E,I=[],K=[],J=[],le=[],we=0;we<7;we++)E=Rn([2e3,1]).day(we),b=Dn(this.weekdaysMin(E,"")),w=Dn(this.weekdaysShort(E,"")),E=Dn(this.weekdays(E,"")),I.push(b),K.push(w),J.push(E),le.push(b),le.push(w),le.push(E);I.sort(u),K.sort(u),J.sort(u),le.sort(u),this._weekdaysRegex=new RegExp("^("+le.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+J.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+K.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+I.join("|")+")","i")}function Ho(){return this.hours()%12||12}function po(u,b){Z(u,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function jn(u,b){return b._meridiemParse}Z("H",["HH",2],0,"hour"),Z("h",["hh",2],0,Ho),Z("k",["kk",2],0,function(){return this.hours()||24}),Z("hmm",0,0,function(){return""+Ho.apply(this)+Er(this.minutes(),2)}),Z("hmmss",0,0,function(){return""+Ho.apply(this)+Er(this.minutes(),2)+Er(this.seconds(),2)}),Z("Hmm",0,0,function(){return""+this.hours()+Er(this.minutes(),2)}),Z("Hmmss",0,0,function(){return""+this.hours()+Er(this.minutes(),2)+Er(this.seconds(),2)}),po("a",!0),po("A",!1),Be("a",jn),Be("A",jn),Be("H",Me,M),Be("h",Me,he),Be("k",Me,he),Be("HH",Me,fe),Be("hh",Me,fe),Be("kk",Me,fe),Be("hmm",Q),Be("hmmss",rs),Be("Hmm",Q),Be("Hmmss",rs),ft(["H","HH"],Ct),ft(["k","kk"],function(u,b,w){u=ot(u),b[Ct]=u===24?0:u}),ft(["a","A"],function(u,b,w){w._isPm=w._locale.isPM(u),w._meridiem=u}),ft(["h","hh"],function(u,b,w){b[Ct]=ot(u),se(w).bigHour=!0}),ft("hmm",function(u,b,w){var E=u.length-2;b[Ct]=ot(u.substr(0,E)),b[Br]=ot(u.substr(E)),se(w).bigHour=!0}),ft("hmmss",function(u,b,w){var E=u.length-4,I=u.length-2;b[Ct]=ot(u.substr(0,E)),b[Br]=ot(u.substr(E,2)),b[it]=ot(u.substr(I)),se(w).bigHour=!0}),ft("Hmm",function(u,b,w){var E=u.length-2;b[Ct]=ot(u.substr(0,E)),b[Br]=ot(u.substr(E))}),ft("Hmmss",function(u,b,w){var E=u.length-4,I=u.length-2;b[Ct]=ot(u.substr(0,E)),b[Br]=ot(u.substr(E,2)),b[it]=ot(u.substr(I))}),Mt=to("Hours",!0);var ro,as={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:no,monthsShort:Na,week:{dow:0,doy:6},weekdays:Rs,weekdaysMin:gt,weekdaysShort:jo,meridiemParse:/[ap]\.?m?\.?/i},Ot={},rr={};function Wi(u){return u&&u.toLowerCase().replace("_","-")}function Aa(u){for(var b,w,E,I,K=0;K<u.length;){for(b=(I=Wi(u[K]).split("-")).length,w=(w=Wi(u[K+1]))?w.split("-"):null;0<b;){if(E=Ds(I.slice(0,b).join("-")))return E;if(w&&w.length>=b&&function(J,le){for(var we=Math.min(J.length,le.length),ke=0;ke<we;ke+=1)if(J[ke]!==le[ke])return ke;return we}(I,w)>=b-1)break;b--}K++}return ro}function Ds(u){var b,w;if(Ot[u]===void 0&&typeof module<"u"&&module&&module.exports&&(w=u)&&w.match("^[^/\\\\]*$"))try{b=ro._abbr,require("./locale/"+u),oo(b)}catch{Ot[u]=null}return Ot[u]}function oo(u,b){return u&&((b=un(b)?Ur(u):ii(u,b))?ro=b:typeof console<"u"&&console.warn&&console.warn("Locale "+u+" not found. Did you forget to load it?")),ro._abbr}function ii(u,b){if(b===null)return delete Ot[u],null;var w,E=as;if(b.abbr=u,Ot[u]!=null)$e("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),E=Ot[u]._config;else if(b.parentLocale!=null)if(Ot[b.parentLocale]!=null)E=Ot[b.parentLocale]._config;else{if((w=Ds(b.parentLocale))==null)return rr[b.parentLocale]||(rr[b.parentLocale]=[]),rr[b.parentLocale].push({name:u,config:b}),null;E=w._config}return Ot[u]=new ce(ri(E,b)),rr[u]&&rr[u].forEach(function(I){ii(I.name,I.config)}),oo(u),Ot[u]}function Ur(u){var b;if(!(u=u&&u._locale&&u._locale._abbr?u._locale._abbr:u))return ro;if(!mr(u)){if(b=Ds(u))return b;u=[u]}return Aa(u)}function ai(u){var b=u._a;return b&&se(u).overflow===-2&&(b=b[nr]<0||11<b[nr]?nr:b[pr]<1||b[pr]>He(b[xt],b[nr])?pr:b[Ct]<0||24<b[Ct]||b[Ct]===24&&(b[Br]!==0||b[it]!==0||b[Ir]!==0)?Ct:b[Br]<0||59<b[Br]?Br:b[it]<0||59<b[it]?it:b[Ir]<0||999<b[Ir]?Ir:-1,se(u)._overflowDayOfYear&&(b<xt||pr<b)&&(b=pr),se(u)._overflowWeeks&&b===-1&&(b=wc),se(u)._overflowWeekday&&b===-1&&(b=Ea),se(u).overflow=b),u}var Ta=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Oa=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vl=/Z|[+-]\d\d(?::?\d\d)?/,li=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ci=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],jr=/^\/?Date\((-?\d+)/i,or=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Yo={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function sr(u){var b,w,E,I,K,J,we=u._i,le=Ta.exec(we)||Oa.exec(we),we=li.length,ke=ci.length;if(le){for(se(u).iso=!0,b=0,w=we;b<w;b++)if(li[b][1].exec(le[1])){I=li[b][0],E=li[b][2]!==!1;break}if(I==null)u._isValid=!1;else{if(le[3]){for(b=0,w=ke;b<w;b++)if(ci[b][1].exec(le[3])){K=(le[2]||" ")+ci[b][0];break}if(K==null)return void(u._isValid=!1)}if(E||K==null){if(le[4]){if(!vl.exec(le[4]))return void(u._isValid=!1);J="Z"}u._f=I+(K||"")+(J||""),Ms(u)}else u._isValid=!1}}else u._isValid=!1}function Vi(u,b,w,E,I,K){return u=[function(J){J=parseInt(J,10);{if(J<=49)return 2e3+J;if(J<=999)return 1900+J}return J}(u),Na.indexOf(b),parseInt(w,10),parseInt(E,10),parseInt(I,10)],K&&u.push(parseInt(K,10)),u}function di(u){var b,w,E=or.exec(u._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));E?(b=Vi(E[4],E[3],E[2],E[5],E[6],E[7]),function(I,K,J){if(!I||jo.indexOf(I)===new Date(K[0],K[1],K[2]).getDay())return 1;se(J).weekdayMismatch=!0,J._isValid=!1}(E[1],b,u)&&(u._a=b,u._tzm=(b=E[8],w=E[9],E=E[10],b?Yo[b]:w?0:60*(((b=parseInt(E,10))-(w=b%100))/100)+w),u._d=br.apply(null,u._a),u._d.setUTCMinutes(u._d.getUTCMinutes()-u._tzm),se(u).rfc2822=!0)):u._isValid=!1}function Hn(u,b,w){return u??b??w}function bo(u){var b,w,E,I,K,J,le,we,ke,Ge,Ke,It=[];if(!u._d){for(E=u,I=new Date(Se.now()),w=E._useUTC?[I.getUTCFullYear(),I.getUTCMonth(),I.getUTCDate()]:[I.getFullYear(),I.getMonth(),I.getDate()],u._w&&u._a[pr]==null&&u._a[nr]==null&&((I=(E=u)._w).GG!=null||I.W!=null||I.E!=null?(we=1,ke=4,K=Hn(I.GG,E._a[xt],is(pt(),1,4).year),J=Hn(I.W,1),((le=Hn(I.E,1))<1||7<le)&&(Ge=!0)):(we=E._locale._week.dow,ke=E._locale._week.doy,Ke=is(pt(),we,ke),K=Hn(I.gg,E._a[xt],Ke.year),J=Hn(I.w,Ke.week),I.d!=null?((le=I.d)<0||6<le)&&(Ge=!0):I.e!=null?(le=I.e+we,(I.e<0||6<I.e)&&(Ge=!0)):le=we),J<1||J>Xn(K,we,ke)?se(E)._overflowWeeks=!0:Ge!=null?se(E)._overflowWeekday=!0:(Ke=Os(K,J,le,we,ke),E._a[xt]=Ke.year,E._dayOfYear=Ke.dayOfYear)),u._dayOfYear!=null&&(I=Hn(u._a[xt],w[xt]),(u._dayOfYear>os(I)||u._dayOfYear===0)&&(se(u)._overflowDayOfYear=!0),Ge=br(I,0,u._dayOfYear),u._a[nr]=Ge.getUTCMonth(),u._a[pr]=Ge.getUTCDate()),b=0;b<3&&u._a[b]==null;++b)u._a[b]=It[b]=w[b];for(;b<7;b++)u._a[b]=It[b]=u._a[b]==null?b===2?1:0:u._a[b];u._a[Ct]===24&&u._a[Br]===0&&u._a[it]===0&&u._a[Ir]===0&&(u._nextDay=!0,u._a[Ct]=0),u._d=(u._useUTC?br:bl).apply(null,It),K=u._useUTC?u._d.getUTCDay():u._d.getDay(),u._tzm!=null&&u._d.setUTCMinutes(u._d.getUTCMinutes()-u._tzm),u._nextDay&&(u._a[Ct]=24),u._w&&u._w.d!==void 0&&u._w.d!==K&&(se(u).weekdayMismatch=!0)}}function Ms(u){if(u._f===Se.ISO_8601)sr(u);else if(u._f===Se.RFC_2822)di(u);else{u._a=[],se(u).empty=!0;for(var b,w,E,I,K,J=""+u._i,le=J.length,we=0,ke=Zt(u._f,u._locale).match(_e)||[],Ge=ke.length,Ke=0;Ke<Ge;Ke++)w=ke[Ke],(b=(J.match(gr(w,u))||[])[0])&&(0<(E=J.substr(0,J.indexOf(b))).length&&se(u).unusedInput.push(E),J=J.slice(J.indexOf(b)+b.length),we+=b.length),go[w]?(b?se(u).empty=!1:se(u).unusedTokens.push(w),E=w,K=u,(I=b)!=null&&vt(eo,E)&&eo[E](I,K._a,K,E)):u._strict&&!b&&se(u).unusedTokens.push(w);se(u).charsLeftOver=le-we,0<J.length&&se(u).unusedInput.push(J),u._a[Ct]<=12&&se(u).bigHour===!0&&0<u._a[Ct]&&(se(u).bigHour=void 0),se(u).parsedDateParts=u._a.slice(0),se(u).meridiem=u._meridiem,u._a[Ct]=function(It,qt,yr){return yr==null?qt:It.meridiemHour!=null?It.meridiemHour(qt,yr):It.isPM!=null?((It=It.isPM(yr))&&qt<12&&(qt+=12),qt=It||qt!==12?qt:0):qt}(u._locale,u._a[Ct],u._meridiem),(le=se(u).era)!==null&&(u._a[xt]=u._locale.erasConvertYear(le,u._a[xt])),bo(u),ai(u)}}function ls(u){var b,w,E,I=u._i,K=u._f;if(u._locale=u._locale||Ur(u._l),I===null||K===void 0&&I==="")return Sn({nullInput:!0});if(typeof I=="string"&&(u._i=I=u._locale.preparse(I)),ie(I))return new Wt(ai(I));if(tr(I))u._d=I;else if(mr(K)){var J,le,we,ke,Ge,Ke,It=u,qt=!1,yr=It._f.length;if(yr===0)se(It).invalidFormat=!0,It._d=new Date(NaN);else{for(ke=0;ke<yr;ke++)Ge=0,Ke=!1,J=on({},It),It._useUTC!=null&&(J._useUTC=It._useUTC),J._f=It._f[ke],Ms(J),rn(J)&&(Ke=!0),Ge=(Ge+=se(J).charsLeftOver)+10*se(J).unusedTokens.length,se(J).score=Ge,qt?Ge<we&&(we=Ge,le=J):(we==null||Ge<we||Ke)&&(we=Ge,le=J,Ke)&&(qt=!0);Sr(It,le||J)}}else K?Ms(u):un(K=(I=u)._i)?I._d=new Date(Se.now()):tr(K)?I._d=new Date(K.valueOf()):typeof K=="string"?(w=I,(b=jr.exec(w._i))!==null?w._d=new Date(+b[1]):(sr(w),w._isValid===!1&&(delete w._isValid,di(w),w._isValid===!1)&&(delete w._isValid,w._strict?w._isValid=!1:Se.createFromInputFallback(w)))):mr(K)?(I._a=ni(K.slice(0),function(An){return parseInt(An,10)}),bo(I)):fo(K)?(b=I)._d||(E=(w=ns(b._i)).day===void 0?w.date:w.day,b._a=ni([w.year,w.month,E,w.hour,w.minute,w.second,w.millisecond],function(An){return An&&parseInt(An,10)}),bo(b)):Gn(K)?I._d=new Date(K):Se.createFromInputFallback(I);return rn(u)||(u._d=null),u}function qi(u,b,w,E,I){var K={};return b!==!0&&b!==!1||(E=b,b=void 0),w!==!0&&w!==!1||(E=w,w=void 0),(fo(u)&&fr(u)||mr(u)&&u.length===0)&&(u=void 0),K._isAMomentObject=!0,K._useUTC=K._isUTC=I,K._l=w,K._i=u,K._f=b,K._strict=E,(I=new Wt(ai(ls(I=K))))._nextDay&&(I.add(1,"d"),I._nextDay=void 0),I}function pt(u,b,w,E){return qi(u,b,w,E,!1)}Se.createFromInputFallback=Jt("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(u){u._d=new Date(u._i+(u._useUTC?" UTC":""))}),Se.ISO_8601=function(){},Se.RFC_2822=function(){},Q=Jt("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var u=pt.apply(null,arguments);return this.isValid()&&u.isValid()?u<this?this:u:Sn()}),rs=Jt("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var u=pt.apply(null,arguments);return this.isValid()&&u.isValid()?this<u?this:u:Sn()});function cs(u,b){var w,E;if(!(b=b.length===1&&mr(b[0])?b[0]:b).length)return pt();for(w=b[0],E=1;E<b.length;++E)b[E].isValid()&&!b[E][u](w)||(w=b[E]);return w}var vo=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ir(b){var b=ns(b),w=b.year||0,E=b.quarter||0,I=b.month||0,K=b.week||b.isoWeek||0,J=b.day||0,le=b.hour||0,we=b.minute||0,ke=b.second||0,Ge=b.millisecond||0;this._isValid=function(Ke){var It,qt,yr=!1,An=vo.length;for(It in Ke)if(vt(Ke,It)&&(Vt.call(vo,It)===-1||Ke[It]!=null&&isNaN(Ke[It])))return!1;for(qt=0;qt<An;++qt)if(Ke[vo[qt]]){if(yr)return!1;parseFloat(Ke[vo[qt]])!==ot(Ke[vo[qt]])&&(yr=!0)}return!0}(b),this._milliseconds=+Ge+1e3*ke+6e4*we+1e3*le*60*60,this._days=+J+7*K,this._months=+I+3*E+12*w,this._data={},this._locale=Ur(),this._bubble()}function mn(u){return u instanceof ir}function yo(u){return u<0?-1*Math.round(-1*u):Math.round(u)}function _o(u,b){Z(u,0,0,function(){var w=this.utcOffset(),E="+";return w<0&&(w=-w,E="-"),E+Er(~~(w/60),2)+b+Er(~~w%60,2)})}_o("Z",":"),_o("ZZ",""),Be("Z",oi),Be("ZZ",oi),ft(["Z","ZZ"],function(u,b,w){w._useUTC=!0,w._tzm=Gi(oi,u)});var Qe=/([\+\-]|\d\d)/gi;function Gi(u,w){var w=(w||"").match(u);return w===null?null:(w=60*(u=((w[w.length-1]||[])+"").match(Qe)||["-",0,0])[1]+ot(u[2]))===0?0:u[0]==="+"?w:-w}function $o(u,b){var w;return b._isUTC?(b=b.clone(),w=(ie(u)||tr(u)?u:pt(u)).valueOf()-b.valueOf(),b._d.setTime(b._d.valueOf()+w),Se.updateOffset(b,!1),b):pt(u).local()}function Ps(u){return-Math.round(u._d.getTimezoneOffset())}function oe(){return!!this.isValid()&&this._isUTC&&this._offset===0}Se.updateOffset=function(){};var ds=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ra=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Bt(u,b){var w,E=u;return mn(u)?E={ms:u._milliseconds,d:u._days,M:u._months}:Gn(u)||!isNaN(+u)?(E={},b?E[b]=+u:E.milliseconds=+u):(b=ds.exec(u))?(w=b[1]==="-"?-1:1,E={y:0,d:ot(b[pr])*w,h:ot(b[Ct])*w,m:ot(b[Br])*w,s:ot(b[it])*w,ms:ot(yo(1e3*b[Ir]))*w}):(b=Ra.exec(u))?(w=b[1]==="-"?-1:1,E={y:Pn(b[2],w),M:Pn(b[3],w),w:Pn(b[4],w),d:Pn(b[5],w),h:Pn(b[6],w),m:Pn(b[7],w),s:Pn(b[8],w)}):E==null?E={}:typeof E=="object"&&("from"in E||"to"in E)&&(b=function(I,K){var J;return!I.isValid()||!K.isValid()?{milliseconds:0,months:0}:(K=$o(K,I),I.isBefore(K)?J=yl(I,K):((J=yl(K,I)).milliseconds=-J.milliseconds,J.months=-J.months),J)}(pt(E.from),pt(E.to)),(E={}).ms=b.milliseconds,E.M=b.months),w=new ir(E),mn(u)&&vt(u,"_locale")&&(w._locale=u._locale),mn(u)&&vt(u,"_isValid")&&(w._isValid=u._isValid),w}function Pn(u,b){return u=u&&parseFloat(u.replace(",",".")),(isNaN(u)?0:u)*b}function yl(u,b){var w={};return w.months=b.month()-u.month()+12*(b.year()-u.year()),u.clone().add(w.months,"M").isAfter(b)&&--w.months,w.milliseconds=+b-+u.clone().add(w.months,"M"),w}function Ki(u,b){return function(w,E){var I;return E===null||isNaN(+E)||($e(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),I=w,w=E,E=I),Xi(this,Bt(w,E),u),this}}function Xi(u,J,w,E){var I=J._milliseconds,K=yo(J._days),J=yo(J._months);u.isValid()&&(E=E==null||E,J&&$i(u,Fo(u,"Month")+J*w),K&&St(u,"Date",Fo(u,"Date")+K*w),I&&u._d.setTime(u._d.valueOf()+I*w),E)&&Se.updateOffset(u,K||J)}Bt.fn=ir.prototype,Bt.invalid=function(){return Bt(NaN)},no=Ki(1,"add"),Rs=Ki(-1,"subtract");function ui(u){return typeof u=="string"||u instanceof String}function Je(u){return ie(u)||tr(u)||ui(u)||Gn(u)||function(b){var w=mr(b),E=!1;return w&&(E=b.filter(function(I){return!Gn(I)&&ui(b)}).length===0),w&&E}(u)||function(b){var w,E,I=fo(b)&&!fr(b),K=!1,J=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],le=J.length;for(w=0;w<le;w+=1)E=J[w],K=K||vt(b,E);return I&&K}(u)||u==null}function mi(u,b){var w,E;return u.date()<b.date()?-mi(b,u):-((w=12*(b.year()-u.year())+(b.month()-u.month()))+(b-(E=u.clone().add(w,"months"))<0?(b-E)/(E-u.clone().add(w-1,"months")):(b-E)/(u.clone().add(1+w,"months")-E)))||0}function zo(u){return u===void 0?this._locale._abbr:((u=Ur(u))!=null&&(this._locale=u),this)}Se.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",Se.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]",gt=Jt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(u){return u===void 0?this.localeData():this.locale(u)});function fi(){return this._locale}var Yn=126227808e5;function sn(u,b){return(u%b+b)%b}function Zi(u,b,w){return u<100&&0<=u?new Date(u+400,b,w)-Yn:new Date(u,b,w).valueOf()}function Qi(u,b,w){return u<100&&0<=u?Date.UTC(u+400,b,w)-Yn:Date.UTC(u,b,w)}function us(u,b){return b.erasAbbrRegex(u)}function Wo(){for(var u,b,w,E=[],I=[],K=[],J=[],le=this.eras(),we=0,ke=le.length;we<ke;++we)u=Dn(le[we].name),b=Dn(le[we].abbr),w=Dn(le[we].narrow),I.push(u),E.push(b),K.push(w),J.push(u),J.push(b),J.push(w);this._erasRegex=new RegExp("^("+J.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+I.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+E.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+K.join("|")+")","i")}function tn(u,b){Z(0,[u,u.length],0,b)}function Hr(u,b,w,E,I){var K;return u==null?is(this,E,I).year:(K=Xn(u,E,I),function(J,le,we,ke,Ge){return J=Os(J,le,we,ke,Ge),le=br(J.year,0,J.dayOfYear),this.year(le.getUTCFullYear()),this.month(le.getUTCMonth()),this.date(le.getUTCDate()),this}.call(this,u,b=K<b?K:b,w,E,I))}Z("N",0,0,"eraAbbr"),Z("NN",0,0,"eraAbbr"),Z("NNN",0,0,"eraAbbr"),Z("NNNN",0,0,"eraName"),Z("NNNNN",0,0,"eraNarrow"),Z("y",["y",1],"yo","eraYear"),Z("y",["yy",2],0,"eraYear"),Z("y",["yyy",3],0,"eraYear"),Z("y",["yyyy",4],0,"eraYear"),Be("N",us),Be("NN",us),Be("NNN",us),Be("NNNN",function(u,b){return b.erasNameRegex(u)}),Be("NNNNN",function(u,b){return b.erasNarrowRegex(u)}),ft(["N","NN","NNN","NNNN","NNNNN"],function(u,b,w,E){E=w._locale.erasParse(u,E,w._strict),E?se(w).era=E:se(w).invalidEra=u}),Be("y",De),Be("yy",De),Be("yyy",De),Be("yyyy",De),Be("yo",function(u,b){return b._eraYearOrdinalRegex||De}),ft(["y","yy","yyy","yyyy"],xt),ft(["yo"],function(u,b,w,E){var I;w._locale._eraYearOrdinalRegex&&(I=u.match(w._locale._eraYearOrdinalRegex)),w._locale.eraYearOrdinalParse?b[xt]=w._locale.eraYearOrdinalParse(u,I):b[xt]=parseInt(u,10)}),Z(0,["gg",2],0,function(){return this.weekYear()%100}),Z(0,["GG",2],0,function(){return this.isoWeekYear()%100}),tn("gggg","weekYear"),tn("ggggg","weekYear"),tn("GGGG","isoWeekYear"),tn("GGGGG","isoWeekYear"),Be("G",Nr),Be("g",Nr),Be("GG",Me,fe),Be("gg",Me,fe),Be("GGGG",Ft,vn),Be("gggg",Ft,vn),Be("GGGGG",Qn,$r),Be("ggggg",Qn,$r),en(["gggg","ggggg","GGGG","GGGGG"],function(u,b,w,E){b[E.substr(0,2)]=ot(u)}),en(["gg","GG"],function(u,b,w,E){b[E]=Se.parseTwoDigitYear(u)}),Z("Q",0,"Qo","quarter"),Be("Q",Io),ft("Q",function(u,b){b[nr]=3*(ot(u)-1)}),Z("D",["DD",2],"Do","date"),Be("D",Me,he),Be("DD",Me,fe),Be("Do",function(u,b){return u?b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient}),ft(["D","DD"],pr),ft("Do",function(u,b){b[pr]=ot(u.match(Me)[0])}),Ft=to("Date",!0),Z("DDD",["DDDD",3],"DDDo","dayOfYear"),Be("DDD",Kn),Be("DDDD",yt),ft(["DDD","DDDD"],function(u,b,w){w._dayOfYear=ot(u)}),Z("m",["mm",2],0,"minute"),Be("m",Me,M),Be("mm",Me,fe),ft(["m","mm"],Br);var cn,vn=to("Minutes",!1),Qn=(Z("s",["ss",2],0,"second"),Be("s",Me,M),Be("ss",Me,fe),ft(["s","ss"],it),to("Seconds",!1));for(Z("S",0,0,function(){return~~(this.millisecond()/100)}),Z(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Z(0,["SSS",3],0,"millisecond"),Z(0,["SSSS",4],0,function(){return 10*this.millisecond()}),Z(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),Z(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),Z(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),Z(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),Z(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),Be("S",Kn,Io),Be("SS",Kn,fe),Be("SSS",Kn,yt),cn="SSSS";cn.length<=9;cn+="S")Be(cn,De);function hi(u,b){b[Ir]=ot(1e3*("0."+u))}for(cn="S";cn.length<=9;cn+="S")ft(cn,hi);$r=to("Milliseconds",!1),Z("z",0,0,"zoneAbbr"),Z("zz",0,0,"zoneName"),he=Wt.prototype;function dn(u){return u}he.add=no,he.calendar=function(w,I){arguments.length===1&&(arguments[0]?Je(arguments[0])?(w=arguments[0],I=void 0):function(K){for(var J=fo(K)&&!fr(K),le=!1,we=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],ke=0;ke<we.length;ke+=1)le=le||vt(K,we[ke]);return J&&le}(arguments[0])&&(I=arguments[0],w=void 0):I=w=void 0);var w=w||pt(),E=$o(w,this).startOf("day"),E=Se.calendarFormat(this,E)||"sameElse",I=I&&(pn(I[E])?I[E].call(this,w):I[E]);return this.format(I||this.localeData().calendar(E,this,pt(w)))},he.clone=function(){return new Wt(this)},he.diff=function(u,b,w){var E,I,K;if(!this.isValid())return NaN;if(!(E=$o(u,this)).isValid())return NaN;switch(I=6e4*(E.utcOffset()-this.utcOffset()),b=ln(b)){case"year":K=mi(this,E)/12;break;case"month":K=mi(this,E);break;case"quarter":K=mi(this,E)/3;break;case"second":K=(this-E)/1e3;break;case"minute":K=(this-E)/6e4;break;case"hour":K=(this-E)/36e5;break;case"day":K=(this-E-I)/864e5;break;case"week":K=(this-E-I)/6048e5;break;default:K=this-E}return w?K:Fn(K)},he.endOf=function(u){var b,w;if((u=ln(u))!==void 0&&u!=="millisecond"&&this.isValid()){switch(w=this._isUTC?Qi:Zi,u){case"year":b=w(this.year()+1,0,1)-1;break;case"quarter":b=w(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":b=w(this.year(),this.month()+1,1)-1;break;case"week":b=w(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":b=w(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":b=w(this.year(),this.month(),this.date()+1)-1;break;case"hour":b=this._d.valueOf(),b+=36e5-sn(b+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":b=this._d.valueOf(),b+=6e4-sn(b,6e4)-1;break;case"second":b=this._d.valueOf(),b+=1e3-sn(b,1e3)-1;break}this._d.setTime(b),Se.updateOffset(this,!0)}return this},he.format=function(u){return u=u||(this.isUtc()?Se.defaultFormatUtc:Se.defaultFormat),u=ht(this,u),this.localeData().postformat(u)},he.from=function(u,b){return this.isValid()&&(ie(u)&&u.isValid()||pt(u).isValid())?Bt({to:this,from:u}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()},he.fromNow=function(u){return this.from(pt(),u)},he.to=function(u,b){return this.isValid()&&(ie(u)&&u.isValid()||pt(u).isValid())?Bt({from:this,to:u}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()},he.toNow=function(u){return this.to(pt(),u)},he.get=function(u){return pn(this[u=ln(u)])?this[u]():this},he.invalidAt=function(){return se(this).overflow},he.isAfter=function(u,b){return u=ie(u)?u:pt(u),!(!this.isValid()||!u.isValid())&&((b=ln(b)||"millisecond")==="millisecond"?this.valueOf()>u.valueOf():u.valueOf()<this.clone().startOf(b).valueOf())},he.isBefore=function(u,b){return u=ie(u)?u:pt(u),!(!this.isValid()||!u.isValid())&&((b=ln(b)||"millisecond")==="millisecond"?this.valueOf()<u.valueOf():this.clone().endOf(b).valueOf()<u.valueOf())},he.isBetween=function(u,b,w,E){return u=ie(u)?u:pt(u),b=ie(b)?b:pt(b),!!(this.isValid()&&u.isValid()&&b.isValid())&&((E=E||"()")[0]==="("?this.isAfter(u,w):!this.isBefore(u,w))&&(E[1]===")"?this.isBefore(b,w):!this.isAfter(b,w))},he.isSame=function(w,b){var w=ie(w)?w:pt(w);return!(!this.isValid()||!w.isValid())&&((b=ln(b)||"millisecond")==="millisecond"?this.valueOf()===w.valueOf():(w=w.valueOf(),this.clone().startOf(b).valueOf()<=w&&w<=this.clone().endOf(b).valueOf()))},he.isSameOrAfter=function(u,b){return this.isSame(u,b)||this.isAfter(u,b)},he.isSameOrBefore=function(u,b){return this.isSame(u,b)||this.isBefore(u,b)},he.isValid=function(){return rn(this)},he.lang=gt,he.locale=zo,he.localeData=fi,he.max=rs,he.min=Q,he.parsingFlags=function(){return Sr({},se(this))},he.set=function(u,b){if(typeof u=="object")for(var w=function(K){var J,le=[];for(J in K)vt(K,J)&&le.push({unit:J,priority:Lr[J]});return le.sort(function(we,ke){return we.priority-ke.priority}),le}(u=ns(u)),E=w.length,I=0;I<E;I++)this[w[I].unit](u[w[I].unit]);else if(pn(this[u=ln(u)]))return this[u](b);return this},he.startOf=function(u){var b,w;if((u=ln(u))!==void 0&&u!=="millisecond"&&this.isValid()){switch(w=this._isUTC?Qi:Zi,u){case"year":b=w(this.year(),0,1);break;case"quarter":b=w(this.year(),this.month()-this.month()%3,1);break;case"month":b=w(this.year(),this.month(),1);break;case"week":b=w(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":b=w(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":b=w(this.year(),this.month(),this.date());break;case"hour":b=this._d.valueOf(),b-=sn(b+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":b=this._d.valueOf(),b-=sn(b,6e4);break;case"second":b=this._d.valueOf(),b-=sn(b,1e3);break}this._d.setTime(b),Se.updateOffset(this,!0)}return this},he.subtract=Rs,he.toArray=function(){var u=this;return[u.year(),u.month(),u.date(),u.hour(),u.minute(),u.second(),u.millisecond()]},he.toObject=function(){var u=this;return{years:u.year(),months:u.month(),date:u.date(),hours:u.hours(),minutes:u.minutes(),seconds:u.seconds(),milliseconds:u.milliseconds()}},he.toDate=function(){return new Date(this.valueOf())},he.toISOString=function(u){var b;return this.isValid()?(b=(u=u!==!0)?this.clone().utc():this).year()<0||9999<b.year()?ht(b,u?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):pn(Date.prototype.toISOString)?u?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",ht(b,"Z")):ht(b,u?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ"):null},he.inspect=function(){var u,b,w;return this.isValid()?(b="moment",u="",this.isLocal()||(b=this.utcOffset()===0?"moment.utc":"moment.parseZone",u="Z"),b="["+b+'("]',w=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(b+w+"-MM-DD[T]HH:mm:ss.SSS"+(u+'[")]'))):"moment.invalid(/* "+this._i+" */)"},typeof Symbol<"u"&&Symbol.for!=null&&(he[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),he.toJSON=function(){return this.isValid()?this.toISOString():null},he.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},he.unix=function(){return Math.floor(this.valueOf()/1e3)},he.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},he.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},he.eraName=function(){for(var u,b=this.localeData().eras(),w=0,E=b.length;w<E;++w)if(u=this.clone().startOf("day").valueOf(),b[w].since<=u&&u<=b[w].until||b[w].until<=u&&u<=b[w].since)return b[w].name;return""},he.eraNarrow=function(){for(var u,b=this.localeData().eras(),w=0,E=b.length;w<E;++w)if(u=this.clone().startOf("day").valueOf(),b[w].since<=u&&u<=b[w].until||b[w].until<=u&&u<=b[w].since)return b[w].narrow;return""},he.eraAbbr=function(){for(var u,b=this.localeData().eras(),w=0,E=b.length;w<E;++w)if(u=this.clone().startOf("day").valueOf(),b[w].since<=u&&u<=b[w].until||b[w].until<=u&&u<=b[w].since)return b[w].abbr;return""},he.eraYear=function(){for(var u,b,w=this.localeData().eras(),E=0,I=w.length;E<I;++E)if(u=w[E].since<=w[E].until?1:-1,b=this.clone().startOf("day").valueOf(),w[E].since<=b&&b<=w[E].until||w[E].until<=b&&b<=w[E].since)return(this.year()-Se(w[E].since).year())*u+w[E].offset;return this.year()},he.year=zr,he.isLeapYear=function(){return Un(this.year())},he.weekYear=function(u){return Hr.call(this,u,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)},he.isoWeekYear=function(u){return Hr.call(this,u,this.isoWeek(),this.isoWeekday(),1,4)},he.quarter=he.quarters=function(u){return u==null?Math.ceil((this.month()+1)/3):this.month(3*(u-1)+this.month()%3)},he.month=Ts,he.daysInMonth=function(){return He(this.year(),this.month())},he.week=he.weeks=function(u){var b=this.localeData().week(this);return u==null?b:this.add(7*(u-b),"d")},he.isoWeek=he.isoWeeks=function(u){var b=is(this,1,4).week;return u==null?b:this.add(7*(u-b),"d")},he.weeksInYear=function(){var u=this.localeData()._week;return Xn(this.year(),u.dow,u.doy)},he.weeksInWeekYear=function(){var u=this.localeData()._week;return Xn(this.weekYear(),u.dow,u.doy)},he.isoWeeksInYear=function(){return Xn(this.year(),1,4)},he.isoWeeksInISOWeekYear=function(){return Xn(this.isoWeekYear(),1,4)},he.date=Ft,he.day=he.days=function(u){var b,w,E;return this.isValid()?(b=Fo(this,"Day"),u!=null?(w=u,E=this.localeData(),u=typeof w!="string"?w:isNaN(w)?typeof(w=E.weekdaysParse(w))=="number"?w:null:parseInt(w,10),this.add(u-b,"d")):b):u!=null?this:NaN},he.weekday=function(u){var b;return this.isValid()?(b=(this.day()+7-this.localeData()._week.dow)%7,u==null?b:this.add(u-b,"d")):u!=null?this:NaN},he.isoWeekday=function(u){var b,w;return this.isValid()?u!=null?(b=u,w=this.localeData(),w=typeof b=="string"?w.weekdaysParse(b)%7||7:isNaN(b)?null:b,this.day(this.day()%7?w:w-7)):this.day()||7:u!=null?this:NaN},he.dayOfYear=function(u){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return u==null?b:this.add(u-b,"d")},he.hour=he.hours=Mt,he.minute=he.minutes=vn,he.second=he.seconds=Qn,he.millisecond=he.milliseconds=$r,he.utcOffset=function(u,b,w){var E,I=this._offset||0;if(!this.isValid())return u!=null?this:NaN;if(u==null)return this._isUTC?I:Ps(this);if(typeof u=="string"){if((u=Gi(oi,u))===null)return this}else Math.abs(u)<16&&!w&&(u*=60);return!this._isUTC&&b&&(E=Ps(this)),this._offset=u,this._isUTC=!0,E!=null&&this.add(E,"m"),I!==u&&(!b||this._changeInProgress?Xi(this,Bt(u-I,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Se.updateOffset(this,!0),this._changeInProgress=null)),this},he.utc=function(u){return this.utcOffset(0,u)},he.local=function(u){return this._isUTC&&(this.utcOffset(0,u),this._isUTC=!1,u)&&this.subtract(Ps(this),"m"),this},he.parseZone=function(){var u;return this._tzm!=null?this.utcOffset(this._tzm,!1,!0):typeof this._i=="string"&&((u=Gi(bn,this._i))!=null?this.utcOffset(u):this.utcOffset(0,!0)),this},he.hasAlignedHourOffset=function(u){return!!this.isValid()&&(u=u?pt(u).utcOffset():0,(this.utcOffset()-u)%60==0)},he.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},he.isLocal=function(){return!!this.isValid()&&!this._isUTC},he.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},he.isUtc=oe,he.isUTC=oe,he.zoneAbbr=function(){return this._isUTC?"UTC":""},he.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},he.dates=Jt("dates accessor is deprecated. Use date instead.",Ft),he.months=Jt("months accessor is deprecated. Use month instead",Ts),he.years=Jt("years accessor is deprecated. Use year instead",zr),he.zone=Jt("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(u,b){return u!=null?(this.utcOffset(u=typeof u!="string"?-u:u,b),this):-this.utcOffset()}),he.isDSTShifted=Jt("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){var u,b;return un(this._isDSTShifted)&&(on(u={},this),(u=ls(u))._a?(b=(u._isUTC?Rn:pt)(u._a),this._isDSTShifted=this.isValid()&&0<function(w,E,I){for(var K=Math.min(w.length,E.length),J=Math.abs(w.length-E.length),le=0,we=0;we<K;we++)(I&&w[we]!==E[we]||!I&&ot(w[we])!==ot(E[we]))&&le++;return le+J}(u._a,b.toArray())):this._isDSTShifted=!1),this._isDSTShifted}),M=ce.prototype;function Ls(u,b,w,K){var I=Ur(),K=Rn().set(K,b);return I[w](K,u)}function gi(u,b,w){if(Gn(u)&&(b=u,u=void 0),u=u||"",b!=null)return Ls(u,b,w,"month");for(var E=[],I=0;I<12;I++)E[I]=Ls(u,I,w,"month");return E}function Vo(u,b,w,E){b=(typeof u=="boolean"?Gn(b)&&(w=b,b=void 0):(b=u,u=!1,Gn(w=b)&&(w=b,b=void 0)),b||"");var I,K=Ur(),J=u?K._week.dow:0,le=[];if(w!=null)return Ls(b,(w+J)%7,E,"day");for(I=0;I<7;I++)le[I]=Ls(b,(I+J)%7,E,"day");return le}M.calendar=function(u,b,w){return pn(u=this._calendar[u]||this._calendar.sameElse)?u.call(b,w):u},M.longDateFormat=function(u){var b=this._longDateFormat[u],w=this._longDateFormat[u.toUpperCase()];return b||!w?b:(this._longDateFormat[u]=w.match(_e).map(function(E){return E==="MMMM"||E==="MM"||E==="DD"||E==="dddd"?E.slice(1):E}).join(""),this._longDateFormat[u])},M.invalidDate=function(){return this._invalidDate},M.ordinal=function(u){return this._ordinal.replace("%d",u)},M.preparse=dn,M.postformat=dn,M.relativeTime=function(u,b,w,E){var I=this._relativeTime[w];return pn(I)?I(u,b,w,E):I.replace(/%d/i,u)},M.pastFuture=function(u,b){return pn(u=this._relativeTime[0<u?"future":"past"])?u(b):u.replace(/%s/i,b)},M.set=function(u){var b,w;for(w in u)vt(u,w)&&(pn(b=u[w])?this[w]=b:this["_"+w]=b);this._config=u,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},M.eras=function(u,b){for(var w,E=this._eras||Ur("en")._eras,I=0,K=E.length;I<K;++I){switch(typeof E[I].since){case"string":w=Se(E[I].since).startOf("day"),E[I].since=w.valueOf();break}switch(typeof E[I].until){case"undefined":E[I].until=1/0;break;case"string":w=Se(E[I].until).startOf("day").valueOf(),E[I].until=w.valueOf();break}}return E},M.erasParse=function(u,b,w){var E,I,K,J,le,we=this.eras();for(u=u.toUpperCase(),E=0,I=we.length;E<I;++E)if(K=we[E].name.toUpperCase(),J=we[E].abbr.toUpperCase(),le=we[E].narrow.toUpperCase(),w)switch(b){case"N":case"NN":case"NNN":if(J===u)return we[E];break;case"NNNN":if(K===u)return we[E];break;case"NNNNN":if(le===u)return we[E];break}else if(0<=[K,J,le].indexOf(u))return we[E]},M.erasConvertYear=function(u,b){var w=u.since<=u.until?1:-1;return b===void 0?Se(u.since).year():Se(u.since).year()+(b-u.offset)*w},M.erasAbbrRegex=function(u){return vt(this,"_erasAbbrRegex")||Wo.call(this),u?this._erasAbbrRegex:this._erasRegex},M.erasNameRegex=function(u){return vt(this,"_erasNameRegex")||Wo.call(this),u?this._erasNameRegex:this._erasRegex},M.erasNarrowRegex=function(u){return vt(this,"_erasNarrowRegex")||Wo.call(this),u?this._erasNarrowRegex:this._erasRegex},M.months=function(u,b){return u?(mr(this._months)?this._months:this._months[(this._months.isFormat||Uo).test(b)?"format":"standalone"])[u.month()]:mr(this._months)?this._months:this._months.standalone},M.monthsShort=function(u,b){return u?(mr(this._monthsShort)?this._monthsShort:this._monthsShort[Uo.test(b)?"format":"standalone"])[u.month()]:mr(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},M.monthsParse=function(u,b,w){var E,I;if(this._monthsParseExact)return function(Ke,J,le){var we,ke,Ge,Ke=Ke.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],we=0;we<12;++we)Ge=Rn([2e3,we]),this._shortMonthsParse[we]=this.monthsShort(Ge,"").toLocaleLowerCase(),this._longMonthsParse[we]=this.months(Ge,"").toLocaleLowerCase();return le?J==="MMM"?(ke=Vt.call(this._shortMonthsParse,Ke))!==-1?ke:null:(ke=Vt.call(this._longMonthsParse,Ke))!==-1?ke:null:J==="MMM"?(ke=Vt.call(this._shortMonthsParse,Ke))!==-1||(ke=Vt.call(this._longMonthsParse,Ke))!==-1?ke:null:(ke=Vt.call(this._longMonthsParse,Ke))!==-1||(ke=Vt.call(this._shortMonthsParse,Ke))!==-1?ke:null}.call(this,u,b,w);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),E=0;E<12;E++)if(I=Rn([2e3,E]),w&&!this._longMonthsParse[E]&&(this._longMonthsParse[E]=new RegExp("^"+this.months(I,"").replace(".","")+"$","i"),this._shortMonthsParse[E]=new RegExp("^"+this.monthsShort(I,"").replace(".","")+"$","i")),w||this._monthsParse[E]||(I="^"+this.months(I,"")+"|^"+this.monthsShort(I,""),this._monthsParse[E]=new RegExp(I.replace(".",""),"i")),w&&b==="MMMM"&&this._longMonthsParse[E].test(u)||w&&b==="MMM"&&this._shortMonthsParse[E].test(u)||!w&&this._monthsParse[E].test(u))return E},M.monthsRegex=function(u){return this._monthsParseExact?(vt(this,"_monthsRegex")||si.call(this),u?this._monthsStrictRegex:this._monthsRegex):(vt(this,"_monthsRegex")||(this._monthsRegex=Yi),this._monthsStrictRegex&&u?this._monthsStrictRegex:this._monthsRegex)},M.monthsShortRegex=function(u){return this._monthsParseExact?(vt(this,"_monthsRegex")||si.call(this),u?this._monthsShortStrictRegex:this._monthsShortRegex):(vt(this,"_monthsShortRegex")||(this._monthsShortRegex=ss),this._monthsShortStrictRegex&&u?this._monthsShortStrictRegex:this._monthsShortRegex)},M.week=function(u){return is(u,this._week.dow,this._week.doy).week},M.firstDayOfYear=function(){return this._week.doy},M.firstDayOfWeek=function(){return this._week.dow},M.weekdays=function(u,b){return b=mr(this._weekdays)?this._weekdays:this._weekdays[u&&u!==!0&&this._weekdays.isFormat.test(b)?"format":"standalone"],u===!0?zi(b,this._week.dow):u?b[u.day()]:b},M.weekdaysMin=function(u){return u===!0?zi(this._weekdaysMin,this._week.dow):u?this._weekdaysMin[u.day()]:this._weekdaysMin},M.weekdaysShort=function(u){return u===!0?zi(this._weekdaysShort,this._week.dow):u?this._weekdaysShort[u.day()]:this._weekdaysShort},M.weekdaysParse=function(u,b,w){var E,I;if(this._weekdaysParseExact)return function(Ke,J,le){var we,ke,Ge,Ke=Ke.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],we=0;we<7;++we)Ge=Rn([2e3,1]).day(we),this._minWeekdaysParse[we]=this.weekdaysMin(Ge,"").toLocaleLowerCase(),this._shortWeekdaysParse[we]=this.weekdaysShort(Ge,"").toLocaleLowerCase(),this._weekdaysParse[we]=this.weekdays(Ge,"").toLocaleLowerCase();return le?J==="dddd"?(ke=Vt.call(this._weekdaysParse,Ke))!==-1?ke:null:J==="ddd"?(ke=Vt.call(this._shortWeekdaysParse,Ke))!==-1?ke:null:(ke=Vt.call(this._minWeekdaysParse,Ke))!==-1?ke:null:J==="dddd"?(ke=Vt.call(this._weekdaysParse,Ke))!==-1||(ke=Vt.call(this._shortWeekdaysParse,Ke))!==-1||(ke=Vt.call(this._minWeekdaysParse,Ke))!==-1?ke:null:J==="ddd"?(ke=Vt.call(this._shortWeekdaysParse,Ke))!==-1||(ke=Vt.call(this._weekdaysParse,Ke))!==-1||(ke=Vt.call(this._minWeekdaysParse,Ke))!==-1?ke:null:(ke=Vt.call(this._minWeekdaysParse,Ke))!==-1||(ke=Vt.call(this._weekdaysParse,Ke))!==-1||(ke=Vt.call(this._shortWeekdaysParse,Ke))!==-1?ke:null}.call(this,u,b,w);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),E=0;E<7;E++)if(I=Rn([2e3,1]).day(E),w&&!this._fullWeekdaysParse[E]&&(this._fullWeekdaysParse[E]=new RegExp("^"+this.weekdays(I,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[E]=new RegExp("^"+this.weekdaysShort(I,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[E]=new RegExp("^"+this.weekdaysMin(I,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[E]||(I="^"+this.weekdays(I,"")+"|^"+this.weekdaysShort(I,"")+"|^"+this.weekdaysMin(I,""),this._weekdaysParse[E]=new RegExp(I.replace(".",""),"i")),w&&b==="dddd"&&this._fullWeekdaysParse[E].test(u)||w&&b==="ddd"&&this._shortWeekdaysParse[E].test(u)||w&&b==="dd"&&this._minWeekdaysParse[E].test(u)||!w&&this._weekdaysParse[E].test(u))return E},M.weekdaysRegex=function(u){return this._weekdaysParseExact?(vt(this,"_weekdaysRegex")||Fr.call(this),u?this._weekdaysStrictRegex:this._weekdaysRegex):(vt(this,"_weekdaysRegex")||(this._weekdaysRegex=_t),this._weekdaysStrictRegex&&u?this._weekdaysStrictRegex:this._weekdaysRegex)},M.weekdaysShortRegex=function(u){return this._weekdaysParseExact?(vt(this,"_weekdaysRegex")||Fr.call(this),u?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(vt(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Zn),this._weekdaysShortStrictRegex&&u?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},M.weekdaysMinRegex=function(u){return this._weekdaysParseExact?(vt(this,"_weekdaysRegex")||Fr.call(this),u?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(vt(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Mn),this._weekdaysMinStrictRegex&&u?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},M.isPM=function(u){return(u+"").toLowerCase().charAt(0)==="p"},M.meridiem=function(u,b,w){return 11<u?w?"pm":"PM":w?"am":"AM"},oo("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(u){var b=u%10;return u+(ot(u%100/10)===1?"th":b==1?"st":b==2?"nd":b==3?"rd":"th")}}),Se.lang=Jt("moment.lang is deprecated. Use moment.locale instead.",oo),Se.langData=Jt("moment.langData is deprecated. Use moment.localeData instead.",Ur);var Yr=Math.abs;function pi(u,b,w,E){return b=Bt(b,w),u._milliseconds+=E*b._milliseconds,u._days+=E*b._days,u._months+=E*b._months,u._bubble()}function Ji(u){return u<0?Math.floor(u):Math.ceil(u)}function ms(u){return 4800*u/146097}function ea(u){return 146097*u/4800}function ar(u){return function(){return this.as(u)}}Io=ar("ms"),fe=ar("s"),Kn=ar("m"),yt=ar("h"),no=ar("d"),rs=ar("w"),Q=ar("M"),Rs=ar("Q"),Mt=ar("y"),vn=Io;function so(u){return function(){return this.isValid()?this._data[u]:NaN}}var Qn=so("milliseconds"),$r=so("seconds"),Ft=so("minutes"),zr=so("hours"),M=so("days"),_l=so("months"),qo=so("years"),fn=Math.round,fs={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function at(u,b,w,E){var ke=Bt(u).abs(),Ge=fn(ke.as("s")),I=fn(ke.as("m")),K=fn(ke.as("h")),J=fn(ke.as("d")),le=fn(ke.as("M")),we=fn(ke.as("w")),ke=fn(ke.as("y")),Ge=(Ge<=w.ss?["s",Ge]:Ge<w.s&&["ss",Ge])||(I<=1?["m"]:I<w.m&&["mm",I])||(K<=1?["h"]:K<w.h&&["hh",K])||(J<=1?["d"]:J<w.d&&["dd",J]);return(Ge=(Ge=w.w!=null?Ge||(we<=1?["w"]:we<w.w&&["ww",we]):Ge)||(le<=1?["M"]:le<w.M&&["MM",le])||(ke<=1?["y"]:["yy",ke]))[2]=b,Ge[3]=0<+u,Ge[4]=E,function(Ke,It,qt,yr,An){return An.relativeTime(It||1,!!qt,Ke,yr)}.apply(null,Ge)}var vr=Math.abs;function hs(u){return(0<u)-(u<0)||+u}function Wr(){var u,b,w,E,I,K,J,le,we,ke,Ge;return this.isValid()?(u=vr(this._milliseconds)/1e3,b=vr(this._days),w=vr(this._months),(le=this.asSeconds())?(E=Fn(u/60),I=Fn(E/60),u%=60,E%=60,K=Fn(w/12),w%=12,J=u?u.toFixed(3).replace(/\.?0+$/,""):"",we=hs(this._months)!==hs(le)?"-":"",ke=hs(this._days)!==hs(le)?"-":"",Ge=hs(this._milliseconds)!==hs(le)?"-":"",(le<0?"-":"")+"P"+(K?we+K+"Y":"")+(w?we+w+"M":"")+(b?ke+b+"D":"")+(I||E||u?"T":"")+(I?Ge+I+"H":"")+(E?Ge+E+"M":"")+(u?Ge+J+"S":"")):"P0D"):this.localeData().invalidDate()}var ut=ir.prototype;return ut.isValid=function(){return this._isValid},ut.abs=function(){var u=this._data;return this._milliseconds=Yr(this._milliseconds),this._days=Yr(this._days),this._months=Yr(this._months),u.milliseconds=Yr(u.milliseconds),u.seconds=Yr(u.seconds),u.minutes=Yr(u.minutes),u.hours=Yr(u.hours),u.months=Yr(u.months),u.years=Yr(u.years),this},ut.add=function(u,b){return pi(this,u,b,1)},ut.subtract=function(u,b){return pi(this,u,b,-1)},ut.as=function(u){if(!this.isValid())return NaN;var b,w,E=this._milliseconds;if((u=ln(u))==="month"||u==="quarter"||u==="year")switch(b=this._days+E/864e5,w=this._months+ms(b),u){case"month":return w;case"quarter":return w/3;case"year":return w/12}else switch(b=this._days+Math.round(ea(this._months)),u){case"week":return b/7+E/6048e5;case"day":return b+E/864e5;case"hour":return 24*b+E/36e5;case"minute":return 1440*b+E/6e4;case"second":return 86400*b+E/1e3;case"millisecond":return Math.floor(864e5*b)+E;default:throw new Error("Unknown unit "+u)}},ut.asMilliseconds=Io,ut.asSeconds=fe,ut.asMinutes=Kn,ut.asHours=yt,ut.asDays=no,ut.asWeeks=rs,ut.asMonths=Q,ut.asQuarters=Rs,ut.asYears=Mt,ut.valueOf=vn,ut._bubble=function(){var u=this._milliseconds,b=this._days,w=this._months,E=this._data;return 0<=u&&0<=b&&0<=w||u<=0&&b<=0&&w<=0||(u+=864e5*Ji(ea(w)+b),w=b=0),E.milliseconds=u%1e3,u=Fn(u/1e3),E.seconds=u%60,u=Fn(u/60),E.minutes=u%60,u=Fn(u/60),E.hours=u%24,b+=Fn(u/24),w+=u=Fn(ms(b)),b-=Ji(ea(u)),u=Fn(w/12),w%=12,E.days=b,E.months=w,E.years=u,this},ut.clone=function(){return Bt(this)},ut.get=function(u){return u=ln(u),this.isValid()?this[u+"s"]():NaN},ut.milliseconds=Qn,ut.seconds=$r,ut.minutes=Ft,ut.hours=zr,ut.days=M,ut.weeks=function(){return Fn(this.days()/7)},ut.months=_l,ut.years=qo,ut.humanize=function(u,b){var w,E;return this.isValid()?(w=!1,E=fs,typeof u=="object"&&(b=u,u=!1),typeof u=="boolean"&&(w=u),typeof b=="object"&&(E=Object.assign({},fs,b),b.s!=null)&&b.ss==null&&(E.ss=b.s-1),u=this.localeData(),b=at(this,!w,E,u),w&&(b=u.pastFuture(+this,b)),u.postformat(b)):this.localeData().invalidDate()},ut.toISOString=Wr,ut.toString=Wr,ut.toJSON=Wr,ut.locale=zo,ut.localeData=fi,ut.toIsoString=Jt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Wr),ut.lang=gt,Z("X",0,0,"unix"),Z("x",0,0,"valueOf"),Be("x",Nr),Be("X",/[+-]?\d+(\.\d{1,3})?/),ft("X",function(u,b,w){w._d=new Date(1e3*parseFloat(u))}),ft("x",function(u,b,w){w._d=new Date(ot(u))}),Se.version="2.30.1",qn=pt,Se.fn=he,Se.min=function(){return cs("isBefore",[].slice.call(arguments,0))},Se.max=function(){return cs("isAfter",[].slice.call(arguments,0))},Se.now=function(){return Date.now?Date.now():+new Date},Se.utc=Rn,Se.unix=function(u){return pt(1e3*u)},Se.months=function(u,b){return gi(u,b,"months")},Se.isDate=tr,Se.locale=oo,Se.invalid=Sn,Se.duration=Bt,Se.isMoment=ie,Se.weekdays=function(u,b,w){return Vo(u,b,w,"weekdays")},Se.parseZone=function(){return pt.apply(null,arguments).parseZone()},Se.localeData=Ur,Se.isDuration=mn,Se.monthsShort=function(u,b){return gi(u,b,"monthsShort")},Se.weekdaysMin=function(u,b,w){return Vo(u,b,w,"weekdaysMin")},Se.defineLocale=ii,Se.updateLocale=function(u,b){var w,E;return b!=null?(E=as,Ot[u]!=null&&Ot[u].parentLocale!=null?Ot[u].set(ri(Ot[u]._config,b)):(b=ri(E=(w=Ds(u))!=null?w._config:E,b),w==null&&(b.abbr=u),(E=new ce(b)).parentLocale=Ot[u],Ot[u]=E),oo(u)):Ot[u]!=null&&(Ot[u].parentLocale!=null?(Ot[u]=Ot[u].parentLocale,u===oo()&&oo(u)):Ot[u]!=null&&delete Ot[u]),Ot[u]},Se.locales=function(){return En(Ot)},Se.weekdaysShort=function(u,b,w){return Vo(u,b,w,"weekdaysShort")},Se.normalizeUnits=ln,Se.relativeTimeRounding=function(u){return u===void 0?fn:typeof u=="function"&&(fn=u,!0)},Se.relativeTimeThreshold=function(u,b){return fs[u]!==void 0&&(b===void 0?fs[u]:(fs[u]=b,u==="s"&&(fs.ss=b-1),!0))},Se.calendarFormat=function(u,b){return(u=u.diff(b,"days",!0))<-6?"sameElse":u<-1?"lastWeek":u<0?"lastDay":u<1?"sameDay":u<2?"nextDay":u<7?"nextWeek":"sameElse"},Se.prototype=he,Se.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},Se}),function(){"use strict";var qn=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},Se=function(e){return{eq:e}},mr=Se(function(e,t){return e===t}),fo=function(e){return Se(function(t,n){if(t.length!==n.length)return!1;for(var r=t.length,o=0;o<r;o++)if(!e.eq(t[o],n[o]))return!1;return!0})},vt=function(e){return Se(function(t,n){var r=Object.keys(t),o=Object.keys(n);if(!function(l,c){return function(d,m){return Se(function(h,v){return d.eq(m(h),m(v))})}(fo(l),function(d){return function(m,h){return Array.prototype.slice.call(m).sort(h)}(d,c)})}(mr).eq(r,o))return!1;for(var s=r.length,i=0;i<s;i++){var a=r[i];if(!e.eq(t[a],n[a]))return!1}return!0})},fr=Se(function(e,t){if(e===t)return!0;var n=qn(e);return n===qn(t)&&(function(r){return["undefined","boolean","number","string","function","xml","null"].indexOf(r)!==-1}(n)?e===t:n==="array"?fo(fr).eq(e,t):n==="object"&&vt(fr).eq(e,t))});const un=Object.getPrototypeOf,Gn=(e,t,n)=>{var r;return!!n(e,t.prototype)||((r=e.constructor)===null||r===void 0?void 0:r.name)===t.name},tr=e=>t=>(n=>{const r=typeof n;return n===null?"null":r==="object"&&Array.isArray(n)?"array":r==="object"&&Gn(n,String,(o,s)=>s.isPrototypeOf(o))?"string":r})(t)===e,ni=e=>t=>typeof t===e,Sr=e=>t=>e===t,Rn=(e,t)=>rn(e)&&Gn(e,t,(n,r)=>un(n)===r),se=tr("string"),rn=tr("object"),Sn=e=>Rn(e,Object),ct=tr("array"),Tt=Sr(null),hr=ni("boolean"),on=Sr(void 0),Wt=e=>e==null,ie=e=>!Wt(e),dt=ni("function"),Jt=ni("number"),ho=(e,t)=>{if(ct(e)){for(let n=0,r=e.length;n<r;++n)if(!t(e[n]))return!1;return!0}return!1},$e=()=>{},pn=(e,t)=>(...n)=>e(t.apply(null,n)),ri=(e,t)=>n=>e(t(n)),ce=e=>()=>e,En=e=>e,Er=(e,t)=>e===t;function _e(e,...t){return(...n)=>{const r=t.concat(n);return e.apply(null,r)}}const Jr=e=>t=>!e(t),Hi=e=>()=>{throw new Error(e)},go=e=>e(),Z=e=>{e()},ht=ce(!1),Zt=ce(!0);class S{constructor(t,n){this.tag=t,this.value=n}static some(t){return new S(!0,t)}static none(){return S.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?S.some(t(this.value)):S.none()}bind(t){return this.tag?t(this.value):S.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:S.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return ie(t)?S.some(t):S.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}S.singletonNone=new S(!1);const ln=Array.prototype.slice,ns=Array.prototype.indexOf,Lr=Array.prototype.push,Io=(e,t)=>ns.call(e,t),fe=(e,t)=>Io(e,t)>-1,yt=(e,t)=>{for(let n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1},Me=(e,t)=>{const n=e.length,r=new Array(n);for(let o=0;o<n;o++){const s=e[o];r[o]=t(s,o)}return r},Q=(e,t)=>{for(let n=0,r=e.length;n<r;n++)t(e[n],n)},rs=(e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)},Kn=(e,t)=>{const n=[],r=[];for(let o=0,s=e.length;o<s;o++){const i=e[o];(t(i,o)?n:r).push(i)}return{pass:n,fail:r}},De=(e,t)=>{const n=[];for(let r=0,o=e.length;r<o;r++){const s=e[r];t(s,r)&&n.push(s)}return n},Nr=(e,t,n)=>(rs(e,(r,o)=>{n=t(n,r,o)}),n),bn=(e,t,n)=>(Q(e,(r,o)=>{n=t(n,r,o)}),n),oi=(e,t,n)=>{for(let r=0,o=e.length;r<o;r++){const s=e[r];if(t(s,r))return S.some(s);if(n(s,r))break}return S.none()},Mt=(e,t)=>oi(e,t,ht),he=(e,t)=>{for(let n=0,r=e.length;n<r;n++)if(t(e[n],n))return S.some(n);return S.none()},Be=e=>{const t=[];for(let n=0,r=e.length;n<r;++n){if(!ct(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Lr.apply(t,e[n])}return t},gr=(e,t)=>Be(Me(e,t)),Dn=(e,t)=>{for(let n=0,r=e.length;n<r;++n)if(t(e[n],n)!==!0)return!1;return!0},Fn=e=>{const t=ln.call(e,0);return t.reverse(),t},ot=(e,t)=>De(e,n=>!fe(t,n)),Ar=(e,t)=>{const n={};for(let r=0,o=e.length;r<o;r++){const s=e[r];n[String(s)]=t(s,r)}return n},eo=(e,t)=>{const n=ln.call(e,0);return n.sort(t),n},ft=(e,t)=>t>=0&&t<e.length?S.some(e[t]):S.none(),en=e=>ft(e,0),Un=e=>ft(e,e.length-1),xt=dt(Array.from)?Array.from:e=>ln.call(e),nr=(e,t)=>{for(let n=0;n<e.length;n++){const r=t(e[n],n);if(r.isSome())return r}return S.none()},pr=(e,t)=>{const n=[],r=dt(t)?o=>yt(n,s=>t(s,o)):o=>fe(n,o);for(let o=0,s=e.length;o<s;o++){const i=e[o];r(i)||n.push(i)}return n},Ct=Object.keys,Br=Object.hasOwnProperty,it=(e,t)=>{const n=Ct(e);for(let r=0,o=n.length;r<o;r++){const s=n[r];t(e[s],s)}},Ir=(e,t)=>wc(e,(n,r)=>({k:r,v:t(n,r)})),wc=(e,t)=>{const n={};return it(e,(r,o)=>{const s=t(r,o);n[s.k]=s.v}),n},Ea=e=>(t,n)=>{e[n]=t},os=(e,t,n,r)=>{it(e,(o,s)=>{(t(o,s)?n:r)(o,s)})},Vt=(e,t)=>{const n={};return os(e,t,Ea(n),$e),n},to=(e,t)=>{const n=[];return it(e,(r,o)=>{n.push(t(r,o))}),n},Fo=e=>to(e,En),St=(e,t)=>He(e,t)?S.from(e[t]):S.none(),He=(e,t)=>Br.call(e,t),no=(e,t)=>He(e,t)&&e[t]!==void 0&&e[t]!==null,Na=e=>{const t={};return Q(e,n=>{t[n]={}}),Ct(t)},Uo=e=>e.length!==void 0,ss=Array.isArray,Yi=(e,t,n)=>{if(!e)return!1;if(n=n||e,Uo(e)){for(let r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e)===!1)return!1}else for(const r in e)if(He(e,r)&&t.call(n,e[r],r,e)===!1)return!1;return!0},$i=(e,t)=>{const n=[];return Yi(e,(r,o)=>{n.push(t(r,o,e))}),n},Ts=(e,t)=>{const n=[];return Yi(e,(r,o)=>{t&&!t(r,o,e)||n.push(r)}),n},si=(e,t,n,r)=>{let o=on(n)?e[0]:n;for(let s=0;s<e.length;s++)o=t.call(r,o,e[s],s);return o},bl=(e,t,n)=>{for(let r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return r;return-1},br=e=>e[e.length-1],Nn=e=>{let t,n=!1;return(...r)=>(n||(n=!0,t=e.apply(null,r)),t)},Os=()=>is(0,0),is=(e,t)=>({major:e,minor:t}),Xn={nu:is,detect:(e,t)=>{const n=String(t).toLowerCase();return e.length===0?Os():((r,o)=>{const s=((a,l)=>{for(let c=0;c<a.length;c++){const d=a[c];if(d.test(l))return d}})(r,o);if(!s)return{major:0,minor:0};const i=a=>Number(o.replace(s,"$"+a));return is(i(1),i(2))})(e,n)},unknown:Os},zi=(e,t)=>{const n=String(t).toLowerCase();return Mt(e,r=>r.search(n))},Rs=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,jo=(e,t)=>_t(e,t)?((n,r)=>n.substring(r))(e,t.length):e,gt=(e,t,n=0,r)=>{const o=e.indexOf(t,n);return o!==-1&&(!!on(r)||o+t.length<=r)},_t=(e,t)=>Rs(e,t,0),Zn=(e,t)=>Rs(e,t,e.length-t.length),Mn=e=>t=>t.replace(e,""),Fr=Mn(/^\s+|\s+$/g),Ho=Mn(/^\s+/g),po=Mn(/\s+$/g),jn=e=>e.length>0,ro=e=>!jn(e),as=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?S.none():S.some(n)},Ot=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,rr=e=>t=>gt(t,e),Wi=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>gt(e,"edge/")&&gt(e,"chrome")&&gt(e,"safari")&&gt(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ot],search:e=>gt(e,"chrome")&&!gt(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>gt(e,"msie")||gt(e,"trident")},{name:"Opera",versionRegexes:[Ot,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:rr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:rr("firefox")},{name:"Safari",versionRegexes:[Ot,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(gt(e,"safari")||gt(e,"mobile/"))&&gt(e,"applewebkit")}],Aa=[{name:"Windows",search:rr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>gt(e,"iphone")||gt(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:rr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:rr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:rr("linux"),versionRegexes:[]},{name:"Solaris",search:rr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:rr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:rr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ds={browsers:ce(Wi),oses:ce(Aa)},oo="Edge",ii="Chromium",Ur="Opera",ai="Firefox",Ta="Safari",Oa=e=>{const t=e.current,n=e.version,r=o=>()=>t===o;return{current:t,version:n,isEdge:r(oo),isChromium:r(ii),isIE:r("IE"),isOpera:r(Ur),isFirefox:r(ai),isSafari:r(Ta)}},vl=()=>Oa({current:void 0,version:Xn.unknown()}),li=Oa,ci=(ce(oo),ce(ii),ce("IE"),ce(Ur),ce(ai),ce(Ta),"Windows"),jr="Android",or="Linux",Yo="macOS",sr="Solaris",Vi="FreeBSD",di="ChromeOS",Hn=e=>{const t=e.current,n=e.version,r=o=>()=>t===o;return{current:t,version:n,isWindows:r(ci),isiOS:r("iOS"),isAndroid:r(jr),isMacOS:r(Yo),isLinux:r(or),isSolaris:r(sr),isFreeBSD:r(Vi),isChromeOS:r(di)}},bo=()=>Hn({current:void 0,version:Xn.unknown()}),Ms=Hn,ls=(ce(ci),ce("iOS"),ce(jr),ce(or),ce(Yo),ce(sr),ce(Vi),ce(di),e=>window.matchMedia(e).matches);let qi=Nn(()=>((e,t,n)=>{const r=Ds.browsers(),o=Ds.oses(),s=t.bind(l=>((c,d)=>nr(d.brands,m=>{const h=m.brand.toLowerCase();return Mt(c,v=>{var g;return h===((g=v.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(v=>({current:v.name,version:Xn.nu(parseInt(m.version,10),0)}))}))(r,l)).orThunk(()=>((l,c)=>zi(l,c).map(d=>{const m=Xn.detect(d.versionRegexes,c);return{current:d.name,version:m}}))(r,e)).fold(vl,li),i=((l,c)=>zi(l,c).map(d=>{const m=Xn.detect(d.versionRegexes,c);return{current:d.name,version:m}}))(o,e).fold(bo,Ms),a=((l,c,d,m)=>{const h=l.isiOS()&&/ipad/i.test(d)===!0,v=l.isiOS()&&!h,g=l.isiOS()||l.isAndroid(),y=g||m("(pointer:coarse)"),p=h||!v&&g&&m("(min-device-width:768px)"),_=v||g&&!p,k=c.isSafari()&&l.isiOS()&&/safari/i.test(d)===!1,x=!_&&!p&&!k;return{isiPad:ce(h),isiPhone:ce(v),isTablet:ce(p),isPhone:ce(_),isTouch:ce(y),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:ce(k),isDesktop:ce(x)}})(i,s,e,n);return{browser:s,os:i,deviceType:a}})(window.navigator.userAgent,S.from(window.navigator.userAgentData),ls));const pt=()=>qi(),cs=window.navigator.userAgent,vo=pt(),ir=vo.browser,mn=vo.os,yo=vo.deviceType,_o=cs.indexOf("Windows Phone")!==-1,Qe={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:ir.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!ir.isIE(),windowsPhone:_o,browser:{current:ir.current,version:ir.version,isChromium:ir.isChromium,isEdge:ir.isEdge,isFirefox:ir.isFirefox,isIE:ir.isIE,isOpera:ir.isOpera,isSafari:ir.isSafari},os:{current:mn.current,version:mn.version,isAndroid:mn.isAndroid,isChromeOS:mn.isChromeOS,isFreeBSD:mn.isFreeBSD,isiOS:mn.isiOS,isLinux:mn.isLinux,isMacOS:mn.isMacOS,isSolaris:mn.isSolaris,isWindows:mn.isWindows},deviceType:{isDesktop:yo.isDesktop,isiPad:yo.isiPad,isiPhone:yo.isiPhone,isPhone:yo.isPhone,isTablet:yo.isTablet,isTouch:yo.isTouch,isWebView:yo.isWebView}},Gi=/^\s*|\s*$/g,$o=e=>Wt(e)?"":(""+e).replace(Gi,""),Ps=function(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),Yi(e,(o,s)=>t.call(r,o,s,n)!==!1&&(Ps(o,t,n,r),!0)))},oe={trim:$o,isArray:ss,is:(e,t)=>t?!(t!=="array"||!ss(e))||typeof e===t:e!==void 0,toArray:e=>{if(ss(e))return e;{const t=[];for(let n=0,r=e.length;n<r;n++)t[n]=e[n];return t}},makeMap:(e,t,n={})=>{const r=se(e)?e.split(t||","):e||[];let o=r.length;for(;o--;)n[r[o]]={};return n},each:Yi,map:$i,grep:Ts,inArray:(e,t)=>{if(e){for(let n=0,r=e.length;n<r;n++)if(e[n]===t)return n}return-1},hasOwn:He,extend:(e,...t)=>{for(let n=0;n<t.length;n++){const r=t[n];for(const o in r)if(He(r,o)){const s=r[o];s!==void 0&&(e[o]=s)}}return e},walk:Ps,resolve:(e,t=window)=>{const n=e.split(".");for(let r=0,o=n.length;r<o&&(t=t[n[r]]);r++);return t},explode:(e,t)=>ct(e)?e:e===""?[]:$i(e.split(t||","),$o),_addCacheSuffix:e=>{const t=Qe.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},ds=(e,t,n=Er)=>e.exists(r=>n(r,t)),Ra=(e,t,n=Er)=>Bt(e,t,n).getOr(e.isNone()&&t.isNone()),Bt=(e,t,n)=>e.isSome()&&t.isSome()?S.some(n(e.getOrDie(),t.getOrDie())):S.none(),Pn=(e,t)=>e?S.some(t):S.none(),yl=typeof window<"u"?window:Function("return this;")(),Ki=(e,t)=>((n,r)=>{let o=r??yl;for(let s=0;s<n.length&&o!=null;++s)o=o[n[s]];return o})(e.split("."),t),Xi=Object.getPrototypeOf,ui=e=>{const t=Ki("ownerDocument.defaultView",e);return rn(e)&&((n=>((r,o)=>{const s=((i,a)=>Ki(i,a))(r,o);if(s==null)throw new Error(r+" not available on this browser");return s})("HTMLElement",n))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Xi(e).constructor.name))},Je=e=>e.dom.nodeName.toLowerCase(),mi=e=>e.dom.nodeType,zo=e=>t=>mi(t)===e,fi=e=>Yn(e)&&ui(e.dom),Yn=zo(1),sn=zo(3),Zi=zo(9),Qi=zo(11),us=e=>t=>Yn(t)&&Je(t)===e,Wo=(e,t,n)=>{if(!(se(n)||hr(n)||Jt(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},tn=(e,t,n)=>{Wo(e.dom,t,n)},Hr=(e,t)=>{const n=e.dom;it(t,(r,o)=>{Wo(n,o,r)})},cn=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},vn=(e,t)=>S.from(cn(e,t)),hi=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},dn=(e,t)=>{e.dom.removeAttribute(t)},Ls=e=>bn(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),gi=(e,t)=>{const n=cn(e,t);return n===void 0||n===""?[]:n.split(" ")},Vo=e=>e.dom.classList!==void 0,Yr=e=>gi(e,"class"),pi=(e,t)=>((n,r,o)=>{const s=gi(n,r).concat([o]);return tn(n,r,s.join(" ")),!0})(e,"class",t),Ji=(e,t)=>((n,r,o)=>{const s=De(gi(n,r),i=>i!==o);return s.length>0?tn(n,r,s.join(" ")):dn(n,r),!1})(e,"class",t),ms=(e,t)=>{Vo(e)?e.dom.classList.add(t):pi(e,t)},ea=e=>{(Vo(e)?e.dom.classList:Yr(e)).length===0&&dn(e,"class")},ar=(e,t)=>{Vo(e)?e.dom.classList.remove(t):Ji(e,t),ea(e)},so=(e,t)=>Vo(e)&&e.dom.classList.contains(t),Qn=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},$r=(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const r="HTML does not have a single root node";throw console.error(r,e),new Error(r)}return Qn(n.childNodes[0])},Ft=(e,t)=>{const n=(t||document).createElement(e);return Qn(n)},zr=(e,t)=>{const n=(t||document).createTextNode(e);return Qn(n)},M=Qn,_l=(e,t,n)=>S.from(e.dom.elementFromPoint(t,n)).map(Qn),qo=(e,t)=>{const n=[],r=s=>(n.push(s),t(s));let o=t(e);do o=o.bind(r);while(o.isSome());return n},fn=(e,t)=>{const n=e.dom;if(n.nodeType!==1)return!1;{const r=n;if(r.matches!==void 0)return r.matches(t);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(t);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(t);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},fs=e=>e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11||e.childElementCount===0,at=(e,t)=>e.dom===t.dom,vr=(e,t)=>{const n=e.dom,r=t.dom;return n!==r&&n.contains(r)},hs=e=>M(e.dom.ownerDocument),Wr=e=>Zi(e)?e:hs(e),ut=e=>M(Wr(e).dom.defaultView),u=e=>S.from(e.dom.parentNode).map(M),b=e=>S.from(e.dom.parentElement).map(M),w=(e,t)=>{const n=dt(t)?t:ht;let r=e.dom;const o=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const s=r.parentNode,i=M(s);if(o.push(i),n(i)===!0)break;r=s}return o},E=e=>S.from(e.dom.previousSibling).map(M),I=e=>S.from(e.dom.nextSibling).map(M),K=e=>Fn(qo(e,E)),J=e=>qo(e,I),le=e=>Me(e.dom.childNodes,M),we=(e,t)=>{const n=e.dom.childNodes;return S.from(n[t]).map(M)},ke=e=>we(e,0),Ge=e=>we(e,e.dom.childNodes.length-1),Ke=e=>e.dom.childNodes.length,It=e=>Qi(e)&&ie(e.dom.host),qt=e=>M(e.dom.getRootNode()),yr=e=>It(e)?e:(t=>{const n=t.dom.head;if(n==null)throw new Error("Head is not available yet");return M(n)})(Wr(e)),An=e=>M(e.dom.host),Cc=e=>{if(ie(e.target)){const t=M(e.target);if(Yn(t)&&Gd(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return en(n)}}return S.from(e.target)},Gd=e=>ie(e.dom.shadowRoot),bi=e=>{const t=sn(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return(r=>{const o=qt(r);return It(o)?S.some(o):S.none()})(M(t)).fold(()=>n.body.contains(t),ri(bi,An))};var Kd=(e,t,n,r,o)=>e(n,r)?S.some(n):dt(o)&&o(n)?S.none():t(n,r,o);const gs=(e,t,n)=>{let r=e.dom;const o=dt(n)?n:ht;for(;r.parentNode;){r=r.parentNode;const s=M(r);if(t(s))return S.some(s);if(o(s))break}return S.none()},Bs=(e,t,n)=>Kd((r,o)=>o(r),gs,e,t,n),ta=(e,t)=>{const n=r=>{for(let o=0;o<r.childNodes.length;o++){const s=M(r.childNodes[o]);if(t(s))return S.some(s);const i=n(r.childNodes[o]);if(i.isSome())return i}return S.none()};return n(e.dom)},Da=(e,t,n)=>gs(e,r=>fn(r,t),n),wl=(e,t)=>((n,r)=>{const o=r===void 0?document:r.dom;return fs(o)?S.none():S.from(o.querySelector(n)).map(M)})(t,e),vi=(e,t,n)=>Kd((r,o)=>fn(r,o),Da,e,t,n),yi=(e,t=!1)=>{return bi(e)?e.dom.isContentEditable:(n=e,vi(n,"[contenteditable]")).fold(ce(t),r=>ef(r)==="true");var n},ef=e=>e.dom.contentEditable,Ma=(e,t)=>{e.dom.contentEditable=t?"true":"false"},na=e=>e.style!==void 0&&dt(e.style.getPropertyValue),kc=(e,t,n)=>{if(!se(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);na(e)&&e.style.setProperty(t,n)},Pa=(e,t,n)=>{const r=e.dom;kc(r,t,n)},La=(e,t)=>{const n=e.dom;it(t,(r,o)=>{kc(n,o,r)})},io=(e,t)=>{const n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return r!==""||bi(e)?r:Vr(n,t)},Vr=(e,t)=>na(e)?e.style.getPropertyValue(t):"",Cl=(e,t)=>{const n=e.dom,r=Vr(n,t);return S.from(r).filter(o=>o.length>0)},xc=e=>{const t={},n=e.dom;if(na(n))for(let r=0;r<n.style.length;r++){const o=n.style.item(r);t[o]=n.style[o]}return t},Sc=(e,t)=>{((n,r)=>{na(n)&&n.style.removeProperty(r)})(e.dom,t),ds(vn(e,"style").map(Fr),"")&&dn(e,"style")},lr=(e,t)=>{u(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},ps=(e,t)=>{I(e).fold(()=>{u(e).each(n=>{hn(n,t)})},n=>{lr(n,t)})},Ec=(e,t)=>{ke(e).fold(()=>{hn(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},hn=(e,t)=>{e.dom.appendChild(t.dom)},Xd=(e,t)=>{lr(e,t),hn(t,e)},_i=(e,t)=>{Q(t,n=>{hn(e,n)})},ra=e=>{e.dom.textContent="",Q(le(e),t=>{Pt(t)})},Pt=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},bs=e=>{const t=le(e);var n,r;t.length>0&&(n=e,Q(r=t,(o,s)=>{const i=s===0?n:r[s-1];ps(i,o)})),Pt(e)},Ba=e=>Me(e,M),Zd=e=>e.dom.innerHTML,kl=(e,t)=>{const n=hs(e).dom,r=M(n.createDocumentFragment()),o=((s,i)=>{const a=(i||document).createElement("div");return a.innerHTML=s,le(M(a))})(t,n);_i(r,o),ra(e),hn(e,r)},wi=(e,t,n,r)=>((o,s,i,a,l)=>{const c=((d,m)=>h=>{d(h)&&m((v=>{const g=M(Cc(v).getOr(v.target)),y=()=>v.stopPropagation(),p=()=>v.preventDefault(),_=pn(p,y);return((k,x,A,N,O,L,P)=>({target:k,x,y:A,stop:N,prevent:O,kill:L,raw:P}))(g,v.clientX,v.clientY,y,p,_,v)})(h))})(i,a);return o.dom.addEventListener(s,c,!1),{unbind:_e(vs,o,s,c,!1)}})(e,t,n,r),vs=(e,t,n,r)=>{e.dom.removeEventListener(t,n,r)},Nc=(e,t)=>({left:e,top:t,translate:(n,r)=>Nc(e+n,t+r)}),oa=Nc,Ia=(e,t)=>e!==void 0?e:t!==void 0?t:0,xl=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?oa(n.offsetLeft,n.offsetTop):bi(e)?(r=>{const o=r.getBoundingClientRect();return oa(o.left,o.top)})(t):oa(0,0)},Sl=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return oa(n,r)},Ac=(e,t,n)=>{const r=(n!==void 0?n.dom:document).defaultView;r&&r.scrollTo(e,t)},Qd=(e,t)=>{pt().browser.isSafari()&&dt(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},Jd=(e,t,n,r)=>({x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}),eu=e=>{const t=e===void 0?window:e,n=t.document,r=Sl(M(n));return(o=>{const s=o===void 0?window:o;return pt().browser.isFirefox()?S.none():S.from(s.visualViewport)})(t).fold(()=>{const o=t.document.documentElement,s=o.clientWidth,i=o.clientHeight;return Jd(r.left,r.top,s,i)},o=>Jd(Math.max(o.pageLeft,r.left),Math.max(o.pageTop,r.top),o.width,o.height))},Tc=(e,t)=>{let n=[];return Q(le(e),r=>{t(r)&&(n=n.concat([r])),n=n.concat(Tc(r,t))}),n},Ln=(e,t)=>((n,r)=>{const o=r===void 0?document:r.dom;return fs(o)?[]:Me(o.querySelectorAll(n),M)})(t,e),tu=(e,t,n)=>gs(e,t,n).isSome(),tf=(e,t)=>((n,r)=>{const o=n.dom;return o.parentNode?((s,i)=>Mt(s.dom.childNodes,a=>i(M(a))).map(M))(M(o.parentNode),s=>!at(n,s)&&r(s)):S.none()})(e,t).isSome(),nu=(e,t)=>ta(e,t).isSome();class Cn{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,r,o){if(t){if(!o&&t[n])return t[n];if(t!==this.rootNode){let s=t[r];if(s)return s;for(let i=t.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(s=i[r],s)return s}}}findPreviousNode(t,n){if(t){const r=t.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!n){for(let s=r.lastChild;s;s=s.lastChild)if(!s.lastChild)return s}return r}const o=t.parentNode;if(o&&o!==this.rootNode)return o}}}const Fa="\uFEFF",Ut="\xA0",El=e=>e===Fa,nf=/^[ \t\r\n]*$/,sa=e=>nf.test(e),ru=e=>e===`
`||e==="\r",ou=(e,t=4,n=!0,r=!0)=>{const o=((a,l)=>l<=0?"":new Array(l+1).join(" "))(0,t),s=e.replace(/\t/g,o);return bn(s,(a,l)=>(c=>" \f	\v".indexOf(c)!==-1)(l)||l===Ut?a.pcIsSpace||a.str===""&&n||a.str.length===s.length-1&&r||((c,d)=>d<c.length&&d>=0&&ru(c[d]))(s,a.str.length+1)?{pcIsSpace:!1,str:a.str+Ut}:{pcIsSpace:!0,str:a.str+" "}:{pcIsSpace:ru(l),str:a.str+l},{pcIsSpace:!1,str:""}).str},Ci=e=>t=>!!t&&t.nodeType===e,Nl=e=>!!e&&!Object.getPrototypeOf(e),xe=Ci(1),ys=e=>xe(e)&&fi(M(e)),ki=e=>{const t=e.toLowerCase();return n=>ie(n)&&n.nodeName.toLowerCase()===t},Tr=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const r=n.nodeName.toLowerCase();return fe(t,r)}return!1}},Ua=(e,t)=>{const n=t.toLowerCase().split(" ");return r=>{if(xe(r)){const o=r.ownerDocument.defaultView;if(o)for(let s=0;s<n.length;s++){const i=o.getComputedStyle(r,null);if((i?i.getPropertyValue(e):null)===n[s])return!0}}return!1}},Is=e=>xe(e)&&e.hasAttribute("data-mce-bogus"),Or=e=>xe(e)&&e.tagName==="TABLE",Al=e=>t=>!!(ys(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),Oc=Tr(["textarea","input"]),ne=Ci(3),rf=Ci(4),xi=Ci(7),Fs=Ci(8),ja=Ci(9),ia=Ci(11),jt=ki("br"),su=ki("img"),qr=Al("true"),Lt=Al("false"),_s=Tr(["td","th"]),Rc=Tr(["td","th","caption"]),wo=Tr(["video","audio","object","embed"]),of=ki("li"),Dc=ki("details"),sf=ki("summary"),aa={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},Si=e=>xe(e)&&e.hasAttribute("data-mce-bookmark"),af=(e,t,n,r)=>ne(e)&&!((o,s,i)=>sa(o.data)&&!((a,l,c)=>{const d=M(l),m=M(a),h=c.getWhitespaceElements();return tu(m,v=>He(h,Je(v)),_e(at,d))})(o,s,i))(e,t,n)&&(!r.includeZwsp||!(o=>{for(const s of o)if(!El(s))return!1;return!0})(e.data)),Mc=(e,t,n,r)=>dt(r.isContent)&&r.isContent(t)||((o,s)=>xe(o)&&He(s.getNonEmptyElements(),o.nodeName))(t,e)||Si(t)||(o=>xe(o)&&o.nodeName==="A"&&!o.hasAttribute("href")&&(o.hasAttribute("name")||o.hasAttribute("id")))(t)||af(t,n,e,r)||Lt(t)||qr(t)&&(o=>b(M(o)).exists(s=>!yi(s)))(t),ws=(e,t,n)=>{const r={...aa,...n};if(r.checkRootAsContent&&Mc(e,t,t,r))return!1;let o=t.firstChild,s=0;if(!o)return!0;const i=new Cn(o,t);do{if(r.skipBogus&&xe(o)){const a=o.getAttribute("data-mce-bogus");if(a){o=i.next(a==="all");continue}}if(Fs(o))o=i.next(!0);else if(jt(o))s++,o=i.next();else{if(Mc(e,o,t,r))return!1;o=i.next()}}while(o);return s<=1},$n=(e,t,n)=>ws(e,t.dom,{checkRootAsContent:!0,...n}),iu=(e,t,n)=>Mc(e,t,t,{includeZwsp:aa.includeZwsp,...n}),kn=e=>{let t=e;return{get:()=>t,set:n=>{t=n}}},lf=e=>{const t=kn(S.none()),n=()=>t.get().each(r=>clearInterval(r));return{clear:()=>{n(),t.set(S.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:r=>{n(),t.set(S.some(setInterval(r,e)))}}},Cs=()=>{const e=(t=>{const n=kn(S.none()),r=()=>n.get().each(t);return{clear:()=>{r(),n.set(S.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:o=>{r(),n.set(S.some(o))}}})($e);return{...e,on:t=>e.get().each(t)}},Pc=e=>{const t=e.toLowerCase();return t==="svg"?"svg":t==="math"?"math":"html"},Ei=e=>Pc(e)!=="html",Tl=e=>Ei(e.nodeName),Ol=e=>Pc(e.nodeName),au=["svg","math"],Go="data-mce-block",Rl=e=>Me((t=>De(Ct(t),n=>!/[A-Z]/.test(n)))(e),t=>{const n=CSS.escape(t);return`${n}:`+Me(au,r=>`not(${r} ${n})`).join(":")}).join(","),Dl=(e,t)=>ie(t.querySelector(e))?(t.setAttribute(Go,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(Go),!1),Lc=(e,t)=>{const n=Rl(e.getTransparentElements()),r=Rl(e.getBlockElements());return De(t.querySelectorAll(n),o=>Dl(r,o))},Ml=(e,t,n)=>{var r;const o=n?"lastChild":"firstChild";for(let s=t[o];s;s=s[o])if(ws(e,s,{checkRootAsContent:!0}))return void((r=s.parentNode)===null||r===void 0||r.removeChild(s))},lu=(e,t,n)=>{const r=e.getBlockElements(),o=M(t),s=a=>Je(a)in r,i=a=>at(a,o);Q(Ba(n),a=>{gs(a,s,i).each(l=>{const c=((d,m)=>De(le(d),h=>s(h)&&!e.isValidChild(Je(l),Je(h))))(a);if(c.length>0){const d=b(l);Q(c,m=>{gs(m,s,i).each(h=>{((v,g,y)=>{const p=document.createRange(),_=g.parentNode;if(_){p.setStartBefore(g),p.setEndBefore(y);const k=p.extractContents();Ml(v,k,!0),p.setStartAfter(y),p.setEndAfter(g);const x=p.extractContents();Ml(v,x,!1),ws(v,k,{checkRootAsContent:!0})||_.insertBefore(k,g),ws(v,y,{checkRootAsContent:!0})||_.insertBefore(y,g),ws(v,x,{checkRootAsContent:!0})||_.insertBefore(x,g),_.removeChild(g)}})(e,h.dom,m.dom)})}),d.each(m=>Lc(e,m.dom))}})})},Ha=(e,t)=>{const n=Lc(e,t);lu(e,t,n),((r,o,s)=>{Q([...s,...Ni(r,o)?[o]:[]],i=>Q(Ln(M(i),i.nodeName.toLowerCase()),a=>{df(r,a.dom)&&bs(a)}))})(e,t,n)},cf=(e,t)=>{if(Bc(e,t)){const n=Rl(e.getBlockElements());Dl(n,t)}},ks=e=>e.hasAttribute(Go),Ko=(e,t)=>He(e.getTransparentElements(),t),Bc=(e,t)=>xe(t)&&Ko(e,t.nodeName),Ni=(e,t)=>Bc(e,t)&&ks(t),df=(e,t)=>Bc(e,t)&&!ks(t),Ic=(e,t)=>t.type===1&&Ko(e,t.name)&&se(t.attr(Go)),uf=pt().browser,cu=e=>Mt(e,Yn),du=(e,t)=>e.children&&fe(e.children,t),uu=(e,t={})=>{let n=0;const r={},o=M(e),s=Wr(o),i=m=>{hn(yr(o),m)},a=m=>{const h=yr(o);wl(h,"#"+m).each(Pt)},l=m=>St(r,m).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),c=m=>new Promise((h,v)=>{let g;const y=oe._addCacheSuffix(m),p=l(y);r[y]=p,p.count++;const _=(N,O)=>{Q(N,Z),p.status=O,p.passed=[],p.failed=[],g&&(g.onload=null,g.onerror=null,g=null)},k=()=>_(p.passed,2),x=()=>_(p.failed,3);if(h&&p.passed.push(h),v&&p.failed.push(v),p.status===1)return;if(p.status===2)return void k();if(p.status===3)return void x();p.status=1;const A=Ft("link",s.dom);Hr(A,{rel:"stylesheet",type:"text/css",id:p.id}),t.contentCssCors&&tn(A,"crossOrigin","anonymous"),t.referrerPolicy&&tn(A,"referrerpolicy",t.referrerPolicy),g=A.dom,g.onload=k,g.onerror=x,i(A),tn(A,"href",y)}),d=m=>{const h=oe._addCacheSuffix(m);St(r,h).each(v=>{--v.count==0&&(delete r[h],a(v.id))})};return{load:c,loadRawCss:(m,h)=>{const v=l(m);r[m]=v,v.count++;const g=Ft("style",s.dom);Hr(g,{rel:"stylesheet",type:"text/css",id:v.id,"data-mce-key":m}),g.dom.innerHTML=h,i(g)},loadAll:m=>Promise.allSettled(Me(m,h=>c(h).then(ce(h)))).then(h=>{const v=Kn(h,g=>g.status==="fulfilled");return v.fail.length>0?Promise.reject(Me(v.fail,g=>g.reason)):Me(v.pass,g=>g.value)}),unload:d,unloadRawCss:m=>{St(r,m).each(h=>{--h.count==0&&(delete r[m],a(h.id))})},unloadAll:m=>{Q(m,h=>{d(h)})},_setReferrerPolicy:m=>{t.referrerPolicy=m},_setContentCssCors:m=>{t.contentCssCors=m}}},Fc=(()=>{const e=new WeakMap;return{forElement:(t,n)=>{const r=qt(t).dom;return S.from(e.get(r)).getOrThunk(()=>{const o=uu(r,n);return e.set(r,o),o})}}})(),Ya=(e,t)=>ie(e)&&(iu(t,e)||t.isInline(e.nodeName.toLowerCase())),$a=e=>(t=>t.nodeName.toLowerCase()==="span")(e)&&e.getAttribute("data-mce-type")==="bookmark",Uc=(e,t,n,r)=>{var o;const s=r||t;if(xe(t)&&$a(t))return t;const i=t.childNodes;for(let a=i.length-1;a>=0;a--)Uc(e,i[a],n,s);if(xe(t)){const a=t.childNodes;a.length===1&&$a(a[0])&&((o=t.parentNode)===null||o===void 0||o.insertBefore(a[0],t))}return(a=>ia(a)||ja(a))(t)||iu(n,t)||(a=>!!xe(a)&&a.childNodes.length>0)(t)||((a,l,c)=>ne(a)&&a.data.length>0&&((d,m,h)=>{const v=new Cn(d,m).prev(!1),g=new Cn(d,m).next(!1),y=on(v)||Ya(v,h),p=on(g)||Ya(g,h);return y&&p})(a,l,c))(t,s,n)||e.remove(t),t},mf=oe.makeMap,Us=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,T=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\"\']/g,C=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,R={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},z={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},V={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},ee=(e,t)=>{const n={};if(e){const r=e.split(",");t=t||10;for(let o=0;o<r.length;o+=2){const s=String.fromCharCode(parseInt(r[o],t));if(!z[s]){const i="&"+r[o+1]+";";n[s]=i,n[i]=s}}return n}},ue=ee("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Ne=(e,t)=>e.replace(t?Us:T,n=>z[n]||n),Ue=(e,t)=>e.replace(t?Us:T,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":z[n]||"&#"+n.charCodeAt(0)+";"),je=(e,t,n)=>{const r=n||ue;return e.replace(t?Us:T,o=>z[o]||r[o]||o)},Oe={encodeRaw:Ne,encodeAllRaw:e=>(""+e).replace(f,t=>z[t]||t),encodeNumeric:Ue,encodeNamed:je,getEncodeFunc:(e,t)=>{const n=ee(t)||ue,r=mf(e.replace(/\+/g,","));return r.named&&r.numeric?(o,s)=>o.replace(s?Us:T,i=>z[i]!==void 0?z[i]:n[i]!==void 0?n[i]:i.length>1?"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";":"&#"+i.charCodeAt(0)+";"):r.named?t?(o,s)=>je(o,s,n):je:r.numeric?Ue:Ne},decode:e=>e.replace(C,(t,n)=>n?(n=n.charAt(0).toLowerCase()==="x"?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):R[n]||String.fromCharCode(n):V[t]||ue[t]||(r=>{const o=Ft("div").dom;return o.innerHTML=r,o.textContent||o.innerText||r})(t))},Ve=(e,t)=>(e=oe.trim(e))?e.split(t||" "):[],Ze=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),nt=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),et=e=>{let t,n;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(t+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",n+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(n=[n,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));const r=[t,n].join(" ");return{blockContent:t,phrasingContent:n,flowContent:r}},tt=e=>{const{blockContent:t,phrasingContent:n,flowContent:r}=et(e),o=s=>Object.freeze(s.split(" "));return Object.freeze({blockContent:o(t),phrasingContent:o(n),flowContent:o(r)})},Qt={html4:Nn(()=>tt("html4")),html5:Nn(()=>tt("html5")),"html5-strict":Nn(()=>tt("html5-strict"))},nn=(e,t)=>{const{blockContent:n,phrasingContent:r,flowContent:o}=Qt[e]();return t==="blocks"?S.some(n):t==="phrasing"?S.some(r):t==="flow"?S.some(o):S.none()},mt=e=>S.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(e)).map(t=>({preset:t[1]==="@",name:t[2]})),Et={},st=oe.makeMap,rt=oe.each,Ht=oe.extend,Gt=oe.explode,Yt=(e,t={})=>{const n=st(e," ",st(e.toUpperCase()," "));return Ht(n,t)},yn=e=>Yt("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),_r=(e,t)=>{if(e){const n={};return se(e)&&(e={"*":e}),rt(e,(r,o)=>{n[o]=n[o.toUpperCase()]=t==="map"?st(r,/[, ]/):Gt(r,/[, ]/)}),n}},zn=(e={})=>{var t;const n={},r={};let o=[];const s={},i={},a=(pe,We,Xe)=>{const Ye=e[pe];if(Ye)return st(Ye,/[, ]/,st(Ye.toUpperCase(),/[, ]/));{let lt=Et[pe];return lt||(lt=Yt(We,Xe),Et[pe]=lt),lt}},l=(t=e.schema)!==null&&t!==void 0?t:"html5",c=(pe=>{const We=nt(pe),{phrasingContent:Xe,flowContent:Ye}=et(pe),lt={},Rt=(Nt,At,an)=>{lt[Nt]={attributes:Ar(At,ce({})),attributesOrder:At,children:Ar(an,ce({}))}},ge=(Nt,At="",an="")=>{const Vn=Ve(an),As=Ve(Nt);let ur=As.length;const Lo=[...We,...Ve(At)];for(;ur--;)Rt(As[ur],Lo.slice(),Vn)},Le=(Nt,At)=>{const an=Ve(Nt),Vn=Ve(At);let As=an.length;for(;As--;){const ur=lt[an[As]];for(let Lo=0,On=Vn.length;Lo<On;Lo++)ur.attributes[Vn[Lo]]={},ur.attributesOrder.push(Vn[Lo])}};return pe!=="html5-strict"&&(Q(Ve("acronym applet basefont big font strike tt"),Nt=>{ge(Nt,"",Xe)}),Q(Ve("center dir isindex noframes"),Nt=>{ge(Nt,"",Ye)})),ge("html","manifest","head body"),ge("head","","base command link meta noscript script style title"),ge("title hr noscript br"),ge("base","href target"),ge("link","href rel media hreflang type sizes hreflang"),ge("meta","name http-equiv content charset"),ge("style","media type scoped"),ge("script","src async defer type charset"),ge("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",Ye),ge("dd div","",Ye),ge("address dt caption","",pe==="html4"?Xe:Ye),ge("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",Xe),ge("blockquote","cite",Ye),ge("ol","reversed start type","li"),ge("ul","","li"),ge("li","value",Ye),ge("dl","","dt dd"),ge("a","href target rel media hreflang type",pe==="html4"?Xe:Ye),ge("q","cite",Xe),ge("ins del","cite datetime",Ye),ge("img","src sizes srcset alt usemap ismap width height"),ge("iframe","src name width height",Ye),ge("embed","src type width height"),ge("object","data type typemustmatch name usemap form width height",[Ye,"param"].join(" ")),ge("param","name value"),ge("map","name",[Ye,"area"].join(" ")),ge("area","alt coords shape href target rel media hreflang type"),ge("table","border","caption colgroup thead tfoot tbody tr"+(pe==="html4"?" col":"")),ge("colgroup","span","col"),ge("col","span"),ge("tbody thead tfoot","","tr"),ge("tr","","td th"),ge("td","colspan rowspan headers",Ye),ge("th","colspan rowspan headers scope abbr",Ye),ge("form","accept-charset action autocomplete enctype method name novalidate target",Ye),ge("fieldset","disabled form name",[Ye,"legend"].join(" ")),ge("label","form for",Xe),ge("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),ge("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",pe==="html4"?Ye:Xe),ge("select","disabled form multiple name required size","option optgroup"),ge("optgroup","disabled label","option"),ge("option","disabled label selected value"),ge("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),ge("menu","type label",[Ye,"li"].join(" ")),ge("noscript","",Ye),pe!=="html4"&&(ge("wbr"),ge("ruby","",[Xe,"rt rp"].join(" ")),ge("figcaption","",Ye),ge("mark rt rp bdi","",Xe),ge("summary","",[Xe,"h1 h2 h3 h4 h5 h6"].join(" ")),ge("canvas","width height",Ye),ge("data","value",Xe),ge("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[Ye,"track source"].join(" ")),ge("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[Ye,"track source"].join(" ")),ge("picture","","img source"),ge("source","src srcset type media sizes"),ge("track","kind src srclang label default"),ge("datalist","",[Xe,"option"].join(" ")),ge("article section nav aside main header footer","",Ye),ge("hgroup","","h1 h2 h3 h4 h5 h6"),ge("figure","",[Ye,"figcaption"].join(" ")),ge("time","datetime",Xe),ge("dialog","open",Ye),ge("command","type label icon disabled checked radiogroup command"),ge("output","for form name",Xe),ge("progress","value max",Xe),ge("meter","value min max low high optimum",Xe),ge("details","open",[Ye,"summary"].join(" ")),ge("keygen","autofocus challenge disabled form keytype name"),Rt("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),pe!=="html5-strict"&&(Le("script","language xml:space"),Le("style","xml:space"),Le("object","declare classid code codebase codetype archive standby align border hspace vspace"),Le("embed","align name hspace vspace"),Le("param","valuetype type"),Le("a","charset name rev shape coords"),Le("br","clear"),Le("applet","codebase archive code object alt name width height align hspace vspace"),Le("img","name longdesc align border hspace vspace"),Le("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Le("font basefont","size color face"),Le("input","usemap align"),Le("select"),Le("textarea"),Le("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Le("ul","type compact"),Le("li","type"),Le("ol dl menu dir","compact"),Le("pre","width xml:space"),Le("hr","align noshade size width"),Le("isindex","prompt"),Le("table","summary width frame rules cellspacing cellpadding align bgcolor"),Le("col","width align char charoff valign"),Le("colgroup","width align char charoff valign"),Le("thead","align char charoff valign"),Le("tr","align char charoff valign bgcolor"),Le("th","axis align char charoff valign nowrap bgcolor width height"),Le("form","accept"),Le("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Le("tfoot","align char charoff valign"),Le("tbody","align char charoff valign"),Le("area","nohref"),Le("body","background bgcolor text link vlink alink")),pe!=="html4"&&(Le("input button select textarea","autofocus"),Le("input textarea","placeholder"),Le("a","download"),Le("link script img","crossorigin"),Le("img","loading"),Le("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),pe!=="html4"&&Q([lt.video,lt.audio],Nt=>{delete Nt.children.audio,delete Nt.children.video}),Q(Ve("a form meter progress dfn"),Nt=>{lt[Nt]&&delete lt[Nt].children[Nt]}),delete lt.caption.children.table,delete lt.script,lt})(l);e.verify_html===!1&&(e.valid_elements="*[*]");const d=_r(e.valid_styles),m=_r(e.invalid_styles,"map"),h=_r(e.valid_classes,"map"),v=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),y=a("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),p=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),_="td th iframe video audio object script code",k=a("non_empty_elements",_+" pre svg textarea summary",y),x=a("move_caret_before_on_enter_elements",_+" table",y),A="h1 h2 h3 h4 h5 h6",N=a("text_block_elements",A+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),O=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",N),L=a("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),P=a("transparent_elements","a ins del canvas map"),j=a("wrap_block_elements","pre "+A);rt("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),pe=>{i[pe]=new RegExp("</"+pe+"[^>]*>","gi")});const $=pe=>{const We=S.from(n["@"]),Xe=/[*?+]/;Q(((Ye,lt)=>{const Rt=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return gr(Ve(lt,","),ge=>{const Le=Rt.exec(ge);if(Le){const Nt=Le[1],At=Le[2],an=Le[3],Vn=Le[4],As=Le[5],ur={attributes:{},attributesOrder:[]};if(Ye.each(Lo=>((On,pl)=>{it(On.attributes,(xa,Qs)=>{pl.attributes[Qs]=xa}),pl.attributesOrder.push(...On.attributesOrder)})(Lo,ur)),Nt==="#"?ur.paddEmpty=!0:Nt==="-"&&(ur.removeEmpty=!0),Vn==="!"&&(ur.removeEmptyAttrs=!0),As&&((Lo,On)=>{const pl=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,xa=/[*?+]/,{attributes:Qs,attributesOrder:Bo}=On;Q(Ve(Lo,"|"),Sa=>{const Ii=pl.exec(Sa);if(Ii){const Js={},Jm=Ii[1],Pr=Ii[2].replace(/[\\:]:/g,":"),_c=Ii[3],wn=Ii[4];if(Jm==="!"&&(On.attributesRequired=On.attributesRequired||[],On.attributesRequired.push(Pr),Js.required=!0),Jm==="-")return delete Qs[Pr],void Bo.splice(oe.inArray(Bo,Pr),1);if(_c&&(_c==="="?(On.attributesDefault=On.attributesDefault||[],On.attributesDefault.push({name:Pr,value:wn}),Js.defaultValue=wn):_c==="~"?(On.attributesForced=On.attributesForced||[],On.attributesForced.push({name:Pr,value:wn}),Js.forcedValue=wn):_c==="<"&&(Js.validValues=oe.makeMap(wn,"?"))),xa.test(Pr)){const Fi=Js;On.attributePatterns=On.attributePatterns||[],Fi.pattern=Ze(Pr),On.attributePatterns.push(Fi)}else Qs[Pr]||Bo.push(Pr),Qs[Pr]=Js}})})(As,ur),an&&(ur.outputName=At),At==="@"){if(!Ye.isNone())return[];Ye=S.some(ur)}return[an?{name:At,element:ur,aliasName:an}:{name:At,element:ur}]}return[]})})(We,pe??""),({name:Ye,element:lt,aliasName:Rt})=>{if(Rt&&(n[Rt]=lt),Xe.test(Ye)){const ge=lt;ge.pattern=Ze(Ye),o.push(ge)}else n[Ye]=lt})},D=pe=>{o=[],Q(Ct(n),We=>{delete n[We]}),$(pe)},B=(pe,We)=>{var Xe,Ye;delete Et.text_block_elements,delete Et.block_elements;const lt=!!We.extends&&!$t(We.extends),Rt=We.extends;if(r[pe]=Rt?r[Rt]:{},s[pe]=Rt??pe,k[pe.toUpperCase()]={},k[pe]={},lt||(O[pe.toUpperCase()]={},O[pe]={}),Rt&&!n[pe]&&n[Rt]){const ge=(Le=>{const Nt=At=>ct(At)?Me(At,Nt):(an=>rn(an)&&an.source&&Object.prototype.toString.call(an)==="[object RegExp]")(At)?new RegExp(At.source,At.flags):rn(At)?Ir(At,Nt):At;return Nt(Le)})(n[Rt]);delete ge.removeEmptyAttrs,delete ge.removeEmpty,n[pe]=ge}else n[pe]={attributesOrder:[],attributes:{}};if(ct(We.attributes)){const ge=Nt=>{Le.attributesOrder.push(Nt),Le.attributes[Nt]={}},Le=(Xe=n[pe])!==null&&Xe!==void 0?Xe:{};delete Le.attributesDefault,delete Le.attributesForced,delete Le.attributePatterns,delete Le.attributesRequired,Le.attributesOrder=[],Le.attributes={},Q(We.attributes,Nt=>{const At=nt(l);mt(Nt).each(({preset:an,name:Vn})=>{an?Vn==="global"&&Q(At,ge):ge(Vn)})}),n[pe]=Le}if(hr(We.padEmpty)){const ge=(Ye=n[pe])!==null&&Ye!==void 0?Ye:{};ge.paddEmpty=We.padEmpty,n[pe]=ge}if(ct(We.children)){const ge={},Le=At=>{ge[At]={}},Nt=At=>{nn(l,At).each(an=>{Q(an,Le)})};Q(We.children,At=>{mt(At).each(({preset:an,name:Vn})=>{an?Nt(Vn):Le(Vn)})}),r[pe]=ge}Rt&&it(r,(ge,Le)=>{ge[Rt]&&(r[Le]=ge=Ht({},r[Le]),ge[pe]=ge[Rt])})},U=pe=>{rn(pe)?it(pe,(We,Xe)=>B(Xe,We)):se(pe)&&(We=>{Q((Xe=>{const Ye=/^(~)?(.+)$/;return gr(Ve(Xe,","),lt=>{const Rt=Ye.exec(lt);return Rt?[{cloneName:Rt[1]==="~"?"span":"div",name:Rt[2]}]:[]})})(We??""),({name:Xe,cloneName:Ye})=>{B(Xe,{extends:Ye})})})(pe)},X=pe=>{Q((We=>{const Xe=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return gr(Ve(We,","),Ye=>{const lt=Xe.exec(Ye);if(lt){const Rt=lt[1];return[{operation:Rt?(Le=>Le==="-"?"remove":"add")(Rt):"replace",name:lt[2],validChildren:gr(Ve(lt[3],"|"),Le=>mt(Le).toArray())}]}return[]})})(pe??""),({operation:We,name:Xe,validChildren:Ye})=>{const lt=We==="replace"?{"#comment":{}}:r[Xe],Rt=ge=>{We==="remove"?delete lt[ge]:lt[ge]={}};Q(Ye,({preset:ge,name:Le})=>{ge?(Nt=>{nn(l,Nt).each(At=>{Q(At,Rt)})})(Le):Rt(Le)}),r[Xe]=lt})},re=pe=>{const We=n[pe];if(We)return We;let Xe=o.length;for(;Xe--;){const Ye=o[Xe];if(Ye.pattern.test(pe))return Ye}},te=ce(d),ye=ce(m),Ee=ce(h),Ae=ce(p),Re=ce(O),me=ce(N),Ce=ce(L),F=ce(Object.seal(y)),H=ce(g),q=ce(k),W=ce(x),de=ce(v),ae=ce(P),Te=ce(j),Pe=ce(Object.seal(i)),ze=(pe,We)=>{const Xe=re(pe);if(Xe){if(!We)return!0;{if(Xe.attributes[We])return!0;const Ye=Xe.attributePatterns;if(Ye){let lt=Ye.length;for(;lt--;)if(Ye[lt].pattern.test(We))return!0}}}return!1},$t=pe=>He(Re(),pe),zt=pe=>!_t(pe,"#")&&ze(pe)&&!$t(pe),mo=ce(s);return e.valid_elements?(D(e.valid_elements),rt(c,(pe,We)=>{r[We]=pe.children})):(rt(c,(pe,We)=>{n[We]={attributes:pe.attributes,attributesOrder:pe.attributesOrder},r[We]=pe.children}),rt(Ve("strong/b em/i"),pe=>{const We=Ve(pe,"/");n[We[1]].outputName=We[0]}),rt(L,(pe,We)=>{n[We]&&(e.padd_empty_block_inline_children&&(n[We].paddInEmptyBlock=!0),n[We].removeEmpty=!0)}),rt(Ve("ol ul blockquote a table tbody"),pe=>{n[pe]&&(n[pe].removeEmpty=!0)}),rt(Ve("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),pe=>{n[pe]&&(n[pe].paddEmpty=!0)}),rt(Ve("span"),pe=>{n[pe].removeEmptyAttrs=!0})),delete n.svg,U(e.custom_elements),X(e.valid_children),$(e.extended_valid_elements),X("+ol[ul|ol],+ul[ul|ol]"),rt({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(pe,We)=>{n[We]&&(n[We].parentsRequired=Ve(pe))}),e.invalid_elements&&rt(Gt(e.invalid_elements),pe=>{n[pe]&&delete n[pe]}),re("span")||$("span[!data-mce-type|*]"),{type:l,children:r,elements:n,getValidStyles:te,getValidClasses:Ee,getBlockElements:Re,getInvalidStyles:ye,getVoidElements:F,getTextBlockElements:me,getTextInlineElements:Ce,getBoolAttrs:Ae,getElementRule:re,getSelfClosingElements:H,getNonEmptyElements:q,getMoveCaretBeforeOnEnterElements:W,getWhitespaceElements:de,getTransparentElements:ae,getSpecialElements:Pe,isValidChild:(pe,We)=>{const Xe=r[pe.toLowerCase()];return!(!Xe||!Xe[We.toLowerCase()])},isValid:ze,isBlock:$t,isInline:zt,isWrapper:pe=>He(Te(),pe)||zt(pe),getCustomElements:mo,addValidElements:$,setValidElements:D,addCustomElements:U,addValidChildren:X}},Jn=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},ao=e=>(t=>{return{value:(n=t,jo(n,"#").toUpperCase())};var n})(Jn(e.red)+Jn(e.green)+Jn(e.blue)),Gr=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,gn=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Co=(e,t,n,r)=>((o,s,i,a)=>({red:o,green:s,blue:i,alpha:a}))(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseFloat(r)),ko=e=>{const t=Gr.exec(e);if(t!==null)return S.some(Co(t[1],t[2],t[3],"1"));const n=gn.exec(e);return n!==null?S.some(Co(n[1],n[2],n[3],n[4])):S.none()},la=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,_n=e=>ko(e).map(ao).map(t=>"#"+t.value).getOr(e),Kt=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,s={};let i,a;const l=Fa;t&&(i=t.getValidStyles(),a=t.getInvalidStyles());const c=`\\" \\' \\; \\: ; : \uFEFF`.split(" ");for(let m=0;m<c.length;m++)s[c[m]]=l+m,s[l+m]=c[m];const d={parse:m=>{const h={};let v=!1;const g=e.url_converter,y=e.url_converter_scope||d,p=(D,B,U)=>{const X=h[D+"-top"+B];if(!X)return;const re=h[D+"-right"+B];if(!re)return;const te=h[D+"-bottom"+B];if(!te)return;const ye=h[D+"-left"+B];if(!ye)return;const Ee=[X,re,te,ye];let Ae=Ee.length-1;for(;Ae--&&Ee[Ae]===Ee[Ae+1];);Ae>-1&&U||(h[D+B]=Ae===-1?Ee[0]:Ee.join(" "),delete h[D+"-top"+B],delete h[D+"-right"+B],delete h[D+"-bottom"+B],delete h[D+"-left"+B])},_=D=>{const B=h[D];if(!B)return;const U=B.indexOf(",")>-1?[B]:B.split(" ");let X=U.length;for(;X--;)if(U[X]!==U[0])return!1;return h[D]=U[0],!0},k=D=>(v=!0,s[D]),x=(D,B)=>(v&&(D=D.replace(/\uFEFF[0-9]/g,U=>s[U])),B||(D=D.replace(/\\([\'\";:])/g,"$1")),D),A=D=>String.fromCharCode(parseInt(D.slice(1),16)),N=D=>D.replace(/\\[0-9a-f]+/gi,A),O=(D,B,U,X,re,te)=>{if(re=re||te)return"'"+(re=x(re)).replace(/\'/g,"\\'")+"'";if(B=x(B||U||X||""),!e.allow_script_urls){const ye=B.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(ye)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(ye))return""}return g&&(B=g.call(y,B,"style")),"url('"+B.replace(/\'/g,"\\'")+"')"};if(m){let D;for(m=(m=m.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,k).replace(/\"[^\"]+\"|\'[^\']+\'/g,B=>B.replace(/[;:]/g,k));D=r.exec(m);){r.lastIndex=D.index+D[0].length;let B=D[1].replace(o,"").toLowerCase(),U=D[2].replace(o,"");if(B&&U){if(B=N(B),U=N(U),B.indexOf(l)!==-1||B.indexOf('"')!==-1||!e.allow_script_urls&&(B==="behavior"||/expression\s*\(|\/\*|\*\//.test(U)))continue;B==="font-weight"&&U==="700"?U="bold":B!=="color"&&B!=="background-color"||(U=U.toLowerCase()),$=U,(Gr.test($)?"rgb":gn.test($)?"rgba":"other")=="rgb"&&ko(U).each(X=>{U=_n(la(X)).toLowerCase()}),U=U.replace(n,O),h[B]=v?x(U,!0):U}}p("border","",!0),p("border","-width"),p("border","-color"),p("border","-style"),p("padding",""),p("margin",""),P="border-style",j="border-color",_(L="border-width")&&_(P)&&_(j)&&(h.border=h[L]+" "+h[P]+" "+h[j],delete h[L],delete h[P],delete h[j]),h.border==="medium none"&&delete h.border,h["border-image"]==="none"&&delete h["border-image"]}var L,P,j,$;return h},serialize:(m,h)=>{let v="";const g=(y,p)=>{const _=p[y];if(_)for(let k=0,x=_.length;k<x;k++){const A=_[k],N=m[A];N&&(v+=(v.length>0?" ":"")+A+": "+N+";")}};return h&&i?(g("*",i),g(h,i)):it(m,(y,p)=>{y&&((_,k)=>{if(!a||!k)return!0;let x=a["*"];return!(x&&x[_]||(x=a[k],x&&x[_]))})(p,h)&&(v+=(v.length>0?" ":"")+p+": "+y+";")}),v}};return d},wr={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Kr=(e,t)=>{const n=t??{};for(const r in e)He(wr,r)||(n[r]=e[r]);return ie(e.composedPath)&&(n.composedPath=()=>e.composedPath()),ie(e.getModifierState)&&(n.getModifierState=r=>e.getModifierState(r)),ie(e.getTargetRanges)&&(n.getTargetRanges=()=>e.getTargetRanges()),n},Xo=(e,t,n,r)=>{var o;const s=Kr(t,r);return s.type=e,Wt(s.target)&&(s.target=(o=s.srcElement)!==null&&o!==void 0?o:n),(i=>Wt(i.preventDefault)||(a=>a instanceof Event||dt(a.initEvent))(i))(t)&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=Zt,dt(t.preventDefault)&&t.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=Zt,dt(t.stopPropagation)&&t.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=Zt,s.stopPropagation()},(i=>i.isDefaultPrevented===Zt||i.isDefaultPrevented===ht)(s)||(s.isDefaultPrevented=s.defaultPrevented===!0?Zt:ht,s.isPropagationStopped=s.cancelBubble===!0?Zt:ht,s.isImmediatePropagationStopped=ht)),s},Pl=/^(?:mouse|contextmenu)|click/,Ll=(e,t,n,r)=>{e.addEventListener(t,n,r||!1)},za=(e,t,n,r)=>{e.removeEventListener(t,n,r||!1)},js=(e,t)=>{const n=Xo(e.type,e,document,t);if((r=>ie(r)&&Pl.test(r.type))(e)&&on(e.pageX)&&!on(e.clientX)){const r=n.target.ownerDocument||document,o=r.documentElement,s=r.body,i=n;i.pageX=e.clientX+(o&&o.scrollLeft||s&&s.scrollLeft||0)-(o&&o.clientLeft||s&&s.clientLeft||0),i.pageY=e.clientY+(o&&o.scrollTop||s&&s.scrollTop||0)-(o&&o.clientTop||s&&s.clientTop||0)}return n},ff=(e,t,n)=>{const r=e.document,o={type:"ready"};if(n.domLoaded)return void t(o);const s=()=>{za(e,"DOMContentLoaded",s),za(e,"load",s),n.domLoaded||(n.domLoaded=!0,t(o)),e=null};r.readyState==="complete"||r.readyState==="interactive"&&r.body?s():Ll(e,"DOMContentLoaded",s),n.domLoaded||Ll(e,"load",s)};class Ai{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,r,o){const s=this;let i;const a=window,l=h=>{s.executeHandlers(js(h||a.event),c)};if(!t||ne(t)||Fs(t))return r;let c;t[s.expando]?c=t[s.expando]:(c=s.count++,t[s.expando]=c,s.events[c]={}),o=o||t;const d=n.split(" ");let m=d.length;for(;m--;){let h=d[m],v=l,g=!1,y=!1;h==="DOMContentLoaded"&&(h="ready"),s.domLoaded&&h==="ready"&&t.readyState==="complete"?r.call(o,js({type:h})):(s.hasFocusIn||h!=="focusin"&&h!=="focusout"||(g=!0,y=h==="focusin"?"focus":"blur",v=p=>{const _=js(p||a.event);_.type=_.type==="focus"?"focusin":"focusout",s.executeHandlers(_,c)}),i=s.events[c][h],i?h==="ready"&&s.domLoaded?r(js({type:h})):i.push({func:r,scope:o}):(s.events[c][h]=i=[{func:r,scope:o}],i.fakeName=y,i.capture=g,i.nativeHandler=v,h==="ready"?ff(t,v,s):Ll(t,y||h,v,g)))}return t=i=null,r}unbind(t,n,r){if(!t||ne(t)||Fs(t))return this;const o=t[this.expando];if(o){let s=this.events[o];if(n){const i=n.split(" ");let a=i.length;for(;a--;){const l=i[a],c=s[l];if(c){if(r){let d=c.length;for(;d--;)if(c[d].func===r){const m=c.nativeHandler,h=c.fakeName,v=c.capture,g=c.slice(0,d).concat(c.slice(d+1));g.nativeHandler=m,g.fakeName=h,g.capture=v,s[l]=g}}r&&c.length!==0||(delete s[l],za(t,c.fakeName||l,c.nativeHandler,c.capture))}}}else it(s,(i,a)=>{za(t,i.fakeName||a,i.nativeHandler,i.capture)}),s={};for(const i in s)if(He(s,i))return this;delete this.events[o];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,r){return this.dispatch(t,n,r)}dispatch(t,n,r){if(!t||ne(t)||Fs(t))return this;const o=js({type:n,target:t},r);do{const s=t[this.expando];s&&this.executeHandlers(o,s),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!o.isPropagationStopped());return this}clean(t){if(!t||ne(t)||Fs(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let r=n.length;for(;r--;)(t=n[r])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const r=this.events[n],o=r&&r[t.type];if(o)for(let s=0,i=o.length;s<i;s++){const a=o[s];if(a&&a.func.call(a.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}Ai.Event=new Ai;const Wa=oe.each,hf=oe.grep,Bl="data-mce-style",gf=oe.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),ca=(e,t,n)=>{Wt(n)||n===""?dn(e,t):tn(e,t,n)},jc=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),da=(e,t)=>{let n=0;if(e)for(let r=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){const s=o.nodeType;(!t||!ne(o)||s!==r&&o.data.length)&&(n++,r=s)}return n},mu=(e,t)=>{const n=cn(t,"style"),r=e.serialize(e.parse(n),Je(t));ca(t,Bl,r)},Hs=(e,t,n)=>{const r=jc(t);Wt(n)||n===""?Sc(e,r):Pa(e,r,((o,s)=>Jt(o)?He(gf,s)?o+"":o+"px":o)(n,r))},bt=(e,t={})=>{const n={},r=window,o={};let s=0;const i=Fc.forElement(M(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),a=[],l=t.schema?t.schema:zn({}),c=Kt({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),d=t.ownEvents?new Ai:Ai.Event,m=l.getBlockElements(),h=F=>F&&e&&se(F)?e.getElementById(F):F,v=F=>{const H=h(F);return ie(H)?M(H):null},g=(F,H,q="")=>{let W;const de=v(F);if(ie(de)&&Yn(de)){const ae=Ce[H];W=ae&&ae.get?ae.get(de.dom,H):cn(de,H)}return ie(W)?W:q},y=F=>{const H=h(F);return Wt(H)?[]:H.attributes},p=(F,H,q)=>{P(F,W=>{if(xe(W)){const de=M(W),ae=q===""?null:q,Te=cn(de,H),Pe=Ce[H];Pe&&Pe.set?Pe.set(de.dom,ae,H):ca(de,H,ae),Te!==ae&&t.onSetAttrib&&t.onSetAttrib({attrElm:de.dom,attrName:H,attrValue:ae})}})},_=()=>t.root_element||e.body,k=(F,H)=>((q,W,de)=>{let ae=0,Te=0;const Pe=q.ownerDocument;if(de=de||q,W){if(de===q&&W.getBoundingClientRect&&io(M(q),"position")==="static"){const $t=W.getBoundingClientRect();return ae=$t.left+(Pe.documentElement.scrollLeft||q.scrollLeft)-Pe.documentElement.clientLeft,Te=$t.top+(Pe.documentElement.scrollTop||q.scrollTop)-Pe.documentElement.clientTop,{x:ae,y:Te}}let ze=W;for(;ze&&ze!==de&&ze.nodeType&&!du(ze,de);){const $t=ze;ae+=$t.offsetLeft||0,Te+=$t.offsetTop||0,ze=$t.offsetParent}for(ze=W.parentNode;ze&&ze!==de&&ze.nodeType&&!du(ze,de);)ae-=ze.scrollLeft||0,Te-=ze.scrollTop||0,ze=ze.parentNode;Te+=($t=>uf.isFirefox()&&Je($t)==="table"?cu(le($t)).filter(zt=>Je(zt)==="caption").bind(zt=>cu(J(zt)).map(mo=>{const pe=mo.dom.offsetTop,We=zt.dom.offsetTop,Xe=zt.dom.offsetHeight;return pe<=We?-Xe:0})).getOr(0):0)(M(W))}return{x:ae,y:Te}})(e.body,h(F),H),x=(F,H,q)=>{const W=h(F);var de;if(!Wt(W)&&(ys(W)||xe(de=W)&&de.namespaceURI==="http://www.w3.org/2000/svg"))return q?io(M(W),jc(H)):((H=H.replace(/-(\D)/g,(ae,Te)=>Te.toUpperCase()))==="float"&&(H="cssFloat"),W.style?W.style[H]:void 0)},A=F=>{const H=h(F);if(!H)return{w:0,h:0};let q=x(H,"width"),W=x(H,"height");return q&&q.indexOf("px")!==-1||(q="0"),W&&W.indexOf("px")!==-1||(W="0"),{w:parseInt(q,10)||H.offsetWidth||H.clientWidth,h:parseInt(W,10)||H.offsetHeight||H.clientHeight}},N=(F,H)=>{if(!F)return!1;const q=ct(F)?F:[F];return yt(q,W=>fn(M(W),H))},O=(F,H,q,W)=>{const de=[];let ae=h(F);W=W===void 0;const Te=q||(_().nodeName!=="BODY"?_().parentNode:null);if(se(H))if(H==="*")H=xe;else{const Pe=H;H=ze=>N(ze,Pe)}for(;ae&&!(ae===Te||Wt(ae.nodeType)||ja(ae)||ia(ae));){if(!H||H(ae)){if(!W)return[ae];de.push(ae)}ae=ae.parentNode}return W?de:null},L=(F,H,q)=>{let W=H;if(F){se(H)&&(W=de=>N(de,H));for(let de=F[q];de;de=de[q])if(dt(W)&&W(de))return de}return null},P=function(F,H,q){const W=q??this;if(ct(F)){const de=[];return Wa(F,(ae,Te)=>{const Pe=h(ae);Pe&&de.push(H.call(W,Pe,Te))}),de}{const de=h(F);return!!de&&H.call(W,de)}},j=(F,H)=>{P(F,q=>{it(H,(W,de)=>{p(q,de,W)})})},$=(F,H)=>{P(F,q=>{const W=M(q);kl(W,H)})},D=(F,H,q,W,de)=>P(F,ae=>{const Te=se(H)?e.createElement(H):H;return ie(q)&&j(Te,q),W&&(!se(W)&&W.nodeType?Te.appendChild(W):se(W)&&$(Te,W)),de?Te:ae.appendChild(Te)}),B=(F,H,q)=>D(e.createElement(F),F,H,q,!0),U=Oe.encodeAllRaw,X=(F,H)=>P(F,q=>{const W=M(q);return H&&Q(le(W),de=>{sn(de)&&de.dom.length===0?Pt(de):lr(W,de)}),Pt(W),W.dom}),re=(F,H,q)=>{P(F,W=>{if(xe(W)){const de=M(W),ae=H.split(" ");Q(ae,Te=>{ie(q)?(q?ms:ar)(de,Te):((Pe,ze)=>{const $t=Vo(Pe)?Pe.dom.classList.toggle(ze):((zt,mo)=>fe(Yr(zt),mo)?Ji(zt,mo):pi(zt,mo))(Pe,ze);ea(Pe)})(de,Te)})}})},te=(F,H,q)=>P(H,W=>{var de;const ae=ct(H)?F.cloneNode(!0):F;return q&&Wa(hf(W.childNodes),Te=>{ae.appendChild(Te)}),(de=W.parentNode)===null||de===void 0||de.replaceChild(ae,W),W}),ye=()=>e.createRange(),Ee=(F,H,q,W)=>{if(ct(F)){let de=F.length;const ae=[];for(;de--;)ae[de]=Ee(F[de],H,q,W);return ae}return!t.collect||F!==e&&F!==r||a.push([F,H,q,W]),d.bind(F,H,q,W||me)},Ae=(F,H,q)=>{if(ct(F)){let W=F.length;const de=[];for(;W--;)de[W]=Ae(F[W],H,q);return de}if(a.length>0&&(F===e||F===r)){let W=a.length;for(;W--;){const[de,ae,Te]=a[W];F!==de||H&&H!==ae||q&&q!==Te||d.unbind(de,ae,Te)}}return d.unbind(F,H,q)},Re=F=>{if(F&&ys(F)){const H=F.getAttribute("data-mce-contenteditable");return H&&H!=="inherit"?H:F.contentEditable!=="inherit"?F.contentEditable:null}return null},me={doc:e,settings:t,win:r,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:i,boundEvents:a,styles:c,schema:l,events:d,isBlock:F=>se(F)?He(m,F):xe(F)&&(He(m,F.nodeName)||Ni(l,F)),root:null,clone:(F,H)=>F.cloneNode(H),getRoot:_,getViewPort:F=>{const H=eu(F);return{x:H.x,y:H.y,w:H.width,h:H.height}},getRect:F=>{const H=h(F),q=k(H),W=A(H);return{x:q.x,y:q.y,w:W.w,h:W.h}},getSize:A,getParent:(F,H,q)=>{const W=O(F,H,q,!1);return W&&W.length>0?W[0]:null},getParents:O,get:h,getNext:(F,H)=>L(F,H,"nextSibling"),getPrev:(F,H)=>L(F,H,"previousSibling"),select:(F,H)=>{var q,W;const de=(W=(q=h(H))!==null&&q!==void 0?q:t.root_element)!==null&&W!==void 0?W:e;return dt(de.querySelectorAll)?xt(de.querySelectorAll(F)):[]},is:N,add:D,create:B,createHTML:(F,H,q="")=>{let W="<"+F;for(const de in H)no(H,de)&&(W+=" "+de+'="'+U(H[de])+'"');return ro(q)&&He(l.getVoidElements(),F)?W+" />":W+">"+q+"</"+F+">"},createFragment:F=>{const H=e.createElement("div"),q=e.createDocumentFragment();let W;for(q.appendChild(H),F&&(H.innerHTML=F);W=H.firstChild;)q.appendChild(W);return q.removeChild(H),q},remove:X,setStyle:(F,H,q)=>{P(F,W=>{const de=M(W);Hs(de,H,q),t.update_styles&&mu(c,de)})},getStyle:x,setStyles:(F,H)=>{P(F,q=>{const W=M(q);it(H,(de,ae)=>{Hs(W,ae,de)}),t.update_styles&&mu(c,W)})},removeAllAttribs:F=>P(F,H=>{const q=H.attributes;for(let W=q.length-1;W>=0;W--)H.removeAttributeNode(q.item(W))}),setAttrib:p,setAttribs:j,getAttrib:g,getPos:k,parseStyle:F=>c.parse(F),serializeStyle:(F,H)=>c.serialize(F,H),addStyle:F=>{if(me!==bt.DOM&&e===document){if(n[F])return;n[F]=!0}let H=e.getElementById("mceDefaultStyles");if(!H){H=e.createElement("style"),H.id="mceDefaultStyles",H.type="text/css";const q=e.head;q.firstChild?q.insertBefore(H,q.firstChild):q.appendChild(H)}H.styleSheet?H.styleSheet.cssText+=F:H.appendChild(e.createTextNode(F))},loadCSS:F=>{F||(F=""),Q(F.split(","),H=>{o[H]=!0,i.load(H).catch($e)})},addClass:(F,H)=>{re(F,H,!0)},removeClass:(F,H)=>{re(F,H,!1)},hasClass:(F,H)=>{const q=v(F),W=H.split(" ");return ie(q)&&Dn(W,de=>so(q,de))},toggleClass:re,show:F=>{P(F,H=>Sc(M(H),"display"))},hide:F=>{P(F,H=>Pa(M(H),"display","none"))},isHidden:F=>{const H=v(F);return ie(H)&&ds(Cl(H,"display"),"none")},uniqueId:F=>(F||"mce_")+s++,setHTML:$,getOuterHTML:F=>{const H=v(F);return ie(H)?xe(H.dom)?H.dom.outerHTML:(q=>{const W=Ft("div"),de=M(q.dom.cloneNode(!0));return hn(W,de),Zd(W)})(H):""},setOuterHTML:(F,H)=>{P(F,q=>{xe(q)&&(q.outerHTML=H)})},decode:Oe.decode,encode:U,insertAfter:(F,H)=>{const q=h(H);return P(F,W=>{const de=q?.parentNode,ae=q?.nextSibling;return de&&(ae?de.insertBefore(W,ae):de.appendChild(W)),W})},replace:te,rename:(F,H)=>{if(F.nodeName!==H.toUpperCase()){const q=B(H);return Wa(y(F),W=>{p(q,W.nodeName,g(F,W.nodeName))}),te(q,F,!0),q}return F},findCommonAncestor:(F,H)=>{let q=F;for(;q;){let W=H;for(;W&&q!==W;)W=W.parentNode;if(q===W)break;q=q.parentNode}return!q&&F.ownerDocument?F.ownerDocument.documentElement:q},run:P,getAttribs:y,isEmpty:(F,H,q)=>Sn(H)?ws(l,F,{...q,isContent:de=>{const ae=de.nodeName.toLowerCase();return!!H[ae]}}):ws(l,F,q),createRng:ye,nodeIndex:da,split:(F,H,q)=>{let W,de,ae=ye();if(F&&H&&F.parentNode&&H.parentNode){const Te=F.parentNode;return ae.setStart(Te,da(F)),ae.setEnd(H.parentNode,da(H)),W=ae.extractContents(),ae=ye(),ae.setStart(H.parentNode,da(H)+1),ae.setEnd(Te,da(F)+1),de=ae.extractContents(),Te.insertBefore(Uc(me,W,l),F),q?Te.insertBefore(q,F):Te.insertBefore(H,F),Te.insertBefore(Uc(me,de,l),F),X(F),q||H}},bind:Ee,unbind:Ae,fire:(F,H,q)=>d.dispatch(F,H,q),dispatch:(F,H,q)=>d.dispatch(F,H,q),getContentEditable:Re,getContentEditableParent:F=>{const H=_();let q=null;for(let W=F;W&&W!==H&&(q=Re(W),q===null);W=W.parentNode);return q},isEditable:F=>{if(ie(F)){const H=xe(F)?F:F.parentElement;return ie(H)&&ys(H)&&yi(M(H))}return!1},destroy:()=>{if(a.length>0){let F=a.length;for(;F--;){const[H,q,W]=a[F];d.unbind(H,q,W)}}it(o,(F,H)=>{i.unload(H),delete o[H]})},isChildOf:(F,H)=>F===H||H.contains(F),dumpRng:F=>"startContainer: "+F.startContainer.nodeName+", startOffset: "+F.startOffset+", endContainer: "+F.endContainer.nodeName+", endOffset: "+F.endOffset},Ce=((F,H,q)=>{const W=H.keep_values,de={set:(Te,Pe,ze)=>{const $t=M(Te);dt(H.url_converter)&&ie(Pe)&&(Pe=H.url_converter.call(H.url_converter_scope||q(),String(Pe),ze,Te)),ca($t,"data-mce-"+ze,Pe),ca($t,ze,Pe)},get:(Te,Pe)=>{const ze=M(Te);return cn(ze,"data-mce-"+Pe)||cn(ze,Pe)}},ae={style:{set:(Te,Pe)=>{const ze=M(Te);W&&ca(ze,Bl,Pe),dn(ze,"style"),se(Pe)&&La(ze,F.parse(Pe))},get:Te=>{const Pe=M(Te),ze=cn(Pe,Bl)||cn(Pe,"style");return F.serialize(F.parse(ze),Je(Pe))}}};return W&&(ae.href=ae.src=de),ae})(c,t,ce(me));return me};bt.DOM=bt(document),bt.nodeIndex=da;const fu=bt.DOM;class Zo{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,r)=>{const o=fu;let s;const i=()=>{o.remove(a),s&&(s.onerror=s.onload=s=null)},a=o.uniqueId();s=document.createElement("script"),s.id=a,s.type="text/javascript",s.src=oe._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{i(),n()},s.onerror=()=>{i(),r("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(t){return this.states[t]===2}markDone(t){this.states[t]=2}add(t){const n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=0),new Promise((r,o)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:r,reject:o})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,r=(l,c)=>{St(n.scriptLoadedCallbacks,c).each(d=>{Q(d,m=>m[l](c))}),delete n.scriptLoadedCallbacks[c]},o=l=>{const c=De(l,d=>d.status==="rejected");return c.length>0?Promise.reject(gr(c,({reason:d})=>ct(d)?d:[d])):Promise.resolve()},s=l=>Promise.allSettled(Me(l,c=>n.states[c]===2?(r("resolve",c),Promise.resolve()):n.states[c]===3?(r("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then(()=>{n.states[c]=2,r("resolve",c);const d=n.queue;return d.length>0?(n.queue=[],s(d).then(o)):Promise.resolve()},()=>(n.states[c]=3,r("reject",c),Promise.reject(c)))))),i=l=>(n.loading=!0,s(l).then(c=>{n.loading=!1;const d=n.queueLoadedCallbacks.shift();return S.from(d).each(Z),o(c)})),a=Na(t);return n.loading?new Promise((l,c)=>{n.queueLoadedCallbacks.push(()=>{i(a).then(l,c)})}):i(a)}}Zo.ScriptLoader=new Zo;const Ti={},Il=kn("en"),Hc=()=>St(Ti,Il.get()),lo={getData:()=>Ir(Ti,e=>({...e})),setCode:e=>{e&&Il.set(e)},getCode:()=>Il.get(),add:(e,t)=>{let n=Ti[e];n||(Ti[e]=n={});const r=Me(Ct(t),o=>o.toLowerCase());it(t,(o,s)=>{const i=s.toLowerCase();i!==s&&((a,l)=>{const c=a.indexOf(l);return c!==-1&&a.indexOf(l,c+1)>c})(r,i)?(He(t,i)||(n[i]=o),n[s]=o):n[i]=o})},translate:e=>{const t=Hc().getOr({}),n=a=>dt(a)?Object.prototype.toString.call(a):r(a)?"":""+a,r=a=>a===""||a==null,o=a=>{const l=n(a);return He(t,l)?n(t[l]):St(t,l.toLowerCase()).map(n).getOr(l)},s=a=>a.replace(/{context:\w+}$/,"");if(r(e))return"";if(rn(i=e)&&He(i,"raw"))return n(e.raw);var i;if((a=>ct(a)&&a.length>1)(e)){const a=e.slice(1);return s(o(e[0]).replace(/\{([0-9]+)\}/g,(l,c)=>He(a,c)?n(a[c]):l))}return s(o(e))},isRtl:()=>Hc().bind(e=>St(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>He(Ti,e)},Wn=()=>{const e=[],t={},n={},r=[],o=(l,c)=>{const d=De(r,m=>m.name===l&&m.state===c);Q(d,m=>m.resolve())},s=l=>He(t,l),i=(l,c)=>{const d=lo.getCode();!d||c&&(","+(c||"")+",").indexOf(","+d+",")===-1||Zo.ScriptLoader.add(t[l]+"/langs/"+d+".js")},a=(l,c="added")=>c==="added"&&(d=>He(n,d))(l)||c==="loaded"&&s(l)?Promise.resolve():new Promise(d=>{r.push({name:l,state:c,resolve:d})});return{items:e,urls:t,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{Wn.languageLoad!==!1&&(s(l)?i(l,c):a(l,"loaded").then(()=>i(l,c)))},add:(l,c)=>(e.push(c),n[l]={instance:c},o(l,"added"),c),remove:l=>{delete t[l],delete n[l]},createUrl:(l,c)=>se(c)?se(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(t[l])return Promise.resolve();let d=se(c)?c:c.prefix+c.resource+c.suffix;d.indexOf("/")!==0&&d.indexOf("://")===-1&&(d=Wn.baseURL+"/"+d),t[l]=d.substring(0,d.lastIndexOf("/"));const m=()=>(o(l,"loaded"),Promise.resolve());return n[l]?m():Zo.ScriptLoader.add(d).then(m)},waitFor:a}};Wn.languageLoad=!0,Wn.baseURL="",Wn.PluginManager=Wn(),Wn.ThemeManager=Wn(),Wn.ModelManager=Wn();const Fl=(e,t)=>{let n=null;return{cancel:()=>{Tt(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{Tt(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},Yc=(e,t)=>{let n=null;const r=()=>{Tt(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...o)=>{r(),n=setTimeout(()=>{n=null,e.apply(null,o)},t)}}},Oi=ce("mce-annotation"),Ys=ce("data-mce-annotation"),Ul=ce("data-mce-annotation-uid"),$c=ce("data-mce-annotation-active"),zc=ce("data-mce-annotation-classes"),Wc=ce("data-mce-annotation-attrs"),eb=e=>t=>at(t,e),tb=(e,t)=>{const n=e.selection.getRng(),r=M(n.startContainer),o=M(e.getBody()),s=t.fold(()=>"."+Oi(),a=>`[${Ys()}="${a}"]`),i=we(r,n.startOffset).getOr(r);return vi(i,s,eb(o)).bind(a=>vn(a,`${Ul()}`).bind(l=>vn(a,`${Ys()}`).map(c=>{const d=rb(e,l);return{uid:l,name:c,elements:d}})))},nb=(e,t)=>hi(e,"data-mce-bogus")||((n,r,o)=>Da(n,'[data-mce-bogus="all"]',o).isSome())(e,0,eb(t)),rb=(e,t)=>{const n=M(e.getBody()),r=Ln(n,`[${Ul()}="${t}"]`);return De(r,o=>!nb(o,n))},ob=(e,t)=>{const n=M(e.getBody()),r=Ln(n,`[${Ys()}="${t}"]`),o={};return Q(r,s=>{if(!nb(s,n)){const i=cn(s,Ul()),a=St(o,i).getOr([]);o[i]=a.concat([s])}}),o},sb=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let ib=0;const Vc=e=>{const t=new Date().getTime(),n=Math.floor(1e9*sb());return ib++,e+"_"+n+ib+String(t)},ab=(e,t)=>M(e.dom.cloneNode(t)),Va=e=>ab(e,!1),lb=e=>ab(e,!0),cb=(e,t,n=ht)=>{const r=new Cn(e,t),o=s=>{let i;do i=r[s]();while(i&&!ne(i)&&!n(i));return S.from(i).filter(ne)};return{current:()=>S.from(r.current()).filter(ne),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},qa=(e,t)=>{const n=t||(o=>e.isBlock(o)||jt(o)||Lt(o)),r=(o,s,i,a)=>{if(ne(o)){const l=a(o,s,o.data);if(l!==-1)return S.some({container:o,offset:l})}return i().bind(l=>r(l.container,l.offset,i,a))};return{backwards:(o,s,i,a)=>{const l=cb(o,a??e.getRoot(),n);return r(o,s,()=>l.prev().map(c=>({container:c,offset:c.length})),i).getOrNull()},forwards:(o,s,i,a)=>{const l=cb(o,a??e.getRoot(),n);return r(o,s,()=>l.next().map(c=>({container:c,offset:0})),i).getOrNull()}}},pf=((e,t)=>{const n=r=>e(r)?S.from(r.dom.nodeValue):S.none();return{get:r=>{if(!e(r))throw new Error("Can only get text value of a text node");return n(r).getOr("")},getOption:n,set:(r,o)=>{if(!e(r))throw new Error("Can only set raw text value of a text node");r.dom.nodeValue=o}}})(sn),qc=e=>pf.get(e),db=(e,t)=>pf.set(e,t),jl=e=>{let t;return n=>(t=t||Ar(e,Zt),He(t,Je(n)))},Ga=e=>Yn(e)&&Je(e)==="br",ub=jl(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),bf=jl(["ul","ol","dl"]),Hl=jl(["li","dd","dt"]),FS=jl(["thead","tbody","tfoot"]),Gc=jl(["td","th"]),hu=jl(["pre","script","textarea","style"]),Yl=()=>{const e=Ft("br");return tn(e,"data-mce-bogus","1"),e},ua=e=>{ra(e),hn(e,Yl())},Bn=Fa,gu=El,co=e=>e.replace(/\uFEFF/g,""),US=xe,$l=ne,zl=e=>($l(e)&&(e=e.parentNode),US(e)&&e.hasAttribute("data-mce-caret")),ma=e=>$l(e)&&gu(e.data),xo=e=>zl(e)||ma(e),mb=e=>e.firstChild!==e.lastChild||!jt(e.firstChild),vf=e=>{const t=e.container();return!!ne(t)&&(t.data.charAt(e.offset())===Bn||e.isAtStart()&&ma(t.previousSibling))},yf=e=>{const t=e.container();return!!ne(t)&&(t.data.charAt(e.offset()-1)===Bn||e.isAtEnd()&&ma(t.nextSibling))},pu=e=>$l(e)&&e.data[0]===Bn,bu=e=>$l(e)&&e.data[e.data.length-1]===Bn,_f=e=>e&&e.hasAttribute("data-mce-caret")?((t=>{var n;const r=t.getElementsByTagName("br"),o=r[r.length-1];Is(o)&&((n=o.parentNode)===null||n===void 0||n.removeChild(o))})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,fb=e=>zl(e.startContainer),Wl=Math.round,Ka=e=>e?{left:Wl(e.left),top:Wl(e.top),bottom:Wl(e.bottom),right:Wl(e.right),width:Wl(e.width),height:Wl(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},hb=(e,t)=>(e=Ka(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),gb=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,Kc=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&gb(t.top-e.bottom,e,t)},Xc=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&gb(t.bottom-e.top,e,t),pb=(e,t,n)=>{const r=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-r)*(t-r)+(n-o)*(n-o))},vu=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},fa=(e,t)=>{if(xe(e)&&e.hasChildNodes()){const n=e.childNodes,r=((o,s,i)=>Math.min(Math.max(o,0),i))(t,0,n.length-1);return n[r]}return e},jS=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),bb=e=>se(e)&&e.charCodeAt(0)>=768&&jS.test(e),vb=qr,HS=Lt,YS=jt,$S=ne,zS=Tr(["script","style","textarea"]),yb=Tr(["img","input","textarea","hr","iframe","video","audio","object","embed"]),WS=Tr(["table"]),VS=xo,xs=e=>!VS(e)&&($S(e)?!zS(e.parentNode):yb(e)||YS(e)||WS(e)||wf(e)),wf=e=>!(t=>xe(t)&&t.getAttribute("unselectable")==="true")(e)&&HS(e),_b=(e,t)=>xs(e)&&((n,r)=>{for(let o=n.parentNode;o&&o!==r;o=o.parentNode){if(wf(o))return!1;if(vb(o))return!0}return!0})(e,t),wb=xe,qS=xs,Cb=Ua("display","block table"),GS=Ua("float","left right"),Zc=((...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0})(wb,qS,Jr(GS)),KS=Jr(Ua("white-space","pre pre-line pre-wrap")),Qc=ne,Cf=jt,kb=bt.nodeIndex,yu=(e,t)=>t<0&&xe(e)&&e.hasChildNodes()?void 0:fa(e,t),kf=e=>e?e.createRange():bt.DOM.createRng(),xf=e=>se(e)&&/[\r\n\t ]/.test(e),xb=e=>!!e.setStart&&!!e.setEnd,Sf=e=>{const t=e.startContainer,n=e.startOffset;if(xf(e.toString())&&KS(t.parentNode)&&ne(t)){const r=t.data;if(xf(r[n-1])||xf(r[n+1]))return!0}return!1},Sb=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,ha=e=>{var t;let n;const r=e.getClientRects();return n=r.length>0?Ka(r[0]):Ka(e.getBoundingClientRect()),!xb(e)&&Cf(e)&&Sb(n)?(o=>{const s=o.ownerDocument,i=kf(s),a=s.createTextNode(Ut),l=o.parentNode;l.insertBefore(a,o),i.setStart(a,0),i.setEnd(a,1);const c=Ka(i.getBoundingClientRect());return l.removeChild(a),c})(e):Sb(n)&&xb(e)&&(t=(o=>{const s=o.startContainer,i=o.endContainer,a=o.startOffset,l=o.endOffset;if(s===i&&ne(i)&&a===0&&l===1){const c=o.cloneRange();return c.setEndAfter(i),ha(c)}return null})(e))!==null&&t!==void 0?t:n},Xa=(e,t)=>{const n=hb(e,t);return n.width=1,n.right=n.left+1,n},G=(e,t,n)=>{const r=()=>(n||(n=(o=>{const s=[],i=d=>{var m,h;d.height!==0&&(s.length>0&&(m=d,h=s[s.length-1],m.left===h.left&&m.top===h.top&&m.bottom===h.bottom&&m.right===h.right)||s.push(d))},a=(d,m)=>{const h=kf(d.ownerDocument);if(m<d.data.length){if(bb(d.data[m]))return;if(bb(d.data[m-1])&&(h.setStart(d,m),h.setEnd(d,m+1),!Sf(h)))return void i(Xa(ha(h),!1))}m>0&&(h.setStart(d,m-1),h.setEnd(d,m),Sf(h)||i(Xa(ha(h),!1))),m<d.data.length&&(h.setStart(d,m),h.setEnd(d,m+1),Sf(h)||i(Xa(ha(h),!0)))},l=o.container(),c=o.offset();if(Qc(l))return a(l,c),s;if(wb(l))if(o.isAtEnd()){const d=yu(l,c);Qc(d)&&a(d,d.data.length),Zc(d)&&!Cf(d)&&i(Xa(ha(d),!1))}else{const d=yu(l,c);if(Qc(d)&&a(d,0),Zc(d)&&o.isAtEnd())return i(Xa(ha(d),!1)),s;const m=yu(o.container(),o.offset()-1);Zc(m)&&!Cf(m)&&(Cb(m)||Cb(d)||!Zc(d))&&i(Xa(ha(m),!1)),Zc(d)&&i(Xa(ha(d),!0))}return s})(G(e,t))),n);return{container:ce(e),offset:ce(t),toRange:()=>{const o=kf(e.ownerDocument);return o.setStart(e,t),o.setEnd(e,t),o},getClientRects:r,isVisible:()=>r().length>0,isAtStart:()=>(Qc(e),t===0),isAtEnd:()=>Qc(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:o=>o&&e===o.container()&&t===o.offset(),getNode:o=>yu(e,o?t-1:t)}};G.fromRangeStart=e=>G(e.startContainer,e.startOffset),G.fromRangeEnd=e=>G(e.endContainer,e.endOffset),G.after=e=>G(e.parentNode,kb(e)+1),G.before=e=>G(e.parentNode,kb(e)),G.isAbove=(e,t)=>Bt(en(t.getClientRects()),Un(e.getClientRects()),Kc).getOr(!1),G.isBelow=(e,t)=>Bt(Un(t.getClientRects()),en(e.getClientRects()),Xc).getOr(!1),G.isAtStart=e=>!!e&&e.isAtStart(),G.isAtEnd=e=>!!e&&e.isAtEnd(),G.isTextPosition=e=>!!e&&ne(e.container()),G.isElementPosition=e=>!G.isTextPosition(e);const _u=(e,t)=>{ne(t)&&t.data.length===0&&e.remove(t)},Ef=(e,t,n)=>{ia(n)?((r,o,s)=>{const i=S.from(s.firstChild),a=S.from(s.lastChild);o.insertNode(s),i.each(l=>_u(r,l.previousSibling)),a.each(l=>_u(r,l.nextSibling))})(e,t,n):((r,o,s)=>{o.insertNode(s),_u(r,s.previousSibling),_u(r,s.nextSibling)})(e,t,n)},Ss=ne,Eb=Is,Nb=bt.nodeIndex,Ab=e=>{const t=e.parentNode;return Eb(t)?Ab(t):t},Nf=e=>e?si(e.childNodes,(t,n)=>(Eb(n)&&n.nodeName!=="BR"?t=t.concat(Nf(n)):t.push(n),t),[]):[],Tb=e=>t=>e===t,Ob=e=>(Ss(e)?"text()":e.nodeName.toLowerCase())+"["+(t=>{let n,r;n=Nf(Ab(t)),r=bl(n,Tb(t),t),n=n.slice(0,r+1);const o=si(n,(s,i,a)=>(Ss(i)&&Ss(n[a-1])&&s++,s),0);return n=Ts(n,Tr([t.nodeName])),r=bl(n,Tb(t),t),r-o})(e)+"]",Rb=(e,t)=>{let n,r=[],o=t.container(),s=t.offset();if(Ss(o))n=((a,l)=>{let c=a;for(;(c=c.previousSibling)&&Ss(c);)l+=c.data.length;return l})(o,s);else{const a=o.childNodes;s>=a.length?(n="after",s=a.length-1):n="before",o=a[s]}r.push(Ob(o));let i=((a,l,c)=>{const d=[];for(let m=l.parentNode;m&&m!==a;m=m.parentNode)d.push(m);return d})(e,o);return i=Ts(i,Jr(Is)),r=r.concat($i(i,a=>Ob(a))),r.reverse().join("/")+","+n},Db=(e,t)=>{if(!t)return null;const n=t.split(","),r=n[0].split("/"),o=n.length>1?n[1]:"before",s=si(r,(i,a)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(a);return l?(l[1]==="text()"&&(l[1]="#text"),((c,d,m)=>{let h=Nf(c);return h=Ts(h,(v,g)=>!Ss(v)||!Ss(h[g-1])),h=Ts(h,Tr([d])),h[m]})(i,l[1],parseInt(l[2],10))):null},e);if(!s)return null;if(!Ss(s)&&s.parentNode){let i;return i=o==="after"?Nb(s)+1:Nb(s),G(s.parentNode,i)}return((i,a)=>{let l=i,c=0;for(;Ss(l);){const d=l.data.length;if(a>=c&&a<=c+d){i=l,a-=c;break}if(!Ss(l.nextSibling)){i=l,a=d;break}c+=d,l=l.nextSibling}return Ss(i)&&a>i.data.length&&(a=i.data.length),G(i,a)})(s,parseInt(o,10))},wu=Lt,Mb=(e,t,n,r,o)=>{const s=o?r.startContainer:r.endContainer;let i=o?r.startOffset:r.endOffset;const a=[],l=e.getRoot();if(ne(s))a.push(n?((c,d,m)=>{let h=c(d.data.slice(0,m)).length;for(let v=d.previousSibling;v&&ne(v);v=v.previousSibling)h+=c(v.data).length;return h})(t,s,i):i);else{let c=0;const d=s.childNodes;i>=d.length&&d.length&&(c=1,i=Math.max(0,d.length-1)),a.push(e.nodeIndex(d[i],n)+c)}for(let c=s;c&&c!==l;c=c.parentNode)a.push(e.nodeIndex(c,n));return a},Af=(e,t,n)=>{let r=0;return oe.each(e.select(t),o=>o.getAttribute("data-mce-bogus")==="all"?void 0:o!==n&&void r++),r},Pb=(e,t)=>{let n=t?e.startContainer:e.endContainer,r=t?e.startOffset:e.endOffset;if(xe(n)&&n.nodeName==="TR"){const o=n.childNodes;n=o[Math.min(t?r:r-1,o.length-1)],n&&(r=t?0:n.childNodes.length,t?e.setStart(n,r):e.setEnd(n,r))}},Lb=e=>(Pb(e,!0),Pb(e,!1),e),Bb=(e,t)=>{if(xe(e)&&(e=fa(e,t),wu(e)))return e;if(xo(e)){ne(e)&&zl(e)&&(e=e.parentNode);let n=e.previousSibling;if(wu(n)||(n=e.nextSibling,wu(n)))return n}},Ib=(e,t,n)=>{const r=n.getNode(),o=n.getRng();if(r.nodeName==="IMG"||wu(r)){const i=r.nodeName;return{name:i,index:Af(n.dom,i,r)}}const s=(i=>Bb(i.startContainer,i.startOffset)||Bb(i.endContainer,i.endOffset))(o);if(s){const i=s.tagName;return{name:i,index:Af(n.dom,i,s)}}return((i,a,l,c)=>{const d=a.dom,m=Mb(d,i,l,c,!0),h=a.isForward(),v=fb(c)?{isFakeCaret:!0}:{};return a.isCollapsed()?{start:m,forward:h,...v}:{start:m,end:Mb(d,i,l,c,!1),forward:h,...v}})(e,n,t,o)},Fb=(e,t,n)=>{const r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},Ub=(e,t)=>{const n=e.dom;let r=e.getRng();const o=n.uniqueId(),s=e.isCollapsed(),i=e.getNode(),a=i.nodeName,l=e.isForward();if(a==="IMG")return{name:a,index:Af(n,a,i)};const c=Lb(r.cloneRange());if(!s){c.collapse(!1);const m=Fb(n,o+"_end",t);Ef(n,c,m)}r=Lb(r),r.collapse(!0);const d=Fb(n,o+"_start",t);return Ef(n,r,d),e.moveToBookmark({id:o,keep:!0,forward:l}),{id:o,forward:l}},Tf=_e(Ib,En,!0),jb=e=>{const t=s=>s(e),n=ce(e),r=()=>o,o={tag:!0,inner:e,fold:(s,i)=>i(e),isValue:Zt,isError:ht,map:s=>Rr.value(s(e)),mapError:r,bind:t,exists:t,forall:t,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:s=>{s(e)},toOptional:()=>S.some(e)};return o},Hb=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(r,o)=>r(e),isValue:ht,isError:Zt,map:t,mapError:r=>Rr.error(r(e)),bind:t,exists:ht,forall:Zt,getOr:En,or:En,getOrThunk:go,orThunk:go,getOrDie:Hi(String(e)),each:$e,toOptional:S.none};return n},Rr={value:jb,error:Hb,fromOption:(e,t)=>e.fold(()=>Hb(t),jb)},$s=e=>{if(!ct(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return Q(e,(r,o)=>{const s=Ct(r);if(s.length!==1)throw new Error("one and only one name per case");const i=s[0],a=r[i];if(n[i]!==void 0)throw new Error("duplicate key detected:"+i);if(i==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ct(a))throw new Error("case arguments must be an array");t.push(i),n[i]=(...l)=>{const c=l.length;if(c!==a.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+a.length+" ("+a+"), got "+c);return{fold:(...d)=>{if(d.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+d.length);return d[o].apply(null,l)},match:d=>{const m=Ct(d);if(t.length!==m.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+m.join(","));if(!Dn(t,h=>fe(m,h)))throw new Error("Not all branches were specified when using match. Specified: "+m.join(", ")+`
Required: `+t.join(", "));return d[i].apply(null,l)},log:d=>{console.log(d,{constructors:t,constructor:i,params:l})}}}}),n};$s([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const XS=e=>e.type==="inline-command"||e.type==="inline-format",ZS=e=>e.type==="block-command"||e.type==="block-format",QS=e=>{var t;const n=o=>Rr.error({message:o,pattern:e}),r=(o,s,i)=>{if(e.format!==void 0){let a;if(ct(e.format)){if(!Dn(e.format,se))return n(o+" pattern has non-string items in the `format` array");a=e.format}else{if(!se(e.format))return n(o+" pattern has non-string `format` parameter");a=[e.format]}return Rr.value(s(a))}return e.cmd!==void 0?se(e.cmd)?Rr.value(i(e.cmd,e.value)):n(o+" pattern has non-string `cmd` parameter"):n(o+" pattern is missing both `format` and `cmd` parameters")};if(!rn(e))return n("Raw pattern is not an object");if(!se(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!se(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let o=e.start,s=e.end;return s.length===0&&(s=o,o=""),r("Inline",i=>({type:"inline-format",start:o,end:s,format:i}),(i,a)=>({type:"inline-command",start:o,end:s,cmd:i,value:a}))}if(e.replacement!==void 0)return se(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):Rr.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter");{const o=(t=e.trigger)!==null&&t!==void 0?t:"space";return e.start.length===0?n("Block pattern has empty `start` parameter"):r("Block",s=>({type:"block-format",start:e.start,format:s[0],trigger:o}),(s,i)=>({type:"block-command",start:e.start,cmd:s,value:i,trigger:o}))}},Yb=e=>De(e,ZS),$b=e=>De(e,XS),Of=(e,t)=>({...e,blockPatterns:De(e.blockPatterns,n=>((r,o)=>(r.type==="block-command"||r.type==="block-format")&&r.trigger===o)(n,t))}),zb=e=>{const t=(n=>{const r=[],o=[];return Q(n,s=>{s.fold(i=>{r.push(i)},i=>{o.push(i)})}),{errors:r,values:o}})(Me(e,QS));return Q(t.errors,n=>console.error(n.message,n.pattern)),t.values},Wb=(e,t,n)=>{e.dispatch(t,n)},Vb=(e,t,n,r)=>{e.dispatch("FormatApply",{format:t,node:n,vars:r})},qb=(e,t,n,r)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:r})},Gb=(e,t)=>e.dispatch("SetContent",t),Kb=(e,t)=>e.dispatch("GetContent",t),Rf=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},Xb=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),Df=pt().deviceType,JS=Df.isTouch(),eE=bt.DOM,Zb=e=>Rn(e,RegExp),be=e=>t=>t.options.get(e),Cu=e=>se(e)||rn(e),Qb=(e,t="")=>n=>{const r=se(n);if(r){if(n.indexOf("=")!==-1){const o=(s=>{const i=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return bn(i,(a,l)=>{const c=l.split("="),d=c[0],m=c.length>1?c[1]:d;return a[Fr(d)]=Fr(m),a},{})})(n);return{value:St(o,e.id).getOr(t),valid:r}}return{value:n,valid:r}}return{valid:!1,message:"Must be a string."}},tE=be("iframe_attrs"),nE=be("doctype"),Jb=be("document_base_url"),rE=be("body_id"),oE=be("body_class"),e0=be("content_security_policy"),sE=be("br_in_pre"),cr=be("forced_root_block"),Jc=be("forced_root_block_attrs"),iE=be("newline_behavior"),aE=be("br_newline_selector"),lE=be("no_newline_selector"),cE=be("keep_styles"),dE=be("end_container_on_empty_block"),t0=be("automatic_uploads"),n0=be("images_reuse_filename"),uE=be("images_replace_blob_uris"),r0=be("icons"),mE=be("icons_url"),fE=be("images_upload_url"),hE=be("images_upload_base_path"),gE=be("images_upload_credentials"),pE=be("images_upload_handler"),bE=be("content_css_cors"),Mf=be("referrer_policy"),o0=be("language"),vE=be("language_url"),s0=be("indent_use_margin"),yE=be("indentation"),_E=be("content_css"),wE=be("content_style"),i0=be("font_css"),CE=be("directionality"),kE=be("inline_boundaries_selector"),a0=be("object_resizing"),xE=be("resize_img_proportional"),SE=be("placeholder"),l0=be("event_root"),EE=be("service_message"),Vl=be("theme"),NE=be("theme_url"),Pf=be("model"),AE=be("model_url"),ed=be("inline_boundaries"),TE=be("formats"),OE=be("preview_styles"),RE=be("format_empty_lines"),DE=be("format_noneditable_selector"),ME=be("custom_ui_selector"),Lf=be("inline"),PE=be("hidden_input"),LE=be("submit_patch"),BE=be("add_form_submit_trigger"),IE=be("add_unload_trigger"),FE=be("custom_undo_redo_levels"),UE=be("disable_nodechange"),c0=be("readonly"),jE=be("editable_root"),d0=be("content_css_cors"),ku=be("plugins"),HE=be("external_plugins"),YE=be("block_unsupported_drop"),$E=be("visual"),zE=be("visual_table_class"),u0=be("visual_anchor_class"),m0=be("iframe_aria_text"),WE=be("setup"),VE=be("init_instance_callback"),qE=be("urlconverter_callback"),GE=be("auto_focus"),KE=be("browser_spellcheck"),XE=be("protect"),ZE=be("paste_block_drop"),xu=be("paste_data_images"),QE=be("paste_preprocess"),JE=be("paste_postprocess"),eN=be("newdocument_content"),tN=be("paste_webkit_styles"),nN=be("paste_remove_styles_if_webkit"),rN=be("paste_merge_formats"),oN=be("smart_paste"),sN=be("paste_as_text"),iN=be("paste_tab_spaces"),aN=be("allow_html_data_urls"),lN=be("text_patterns"),cN=be("text_patterns_lookup"),f0=be("noneditable_class"),dN=be("editable_class"),uN=be("noneditable_regexp"),mN=be("preserve_cdata"),fN=be("highlight_on_focus"),h0=be("xss_sanitization"),hN=be("init_content_sync"),g0=e=>oe.explode(e.options.get("images_file_types")),gN=be("table_tab_navigation"),pN=be("details_initial_state"),bN=be("details_serialized_state"),p0=be("sandbox_iframes"),Bf=e=>e.options.get("sandbox_iframes_exclusions"),vN=be("convert_unsafe_embeds"),yN=be("license_key"),_N=be("api_key"),Su=be("disabled"),wN=xe,b0=ne,v0=e=>{const t=e.parentNode;t&&t.removeChild(e)},y0=e=>{const t=co(e);return{count:e.length-t.length,text:t}},_0=e=>{let t;for(;(t=e.data.lastIndexOf(Bn))!==-1;)e.deleteData(t,1)},w0=(e,t)=>(Za(e),t),CN=(e,t)=>G.isTextPosition(t)?((n,r)=>b0(n)&&r.container()===n?((o,s)=>{const i=y0(o.data.substr(0,s.offset())),a=y0(o.data.substr(s.offset()));return(i.text+a.text).length>0?(_0(o),G(o,s.offset()-i.count)):s})(n,r):w0(n,r))(e,t):((n,r)=>r.container()===n.parentNode?((o,s)=>{const i=s.container(),a=((l,c)=>{const d=Io(l,c);return d===-1?S.none():S.some(d)})(xt(i.childNodes),o).map(l=>l<s.offset()?G(i,s.offset()-1):s).getOr(s);return Za(o),a})(n,r):w0(n,r))(e,t),Za=e=>{wN(e)&&xo(e)&&(mb(e)?e.removeAttribute("data-mce-caret"):v0(e)),b0(e)&&(_0(e),e.data.length===0&&v0(e))},kN=Lt,xN=wo,SN=_s,C0=(e,t,n)=>{const r=hb(t.getBoundingClientRect(),n);let o,s;if(e.tagName==="BODY"){const a=e.ownerDocument.documentElement;o=e.scrollLeft||a.scrollLeft,s=e.scrollTop||a.scrollTop}else{const a=e.getBoundingClientRect();o=e.scrollLeft-a.left,s=e.scrollTop-a.top}r.left+=o,r.right+=o,r.top+=s,r.bottom+=s,r.width=1;let i=t.offsetWidth-t.clientWidth;return i>0&&(n&&(i*=-1),r.left+=i,r.right+=i),r},EN=(e,t,n,r)=>{const o=Cs();let s,i;const a=cr(e),l=e.dom,c=()=>{(d=>{var m,h;const v=Ln(M(d),"*[contentEditable=false],video,audio,embed,object");for(let g=0;g<v.length;g++){const y=v[g].dom;let p=y.previousSibling;if(bu(p)){const _=p.data;_.length===1?(m=p.parentNode)===null||m===void 0||m.removeChild(p):p.deleteData(_.length-1,1)}p=y.nextSibling,pu(p)&&(p.data.length===1?(h=p.parentNode)===null||h===void 0||h.removeChild(p):p.deleteData(0,1))}})(t),i&&(Za(i),i=null),o.on(d=>{l.remove(d.caret),o.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(d,m)=>{let h;if(c(),SN(m))return null;if(!n(m))return i=((v,g)=>{var y;const p=((y=v.ownerDocument)!==null&&y!==void 0?y:document).createTextNode(Bn),_=v.parentNode;if(g){const k=v.previousSibling;if($l(k)){if(xo(k))return k;if(bu(k))return k.splitText(k.data.length-1)}_?.insertBefore(p,v)}else{const k=v.nextSibling;if($l(k)){if(xo(k))return k;if(pu(k))return k.splitText(1),k}v.nextSibling?_?.insertBefore(p,v.nextSibling):_?.appendChild(p)}return p})(m,d),h=m.ownerDocument.createRange(),td(i.nextSibling)?(h.setStart(i,0),h.setEnd(i,0)):(h.setStart(i,1),h.setEnd(i,1)),h;{const v=((p,_,k)=>{var x;const A=((x=_.ownerDocument)!==null&&x!==void 0?x:document).createElement(p);A.setAttribute("data-mce-caret",k?"before":"after"),A.setAttribute("data-mce-bogus","all"),A.appendChild(Yl().dom);const N=_.parentNode;return k?N?.insertBefore(A,_):_.nextSibling?N?.insertBefore(A,_.nextSibling):N?.appendChild(A),A})(a,m,d),g=C0(t,m,d);l.setStyle(v,"top",g.top),l.setStyle(v,"caret-color","transparent"),i=v;const y=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(y,{...g}),l.add(t,y),o.set({caret:y,element:m,before:d}),d&&l.addClass(y,"mce-visual-caret-before"),s=setInterval(()=>{o.on(p=>{r()?l.toggleClass(p.caret,"mce-visual-caret-hidden"):l.addClass(p.caret,"mce-visual-caret-hidden")})},500),h=m.ownerDocument.createRange(),h.setStart(v,0),h.setEnd(v,0)}return h},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(d=>{const m=C0(t,d.element,d.before);l.setStyles(d.caret,{...m})})},destroy:()=>clearInterval(s)}},k0=()=>Qe.browser.isFirefox(),td=e=>kN(e)||xN(e),nd=e=>(td(e)||Or(e)&&k0())&&b(M(e)).exists(yi),NN=qr,If=Lt,AN=wo,x0=Ua("display","block table table-cell table-row table-caption list-item"),S0=xo,E0=zl,TN=xe,ON=ne,RN=xs,ql=e=>e>0,Qa=e=>e<0,Eu=(e,t)=>{let n;for(;n=e(t);)if(!E0(n))return n;return null},rd=(e,t,n,r,o)=>{const s=new Cn(e,r),i=If(e)||E0(e);let a;if(Qa(t)){if(i&&(a=Eu(s.prev.bind(s),!0),n(a)))return a;for(;a=Eu(s.prev.bind(s),o);)if(n(a))return a}if(ql(t)){if(i&&(a=Eu(s.next.bind(s),!0),n(a)))return a;for(;a=Eu(s.next.bind(s),o);)if(n(a))return a}return null},ga=(e,t)=>{for(;e&&e!==t;){if(x0(e))return e;e=e.parentNode}return null},zs=(e,t,n)=>ga(e.container(),n)===ga(t.container(),n),Ff=(e,t)=>{if(!t)return S.none();const n=t.container(),r=t.offset();return TN(n)?S.from(n.childNodes[r+e]):S.none()},N0=(e,t)=>{var n;const r=((n=t.ownerDocument)!==null&&n!==void 0?n:document).createRange();return e?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),r},DN=(e,t,n)=>ga(t,e)===ga(n,e),A0=(e,t,n)=>{const r=e?"previousSibling":"nextSibling";let o=n;for(;o&&o!==t;){let s=o[r];if(s&&S0(s)&&(s=s[r]),If(s)||AN(s)){if(DN(t,s,o))return s;break}if(RN(s))break;o=o.parentNode}return null},od=_e(N0,!0),sd=_e(N0,!1),Uf=(e,t,n)=>{let r;const o=_e(A0,!0,t),s=_e(A0,!1,t),i=n.startContainer,a=n.startOffset;if(zl(i)){const l=ON(i)?i.parentNode:i,c=l.getAttribute("data-mce-caret");if(c==="before"&&(r=l.nextSibling,nd(r)))return od(r);if(c==="after"&&(r=l.previousSibling,nd(r)))return sd(r)}if(!n.collapsed)return n;if(ne(i)){if(S0(i)){if(e===1){if(r=s(i),r)return od(r);if(r=o(i),r)return sd(r)}if(e===-1){if(r=o(i),r)return sd(r);if(r=s(i),r)return od(r)}return n}if(bu(i)&&a>=i.data.length-1)return e===1&&(r=s(i),r)?od(r):n;if(pu(i)&&a<=1)return e===-1&&(r=o(i),r)?sd(r):n;if(a===i.data.length)return r=s(i),r?od(r):n;if(a===0)return r=o(i),r?sd(r):n}return n},T0=(e,t)=>Ff(e?0:-1,t).filter(If),id=(e,t,n)=>{const r=Uf(e,t,n);return e===-1?G.fromRangeStart(r):G.fromRangeEnd(r)},Nu=e=>S.from(e.getNode()).map(M),jf=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},Au=(e,t)=>{const n=zs(e,t);return!(n||!jt(e.getNode()))||n};var In;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(In||(In={}));const MN=Lt,Ws=ne,O0=xe,Hf=jt,Gl=xs,R0=e=>yb(e)||(t=>!!wf(t)&&!bn(xt(t.getElementsByTagName("*")),(n,r)=>n||vb(r),!1))(e),Tu=_b,D0=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,M0=(e,t)=>{if(ql(e)){if(Gl(t.previousSibling)&&!Ws(t.previousSibling))return G.before(t);if(Ws(t))return G(t,0)}if(Qa(e)){if(Gl(t.nextSibling)&&!Ws(t.nextSibling))return G.after(t);if(Ws(t))return G(t,t.data.length)}return Qa(e)?Hf(t)?G.before(t):G.after(t):G.before(t)},Yf=(e,t,n)=>{let r,o,s,i;if(!O0(n)||!t)return null;if(t.isEqual(G.after(n))&&n.lastChild){if(i=G.after(n.lastChild),Qa(e)&&Gl(n.lastChild)&&O0(n.lastChild))return Hf(n.lastChild)?G.before(n.lastChild):i}else i=t;const a=i.container();let l=i.offset();if(Ws(a)){if(Qa(e)&&l>0)return G(a,--l);if(ql(e)&&l<a.length)return G(a,++l);r=a}else{if(Qa(e)&&l>0&&(o=D0(a,l-1),Gl(o)))return!R0(o)&&(s=rd(o,e,Tu,o),s)?Ws(s)?G(s,s.data.length):G.after(s):Ws(o)?G(o,o.data.length):G.before(o);if(ql(e)&&l<a.childNodes.length&&(o=D0(a,l),Gl(o)))return Hf(o)?((d,m)=>{const h=m.nextSibling;return h&&Gl(h)?Ws(h)?G(h,0):G.before(h):Yf(In.Forwards,G.after(m),d)})(n,o):!R0(o)&&(s=rd(o,e,Tu,o),s)?Ws(s)?G(s,0):G.before(s):Ws(o)?G(o,0):G.after(o);r=o||i.getNode()}if(r&&(ql(e)&&i.isAtEnd()||Qa(e)&&i.isAtStart())&&(r=rd(r,e,Zt,n,!0),Tu(r,n)))return M0(e,r);o=r&&rd(r,e,Tu,n);const c=br(De(((d,m)=>{const h=[];let v=d;for(;v&&v!==m;)h.push(v),v=v.parentNode;return h})(a,n),MN));return!c||o&&c.contains(o)?o?M0(e,o):null:(i=ql(e)?G.after(c):G.before(c),i)},Vs=e=>({next:t=>Yf(In.Forwards,t,e),prev:t=>Yf(In.Backwards,t,e)}),P0=e=>G.isTextPosition(e)?e.offset()===0:xs(e.getNode()),L0=e=>{if(G.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return xs(e.getNode(!0))},B0=(e,t)=>!G.isTextPosition(e)&&!G.isTextPosition(t)&&e.getNode()===t.getNode(!0),So=(e,t,n)=>{const r=Vs(t);return S.from(e?r.next(n):r.prev(n))},Kl=(e,t,n)=>So(e,t,n).bind(r=>zs(n,r,t)&&((o,s,i)=>{return o?!B0(s,i)&&(a=s,!(!G.isTextPosition(a)&&jt(a.getNode())))&&L0(s)&&P0(i):!B0(i,s)&&P0(s)&&L0(i);var a})(e,n,r)?So(e,t,r):S.some(r)),I0=(e,t,n,r)=>Kl(e,t,n).bind(o=>r(o)?I0(e,t,o,r):S.some(o)),Xl=(e,t)=>{const n=e?t.firstChild:t.lastChild;return ne(n)?S.some(G(n,e?0:n.data.length)):n?xs(n)?S.some(e?G.before(n):jt(r=n)?G.before(r):G.after(r)):((o,s,i)=>{const a=o?G.before(i):G.after(i);return So(o,s,a)})(e,t,n):S.none();var r},Dr=_e(So,!0),Xr=_e(So,!1),dr=_e(Xl,!0),Qo=_e(Xl,!1),$f="_mce_caret",Eo=e=>xe(e)&&e.id===$f,Ja=(e,t)=>{let n=t;for(;n&&n!==e;){if(Eo(n))return n;n=n.parentNode}return null},F0=e=>He(e,"name"),U0=e=>oe.isArray(e.start),Ou=e=>!(!F0(e)&&hr(e.forward))||e.forward,j0=(e,t)=>(xe(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),PN=(e,t)=>Qo(e).fold(ht,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),H0=(e,t,n)=>!(!(r=>!r.hasChildNodes())(t)||!Ja(e,t)||(((r,o)=>{var s;const i=((s=r.ownerDocument)!==null&&s!==void 0?s:document).createTextNode(Bn);r.appendChild(i),o.setStart(i,0),o.setEnd(i,0)})(t,n),0)),Y0=(e,t,n,r)=>{const o=n[t?"start":"end"],s=e.getRoot();if(o){let i=s,a=o[0];for(let l=o.length-1;i&&l>=1;l--){const c=i.childNodes;if(H0(s,i,r))return!0;if(o[l]>c.length-1)return!!H0(s,i,r)||PN(i,r);i=c[o[l]]}ne(i)&&(a=Math.min(o[0],i.data.length)),xe(i)&&(a=Math.min(o[0],i.childNodes.length)),t?r.setStart(i,a):r.setEnd(i,a)}return!0},zf=e=>ne(e)&&e.data.length>0,$0=(e,t,n)=>{const r=e.get(n.id+"_"+t),o=r?.parentNode,s=n.keep;if(r&&o){let i,a;if(t==="start"?s?r.hasChildNodes()?(i=r.firstChild,a=1):zf(r.nextSibling)?(i=r.nextSibling,a=0):zf(r.previousSibling)?(i=r.previousSibling,a=r.previousSibling.data.length):(i=o,a=e.nodeIndex(r)+1):(i=o,a=e.nodeIndex(r)):s?r.hasChildNodes()?(i=r.firstChild,a=1):zf(r.previousSibling)?(i=r.previousSibling,a=r.previousSibling.data.length):(i=o,a=e.nodeIndex(r)):(i=o,a=e.nodeIndex(r)),!s){const l=r.previousSibling,c=r.nextSibling;let d;for(oe.each(oe.grep(r.childNodes),m=>{ne(m)&&(m.data=m.data.replace(/\uFEFF/g,""))});d=e.get(n.id+"_"+t);)e.remove(d,!0);if(ne(c)&&ne(l)&&!Qe.browser.isOpera()){const m=l.data.length;l.appendData(c.data),e.remove(c),i=l,a=m}}return S.some(G(i,a))}return S.none()},LN=(e,t,n)=>((r,o,s=!1)=>o===2?Ib(co,s,r):o===3?(i=>{const a=i.getRng();return{start:Rb(i.dom.getRoot(),G.fromRangeStart(a)),end:Rb(i.dom.getRoot(),G.fromRangeEnd(a)),forward:i.isForward()}})(r):o?(i=>({rng:i.getRng(),forward:i.isForward()}))(r):Ub(r,!1))(e,t,n),BN=(e,t)=>{((n,r)=>{const o=n.dom;if(r){if(U0(r))return((s,i)=>{const a=s.createRng();return Y0(s,!0,i,a)&&Y0(s,!1,i,a)?S.some({range:a,forward:Ou(i)}):S.none()})(o,r);if((s=>se(s.start))(r))return((s,i)=>{const a=S.from(Db(s.getRoot(),i.start)),l=S.from(Db(s.getRoot(),i.end));return Bt(a,l,(c,d)=>{const m=s.createRng();return m.setStart(c.container(),c.offset()),m.setEnd(d.container(),d.offset()),{range:m,forward:Ou(i)}})})(o,r);if((s=>He(s,"id"))(r))return((s,i)=>{const a=$0(s,"start",i),l=$0(s,"end",i);return Bt(a,l.or(a),(c,d)=>{const m=s.createRng();return m.setStart(j0(s,c.container()),c.offset()),m.setEnd(j0(s,d.container()),d.offset()),{range:m,forward:Ou(i)}})})(o,r);if(F0(r))return((s,i)=>S.from(s.select(i.name)[i.index]).map(a=>{const l=s.createRng();return l.selectNode(a),{range:l,forward:!0}}))(o,r);if((s=>He(s,"rng"))(r))return S.some({range:r.rng,forward:Ou(r)})}return S.none()})(e,t).each(({range:n,forward:r})=>{e.setRng(n,r)})},No=e=>xe(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Ru=(z0=Ut,e=>z0===e);var z0;const el=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Wf=e=>!el(e)&&!Ru(e)&&!El(e),Vf=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},W0=(e,t)=>{const n=Ln(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:(r=>De((o=>gr(o,s=>{const i=vu(s);return i?[M(i)]:[]}))(r),Gc))(e)},Zl=e=>W0(Vf(e.selection.getSel()),M(e.getBody())),ad=(e,t)=>Da(e,"table",t),V0=e=>ke(e).fold(ce([e]),t=>[e].concat(V0(t))),qf=e=>Ge(e).fold(ce([e]),t=>Je(t)==="br"?E(t).map(n=>[e].concat(qf(n))).getOr([]):[e].concat(qf(t))),Gf=(e,t)=>Bt((n=>{const r=n.startContainer,o=n.startOffset;return ne(r)?o===0?S.some(M(r)):S.none():S.from(r.childNodes[o]).map(M)})(t),(n=>{const r=n.endContainer,o=n.endOffset;return ne(r)?o===r.data.length?S.some(M(r)):S.none():S.from(r.childNodes[o-1]).map(M)})(t),(n,r)=>{const o=Mt(V0(e),_e(at,n)),s=Mt(qf(e),_e(at,r));return o.isSome()&&s.isSome()}).getOr(!1),Kf=(e,t,n,r)=>{const o=n,s=new Cn(n,o),i=Vt(e.schema.getMoveCaretBeforeOnEnterElements(),(l,c)=>!fe(["td","th","table"],c.toLowerCase()));let a=n;do{if(ne(a)&&oe.trim(a.data).length!==0)return void(r?t.setStart(a,0):t.setEnd(a,a.data.length));if(i[a.nodeName])return void(r?t.setStartBefore(a):a.nodeName==="BR"?t.setEndBefore(a):t.setEndAfter(a))}while(a=r?s.next():s.prev());o.nodeName==="BODY"&&(r?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Du=e=>{const t=e.selection.getSel();return ie(t)&&t.rangeCount>0},Xf=(e,t)=>{const n=Zl(e);n.length>0?Q(n,r=>{const o=r.dom,s=e.dom.createRng();s.setStartBefore(o),s.setEndAfter(o),t(s,!0)}):t(e.selection.getRng(),!1)},q0=(e,t,n)=>{const r=Ub(e,t);n(r),e.moveToBookmark(r)},ld=e=>Jt(e?.nodeType),Zf=e=>xe(e)&&!No(e)&&!Eo(e)&&!Is(e),G0=(e,t,n)=>{const{selection:r,dom:o}=e,s=r.getNode(),i=Lt(s);q0(r,!0,()=>{t()}),i&&Lt(s)&&o.isChildOf(s,e.getBody())?e.selection.select(s):n(r.getStart())&&IN(o,r)},IN=(e,t)=>{var n,r;const o=t.getRng(),{startContainer:s,startOffset:i}=o;if(!((a,l)=>{if(Zf(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=a.getAttrib(l,"data-mce-selected"),d=parseInt(c,10);return!isNaN(d)&&d>0}return!1})(e,t.getNode())&&xe(s)){const a=s.childNodes,l=e.getRoot();let c;if(i<a.length){const d=a[i];c=new Cn(d,(n=e.getParent(d,e.isBlock))!==null&&n!==void 0?n:l)}else{const d=a[a.length-1];c=new Cn(d,(r=e.getParent(d,e.isBlock))!==null&&r!==void 0?r:l),c.next(!0)}for(let d=c.current();d;d=c.next()){if(e.getContentEditable(d)==="false")return;if(ne(d)&&!Jf(d))return o.setStart(d,0),void t.setRng(o)}}},K0=(e,t,n)=>{if(e){const r=t?"nextSibling":"previousSibling";for(e=n?e:e[r];e;e=e[r])if(xe(e)||!Jf(e))return e}},Qf=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Ni(e,t),Ql=(e,t,n)=>e.schema.isValidChild(t,n),Jf=(e,t=!1)=>{if(ie(e)&&ne(e)){const n=t?e.data.replace(/ /g,"\xA0"):e.data;return sa(n)}return!1},X0=(e,t)=>{const n=e.dom;return Zf(t)&&n.getContentEditable(t)==="false"&&((r,o)=>{const s="[data-mce-cef-wrappable]",i=DE(r),a=ro(i)?s:`${s},${i}`;return fn(M(o),a)})(e,t)&&n.select('[contenteditable="true"]',t).length===0},pa=(e,t)=>dt(e)?e(t):(ie(t)&&(e=e.replace(/%(\w+)/g,(n,r)=>t[r]||n)),e),eh=(e,t)=>(t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),th=(e,t)=>{if(Wt(e))return null;{let n=String(e);return t!=="color"&&t!=="backgroundColor"||(n=_n(n)),t==="fontWeight"&&e===700&&(n="bold"),t==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Mu=(e,t,n)=>{const r=e.getStyle(t,n);return th(r,n)},Z0=(e,t)=>{let n;return e.getParent(t,r=>!!xe(r)&&(n=e.getStyle(r,"text-decoration"),!!n&&n!=="none")),n},Pu=(e,t,n)=>e.getParents(t,n,e.getRoot()),nh=(e,t,n)=>{const r=e.formatter.get(t);return ie(r)&&yt(r,n)},qs=e=>no(e,"block"),Ao=e=>no(e,"selector"),Tn=e=>no(e,"inline"),rh=e=>Ao(e)&&e.expand!==!1&&!Tn(e),Q0=e=>(t=>{const n=[];let r=t;for(;r;){if(ne(r)&&r.data!==Bn||r.childNodes.length>1)return[];xe(r)&&n.push(r),r=r.firstChild}return n})(e).length>0,oh=e=>Eo(e.dom)&&Q0(e.dom),Jl=No,J0=Pu,ev=Jf,FN=Qf,tv=(e,t)=>{let n=t;for(;n;){if(xe(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},nv=(e,t,n,r)=>{const o=t.data;if(e){for(let s=n;s>0;s--)if(r(o.charAt(s-1)))return s}else for(let s=n;s<o.length;s++)if(r(o.charAt(s)))return s;return-1},UN=(e,t,n)=>nv(e,t,n,r=>Ru(r)||el(r)),jN=(e,t,n)=>nv(e,t,n,Wf),rv=(e,t,n,r,o,s)=>{let i;const a=e.getParent(n,e.isBlock)||t,l=(c,d,m)=>{const h=qa(e),v=o?h.backwards:h.forwards;return S.from(v(c,d,(g,y)=>Jl(g.parentNode)?-1:(i=g,m(o,g,y)),a))};return l(n,r,UN).bind(c=>s?l(c.container,c.offset+(o?-1:0),jN):S.some(c)).orThunk(()=>i?S.some({container:i,offset:o?0:i.length}):S.none())},ov=(e,t,n,r,o)=>{const s=r[o];ne(r)&&ro(r.data)&&s&&(r=s);const i=J0(e,r);for(let a=0;a<i.length;a++)for(let l=0;l<t.length;l++){const c=t[l];if((!ie(c.collapsed)||c.collapsed===n.collapsed)&&Ao(c)&&e.is(i[a],c.selector))return i[a]}return r},sv=(e,t,n,r)=>{var o;let s=n;const i=e.getRoot(),a=t[0];if(qs(a)&&(s=a.wrapper?null:e.getParent(n,a.block,i)),!s){const l=(o=e.getParent(n,"LI,TD,TH,SUMMARY"))!==null&&o!==void 0?o:i;s=e.getParent(ne(n)?n.parentNode:n,c=>c!==i&&FN(e.schema,c),l)}if(s&&qs(a)&&a.wrapper&&(s=J0(e,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[r]&&!e.isBlock(s[r])&&(s=s[r],!eh(s,"br")););return s||n},iv=(e,t,n,r)=>{const o=n.parentNode;return!ie(n[r])&&(!(o!==t&&!Wt(o)&&!e.isBlock(o))||iv(e,t,o,r))},Lu=(e,t,n,r,o)=>{let s=n;const i=o?"previousSibling":"nextSibling",a=e.getRoot();if(ne(n)&&!ev(n)&&(o?r>0:r<n.data.length))return n;for(;s;){if(!t[0].block_expand&&e.isBlock(s))return s;for(let c=s[i];c;c=c[i]){const d=ne(c)&&!iv(e,a,c,i);if(!Jl(c)&&(!jt(l=c)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!ev(c,d))return s}if(s===a||s.parentNode===a){n=s;break}s=s.parentNode}var l;return n},av=e=>Jl(e.parentNode)||Jl(e),tl=(e,t,n,r=!1)=>{let{startContainer:o,startOffset:s,endContainer:i,endOffset:a}=t;const l=n[0];return xe(o)&&o.hasChildNodes()&&(o=fa(o,s),ne(o)&&(s=0)),xe(i)&&i.hasChildNodes()&&(i=fa(i,t.collapsed?a:a-1),ne(i)&&(a=i.data.length)),o=tv(e,o),i=tv(e,i),av(o)&&(o=Jl(o)?o:o.parentNode,o=t.collapsed?o.previousSibling||o:o.nextSibling||o,ne(o)&&(s=t.collapsed?o.length:0)),av(i)&&(i=Jl(i)?i:i.parentNode,i=t.collapsed?i.nextSibling||i:i.previousSibling||i,ne(i)&&(a=t.collapsed?0:i.length)),t.collapsed&&(rv(e,e.getRoot(),o,s,!0,r).each(({container:c,offset:d})=>{o=c,s=d}),rv(e,e.getRoot(),i,a,!1,r).each(({container:c,offset:d})=>{i=c,a=d})),(Tn(l)||l.block_expand)&&(Tn(l)&&ne(o)&&s!==0||(o=Lu(e,n,o,s,!0)),Tn(l)&&ne(i)&&a!==i.data.length||(i=Lu(e,n,i,a,!1))),rh(l)&&(o=ov(e,n,t,o,"previousSibling"),i=ov(e,n,t,i,"nextSibling")),(qs(l)||Ao(l))&&(o=sv(e,n,o,"previousSibling"),i=sv(e,n,i,"nextSibling"),qs(l)&&(e.isBlock(o)||(o=Lu(e,n,o,s,!0),ne(o)&&(s=0)),e.isBlock(i)||(i=Lu(e,n,i,a,!1),ne(i)&&(a=i.data.length)))),xe(o)&&o.parentNode&&(s=e.nodeIndex(o),o=o.parentNode),xe(i)&&i.parentNode&&(a=e.nodeIndex(i)+1,i=i.parentNode),{startContainer:o,startOffset:s,endContainer:i,endOffset:a}},cd=(e,t,n)=>{var r;const o=t.startOffset,s=fa(t.startContainer,o),i=t.endOffset,a=fa(t.endContainer,i-1),l=p=>{const _=p[0];ne(_)&&_===s&&o>=_.data.length&&p.splice(0,1);const k=p[p.length-1];return i===0&&p.length>0&&k===a&&ne(k)&&p.splice(p.length-1,1),p},c=(p,_,k)=>{const x=[];for(;p&&p!==k;p=p[_])x.push(p);return x},d=(p,_)=>e.getParent(p,k=>k.parentNode===_,_),m=(p,_,k)=>{const x=k?"nextSibling":"previousSibling";for(let A=p,N=A.parentNode;A&&A!==_;A=N){N=A.parentNode;const O=c(A===p?A:A[x],x);O.length&&(k||O.reverse(),n(l(O)))}};if(s===a)return n(l([s]));const h=(r=e.findCommonAncestor(s,a))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(s,a))return m(s,h,!0);if(e.isChildOf(a,s))return m(a,h);const v=d(s,h)||s,g=d(a,h)||a;m(s,v,!0);const y=c(v===s?v:v.nextSibling,"nextSibling",g===a?g.nextSibling:g);y.length&&n(l(y)),m(a,g)},HN=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],lv=(e,t,n,r,o,s)=>{const{uid:i=t,...a}=n;ms(e,Oi()),tn(e,`${Ul()}`,i),tn(e,`${Ys()}`,r);const{attributes:l={},classes:c=[]}=o(i,a);if(Hr(e,l),((d,m)=>{Q(m,h=>{ms(d,h)})})(e,c),s){c.length>0&&tn(e,`${zc()}`,c.join(","));const d=Ct(l);d.length>0&&tn(e,`${Wc()}`,d.join(","))}},cv=(e,t,n,r,o)=>{const s=Ft("span",e);return lv(s,t,n,r,o,!1),s},YN=(e,t,n,r,o,s)=>{const i=[],a=cv(e.getDoc(),n,s,r,o),l=Cs(),c=()=>{l.clear()},d=h=>{Q(h,m)},m=h=>{switch(((v,g,y,p)=>u(g).fold(()=>"skipping",_=>p==="br"||(k=>sn(k)&&qc(k)===Bn)(g)?"valid":(k=>Yn(k)&&so(k,Oi()))(g)?"existing":Eo(g.dom)?"caret":yt(HN,k=>fn(g,k))?"valid-block":Ql(v,y,p)&&Ql(v,Je(_),y)?"valid":"invalid-child"))(e,h,"span",Je(h))){case"invalid-child":{c();const v=le(h);d(v),c();break}case"valid-block":c(),lv(h,n,s,r,o,!0);break;case"valid":{const v=l.get().getOrThunk(()=>{const g=Va(a);return i.push(g),l.set(g),g});Xd(h,v);break}}};return cd(e.dom,t,h=>{c(),(v=>{const g=Me(v,M);d(g)})(h)}),i},dv=e=>{const t=(()=>{const s={};return{register:(i,a)=>{s[i]={name:i,settings:a}},lookup:i=>St(s,i).map(a=>a.settings),getNames:()=>Ct(s)}})();((s,i)=>{const a=Ys(),l=d=>S.from(d.attr(a)).bind(i.lookup),c=d=>{var m,h;d.attr(Ul(),null),d.attr(Ys(),null),d.attr($c(),null);const v=S.from(d.attr(Wc())).map(_=>_.split(",")).getOr([]),g=S.from(d.attr(zc())).map(_=>_.split(",")).getOr([]);Q(v,_=>d.attr(_,null));const y=(h=(m=d.attr("class"))===null||m===void 0?void 0:m.split(" "))!==null&&h!==void 0?h:[],p=ot(y,[Oi()].concat(g));d.attr("class",p.length>0?p.join(" "):null),d.attr(zc(),null),d.attr(Wc(),null)};s.serializer.addTempAttr($c()),s.serializer.addAttributeFilter(a,d=>{for(const m of d)l(m).each(h=>{h.persistent===!1&&(m.name==="span"?m.unwrap():c(m))})})})(e,t);const n=((s,i)=>{const a=kn({}),l=()=>({listeners:[],previous:Cs()}),c=(v,g)=>{d(v,y=>(g(y),y))},d=(v,g)=>{const y=a.get(),p=g(St(y,v).getOrThunk(l));y[v]=p,a.set(y)},m=(v,g)=>{Q(rb(s,v),y=>{g?tn(y,$c(),"true"):dn(y,$c())})},h=Yc(()=>{const v=eo(i.getNames());Q(v,g=>{d(g,y=>{const p=y.previous.get();return tb(s,S.some(g)).fold(()=>{p.each(_=>{(k=>{c(k,x=>{Q(x.listeners,A=>A(!1,k))})})(g),y.previous.clear(),m(_,!1)})},({uid:_,name:k,elements:x})=>{ds(p,_)||(p.each(A=>m(A,!1)),((A,N,O)=>{c(A,L=>{Q(L.listeners,P=>P(!0,A,{uid:N,nodes:Me(O,j=>j.dom)}))})})(k,_,x),y.previous.set(_),m(_,!0))}),{previous:y.previous,listeners:y.listeners}})})},30);return s.on("remove",()=>{h.cancel()}),s.on("NodeChange",()=>{h.throttle()}),{addListener:(v,g)=>{d(v,y=>({previous:y.previous,listeners:y.listeners.concat([g])}))}}})(e,t),r=us("span"),o=s=>{Q(s,i=>{r(i)?bs(i):(a=>{ar(a,Oi()),dn(a,`${Ul()}`),dn(a,`${Ys()}`),dn(a,`${$c()}`);const l=vn(a,`${Wc()}`).map(m=>m.split(",")).getOr([]),c=vn(a,`${zc()}`).map(m=>m.split(",")).getOr([]);var d;Q(l,m=>dn(a,m)),d=a,Q(c,m=>{ar(d,m)}),dn(a,`${zc()}`),dn(a,`${Wc()}`)})(i)})};return{register:(s,i)=>{t.register(s,i)},annotate:(s,i)=>{t.lookup(s).each(a=>{((l,c,d,m)=>{l.undoManager.transact(()=>{const h=l.selection,v=h.getRng(),g=Zl(l).length>0,y=Vc("mce-annotation");if(v.collapsed&&!g&&((p,_)=>{const k=tl(p.dom,_,[{inline:"span"}]);_.setStart(k.startContainer,k.startOffset),_.setEnd(k.endContainer,k.endOffset),p.selection.setRng(_)})(l,v),h.getRng().collapsed&&!g){const p=cv(l.getDoc(),y,m,c,d.decorate);kl(p,Ut),h.getRng().insertNode(p.dom),h.select(p.dom)}else q0(h,!1,()=>{Xf(l,p=>{YN(l,p,y,c,d.decorate,m)})})})})(e,s,a,i)})},annotationChanged:(s,i)=>{n.addListener(s,i)},remove:s=>{tb(e,S.some(s)).each(({elements:i})=>{const a=e.selection.getBookmark();o(i),e.selection.moveToBookmark(a)})},removeAll:s=>{const i=e.selection.getBookmark();it(ob(e,s),(a,l)=>{o(a)}),e.selection.moveToBookmark(i)},getAll:s=>{const i=ob(e,s);return Ir(i,a=>Me(a,l=>l.dom))}}},dd=e=>({getBookmark:_e(LN,e),moveToBookmark:_e(BN,e)});dd.isBookmarkNode=No;const uv=(e,t,n)=>!n.collapsed&&yt(n.getClientRects(),r=>((o,s,i)=>s>=o.left&&s<=o.right&&i>=o.top&&i<=o.bottom)(r,e,t)),mv=()=>M(document),fv=(e,t=!1)=>e.dom.focus({preventScroll:t}),hv=e=>{const t=qt(e).dom;return e.dom===t.activeElement},sh=(e=mv())=>S.from(e.dom.activeElement).map(M),gv=(e,t,n,r)=>({start:e,soffset:t,finish:n,foffset:r}),ih=$s([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Ri={before:ih.before,on:ih.on,after:ih.after,cata:(e,t,n,r)=>e.fold(t,n,r),getStart:e=>e.fold(En,En,En)},Bu=$s([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ec={domRange:Bu.domRange,relative:Bu.relative,exact:Bu.exact,exactFromRange:e=>Bu.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(n=>n.match({domRange:r=>M(r.startContainer),relative:(r,o)=>Ri.getStart(r),exact:(r,o,s,i)=>r}))(e);return ut(t)},range:gv},pv=(e,t)=>{const n=sn(t)?qc(t).length:le(t).length+1;return e>n?n:e<0?0:e},$N=e=>ec.range(e.start,pv(e.soffset,e.start),e.finish,pv(e.foffset,e.finish)),bv=(e,t)=>!Nl(t.dom)&&(vr(e,t)||at(e,t)),vv=e=>t=>bv(e,t.start)&&bv(e,t.finish),zN=e=>ec.range(M(e.startContainer),e.startOffset,M(e.endContainer),e.endOffset),WN=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),S.some(t)}catch{return S.none()}},Iu=e=>{const t=(r=>r.inline||Qe.browser.isFirefox())(e)?(n=M(e.getBody()),(r=>{const o=r.getSelection();return(o&&o.rangeCount!==0?S.from(o.getRangeAt(0)):S.none()).map(zN)})(ut(n).dom).filter(vv(n))):S.none();var n;e.bookmark=t.isSome()?t:e.bookmark},ah=e=>(e.bookmark?e.bookmark:S.none()).bind(t=>{return n=M(e.getBody()),r=t,S.from(r).filter(vv(n)).map($N);var n,r}).bind(WN),yv={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},To={setEditorTimeout:(e,t,n)=>((r,o)=>(Jt(o)||(o=0),setTimeout(r,o)))(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const r=((o,s)=>(Jt(s)||(s=0),setInterval(o,s)))(()=>{e.removed?clearInterval(r):t()},n);return r}};let tc;const lh=bt.DOM,ch=e=>{const t=e.classList;return t!==void 0&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},Fu=(e,t)=>{const n=ME(e);return lh.getParent(t,o=>(s=>xe(s)&&yv.isEditorUIElement(s))(o)||!!n&&e.dom.is(o,n))!==null},dh=e=>{try{const t=qt(M(e.getElement()));return sh(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},VN=(e,t)=>{const n=t.editor;(o=>{const s=Fl(()=>{Iu(o)},0);o.on("init",()=>{o.inline&&((i,a)=>{const l=()=>{a.throttle()};bt.DOM.bind(document,"mouseup",l),i.on("remove",()=>{bt.DOM.unbind(document,"mouseup",l)})})(o,s),((i,a)=>{((l,c)=>{l.on("mouseup touchend",d=>{c.throttle()})})(i,a),i.on("keyup NodeChange AfterSetSelectionRange",l=>{(c=>c.type==="nodechange"&&c.selectionChange)(l)||Iu(i)})})(o,s)}),o.on("remove",()=>{s.cancel()})})(n);const r=(o,s)=>{fN(o)&&o.inline!==!0&&s(M(o.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const o=e.focusedEditor;ch(dh(n))&&r(n,ms),o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{To.setEditorTimeout(n,()=>{const o=e.focusedEditor;ch(dh(n))&&o===n||r(n,ar),Fu(n,dh(n))||o!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),tc||(tc=o=>{const s=e.activeEditor;s&&Cc(o).each(i=>{const a=i;a.ownerDocument===document&&(a===document.body||Fu(s,a)||e.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))})},lh.bind(document,"focusin",tc))},qN=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&tc&&(lh.unbind(document,"focusin",tc),tc=null)},_v=(e,t)=>{((n,r)=>(o=>o.collapsed?S.from(fa(o.startContainer,o.startOffset)).map(M):S.none())(r).bind(o=>FS(o)?S.some(o):vr(n,o)?S.none():S.some(n)))(M(e.getBody()),t).bind(n=>dr(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},Uu=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},nc=e=>e.inline?(t=>{const n=t.getBody();return n&&(r=M(n),hv(r)||(o=r,sh(qt(o)).filter(s=>o.dom.contains(s.dom))).isSome());var r,o})(e):(t=>ie(t.iframeElement)&&hv(M(t.iframeElement)))(e),uh=e=>nc(e)||(t=>{const n=qt(M(t.getElement()));return sh(n).filter(r=>!ch(r.dom)&&Fu(t,r.dom)).isSome()})(e),mh=e=>e.editorManager.setActive(e),ve={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||ve.metaKeyPressed(e),metaKeyPressed:e=>Qe.os.isMacOS()||Qe.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},nl="data-mce-selected",wv=Math.abs,ju=Math.round,fh={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Cv=(e,t)=>{const n=t.dom,r=t.getDoc(),o=document,s=t.getBody();let i,a,l,c,d,m,h,v,g,y,p,_,k,x,A;const N=me=>ie(me)&&(su(me)||n.is(me,"figure.image")),O=me=>wo(me)||n.hasClass(me,"mce-preview-object"),L=me=>{const Ce=me.target;((F,H)=>{if((q=>q.type==="longpress"||q.type.indexOf("touch")===0)(F)){const q=F.touches[0];return N(F.target)&&!uv(q.clientX,q.clientY,H)}return N(F.target)&&!uv(F.clientX,F.clientY,H)})(me,t.selection.getRng())&&!me.isDefaultPrevented()&&t.selection.select(Ce)},P=me=>n.hasClass(me,"mce-preview-object")&&ie(me.firstElementChild)?[me,me.firstElementChild]:n.is(me,"figure.image")?[me.querySelector("img")]:[me],j=me=>{const Ce=a0(t);return!(!Ce||t.mode.isReadOnly())&&me.getAttribute("data-mce-resize")!=="false"&&me!==t.getBody()&&(n.hasClass(me,"mce-preview-object")&&ie(me.firstElementChild)?fn(M(me.firstElementChild),Ce):fn(M(me),Ce))},$=(me,Ce,F)=>{if(ie(F)){const H=P(me);Q(H,q=>{q.style[Ce]||!t.schema.isValid(q.nodeName.toLowerCase(),Ce)?n.setStyle(q,Ce,F):n.setAttrib(q,Ce,""+F)})}},D=(me,Ce,F)=>{$(me,"width",Ce),$(me,"height",F)},B=me=>{let Ce,F,H,q,W;Ce=me.screenX-m,F=me.screenY-h,_=Ce*c[2]+v,k=F*c[3]+g,_=_<5?5:_,k=k<5?5:k,H=(N(i)||O(i))&&xE(t)!==!1?!ve.modifierPressed(me):ve.modifierPressed(me),H&&(wv(Ce)>wv(F)?(k=ju(_*y),_=ju(k/y)):(_=ju(k/y),k=ju(_*y))),D(a,_,k),q=c.startPos.x+Ce,W=c.startPos.y+F,q=q>0?q:0,W=W>0?W:0,n.setStyles(l,{left:q,top:W,display:"block"}),l.innerHTML=_+" &times; "+k,c[2]<0&&a.clientWidth<=_&&n.setStyle(a,"left",void 0+(v-_)),c[3]<0&&a.clientHeight<=k&&n.setStyle(a,"top",void 0+(g-k)),Ce=s.scrollWidth-x,F=s.scrollHeight-A,Ce+F!==0&&n.setStyles(l,{left:q-Ce,top:W-F}),p||(((de,ae,Te,Pe,ze)=>{de.dispatch("ObjectResizeStart",{target:ae,width:Te,height:Pe,origin:ze})})(t,i,v,g,"corner-"+c.name),p=!0)},U=()=>{const me=p;p=!1,me&&($(i,"width",_),$(i,"height",k)),n.unbind(r,"mousemove",B),n.unbind(r,"mouseup",U),o!==r&&(n.unbind(o,"mousemove",B),n.unbind(o,"mouseup",U)),n.remove(a),n.remove(l),n.remove(d),X(i),me&&(((Ce,F,H,q,W)=>{Ce.dispatch("ObjectResized",{target:F,width:H,height:q,origin:W})})(t,i,_,k,"corner-"+c.name),n.setAttrib(i,"style",n.getAttrib(i,"style"))),t.nodeChanged()},X=me=>{Ae();const Ce=n.getPos(me,s),F=Ce.x,H=Ce.y,q=me.getBoundingClientRect(),W=q.width||q.right-q.left,de=q.height||q.bottom-q.top;i!==me&&(te(),i=me,_=k=0);const ae=t.dispatch("ObjectSelected",{target:me});j(me)&&!ae.isDefaultPrevented()?it(fh,(Te,Pe)=>{let ze=n.get("mceResizeHandle"+Pe);ze&&n.remove(ze),ze=n.add(s,"div",{id:"mceResizeHandle"+Pe,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Pe+"-resize; margin:0; padding:0"}),n.bind(ze,"mousedown",$t=>{$t.stopImmediatePropagation(),$t.preventDefault(),(zt=>{const mo=P(i)[0];m=zt.screenX,h=zt.screenY,v=mo.clientWidth,g=mo.clientHeight,y=g/v,c=Te,c.name=Pe,c.startPos={x:W*Te[0]+F,y:de*Te[1]+H},x=s.scrollWidth,A=s.scrollHeight,d=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(d,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),a=((pe,We)=>{if(O(We))return pe.create("img",{src:Qe.transparentSrc});if(Or(We)){const Xe=_t(c.name,"n")?en:Un,Ye=We.cloneNode(!0);return Xe(pe.select("tr",Ye)).each(lt=>{const Rt=pe.select("td,th",lt);pe.setStyle(lt,"height",null),Q(Rt,ge=>pe.setStyle(ge,"height",null))}),Ye}return We.cloneNode(!0)})(n,i),n.addClass(a,"mce-clonedresizable"),n.setAttrib(a,"data-mce-bogus","all"),a.contentEditable="false",n.setStyles(a,{left:F,top:H,margin:0}),D(a,W,de),a.removeAttribute(nl),s.appendChild(a),n.bind(r,"mousemove",B),n.bind(r,"mouseup",U),o!==r&&(n.bind(o,"mousemove",B),n.bind(o,"mouseup",U)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},v+" &times; "+g)})($t)}),Te.elm=ze,n.setStyles(ze,{left:W*Te[0]+F-ze.offsetWidth/2,top:de*Te[1]+H-ze.offsetHeight/2})}):te(!1)},re=Fl(X,0),te=(me=!0)=>{re.cancel(),Ae(),i&&me&&i.removeAttribute(nl),it(fh,(Ce,F)=>{const H=n.get("mceResizeHandle"+F);H&&(n.unbind(H),n.remove(H))})},ye=(me,Ce)=>n.isChildOf(me,Ce),Ee=me=>{if(p||t.removed||t.composing)return;const Ce=me.type==="mousedown"?me.target:e.getNode(),F=vi(M(Ce),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(q=>q.dom).filter(q=>n.isEditable(q.parentElement)||q.nodeName==="IMG"&&n.isEditable(q)).getOrUndefined(),H=ie(F)?n.getAttrib(F,nl,"1"):"1";if(Q(n.select(`img[${nl}],hr[${nl}]`),q=>{q.removeAttribute(nl)}),ie(F)&&ye(F,s)&&uh(t)){Re();const q=e.getStart(!0);if(ye(q,F)&&ye(e.getEnd(!0),F))return n.setAttrib(F,nl,H),void re.throttle(F)}te()},Ae=()=>{it(fh,me=>{me.elm&&(n.unbind(me.elm),delete me.elm)})},Re=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{Re(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Ee),t.on("keyup compositionend",me=>{i&&i.nodeName==="TABLE"&&Ee(me)}),t.on("hide blur",te),t.on("contextmenu longpress",L,!0)}),t.on("remove",Ae),{isResizable:j,showResizeRect:X,hideResizeRect:te,updateResizeRect:Ee,destroy:()=>{re.cancel(),i=a=d=null}}},kv=(e,t,n)=>{const r=e.document.createRange();var o;return o=r,t.fold(s=>{o.setStartBefore(s.dom)},(s,i)=>{o.setStart(s.dom,i)},s=>{o.setStartAfter(s.dom)}),((s,i)=>{i.fold(a=>{s.setEndBefore(a.dom)},(a,l)=>{s.setEnd(a.dom,l)},a=>{s.setEndAfter(a.dom)})})(r,n),r},hh=(e,t,n,r,o)=>{const s=e.document.createRange();return s.setStart(t.dom,n),s.setEnd(r.dom,o),s},ud=$s([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),xv=(e,t,n)=>t(M(n.startContainer),n.startOffset,M(n.endContainer),n.endOffset);ud.ltr,ud.rtl;const Hu=(e,t)=>{const n=Je(e);return n==="input"?Ri.after(e):fe(["br","img"],n)?t===0?Ri.before(e):Ri.after(e):Ri.on(e,t)},GN=(e,t)=>{const n=e.fold(Ri.before,Hu,Ri.after),r=t.fold(Ri.before,Hu,Ri.after);return ec.relative(n,r)},Sv=(e,t,n,r)=>{const o=Hu(e,t),s=Hu(n,r);return ec.relative(o,s)},gh=(e,t)=>{const n=(t||document).createDocumentFragment();return Q(e,r=>{n.appendChild(r.dom)}),M(n)},KN=e=>{const t=ec.getWin(e).dom,n=(o,s,i,a)=>hh(t,o,s,i,a),r=(o=>o.match({domRange:s=>{const i=M(s.startContainer),a=M(s.endContainer);return Sv(i,s.startOffset,a,s.endOffset)},relative:GN,exact:Sv}))(e);return((o,s)=>{const i=((a,l)=>l.match({domRange:c=>({ltr:ce(c),rtl:S.none}),relative:(c,d)=>({ltr:Nn(()=>kv(a,c,d)),rtl:Nn(()=>S.some(kv(a,d,c)))}),exact:(c,d,m,h)=>({ltr:Nn(()=>hh(a,c,d,m,h)),rtl:Nn(()=>S.some(hh(a,m,h,c,d)))})}))(o,s);return((a,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter(d=>d.collapsed===!1).map(d=>ud.rtl(M(d.endContainer),d.endOffset,M(d.startContainer),d.startOffset)).getOrThunk(()=>xv(0,ud.ltr,c)):xv(0,ud.ltr,c)})(0,i)})(t,r).match({ltr:n,rtl:n})},XN=(e,t,n)=>((r,o,s)=>((i,a,l)=>i.caretPositionFromPoint?((c,d,m)=>{var h;return S.from((h=c.caretPositionFromPoint)===null||h===void 0?void 0:h.call(c,d,m)).bind(v=>{if(v.offsetNode===null)return S.none();const g=c.createRange();return g.setStart(v.offsetNode,v.offset),g.collapse(),S.some(g)})})(i,a,l):i.caretRangeFromPoint?((c,d,m)=>{var h;return S.from((h=c.caretRangeFromPoint)===null||h===void 0?void 0:h.call(c,d,m))})(i,a,l):S.none())(r.document,o,s).map(i=>gv(M(i.startContainer),i.startOffset,M(i.endContainer),i.endOffset)))(e,t,n),Ev=(e,t,n)=>{const r=ut(M(n));return XN(r.dom,e,t).map(o=>{const s=n.createRange();return s.setStart(o.start.dom,o.soffset),s.setEnd(o.finish.dom,o.foffset),s}).getOrUndefined()},ph=(e,t)=>ie(e)&&ie(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,Nv=(e,t,n)=>((r,o,s)=>{let i=r;for(;i&&i!==o;){if(s(i))return i;i=i.parentNode}return null})(e,t,n)!==null,ZN=(e,t,n)=>Nv(e,t,r=>r.nodeName===n),QN=(e,t)=>xo(e)&&!Nv(e,t,Eo),Av=(e,t,n)=>{const r=t.parentNode;if(r){const o=new Cn(t,e.getParent(r,e.isBlock)||e.getRoot());let s;for(;s=o[n?"prev":"next"]();)if(jt(s))return!0}return!1},bh=(e,t,n,r,o)=>{const s=e.getRoot(),i=e.schema.getNonEmptyElements(),a=o.parentNode;let l,c;if(!a)return S.none();const d=e.getParent(a,e.isBlock)||s;if(r&&jt(o)&&t&&e.isEmpty(d))return S.some(G(a,e.nodeIndex(o)));const m=new Cn(o,d);for(;c=m[r?"prev":"next"]();){if(e.getContentEditableParent(c)==="false"||QN(c,s))return S.none();if(ne(c)&&c.data.length>0)return ZN(c,s,"A")?S.none():S.some(G(c,r?c.data.length:0));if(e.isBlock(c)||i[c.nodeName.toLowerCase()])return S.none();l=c}return Fs(l)?S.none():n&&l?S.some(G(l,0)):S.none()},Tv=(e,t,n,r)=>{const o=e.getRoot();let s,i=!1,a=n?r.startContainer:r.endContainer,l=n?r.startOffset:r.endOffset;const c=xe(a)&&l===a.childNodes.length,d=e.schema.getNonEmptyElements();let m=n;if(xo(a))return S.none();if(xe(a)&&l>a.childNodes.length-1&&(m=!1),ja(a)&&(a=o,l=0),a===o){if(m&&(s=a.childNodes[l>0?l-1:0],s)&&(xo(s)||d[s.nodeName]||Or(s)))return S.none();if(a.hasChildNodes()){if(l=Math.min(!m&&l>0?l-1:l,a.childNodes.length-1),a=a.childNodes[l],l=ne(a)&&c?a.data.length:0,!t&&a===o.lastChild&&Or(a)||((h,v)=>{let g=v;for(;g&&g!==h;){if(Lt(g))return!0;g=g.parentNode}return!1})(o,a)||xo(a)||Dc(a))return S.none();if(a.hasChildNodes()&&!Or(a)){s=a;const h=new Cn(a,o);do{if(Lt(s)||xo(s)){i=!1;break}if(ne(s)&&s.data.length>0){l=m?0:s.data.length,a=s,i=!0;break}if(d[s.nodeName.toLowerCase()]&&!Rc(s)){l=e.nodeIndex(s),a=s.parentNode,m||l++,i=!0;break}}while(s=m?h.next():h.prev())}}}return t&&(ne(a)&&l===0&&bh(e,c,t,!0,a).each(h=>{a=h.container(),l=h.offset(),i=!0}),xe(a)&&(s=a.childNodes[l],s||(s=a.childNodes[l-1]),!s||!jt(s)||((h,v)=>{var g;return((g=h.previousSibling)===null||g===void 0?void 0:g.nodeName)==="A"})(s)||Av(e,s,!1)||Av(e,s,!0)||bh(e,c,t,!0,s).each(h=>{a=h.container(),l=h.offset(),i=!0}))),m&&!t&&ne(a)&&l===a.data.length&&bh(e,c,t,!1,a).each(h=>{a=h.container(),l=h.offset(),i=!0}),i&&a?S.some(G(a,l)):S.none()},Yu=(e,t)=>{const n=t.collapsed,r=t.cloneRange(),o=G.fromRangeStart(t);return Tv(e,n,!0,r).each(s=>{n&&G.isAbove(o,s)||r.setStart(s.container(),s.offset())}),n||Tv(e,n,!1,r).each(s=>{r.setEnd(s.container(),s.offset())}),n&&r.collapse(!0),ph(t,r)?S.none():S.some(r)},$u=(e,t)=>e.splitText(t),zu=e=>{let t=e.startContainer,n=e.startOffset,r=e.endContainer,o=e.endOffset;if(t===r&&ne(t)){if(n>0&&n<t.data.length)if(r=$u(t,n),t=r.previousSibling,o>n){o-=n;const s=$u(r,o).previousSibling;t=r=s,o=s.data.length,n=0}else o=0}else if(ne(t)&&n>0&&n<t.data.length&&(t=$u(t,n),n=0),ne(r)&&o>0&&o<r.data.length){const s=$u(r,o).previousSibling;r=s,o=s.data.length}return{startContainer:t,startOffset:n,endContainer:r,endOffset:o}},rl=e=>({walk:(t,n)=>cd(e,t,n),split:zu,expand:(t,n={type:"word"})=>{if(n.type==="word"){const r=tl(e,t,[{inline:"span"}]),o=e.createRng();return o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),o}return t},normalize:t=>Yu(e,t).fold(ht,n=>(t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),!0))});rl.compareRanges=ph,rl.getCaretRangeFromPoint=Ev,rl.getSelectedNode=vu,rl.getNode=fa;const JN=((e,t)=>{const n=o=>{const s=(i=>{const a=i.dom;return bi(i)?a.getBoundingClientRect().height:a.offsetHeight})(o);if(s<=0||s===null){const i=io(o,e);return parseFloat(i)||0}return s},r=(o,s)=>bn(s,(i,a)=>{const l=io(o,a),c=l===void 0?0:parseInt(l,10);return isNaN(c)?i:i+c},0);return{set:(o,s)=>{if(!Jt(s)&&!s.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+s);const i=o.dom;na(i)&&(i.style[e]=s+"px")},get:n,getOuter:n,aggregate:r,max:(o,s,i)=>{const a=r(o,i);return s>a?s-a:0}}})("height"),Ov=(e,t)=>e.view(t).fold(ce([]),n=>{const r=e.owner(n),o=Ov(e,r);return[n].concat(o)});var eA=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?S.none():S.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(M)},owner:e=>Wr(e)});const vh=e=>Je(e)==="textarea",Rv=(e,t)=>{const n=(o=>{const s=o.dom.ownerDocument,i=s.body,a=s.defaultView,l=s.documentElement;if(i===o.dom)return oa(i.offsetLeft,i.offsetTop);const c=Ia(a?.pageYOffset,l.scrollTop),d=Ia(a?.pageXOffset,l.scrollLeft),m=Ia(l.clientTop,i.clientTop),h=Ia(l.clientLeft,i.clientLeft);return xl(o).translate(d-h,c-m)})(e),r=(o=>JN.get(o))(e);return{element:e,bottom:n.top+r,height:r,pos:n,cleanup:t}},Dv=(e,t,n,r)=>{nA(e,(o,s)=>tA(e,t,n,r),n)},Mv=(e,t,n,r,o)=>{const s={elm:r.element.dom,alignToTop:o};((i,a)=>i.dispatch("ScrollIntoView",a).isDefaultPrevented())(e,s)||(n(e,t,Sl(t).top,r,o),((i,a)=>{i.dispatch("AfterScrollIntoView",a)})(e,s))},tA=(e,t,n,r)=>{const o=M(e.getBody()),s=M(e.getDoc());o.dom.offsetWidth;const i=((a,l)=>{const c=((m,h)=>{const v=le(m);if(v.length===0||vh(m))return{element:m,offset:h};if(h<v.length&&!vh(v[h]))return{element:v[h],offset:0};{const g=v[v.length-1];return vh(g)?{element:m,offset:h}:Je(g)==="img"?{element:g,offset:1}:sn(g)?{element:g,offset:qc(g).length}:{element:g,offset:le(g).length}}})(a,l),d=$r('<span data-mce-bogus="all" style="display: inline-block;">\uFEFF</span>');return lr(c.element,d),Rv(d,()=>Pt(d))})(M(n.startContainer),n.startOffset);Mv(e,s,t,i,r),i.cleanup()},Pv=(e,t,n,r)=>{const o=M(e.getDoc());Mv(e,o,n,(s=>Rv(M(s),$e))(t),r)},nA=(e,t,n)=>{const r=n.startContainer,o=n.startOffset,s=n.endContainer,i=n.endOffset;t(M(r),M(s));const a=e.dom.createRng();a.setStart(r,o),a.setEnd(s,i),e.selection.setRng(n)},yh=(e,t,n,r,o)=>{const s=t.pos;if(r)Ac(s.left,s.top,o);else{const i=s.top-n+t.height;Ac(-e.getBody().getBoundingClientRect().left,i,o)}},Lv=(e,t,n,r,o,s)=>{const i=r+n,a=o.pos.top,l=o.bottom,c=l-a>=r;a<n?yh(e,o,r,s!==!1,t):a>i?yh(e,o,r,c?s!==!1:s===!0,t):l>i&&!c&&yh(e,o,r,s===!0,t)},Bv=(e,t,n,r,o)=>{const s=ut(t).dom.innerHeight;Lv(e,t,n,s,r,o)},Iv=(e,t,n,r,o)=>{const s=ut(t).dom.innerHeight;Lv(e,t,n,s,r,o);const i=(l=>{const c=mv(),d=Sl(c),m=((g,y)=>{const p=y.owner(g);return Ov(y,p)})(l,eA),h=xl(l),v=Nr(m,(g,y)=>{const p=xl(y);return{left:g.left+p.left,top:g.top+p.top}},{left:0,top:0});return oa(v.left+h.left+d.left,v.top+h.top+d.top)})(r.element),a=eu(window);i.top<a.y?Qd(r.element,o!==!1):i.top>a.bottom&&Qd(r.element,o===!0)},rA=(e,t,n)=>Dv(e,Bv,t,n),oA=(e,t,n)=>Pv(e,t,Bv,n),sA=(e,t,n)=>Dv(e,Iv,t,n),iA=(e,t,n)=>Pv(e,t,Iv,n),md=(e,t,n)=>{(e.inline?rA:sA)(e,t,n)},Fv=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),Uv=(e,t,n,r,o)=>{const s=n?t.startContainer:t.endContainer,i=n?t.startOffset:t.endOffset;return S.from(s).map(M).map(a=>r&&t.collapsed?a:we(a,o(a,i)).getOr(a)).bind(a=>Yn(a)?S.some(a):u(a).filter(Yn)).map(a=>a.dom).getOr(e)},jv=(e,t,n=!1)=>Uv(e,t,!0,n,(r,o)=>Math.min(Ke(r),o)),Hv=(e,t,n=!1)=>Uv(e,t,!1,n,(r,o)=>o>0?o-1:o),Yv=(e,t)=>{const n=e;for(;e&&ne(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},_h=(e,t)=>Me(t,n=>{const r=e.dispatch("GetSelectionRange",{range:n});return r.range!==n?r.range:n}),aA={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Wu=(e,t,n)=>{const r=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[r])return e[r];if(e!==t){let s=e[o];if(s)return s;for(let i=e.parent;i&&i!==t;i=i.parent)if(s=i[o],s)return s}},lA=e=>{var t;const n=(t=e.value)!==null&&t!==void 0?t:"";if(!sa(n))return!1;const r=e.parent;return!r||r.name==="span"&&!r.attr("style")||!/^[ ]+$/.test(n)},$v=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Cr{static create(t,n){const r=new Cr(t,aA[t]||1);return n&&it(n,(o,s)=>{r.attr(s,o)}),r}constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const r=this;if(!se(t))return ie(t)&&it(t,(s,i)=>{r.attr(i,s)}),r;const o=r.attributes;if(o){if(n!==void 0){if(n===null){if(t in o.map){delete o.map[t];let s=o.length;for(;s--;)if(o[s].name===t)return o.splice(s,1),r}return r}if(t in o.map){let s=o.length;for(;s--;)if(o[s].name===t){o[s].value=n;break}}else o.push({name:t,value:n});return o.map[t]=n,r}return o.map[t]}}clone(){const t=this,n=new Cr(t.name,t.type),r=t.attributes;if(r){const o=[];o.map={};for(let s=0,i=r.length;s<i;s++){const a=r[s];a.name!=="id"&&(o[o.length]={name:a.name,value:a.value},o.map[a.name]=a.value)}n.attributes=o}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const r=n.next;t.insert(n,t,!0),n=r}t.remove()}remove(){const t=this,n=t.parent,r=t.next,o=t.prev;return n&&(n.firstChild===t?(n.firstChild=r,r&&(r.prev=null)):o&&(o.next=r),n.lastChild===t?(n.lastChild=o,o&&(o.next=null)):r&&(r.prev=o),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const r=n.lastChild;return r?(r.next=t,t.prev=r,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,r){t.parent&&t.remove();const o=n.parent||this;return r?(n===o.firstChild?o.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===o.lastChild?o.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=o,t}getAll(t){const n=this,r=[];for(let o=n.firstChild;o;o=Wu(o,n))o.name===t&&r.push(o);return r}children(){const t=[];for(let n=this.firstChild;n;n=n.next)t.push(n);return t}empty(){const t=this;if(t.firstChild){const n=[];for(let o=t.firstChild;o;o=Wu(o,t))n.push(o);let r=n.length;for(;r--;){const o=n[r];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},r){var o;const s=this;let i=s.firstChild;if($v(s))return!1;if(i)do{if(i.type===1){if(i.attr("data-mce-bogus"))continue;if(t[i.name]||$v(i))return!1}if(i.type===8||i.type===3&&!lA(i)||i.type===3&&i.parent&&n[i.parent.name]&&sa((o=i.value)!==null&&o!==void 0?o:"")||r&&r(i))return!1}while(i=Wu(i,s));return!0}walk(t){return Wu(this,null,t)}}const cA=oe.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),zv=e=>se(e.nodeValue)&&e.nodeValue.includes(Bn),Wv=e=>(e.length===0?"":`${Me(e,t=>`[${t}]`).join(",")},`)+'[data-mce-bogus="all"]',Vv=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,t=>zv(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),qv=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,t=>{if(zv(t)){const n=t.parentNode;return n&&He(cA,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),dA=e=>Vv(e).nextNode()!==null,uA=e=>qv(e).nextNode()!==null,mA=(e,t)=>t.querySelector(Wv(e))!==null,fA=(e,t)=>{Q(((n,r)=>r.querySelectorAll(Wv(n)))(e,t),n=>{const r=M(n);cn(r,"data-mce-bogus")==="all"?Pt(r):Q(e,o=>{hi(r,o)&&dn(r,o)})})},Gv=e=>{let t=e.nextNode();for(;t!==null;)t.nodeValue=null,t=e.nextNode()},hA=pn(Gv,Vv),gA=pn(Gv,qv),Kv=(e,t)=>{const n=[{condition:_e(mA,t),action:_e(fA,t)},{condition:dA,action:hA},{condition:uA,action:gA}];let r=e,o=!1;return Q(n,({condition:s,action:i})=>{s(r)&&(o||(r=e.cloneNode(!0),o=!0),i(r))}),r},Xv=e=>{const t=Ln(e,"[data-mce-bogus]");Q(t,n=>{cn(n,"data-mce-bogus")==="all"?Pt(n):Ga(n)?(lr(n,zr(Fa)),Pt(n)):bs(n)})},Zv=e=>{const t=Ln(e,"input");Q(t,n=>{dn(n,"name")})},pA=(e,t,n)=>{let r;return r=t.format==="raw"?oe.trim(co(Kv(n,e.serializer.getTempAttrs()).innerHTML)):t.format==="text"?((o,s)=>{const i=o.getDoc(),a=qt(M(o.getBody())),l=Ft("div",i);tn(l,"data-mce-bogus","all"),La(l,{position:"fixed",left:"-9999999px",top:"0"}),kl(l,s.innerHTML),Xv(l),Zv(l);const c=(m=>It(m)?m:M(Wr(m).dom.body))(a);hn(c,l);const d=co(l.dom.innerText);return Pt(l),d})(e,n):t.format==="tree"?e.serializer.serialize(n,t):((o,s)=>{const i=cr(o),a=new RegExp(`^(<${i}[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/${i}>[\r
]*|<br \\/>[\r
]*)$`);return s.replace(a,"")})(e,e.serializer.serialize(n,t)),t.format!=="text"&&!hu(M(n))&&se(r)?oe.trim(r):r},Qv=oe.makeMap,Jv=e=>{const t=[],n=(e=e||{}).indent,r=Qv(e.indent_before||""),o=Qv(e.indent_after||""),s=Oe.getEncodeFunc(e.entity_encoding||"raw",e.entities),i=e.element_format!=="xhtml";return{start:(a,l,c)=>{if(n&&r[a]&&t.length>0){const d=t[t.length-1];d.length>0&&d!==`
`&&t.push(`
`)}if(t.push("<",a),l)for(let d=0,m=l.length;d<m;d++){const h=l[d];t.push(" ",h.name,'="',s(h.value,!0),'"')}if(t[t.length]=!c||i?">":" />",c&&n&&o[a]&&t.length>0){const d=t[t.length-1];d.length>0&&d!==`
`&&t.push(`
`)}},end:a=>{let l;t.push("</",a,">"),n&&o[a]&&t.length>0&&(l=t[t.length-1],l.length>0&&l!==`
`&&t.push(`
`))},text:(a,l)=>{a.length>0&&(t[t.length]=l?a:s(a))},cdata:a=>{t.push("<![CDATA[",a,"]]>")},comment:a=>{t.push("<!--",a,"-->")},pi:(a,l)=>{l?t.push("<?",a," ",s(l),"?>"):t.push("<?",a,"?>"),n&&t.push(`
`)},doctype:a=>{t.push("<!DOCTYPE",a,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},ba=(e={},t=zn())=>{const n=Jv(e);return e.validate=!("validate"in e)||e.validate,{serialize:r=>{const o=e.validate,s={3:a=>{var l;n.text((l=a.value)!==null&&l!==void 0?l:"",a.raw)},8:a=>{var l;n.comment((l=a.value)!==null&&l!==void 0?l:"")},7:a=>{n.pi(a.name,a.value)},10:a=>{var l;n.doctype((l=a.value)!==null&&l!==void 0?l:"")},4:a=>{var l;n.cdata((l=a.value)!==null&&l!==void 0?l:"")},11:a=>{let l=a;if(l=l.firstChild)do i(l);while(l=l.next)}};n.reset();const i=a=>{var l;const c=s[a.type];if(c)c(a);else{const d=a.name,m=d in t.getVoidElements();let h=a.attributes;if(o&&h&&h.length>1){const v=[];v.map={};const g=t.getElementRule(a.name);if(g){for(let y=0,p=g.attributesOrder.length;y<p;y++){const _=g.attributesOrder[y];if(_ in h.map){const k=h.map[_];v.map[_]=k,v.push({name:_,value:k})}}for(let y=0,p=h.length;y<p;y++){const _=h[y].name;if(!(_ in v.map)){const k=h.map[_];v.map[_]=k,v.push({name:_,value:k})}}h=v}}if(n.start(d,h,m),Ei(d))se(a.value)&&n.text(a.value,!0),n.end(d);else if(!m){let v=a.firstChild;if(v){d!=="pre"&&d!=="textarea"||v.type!==3||((l=v.value)===null||l===void 0?void 0:l[0])!==`
`||n.text(`
`,!0);do i(v);while(v=v.next)}n.end(d)}}};return r.type!==1||e.inner?r.type===3?s[3](r):s[11](r):i(r),n.getContent()}}},ey=new Set;Q(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{ey.add(e)});const ty=new Set;Q(["background-color"],e=>{ty.add(e)});const ny=["font","text-decoration","text-emphasis"],rc=(e,t)=>Ct(((n,r)=>n.parseStyle(n.getAttrib(r,"style")))(e,t)),ry=(e,t)=>yt(rc(e,t),n=>(r=>ey.has(r))(n)),oy=(e,t,n)=>S.from(n.container()).filter(ne).exists(r=>{const o=e?0:-1;return t(r.data.charAt(n.offset()+o))}),wh=_e(oy,!0,el),Ch=_e(oy,!1,el),bA=e=>{const t=e.container();return ne(t)&&(t.data.length===0||gu(t.data)&&dd.isBookmarkNode(t.parentNode))},va=(e,t)=>n=>Ff(e?0:-1,n).filter(t).isSome(),sy=e=>su(e)&&io(M(e),"display")==="block",iy=e=>Lt(e)&&!(t=>xe(t)&&t.getAttribute("data-mce-bogus")==="all")(e),vA=va(!0,sy),yA=va(!1,sy),fd=va(!0,wo),hd=va(!1,wo),ay=va(!0,Or),kh=va(!1,Or),ya=va(!0,iy),_a=va(!1,iy),ly=(e,t)=>((n,r,o)=>vr(r,n)?w(n,s=>o(s)||at(s,r)).slice(0,-1):[])(e,t,ht),Di=(e,t)=>[e].concat(ly(e,t)),xh=(e,t,n)=>I0(e,t,n,bA),cy=(e,t,n)=>Mt(Di(M(t.container()),e),(r=>o=>r.isBlock(Je(o)))(n)),dy=(e,t,n,r)=>xh(e,t.dom,n).forall(o=>cy(t,n,r).fold(()=>!zs(o,n,t.dom),s=>!zs(o,n,t.dom)&&vr(s,M(o.container())))),uy=(e,t,n,r)=>cy(t,n,r).fold(()=>xh(e,t.dom,n).forall(o=>!zs(o,n,t.dom)),o=>xh(e,o.dom,n).isNone()),Sh=_e(uy,!1),my=_e(uy,!0),_A=_e(dy,!1),wA=_e(dy,!0),CA=e=>Nu(e).exists(Ga),Vu=(e,t,n,r)=>{const o=De(Di(M(n.container()),t),i=>r.isBlock(Je(i))),s=en(o).getOr(t);return So(e,s.dom,n).filter(CA)},Eh=(e,t,n)=>Nu(t).exists(Ga)||Vu(!0,e,t,n).isSome(),qu=(e,t,n)=>(r=>S.from(r.getNode(!0)).map(M))(t).exists(Ga)||Vu(!1,e,t,n).isSome(),fy=_e(Vu,!1),kA=_e(Vu,!0),hy=e=>G.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),gy=(e,t,n)=>{const r=De(Di(M(t.container()),e),o=>n.isBlock(Je(o)));return en(r).getOr(e)},py=(e,t,n)=>hy(t)?Ch(t):Ch(t)||Xr(gy(e,t,n).dom,t).exists(Ch),by=(e,t,n)=>hy(t)?wh(t):wh(t)||Dr(gy(e,t,n).dom,t).exists(wh),Nh=e=>Nu(e).bind(t=>Bs(t,Yn)).exists(t=>(n=>fe(["pre","pre-wrap"],n))(io(t,"white-space"))),vy=(e,t)=>n=>{return r=new Cn(n,e)[t](),ie(r)&&Lt(r)&&x0(r);var r},yy=(e,t,n)=>!Nh(t)&&(((r,o,s)=>((i,a)=>Xr(i.dom,a).isNone())(r,o)||((i,a)=>Dr(i.dom,a).isNone())(r,o)||Sh(r,o,s)||my(r,o,s)||qu(r,o,s)||Eh(r,o,s))(e,t,n)||py(e,t,n)||by(e,t,n)),gd=(e,t,n)=>!Nh(t)&&(Sh(e,t,n)||_A(e,t,n)||qu(e,t,n)||py(e,t,n)||((r,o)=>{const s=Xr(r.dom,o).getOr(o),i=vy(r.dom,"prev");return o.isAtStart()&&(i(o.container())||i(s.container()))})(e,t)),pd=(e,t,n)=>!Nh(t)&&(my(e,t,n)||wA(e,t,n)||Eh(e,t,n)||by(e,t,n)||((r,o)=>{const s=Dr(r.dom,o).getOr(o),i=vy(r.dom,"next");return o.isAtEnd()&&(i(o.container())||i(s.container()))})(e,t)),Ah=(e,t,n)=>gd(e,t,n)||pd(e,(r=>{const o=r.container(),s=r.offset();return ne(o)&&s<o.data.length?G(o,s+1):r})(t),n),_y=(e,t)=>Ru(e.charAt(t)),wy=(e,t)=>el(e.charAt(t)),Cy=(e,t,n,r)=>{const o=t.data,s=G(t,0);return n||!_y(o,0)||Ah(e,s,r)?!!(n&&wy(o,0)&&gd(e,s,r))&&(t.data=Ut+o.slice(1),!0):(t.data=" "+o.slice(1),!0)},ky=(e,t,n,r)=>{const o=t.data,s=G(t,o.length-1);return n||!_y(o,o.length-1)||Ah(e,s,r)?!!(n&&wy(o,o.length-1)&&pd(e,s,r))&&(t.data=o.slice(0,-1)+Ut,!0):(t.data=o.slice(0,-1)+" ",!0)},xA=(e,t,n)=>{const r=t.container();if(!ne(r))return S.none();if((o=>{const s=o.container();return ne(s)&&gt(s.data,Ut)})(t)){const o=Cy(e,r,!1,n)||(s=>{const i=s.data,a=(l=>{const c=l.split("");return Me(c,(d,m)=>Ru(d)&&m>0&&m<c.length-1&&Wf(c[m-1])&&Wf(c[m+1])?" ":d).join("")})(i);return a!==i&&(s.data=a,!0)})(r)||ky(e,r,!1,n);return Pn(o,t)}if(Ah(e,t,n)){const o=Cy(e,r,!0,n)||ky(e,r,!0,n);return Pn(o,t)}return S.none()},xy=(e,t,n,r)=>{if(n===0)return;const o=M(e),s=gs(o,c=>r.isBlock(Je(c))).getOr(o),i=e.data.slice(t,t+n),a=t+n>=e.data.length&&pd(s,G(e,e.data.length),r),l=t===0&&gd(s,G(e,0),r);e.replaceData(t,n,ou(i,4,l,a))},Gu=(e,t,n)=>{const r=e.data.slice(t),o=r.length-Ho(r).length;xy(e,t,o,n)},Th=(e,t,n)=>{const r=e.data.slice(0,t),o=r.length-po(r).length;xy(e,t-o,o,n)},Oh=(e,t,n,r,o=!0)=>{const s=po(e.data).length,i=o?e:t,a=o?t:e;return o?i.appendData(a.data):i.insertData(0,a.data),Pt(M(a)),r&&Gu(i,s,n),i},SA=(e,t)=>((n,r)=>{const o=n.container(),s=n.offset();return!G.isTextPosition(n)&&o===r.parentNode&&s>G.before(r).offset()})(t,e)?G(t.container(),t.offset()-1):t,Sy=e=>{return xs(e.previousSibling)?S.some((t=e.previousSibling,ne(t)?G(t,t.data.length):G.after(t))):e.previousSibling?Qo(e.previousSibling):S.none();var t},Ey=e=>{return xs(e.nextSibling)?S.some((t=e.nextSibling,ne(t)?G(t,0):G.before(t))):e.nextSibling?dr(e.nextSibling):S.none();var t},EA=(e,t,n)=>((r,o,s)=>r?((i,a)=>Ey(a).orThunk(()=>Sy(a)).orThunk(()=>((l,c)=>Dr(l,G.after(c)).orThunk(()=>Xr(l,G.before(c))))(i,a)))(o,s):((i,a)=>Sy(a).orThunk(()=>Ey(a)).orThunk(()=>((l,c)=>S.from(c.previousSibling?c.previousSibling:c.parentNode).bind(d=>Xr(l,G.before(d))).orThunk(()=>Dr(l,G.after(c))))(i,a)))(o,s))(e,t,n).map(_e(SA,n)),Ny=(e,t,n)=>{n.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),t)})},NA=(e,t)=>t&&He(e.schema.getBlockElements(),Je(t)),ol=(e,t,n,r=!0,o=!1)=>{const s=EA(t,e.getBody(),n.dom),i=gs(n,_e(NA,e),(a=e.getBody(),c=>c.dom===a));var a;const l=((c,d,m,h)=>{const v=E(c).filter(sn),g=I(c).filter(sn);return Pt(c),(y=v,p=g,_=d,k=(x,A,N)=>{const O=x.dom,L=A.dom,P=O.data.length;return Oh(O,L,m,h),N.container()===L?G(O,P):N},y.isSome()&&p.isSome()&&_.isSome()?S.some(k(y.getOrDie(),p.getOrDie(),_.getOrDie())):S.none()).orThunk(()=>(h&&(v.each(x=>Th(x.dom,x.dom.length,m)),g.each(x=>Gu(x.dom,0,m))),d));var y,p,_,k})(n,s,e.schema,((c,d)=>He(c.schema.getTextInlineElements(),Je(d)))(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):i.bind(c=>((d,m,h)=>{if($n(d,m)){const v=$r('<br data-mce-bogus="1">');return h?Q(le(m),g=>{oh(g)||Pt(g)}):ra(m),hn(m,v),S.some(G.before(v.dom))}return S.none()})(e.schema,c,o)).fold(()=>{r&&Ny(e,t,l)},c=>{r&&Ny(e,t,S.some(c))})},AA=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,sl=(e,t)=>fn(M(t),kE(e))&&!Ni(e.schema,t)&&e.dom.isEditable(t),Ay=e=>{var t;return bt.DOM.getStyle(e,"direction",!0)==="rtl"||(n=>AA.test(n))((t=e.textContent)!==null&&t!==void 0?t:"")},wa=(e,t,n)=>{const r=((o,s,i)=>De(bt.DOM.getParents(i.container(),"*",s),o))(e,t,n);return S.from(r[r.length-1])},Oo=(e,t)=>{const n=t.container(),r=t.offset();return e?ma(n)?ne(n.nextSibling)?G(n.nextSibling,0):G.after(n):vf(t)?G(n,r+1):t:ma(n)?ne(n.previousSibling)?G(n.previousSibling,n.previousSibling.data.length):G.before(n):yf(t)?G(n,r-1):t},Ty=_e(Oo,!0),Oy=_e(Oo,!1),Ry=(e,t)=>{const n=r=>r.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},Ku=e=>Ry(e,"Delete"),Dy=e=>Ry(e,"ForwardDelete"),TA=e=>ub(e)||Hl(e),Xu=(e,t)=>vr(e,t)?Bs(t,TA,(n=>r=>ds(u(r),n,at))(e)):S.none(),Rh=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},My=(e,t,n)=>Bt(dr(n),Qo(n),(r,o)=>{const s=Oo(!0,r),i=Oo(!1,o),a=Oo(!1,t);return e?Dr(n,a).exists(l=>l.isEqual(i)&&t.isEqual(s)):Xr(n,a).exists(l=>l.isEqual(s)&&t.isEqual(i))}).getOr(!0),Py=e=>{var t;return(mi(t=e)===8||Je(t)==="#comment"?E(e):Ge(e)).bind(Py).orThunk(()=>S.some(e))},Ly=(e,t,n,r=!0)=>{var o;t.deleteContents();const s=Py(n).getOr(n),i=M((o=e.dom.getParent(s.dom,e.dom.isBlock))!==null&&o!==void 0?o:n.dom);if(i.dom===e.getBody()?Rh(e,r):$n(e.schema,i,{checkRootAsContent:!1})&&(ua(i),r&&e.selection.setCursorLocation(i.dom,0)),!at(n,i)){const l=ds(u(i),n)?[]:u(a=i).map(le).map(c=>De(c,d=>!at(a,d))).getOr([]);Q(l.concat(le(n)),c=>{at(c,i)||vr(c,i)||!$n(e.schema,c)||Pt(c)})}var a},Dh=e=>Ln(e,"td,th"),By=(e,t)=>ad(M(e),t),Mh=(e,t)=>({start:e,end:t}),bd=$s([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Zu=(e,t)=>vi(M(e),"td,th",t),Iy=e=>!at(e.start,e.end),Fy=(e,t)=>ad(e.start,t).bind(n=>ad(e.end,t).bind(r=>Pn(at(n,r),n))),Ph=e=>t=>Fy(t,e).map(n=>((r,o,s)=>({rng:r,table:o,cells:s}))(t,n,Dh(n))),Uy=(e,t,n,r)=>{if(n.collapsed||!e.forall(Iy))return S.none();if(t.isSameTable){const o=e.bind(Ph(r));return S.some({start:o,end:o})}{const o=Zu(n.startContainer,r),s=Zu(n.endContainer,r),i=o.bind((l=>c=>ad(c,l).bind(d=>Un(Dh(d)).map(m=>Mh(c,m))))(r)).bind(Ph(r)),a=s.bind((l=>c=>ad(c,l).bind(d=>en(Dh(d)).map(m=>Mh(m,c))))(r)).bind(Ph(r));return S.some({start:i,end:a})}},jy=(e,t)=>he(e,n=>at(n,t)),Lh=e=>Bt(jy(e.cells,e.rng.start),jy(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),Hy=(e,t)=>{const{startTable:n,endTable:r}=t,o=e.cloneRange();return n.each(s=>o.setStartAfter(s.dom)),r.each(s=>o.setEndBefore(s.dom)),o},OA=(e,t)=>{const n=(s=>i=>at(s,i))(e),r=((s,i)=>{const a=Zu(s.startContainer,i),l=Zu(s.endContainer,i);return Bt(a,l,Mh)})(t,n),o=((s,i)=>{const a=By(s.startContainer,i),l=By(s.endContainer,i),c=a.isSome(),d=l.isSome(),m=Bt(a,l,at).getOr(!1);return(h=>Bt(h.startTable,h.endTable,(v,g)=>{const y=nu(v,_=>at(_,g)),p=nu(g,_=>at(_,v));return y||p?{...h,startTable:y?S.none():h.startTable,endTable:p?S.none():h.endTable,isSameTable:!1,isMultiTable:!1}:h}).getOr(h))({startTable:a,endTable:l,isStartInTable:c,isEndInTable:d,isSameTable:m,isMultiTable:!m&&c&&d})})(t,n);return((s,i,a)=>s.exists(l=>((c,d)=>!Iy(c)&&Fy(c,d).exists(m=>{const h=m.dom.rows;return h.length===1&&h[0].cells.length===1}))(l,a)&&Gf(l.start,i)))(r,t,n)?r.map(s=>bd.singleCellTable(t,s.start)):o.isMultiTable?((s,i,a,l)=>Uy(s,i,a,l).bind(({start:c,end:d})=>{const m=c.bind(Lh).getOr([]),h=d.bind(Lh).getOr([]);if(m.length>0&&h.length>0){const v=Hy(a,i);return S.some(bd.multiTable(m,h,v))}return S.none()}))(r,o,t,n):((s,i,a,l)=>Uy(s,i,a,l).bind(({start:c,end:d})=>c.or(d)).bind(c=>{const{isSameTable:d}=i,m=Lh(c).getOr([]);if(d&&c.cells.length===m.length)return S.some(bd.fullTable(c.table));if(m.length>0){if(d)return S.some(bd.partialTable(m,S.none()));{const h=Hy(a,i);return S.some(bd.partialTable(m,S.some({...i,rng:h})))}}return S.none()}))(r,o,t,n)},Yy=e=>Q(e,t=>{dn(t,"contenteditable"),ua(t)}),Bh=(e,t,n,r)=>{const o=n.cloneRange();r?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),Ih(e,o,t,!1).each(s=>s())},$y=e=>{const t=Zl(e),n=M(e.selection.getNode());_s(n.dom)&&$n(e.schema,n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&yt(t,r=>at(r,n))&&tn(n,"data-mce-selected","1")},zy=(e,t,n)=>S.some(()=>{const r=e.selection.getRng(),o=n.bind(({rng:s,isStartInTable:i})=>{const a=((c,d)=>S.from(c.dom.getParent(d,c.dom.isBlock)).map(M))(e,i?s.endContainer:s.startContainer);s.deleteContents(),((c,d,m)=>{m.each(h=>{d?Pt(h):(ua(h),c.selection.setCursorLocation(h.dom,0))})})(e,i,a.filter(_e($n,e.schema)));const l=i?t[0]:t[t.length-1];return Bh(e,l,r,i),$n(e.schema,l)?S.none():S.some(i?t.slice(1):t.slice(0,-1))}).getOr(t);Yy(o),$y(e)}),RA=(e,t,n,r)=>S.some(()=>{const o=e.selection.getRng(),s=t[0],i=n[n.length-1];Bh(e,s,o,!0),Bh(e,i,o,!1);const a=$n(e.schema,s)?t:t.slice(1),l=$n(e.schema,i)?n:n.slice(0,-1);Yy(a.concat(l)),r.deleteContents(),$y(e)}),Ih=(e,t,n,r=!0)=>S.some(()=>{Ly(e,t,n,r)}),DA=(e,t)=>S.some(()=>ol(e,!1,t)),Wy=(e,t)=>Mt(Di(t,e),Gc),Fh=(e,t)=>Mt(Di(t,e),us("caption")),Qu=(e,t)=>S.some(()=>{ua(t),e.selection.setCursorLocation(t.dom,0)}),Vy=(e,t)=>e?ay(t):kh(t),MA=(e,t,n)=>{const r=M(e.getBody());return Fh(r,n).fold(()=>((o,s,i,a)=>{const l=G.fromRangeStart(o.selection.getRng());return Wy(i,a).bind(c=>$n(o.schema,c,{checkRootAsContent:!1})?Qu(o,c):((d,m,h,v,g)=>Kl(h,d.getBody(),g).bind(y=>Wy(m,M(y.getNode())).bind(p=>at(p,v)?S.none():S.some($e))))(o,i,s,c,l))})(e,t,r,n).orThunk(()=>Pn(((o,s)=>{const i=G.fromRangeStart(o.selection.getRng());return Vy(s,i)||So(s,o.getBody(),i).exists(a=>Vy(s,a))})(e,t),$e)),o=>((s,i,a,l)=>{const c=G.fromRangeStart(s.selection.getRng());return $n(s.schema,l)?Qu(s,l):((d,m,h,v,g)=>Kl(h,d.getBody(),g).fold(()=>S.some($e),y=>((p,_,k,x)=>dr(p.dom).bind(A=>Qo(p.dom).map(N=>_?k.isEqual(A)&&x.isEqual(N):k.isEqual(N)&&x.isEqual(A))).getOr(!0))(v,h,g,y)?((p,_)=>Qu(p,_))(d,v):((p,_,k)=>Fh(p,M(k.getNode())).fold(()=>S.some($e),x=>Pn(!at(x,_),$e)))(m,v,y)))(s,a,i,l,c)})(e,t,r,o))},Uh=(e,t)=>{const n=M(e.selection.getStart(!0)),r=Zl(e);return e.selection.isCollapsed()&&r.length===0?MA(e,t,n):((o,s,i)=>{const a=M(o.getBody()),l=o.selection.getRng();return i.length!==0?zy(o,i,S.none()):((c,d,m,h)=>Fh(d,h).fold(()=>((v,g,y)=>OA(g,y).bind(p=>p.fold(_e(Ih,v),_e(DA,v),_e(zy,v),_e(RA,v))))(c,d,m),v=>((g,y)=>Qu(g,y))(c,v)))(o,a,l,s)})(e,n,r)},il=(e,t)=>{let n=t;for(;n&&n!==e;){if(qr(n)||Lt(n))return n;n=n.parentNode}return null},PA=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],LA=oe.each,jh=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),r=o=>yt(PA,s=>_t(o,s))||n.has(o);return{compare:(o,s)=>{if(o.nodeName!==s.nodeName||o.nodeType!==s.nodeType)return!1;const i=l=>{const c={};return LA(t.getAttribs(l),d=>{const m=d.nodeName.toLowerCase();m==="style"||r(m)||(c[m]=t.getAttrib(l,m))}),c},a=(l,c)=>{for(const d in l)if(He(l,d)){const m=c[d];if(on(m)||l[d]!==m)return!1;delete c[d]}for(const d in c)if(He(c,d))return!1;return!0};return xe(o)&&xe(s)&&(!a(i(o),i(s))||!a(t.parseStyle(t.getAttrib(o,"style")),t.parseStyle(t.getAttrib(s,"style"))))?!1:!No(o)&&!No(s)},isAttributeInternal:r}},qy=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),Gy=(e,t,n,r)=>{const o=n.name;for(let s=0,i=e.length;s<i;s++){const a=e[s];if(a.name===o){const l=r.nodes[o];l?l.nodes.push(n):r.nodes[o]={filter:a,nodes:[n]}}}if(n.attributes)for(let s=0,i=t.length;s<i;s++){const a=t[s],l=a.name;if(l in n.attributes.map){const c=r.attributes[l];c?c.nodes.push(n):r.attributes[l]={filter:a,nodes:[n]}}}},Ky=(e,t)=>{const n=(r,o)=>{it(r,s=>{const i=xt(s.nodes);Q(s.filter.callbacks,a=>{for(let l=i.length-1;l>=0;l--){const c=i[l];(o?c.attr(s.filter.name)!==void 0:c.name===s.filter.name)&&!Wt(c.parent)||i.splice(l,1)}i.length>0&&a(i,s.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},Xy=(e,t,n,r={})=>{const o=((s,i,a)=>{const l={nodes:{},attributes:{}};return a.firstChild&&((c,d)=>{let m=c;for(;m=m.walk();)Gy(s,i,m,l)})(a),l})(e,t,n);Ky(o,r)},Hh=(e,t,n,r)=>{if((e.pad_empty_with_br||t.insert)&&n(r)){const o=new Cr("br",1);t.insert&&o.attr("data-mce-bogus","1"),r.empty().append(o)}else r.empty().append(new Cr("#text",3)).value=Ut},Zy=(e,t)=>{const n=e?.firstChild;return ie(n)&&n===e.lastChild&&n.name===t},vd=(e,t,n,r)=>r.isEmpty(t,n,o=>((s,i)=>{const a=s.getElementRule(i.name);return a?.paddEmpty===!0})(e,o)),BA=e=>{let t;for(let n=e;n;n=n.parent){const r=n.attr("contenteditable");if(r==="false")break;r==="true"&&(t=n)}return S.from(t)},Yh=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const o of r)n&&!t.isValidChild(n.name,o.name)&&Yh(o,t,n);e.unwrap()}},$h=(e,t,n,r=$e)=>{const o=t.getTextBlockElements(),s=t.getNonEmptyElements(),i=t.getWhitespaceElements(),a=oe.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,c=d=>d!==n&&!a[d.name];for(let d=0;d<e.length;d++){const m=e[d];let h,v,g;if(!m.parent||l.has(m))continue;if(o[m.name]&&m.parent.name==="li"){let p=m.next;for(;p&&o[p.name];)p.name="li",l.add(p),m.parent.insert(p,m.parent),p=p.next;m.unwrap();continue}const y=[m];for(h=m.parent;h&&!t.isValidChild(h.name,m.name)&&c(h);h=h.parent)y.push(h);if(h&&y.length>1)if(zh(t,m,h))Yh(m,t);else{y.reverse(),v=y[0].clone(),r(v);let p=v;for(let _=0;_<y.length-1;_++){t.isValidChild(p.name,y[_].name)&&_>0?(g=y[_].clone(),r(g),p.append(g)):g=p;for(let k=y[_].firstChild;k&&k!==y[_+1];){const x=k.next;g.append(k),k=x}p=g}vd(t,s,i,v)?h.insert(m,y[0],!0):(h.insert(v,y[0],!0),h.insert(m,v)),h=y[0],(vd(t,s,i,h)||Zy(h,"br"))&&h.empty().remove()}else if(m.parent){if(m.name==="li"){let p=m.prev;if(p&&(p.name==="ul"||p.name==="ol")){p.append(m);continue}if(p=m.next,p&&(p.name==="ul"||p.name==="ol")&&p.firstChild){p.insert(m,p.firstChild,!0);continue}const _=new Cr("ul",1);r(_),m.wrap(_);continue}if(t.isValidChild(m.parent.name,"div")&&t.isValidChild("div",m.name)){const p=new Cr("div",1);r(p),m.wrap(p)}else Yh(m,t)}}},zh=(e,t,n=t.parent)=>!(!n||(!e.children[t.name]||e.isValidChild(n.name,t.name))&&(t.name!=="a"||!((r,o)=>{let s=r;for(;s;){if(s.name==="a")return!0;s=s.parent}return!1})(n))&&(!(r=>r.name==="summary")(n)||!qy(t)||n?.firstChild===t&&n?.lastChild===t)),Wh=e=>e.collapsed?e:(t=>{const n=G.fromRangeStart(t),r=G.fromRangeEnd(t),o=t.commonAncestorContainer;return So(!1,o,r).map(s=>!zs(n,r,o)&&zs(n,s,o)?((i,a,l,c)=>{const d=document.createRange();return d.setStart(i,a),d.setEnd(l,c),d})(n.container(),n.offset(),s.container(),s.offset()):t).getOr(t)})(e),IA=(e,t)=>{let n=t.firstChild,r=t.lastChild;return n&&n.name==="meta"&&(n=n.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),((o,s)=>{const i=o.getNonEmptyElements();return ie(s)&&(s.isEmpty(i)||((a,l)=>a.getBlockElements()[l.name]&&(c=>ie(c.firstChild)&&c.firstChild===c.lastChild)(l)&&(c=>c.name==="br"||c.value===Ut)(l.firstChild))(o,s))})(e,r)&&(r=r?.prev),!(!n||n!==r||n.name!=="ul"&&n.name!=="ol")},FA=e=>{return e.length>0&&(!(n=e[e.length-1]).firstChild||ie((t=n)==null?void 0:t.firstChild)&&t.firstChild===t.lastChild&&(r=>r.data===Ut||jt(r))(t.firstChild))?e.slice(0,-1):e;var t,n},Vh=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},Qy=(e,t)=>{const n=G.after(e),r=Vs(t).prev(n);return r?r.toRange():null},UA=(e,t,n,r)=>{const o=((m,h,v)=>{const g=h.serialize(v);return(y=>{var p,_;const k=y.firstChild,x=y.lastChild;return k&&k.nodeName==="META"&&((p=k.parentNode)===null||p===void 0||p.removeChild(k)),x&&x.id==="mce_marker"&&((_=x.parentNode)===null||_===void 0||_.removeChild(x)),y})(m.createFragment(g))})(t,e,r),s=Vh(t,n.startContainer),i=FA((a=o.firstChild,De((l=a?.childNodes)!==null&&l!==void 0?l:[],m=>m.nodeName==="LI")));var a,l;const c=t.getRoot(),d=m=>{const h=G.fromRangeStart(n),v=Vs(t.getRoot()),g=m===1?v.prev(h):v.next(h),y=g?.getNode();return!y||Vh(t,y)!==s};return s?d(1)?((m,h,v)=>{const g=m.parentNode;return g&&oe.each(h,y=>{g.insertBefore(y,m)}),((y,p)=>{const _=G.before(y),k=Vs(p).next(_);return k?k.toRange():null})(m,v)})(s,i,c):d(2)?((m,h,v,g)=>(g.insertAfter(h.reverse(),m),Qy(h[0],v)))(s,i,c,t):((m,h,v,g)=>{const y=((_,k)=>{const x=k.cloneRange(),A=k.cloneRange();return x.setStartBefore(_),A.setEndAfter(_),[x.cloneContents(),A.cloneContents()]})(m,g),p=m.parentNode;return p&&(p.insertBefore(y[0],m),oe.each(h,_=>{p.insertBefore(_,m)}),p.insertBefore(y[1],m),p.removeChild(m)),Qy(h[h.length-1],v)})(s,i,c,n):null},jA=["pre"],qh=_s,HA=(e,t,n)=>{var r,o;const s=e.selection,i=e.dom,a=e.parser,l=n.merge,c=ba({validate:!0},e.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(t=co(t)),t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,d);let m=s.getRng();const h=m.startContainer,v=e.getBody();h===v&&s.isCollapsed()&&i.isBlock(v.firstChild)&&((x,A)=>ie(A)&&!x.schema.getVoidElements()[A.nodeName])(e,v.firstChild)&&i.isEmpty(v.firstChild)&&(m=i.createRng(),m.setStart(v.firstChild,0),m.setEnd(v.firstChild,0),s.setRng(m)),s.isCollapsed()||(x=>{const A=x.dom,N=Wh(x.selection.getRng());x.selection.setRng(N);const O=A.getParent(N.startContainer,qh);((L,P,j)=>!!ie(j)&&j===L.getParent(P.endContainer,qh)&&Gf(M(j),P))(A,N,O)?Ih(x,N,M(O)):N.startContainer===N.endContainer&&N.endOffset-N.startOffset==1&&ne(N.startContainer.childNodes[N.startOffset])?N.deleteContents():x.getDoc().execCommand("Delete",!1)})(e);const g=s.getNode(),y={context:g.nodeName.toLowerCase(),data:n.data,insert:!0},p=a.parse(t,y);if(n.paste===!0&&IA(e.schema,p)&&((x,A)=>!!Vh(x,A))(i,g))return m=UA(c,i,s.getRng(),p),m&&s.setRng(m),t;n.paste===!0&&((x,A,N,O)=>{var L;const P=A.firstChild,j=A.lastChild,$=P===(j.attr("data-mce-type")==="bookmark"?j.prev:j),D=fe(jA,P.name);if($&&D){const B=P.attr("contenteditable")!=="false",U=((L=x.getParent(N,x.isBlock))===null||L===void 0?void 0:L.nodeName.toLowerCase())===P.name,X=S.from(il(O,N)).forall(qr);return B&&U&&X}return!1})(i,p,g,e.getBody())&&((r=p.firstChild)===null||r===void 0||r.unwrap()),(x=>{let A=x;for(;A=A.walk();)A.type===1&&A.attr("data-mce-fragment","1")})(p);let _=p.lastChild;if(_&&_.attr("id")==="mce_marker"){const x=_;for(_=_.prev;_&&_.name!=="table";_=_.walk(!0))if(_.type===3||!i.isBlock(_.name)){_.parent&&e.schema.isValidChild(_.parent.name,"span")&&_.parent.insert(x,_,_.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(g),y.invalid||((x,A,N)=>{var O;return yt(N.children(),qy)&&((O=x.getParent(A,x.isBlock))===null||O===void 0?void 0:O.nodeName)==="SUMMARY"})(i,g,p)){e.selection.setContent(d);let x,A=s.getNode();const N=e.getBody();for(ja(A)?A=x=N:x=A;x&&x!==N;)A=x,x=x.parentNode;t=A===N?N.innerHTML:i.getOuterHTML(A);const O=a.parse(t),L=(B=>{for(let U=B;U;U=U.walk())if(U.attr("id")==="mce_marker")return S.some(U);return S.none()})(O),P=L.bind(BA).getOr(O);L.each(B=>B.replace(p));const j=p.children(),$=(o=p.parent)!==null&&o!==void 0?o:O;p.unwrap();const D=De(j,B=>zh(e.schema,B,$));$h(D,e.schema,P),Xy(a.getNodeFilters(),a.getAttributeFilters(),O),t=c.serialize(O),A===N?i.setHTML(N,t):i.setOuterHTML(A,t)}else t=c.serialize(p),((x,A,N)=>{var O;if(N.getAttribute("data-mce-bogus")==="all")(O=N.parentNode)===null||O===void 0||O.insertBefore(x.dom.createFragment(A),N);else{const L=N.firstChild,P=N.lastChild;!L||L===P&&L.nodeName==="BR"?x.dom.setHTML(N,A):x.selection.setContent(A,{no_events:!0})}})(e,t,g);var k;return((x,A)=>{const N=x.schema.getTextInlineElements(),O=x.dom;if(A){const L=x.getBody(),P=jh(x),j="*[data-mce-fragment]",$=O.select(j);oe.each($,D=>{const B=re=>ie(N[re.nodeName.toLowerCase()]),U=re=>re.childNodes.length===1;if(!ry(O,X=D)&&!((re,te)=>ry(re,te)&&yt(rc(re,te),ye=>(Ee=>ty.has(Ee))(ye)))(O,X)&&B(D)&&U(D)){const re=rc(O,D),te=(Re,me)=>Dn(Re,Ce=>fe(me,Ce)),ye=Re=>U(D)&&O.is(Re,j)&&B(Re)&&(Re.nodeName===D.nodeName&&te(re,rc(O,Re))||ye(Re.children[0])),Ee=Re=>ie(Re)&&Re!==L&&(P.compare(D,Re)||Ee(Re.parentElement)),Ae=Re=>ie(Re)&&Re!==L&&O.is(Re,j)&&(((me,Ce,F)=>{const H=rc(me,Ce),q=rc(me,F),W=de=>{var ae,Te;const Pe=(ae=me.getStyle(Ce,de))!==null&&ae!==void 0?ae:"",ze=(Te=me.getStyle(F,de))!==null&&Te!==void 0?Te:"";return jn(Pe)&&jn(ze)&&Pe!==ze};return yt(H,de=>{const ae=Te=>yt(Te,Pe=>Pe===de);if(!ae(q)&&ae(ny)){const Te=De(q,Pe=>yt(ny,ze=>_t(Pe,ze)));return yt(Te,W)}return W(de)})})(O,D,Re)||Ae(Re.parentElement));(ye(D.children[0])||Ee(D.parentElement)&&!Ae(D.parentElement))&&O.remove(D,!0)}var X})}})(e,l),((x,A)=>{var N,O,L;let P;const j=x.dom,$=x.selection;if(!A)return;$.scrollIntoView(A);const D=il(x.getBody(),A);if(D&&j.getContentEditable(D)==="false")return j.remove(A),void $.select(D);let B=j.createRng();const U=A.previousSibling;if(ne(U)){B.setStart(U,(O=(N=U.nodeValue)===null||N===void 0?void 0:N.length)!==null&&O!==void 0?O:0);const re=A.nextSibling;ne(re)&&(U.appendData(re.data),(L=re.parentNode)===null||L===void 0||L.removeChild(re))}else B.setStartBefore(A),B.setEndBefore(A);const X=j.getParent(A,j.isBlock);if(j.remove(A),X&&j.isEmpty(X)){const re=qh(X);ra(M(X)),B.setStart(X,0),B.setEnd(X,0),re||(te=>!!te.getAttribute("data-mce-fragment"))(X)||!(P=(te=>{let ye=G.fromRangeStart(te);return ye=Vs(x.getBody()).next(ye),ye?.toRange()})(B))?j.add(X,j.create("br",re?{}:{"data-mce-bogus":"1"})):(B=P,j.remove(X))}$.setRng(B)})(e,i.get("mce_marker")),k=e.getBody(),oe.each(k.getElementsByTagName("*"),x=>{x.removeAttribute("data-mce-fragment")}),((x,A,N)=>{S.from(x.getParent(A,"td,th")).map(M).each(O=>((L,P)=>{Ge(L).each(j=>{E(j).each($=>{P.isBlock(Je(L))&&Ga(j)&&P.isBlock(Je($))&&Pt(j)})})})(O,N))})(i,s.getStart(),e.schema),((x,A,N)=>{const O=w(M(N),L=>at(L,M(A)));ft(O,O.length-2).filter(Yn).fold(()=>Ha(x,A),L=>Ha(x,L.dom))})(e.schema,e.getBody(),s.getStart()),t},Ju=e=>e instanceof Cr,Gh=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&(r=>{nc(r)&&dr(r.getBody()).each(o=>{const s=o.getNode(),i=Or(s)?dr(s).getOr(o):o;r.selection.setRng(i.toRange())})})(e)},Jy=e=>dt(e)?e:ht,Kh=(e,t,n)=>{const r=t(e),o=Jy(n);return r.orThunk(()=>o(e)?S.none():((s,i,a)=>{let l=s.dom;const c=Jy(a);for(;l.parentNode;){l=l.parentNode;const d=M(l),m=i(d);if(m.isSome())return m;if(c(d))break}return S.none()})(e,t,o))},Xh=eh,e_=(e,t,n)=>{const r=e.formatter.get(n);if(r)for(let o=0;o<r.length;o++){const s=r[o];if(Ao(s)&&s.inherit===!1&&e.dom.is(t,s.selector))return!0}return!1},Zh=(e,t,n,r,o)=>{const s=e.dom.getRoot();if(t===s)return!1;const i=e.dom.getParent(t,a=>!!e_(e,a,n)||a.parentNode===s||!!Gs(e,a,n,r,!0));return!!Gs(e,i,n,r,o)},em=(e,t,n)=>!(!Tn(n)||!Xh(t,n.inline))||!(!qs(n)||!Xh(t,n.block))||!!Ao(n)&&xe(t)&&e.is(t,n.selector),t_=(e,t,n,r,o,s)=>{const i=n[r],a=r==="attributes";if(dt(n.onmatch))return n.onmatch(t,n,r);if(i){if(Uo(i)){for(let l=0;l<i.length;l++)if(a?e.getAttrib(t,i[l]):Mu(e,t,i[l]))return!0}else for(const l in i)if(He(i,l)){const c=a?e.getAttrib(t,l):Mu(e,t,l),d=pa(i[l],s),m=Wt(c)||ro(c);if(m&&Wt(d))continue;if(o&&m&&!n.exact||(!o||n.exact)&&!Xh(c,th(d,l)))return!1}}return!0},Gs=(e,t,n,r,o)=>{const s=e.formatter.get(n),i=e.dom;if(s&&xe(t))for(let a=0;a<s.length;a++){const l=s[a];if(em(e.dom,t,l)&&t_(i,t,l,"attributes",o,r)&&t_(i,t,l,"styles",o,r)){const c=l.classes;if(c){for(let d=0;d<c.length;d++)if(!e.dom.hasClass(t,pa(c[d],r)))return}return l}}},Qh=(e,t,n,r,o)=>{if(r)return Zh(e,r,t,n,o);if(r=e.selection.getNode(),Zh(e,r,t,n,o))return!0;const s=e.selection.getStart();return!(s===r||!Zh(e,s,t,n,o))},yd=Bn,n_=e=>{if(e){const t=new Cn(e,e);for(let n=t.current();n;n=t.next())if(ne(n))return n}return null},Jh=e=>{const t=Ft("span");return Hr(t,{id:$f,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&hn(t,zr(yd)),t},eg=(e,t,n)=>{const r=e.dom,o=e.selection;if(Q0(t))ol(e,!1,M(t),n,!0);else{const s=o.getRng(),i=r.getParent(t,r.isBlock),a=s.startContainer,l=s.startOffset,c=s.endContainer,d=s.endOffset,m=(h=>{const v=n_(h);return v&&v.data.charAt(0)===yd&&v.deleteData(0,1),v})(t);r.remove(t,!0),a===m&&l>0&&s.setStart(m,l-1),c===m&&d>0&&s.setEnd(m,d-1),i&&r.isEmpty(i)&&ua(M(i)),o.setRng(s)}},tg=(e,t,n)=>{const r=e.dom,o=e.selection;if(t)eg(e,t,n);else if(!(t=Ja(e.getBody(),o.getStart())))for(;t=r.get($f);)eg(e,t,n)},r_=(e,t)=>(e.appendChild(t),t),o_=(e,t)=>{var n;const r=Nr(e,(s,i)=>r_(s,i.cloneNode(!1)),t),o=(n=r.ownerDocument)!==null&&n!==void 0?n:document;return r_(r,o.createTextNode(yd))},s_=e=>db(e,qc(e).replace(new RegExp(`${Ut}$`)," ")),i_=(e,t)=>{const n=()=>{t===null||e.dom.isEmpty(t)||E(M(t)).each(r=>{sn(r)?s_(r):ta(r,o=>sn(o)).each(o=>{sn(o)&&s_(o)})})};e.once("input",r=>{r.data&&!el(r.data)&&(r.isComposing?e.once("compositionend",()=>{n()}):n())})},YA=(e,t,n,r)=>{const o=e.dom,s=e.selection;let i=!1;const a=e.formatter.get(t);if(!a)return;const l=s.getRng(),c=l.startContainer,d=l.startOffset;let m=c;ne(c)&&(d!==c.data.length&&(i=!0),m=m.parentNode);const h=[];let v;for(;m;){if(Gs(e,m,t,n,r)){v=m;break}m.nextSibling&&(i=!0),h.push(m),m=m.parentNode}if(v)if(i){const g=s.getBookmark();l.collapse(!0);let y=tl(o,l,a,!0);y=zu(y),e.formatter.remove(t,n,y,r),s.moveToBookmark(g)}else{const g=Ja(e.getBody(),v),y=ie(g)?o.getParents(v.parentNode,Zt,g):[],p=Jh(!1).dom;((x,A,N)=>{var O,L;const P=x.dom,j=P.getParent(N,_e(Qf,x.schema));j&&P.isEmpty(j)?(O=N.parentNode)===null||O===void 0||O.replaceChild(A,N):(($=>{const D=Ln($,"br"),B=De((U=>{const X=[];let re=U.dom;for(;re;)X.push(M(re)),re=re.lastChild;return X})($).slice(-1),Ga);D.length===B.length&&Q(B,Pt)})(M(N)),P.isEmpty(N)?(L=N.parentNode)===null||L===void 0||L.replaceChild(A,N):P.insertAfter(A,N))})(e,p,g??v);const _=((x,A,N,O,L,P)=>{const j=x.formatter,$=x.dom,D=De(Ct(j.get()),U=>U!==O&&!gt(U,"removeformat")),B=((U,X,re)=>bn(re,(te,ye)=>{const Ee=((Ae,Re)=>nh(Ae,Re,me=>{const Ce=F=>dt(F)||F.length>1&&F.charAt(0)==="%";return yt(["styles","attributes"],F=>St(me,F).exists(H=>{const q=ct(H)?H:Fo(H);return yt(q,Ce)}))}))(U,ye);return U.formatter.matchNode(X,ye,{},Ee)?te.concat([ye]):te},[]))(x,N,D);if(De(B,U=>!((X,re,te)=>{const ye=["inline","block","selector","attributes","styles","classes"],Ee=Ae=>Vt(Ae,(Re,me)=>yt(ye,Ce=>Ce===me));return nh(X,re,Ae=>{const Re=Ee(Ae);return nh(X,te,me=>{const Ce=Ee(me);return((F,H,q=fr)=>vt(q).eq(F,H))(Re,Ce)})})})(x,U,O)).length>0){const U=N.cloneNode(!1);return $.add(A,U),j.remove(O,L,U,P),$.remove(U),S.some(U)}return S.none()})(e,p,v,t,n,r),k=o_([...h,..._.toArray(),...y],p);g&&eg(e,g,ie(g)),s.setCursorLocation(k,1),i_(e,p),o.isEmpty(v)&&o.remove(v)}},a_=e=>{const t=Jh(!1),n=o_(e,t.dom);return{caretContainer:t,caretPosition:G(n,0)}},l_=(e,t)=>{const{caretContainer:n,caretPosition:r}=a_(t);return lr(M(e),n),Pt(M(e)),r},c_=(e,t)=>{if(Eo(t.dom))return!1;const n=e.schema.getTextInlineElements();return He(n,Je(t))&&!Eo(t.dom)&&!Is(t.dom)},_d={},d_=Tr(["pre"]);((e,t)=>{_d[e]||(_d[e]=[]),_d[e].push(n=>{if(!n.selection.getRng().collapsed){const r=n.selection.getSelectedBlocks(),o=De(De(r,d_),(s=>i=>{const a=i.previousSibling;return d_(a)&&fe(s,a)})(r));Q(o,s=>{((i,a)=>{const l=M(a),c=Wr(l).dom;Pt(l),_i(M(i),[Ft("br",c),Ft("br",c),...le(l)])})(s.previousSibling,s)})}})})("pre");const u_=["fontWeight","fontStyle","color","fontSize","fontFamily"],m_=(e,t)=>{const n=e.get(t);return ct(n)?Mt(n,r=>Tn(r)&&r.inline==="span"&&(o=>rn(o.styles)&&yt(Ct(o.styles),s=>fe(u_,s)))(r)):S.none()},f_=(e,t)=>Xr(t,G.fromRangeStart(e)).isNone(),h_=(e,t)=>Dr(t,G.fromRangeEnd(e)).exists(n=>!jt(n.getNode())||Dr(t,n).isSome())===!1,g_=e=>t=>of(t)&&e.isEditable(t),p_=e=>De(e.getSelectedBlocks(),g_(e.dom)),ng=oe.each,rg=e=>xe(e)&&!No(e)&&!Eo(e)&&!Is(e),b_=(e,t)=>{for(let n=e;n;n=n[t]){if(ne(n)&&jn(n.data))return e;if(xe(n)&&!No(n))return n}return e},v_=(e,t,n)=>{const r=jh(e),o=ys(t)&&e.dom.isEditable(t),s=ys(n)&&e.dom.isEditable(n);if(o&&s){const i=b_(t,"previousSibling"),a=b_(n,"nextSibling");if(r.compare(i,a)){for(let l=i.nextSibling;l&&l!==a;){const c=l;l=l.nextSibling,i.appendChild(c)}return e.dom.remove(a),oe.each(oe.grep(a.childNodes),l=>{i.appendChild(l)}),i}}return n},y_=(e,t,n,r)=>{var o;if(r&&t.merge_siblings!==!1){const s=(o=v_(e,K0(r),r))!==null&&o!==void 0?o:r;v_(e,s,K0(s,!0))}},og=(e,t,n)=>{ng(e.childNodes,r=>{rg(r)&&(t(r)&&n(r),r.hasChildNodes()&&og(r,t,n))})},__=(e,t)=>n=>!(!n||!Mu(e,n,t)),w_=(e,t,n)=>r=>{e.setStyle(r,t,n),r.getAttribute("style")===""&&r.removeAttribute("style"),((o,s)=>{s.nodeName==="SPAN"&&o.getAttribs(s).length===0&&o.remove(s,!0)})(e,r)},al=$s([{keep:[]},{rename:["name"]},{removed:[]}]),$A=/^(src|href|style)$/,sg=oe.each,tm=eh,C_=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),k_=(e,t,n)=>{let r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];if(xe(r)){const s=r.childNodes.length-1;!n&&o&&o--,r=r.childNodes[o>s?s:o]}return ne(r)&&n&&o>=r.data.length&&(r=new Cn(r,e.getBody()).next()||r),ne(r)&&!n&&o===0&&(r=new Cn(r,e.getBody()).prev()||r),r},x_=(e,t)=>{const n=t?"firstChild":"lastChild",r=e[n];return(o=>/^(TR|TH|TD)$/.test(o.nodeName))(e)&&r?e.nodeName==="TR"&&r[n]||r:e},ig=(e,t,n,r)=>{var o;const s=e.create(n,r);return(o=t.parentNode)===null||o===void 0||o.insertBefore(s,t),s.appendChild(t),s},S_=(e,t,n,r,o)=>{const s=M(t),i=M(e.create(r,o)),a=n?J(s):K(s);return _i(i,a),n?(lr(s,i),Ec(i,s)):(ps(s,i),hn(i,s)),i.dom},E_=(e,t,n)=>{const r=t.parentNode;let o;const s=e.dom,i=cr(e);qs(n)&&r===s.getRoot()&&(n.list_block&&tm(t,n.list_block)||Q(xt(t.childNodes),a=>{Ql(e,i,a.nodeName.toLowerCase())?o?o.appendChild(a):(o=ig(s,a,i),s.setAttribs(o,Jc(e))):o=null})),(a=>Ao(a)&&Tn(a)&&ds(St(a,"mixed"),!0))(n)&&!tm(n.inline,t)||s.remove(t,!0)},N_=(e,t,n)=>Jt(e)?{name:t,value:null}:{name:e,value:pa(t,n)},A_=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},T_=(e,t,n,r,o)=>{let s=!1;sg(n.styles,(i,a)=>{const{name:l,value:c}=N_(a,i,r),d=th(c,l);(n.remove_similar||Tt(c)||!xe(o)||tm(Mu(e,o,l),d))&&e.setStyle(t,l,""),s=!0}),s&&A_(e,t)},O_=(e,t,n,r,o)=>{const s=e.dom,i=jh(e),a=e.schema;if(Tn(t)&&Ko(a,t.inline)&&Ni(a,r)&&r.parentElement===e.getBody())return E_(e,r,t),al.removed();if(!t.ceFalseOverride&&r&&s.getContentEditableParent(r)==="false"||r&&!em(s,r,t)&&!((d,m)=>m.links&&d.nodeName==="A")(r,t))return al.keep();const l=r,c=t.preserve_attributes;if(Tn(t)&&t.remove==="all"&&ct(c)){const d=De(s.getAttribs(l),m=>fe(c,m.name.toLowerCase()));if(s.removeAllAttribs(l),Q(d,m=>s.setAttrib(l,m.name,m.value)),d.length>0)return al.rename("span")}if(t.remove!=="all"){T_(s,l,t,n,o),sg(t.attributes,(m,h)=>{const{name:v,value:g}=N_(h,m,n);if(t.remove_similar||Tt(g)||!xe(o)||tm(s.getAttrib(o,v),g)){if(v==="class"){const y=s.getAttrib(l,v);if(y){let p="";if(Q(y.split(/\s+/),_=>{/mce\-\w+/.test(_)&&(p+=(p?" ":"")+_)}),p)return void s.setAttrib(l,v,p)}}if($A.test(v)&&l.removeAttribute("data-mce-"+v),v==="style"&&Tr(["li"])(l)&&s.getStyle(l,"list-style-type")==="none")return l.removeAttribute(v),void s.setStyle(l,"list-style-type","none");v==="class"&&l.removeAttribute("className"),l.removeAttribute(v)}}),sg(t.classes,m=>{m=pa(m,n),xe(o)&&!s.hasClass(o,m)||s.removeClass(l,m)});const d=s.getAttribs(l);for(let m=0;m<d.length;m++){const h=d[m].nodeName;if(!i.isAttributeInternal(h))return al.keep()}}return t.remove!=="none"?(E_(e,l,t),al.removed()):al.keep()},zA=(e,t,n,r)=>O_(e,t,n,r,r).fold(ce(r),o=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,o)),ce(null)),R_=(e,t,n,r,o)=>{(r||e.selection.isEditable())&&((s,i,a,l,c)=>{const d=s.formatter.get(i),m=d[0],h=s.dom,v=s.selection,g=x=>{const A=((N,O,L,P,j)=>{let $;return O.parentNode&&Q(Pu(N.dom,O.parentNode).reverse(),D=>{if(!$&&xe(D)&&D.id!=="_start"&&D.id!=="_end"){const B=Gs(N,D,L,P,j);B&&B.split!==!1&&($=D)}}),$})(s,x,i,a,c);return((N,O,L,P,j,$,D,B)=>{var U,X;let re,te;const ye=N.dom;if(L){const Ee=L.parentNode;for(let Ae=P.parentNode;Ae&&Ae!==Ee;Ae=Ae.parentNode){let Re=ye.clone(Ae,!1);for(let me=0;me<O.length&&(Re=zA(N,O[me],B,Re),Re!==null);me++);Re&&(re&&Re.appendChild(re),te||(te=Re),re=Re)}D.mixed&&ye.isBlock(L)||(P=(U=ye.split(L,P))!==null&&U!==void 0?U:P),re&&te&&((X=j.parentNode)===null||X===void 0||X.insertBefore(re,j),te.appendChild(j),Tn(D)&&y_(N,D,0,re))}return P})(s,d,A,x,x,0,m,a)},y=x=>yt(d,A=>wd(s,A,a,x,x)),p=x=>{const A=xt(x.childNodes),N=y(x)||yt(d,L=>em(h,x,L)),O=x.parentNode;if(!N&&ie(O)&&rh(m)&&y(O),m.deep&&A.length)for(let L=0;L<A.length;L++)p(A[L]);Q(["underline","line-through","overline"],L=>{xe(x)&&s.dom.getStyle(x,"text-decoration")===L&&x.parentNode&&Z0(h,x.parentNode)===L&&wd(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:L}},void 0,x)})},_=x=>{const A=h.get(x?"_start":"_end");if(A){let N=A[x?"firstChild":"lastChild"];return(O=>No(O)&&xe(O)&&(O.id==="_start"||O.id==="_end"))(N)&&(N=N[x?"firstChild":"lastChild"]),ne(N)&&N.data.length===0&&(N=x?A.previousSibling||A.nextSibling:A.nextSibling||A.previousSibling),h.remove(A,!0),N}return null},k=x=>{let A,N,O=tl(h,x,d,x.collapsed);if(m.split){if(O=zu(O),A=k_(s,O,!0),N=k_(s,O),A!==N){if(A=x_(A,!0),N=x_(N,!1),C_(h,A,N)){const P=S.from(A.firstChild).getOr(A);return g(S_(h,P,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void _(!0)}if(C_(h,N,A)){const P=S.from(N.lastChild).getOr(N);return g(S_(h,P,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void _(!1)}A=ig(h,A,"span",{id:"_start","data-mce-type":"bookmark"}),N=ig(h,N,"span",{id:"_end","data-mce-type":"bookmark"});const L=h.createRng();L.setStartAfter(A),L.setEndBefore(N),cd(h,L,P=>{Q(P,j=>{No(j)||No(j.parentNode)||g(j)})}),g(A),g(N),A=_(!0),N=_()}else A=N=g(A);O.startContainer=A.parentNode?A.parentNode:A,O.startOffset=h.nodeIndex(A),O.endContainer=N.parentNode?N.parentNode:N,O.endOffset=h.nodeIndex(N)+1}cd(h,O,L=>{Q(L,p)})};if(l){if(ld(l)){const x=h.createRng();x.setStartBefore(l),x.setEndAfter(l),k(x)}else k(l);qb(s,i,l,a)}else v.isCollapsed()&&Tn(m)&&!Zl(s).length?YA(s,i,a,c):(G0(s,()=>Xf(s,k),x=>Tn(m)&&Qh(s,i,a,x)),s.nodeChanged()),((x,A,N)=>{A==="removeformat"?Q(p_(x.selection),O=>{Q(u_,L=>x.dom.setStyle(O,L,"")),A_(x.dom,O)}):m_(x.formatter,A).each(O=>{Q(p_(x.selection),L=>T_(x.dom,L,O,N,null))})})(s,i,a),qb(s,i,l,a)})(e,t,n,r,o)},wd=(e,t,n,r,o)=>O_(e,t,n,r,o).fold(ht,s=>(e.dom.rename(r,s),!0),Zt),D_=oe.each,nm=oe.each,M_=(e,t,n,r)=>{if(nm(n.styles,(o,s)=>{e.setStyle(t,s,pa(o,r))}),n.styles){const o=e.getAttrib(t,"style");o&&e.setAttrib(t,"data-mce-style",o)}},WA=(e,t,n,r)=>{const o=e.formatter.get(t),s=o[0],i=!r&&e.selection.isCollapsed(),a=e.dom,l=e.selection,c=(g,y=s)=>{dt(y.onformat)&&y.onformat(g,y,n,r),M_(a,g,y,n),nm(y.attributes,(p,_)=>{a.setAttrib(g,_,pa(p,n))}),nm(y.classes,p=>{const _=pa(p,n);a.hasClass(g,_)||a.addClass(g,_)})},d=(g,y)=>{let p=!1;return nm(g,_=>!(!Ao(_)||(a.getContentEditable(y)!=="false"||_.ceFalseOverride)&&(!ie(_.collapsed)||_.collapsed===i)&&a.is(y,_.selector)&&!Eo(y)&&(c(y,_),p=!0,1))),p},m=g=>{if(se(g)){const y=a.create(g);return c(y),y}return null},h=(g,y,p)=>{const _=[];let k=!0;const x=s.inline||s.block,A=m(x);cd(g,y,N=>{let O;const L=P=>{let j=!1,$=k,D=!1;const B=P.parentNode,U=B.nodeName.toLowerCase(),X=g.getContentEditable(P);ie(X)&&($=k,k=X==="true",j=!0,D=X0(e,P));const re=k&&!j;if(jt(P)&&!((te,ye,Ee,Ae)=>{if(RE(te)&&Tn(ye)&&Ee.parentNode){const Re=yn(te.schema),me=tf(M(Ee),Ce=>Eo(Ce.dom));return no(Re,Ae)&&ws(te.schema,Ee.parentNode,{skipBogus:!1,includeZwsp:!0})&&!me}return!1})(e,s,P,U))return O=null,void(qs(s)&&g.remove(P));if((te=>(ye=>qs(ye)&&ye.wrapper===!0)(s)&&Gs(e,te,t,n))(P))O=null;else{if(((te,ye,Ee)=>{const Ae=(Re=>qs(Re)&&Re.wrapper!==!0)(s)&&Qf(e.schema,te)&&Ql(e,ye,x);return Ee&&Ae})(P,U,re)){const te=g.rename(P,x);return c(te),_.push(te),void(O=null)}if(Ao(s)){let te=d(o,P);if(!te&&ie(B)&&rh(s)&&(te=d(o,B)),!Tn(s)||te)return void(O=null)}ie(A)&&((te,ye,Ee,Ae)=>{const Re=te.nodeName.toLowerCase(),me=Ql(e,x,Re)&&Ql(e,ye,x),Ce=!p&&ne(te)&&gu(te.data),F=Eo(te),H=!Tn(s)||!g.isBlock(te);return(Ee||Ae)&&me&&!Ce&&!F&&H})(P,U,re,D)?(O||(O=g.clone(A,!1),B.insertBefore(O,P),_.push(O)),D&&j&&(k=$),O.appendChild(P)):(O=null,Q(xt(P.childNodes),L),j&&(k=$),O=null)}};Q(N,L)}),s.links===!0&&Q(_,N=>{const O=L=>{L.nodeName==="A"&&c(L,s),Q(xt(L.childNodes),O)};O(N)}),Q(_,N=>{const O=(L=>{let P=0;return Q(L.childNodes,j=>{($=>ie($)&&ne($)&&$.length===0)(j)||No(j)||P++}),P})(N);!(_.length>1)&&g.isBlock(N)||O!==0?(Tn(s)||qs(s)&&s.wrapper)&&(s.exact||O!==1||(N=(L=>Mt(L.childNodes,Zf).filter(j=>g.getContentEditable(j)!=="false"&&em(g,j,s)).map(j=>{const $=g.clone(j,!1);return c($),g.replace($,L,!0),g.remove(j,!0),$}).getOr(L))(N)),((L,P,j,$)=>{D_(P,D=>{Tn(D)&&D_(L.dom.select(D.inline,$),B=>{rg(B)&&wd(L,D,j,B,D.exact?B:null)}),((B,U,X)=>{if(U.clear_child_styles){const re=U.links?"*:not(a)":"*";ng(B.select(re,X),te=>{rg(te)&&B.isEditable(te)&&ng(U.styles,(ye,Ee)=>{B.setStyle(te,Ee,"")})})}})(L.dom,D,$)})})(e,o,n,N),((L,P,j,$,D)=>{const B=D.parentNode;Gs(L,B,j,$)&&wd(L,P,$,D)||P.merge_with_parents&&B&&L.dom.getParent(B,U=>!!Gs(L,U,j,$)&&(wd(L,P,$,D),!0))})(e,s,t,n,N),((L,P,j,$)=>{if(P.styles&&P.styles.backgroundColor){const D=__(L,"fontSize");og($,B=>D(B)&&L.isEditable(B),w_(L,"backgroundColor",pa(P.styles.backgroundColor,j)))}})(g,s,n,N),((L,P,j,$)=>{const D=B=>{if(ys(B)&&xe(B.parentNode)&&L.isEditable(B)){const U=Z0(L,B.parentNode);L.getStyle(B,"color")&&U?L.setStyle(B,"text-decoration",U):L.getStyle(B,"text-decoration")===U&&L.setStyle(B,"text-decoration",null)}};P.styles&&(P.styles.color||P.styles.textDecoration)&&(oe.walk($,D,"childNodes"),D($))})(g,s,0,N),((L,P,j,$)=>{if(Tn(P)&&(P.inline==="sub"||P.inline==="sup")){const D=__(L,"fontSize");og($,U=>D(U)&&L.isEditable(U),w_(L,"fontSize",""));const B=De(L.select(P.inline==="sup"?"sub":"sup",$),L.isEditable);L.remove(B,!0)}})(g,s,0,N),y_(e,s,0,N)):g.remove(N,!0)})},v=ld(r)?r:l.getNode();if(a.getContentEditable(v)==="false"&&!X0(e,v))return d(o,r=v),void Vb(e,t,r,n);if(s){if(r)if(ld(r)){if(!d(o,r)){const g=a.createRng();g.setStartBefore(r),g.setEndAfter(r),h(a,tl(a,g,o),!0)}}else h(a,r,!0);else i&&Tn(s)&&!Zl(e).length?((g,y,p)=>{let _;const k=g.selection,x=g.formatter.get(y);if(!x)return;const A=k.getRng();let N=A.startOffset;const O=A.startContainer.nodeValue;_=Ja(g.getBody(),k.getStart());const L=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(O&&N>0&&N<O.length&&L.test(O.charAt(N))&&L.test(O.charAt(N-1))){const $=k.getBookmark();A.collapse(!0);let D=tl(g.dom,A,x);D=zu(D),g.formatter.apply(y,p,D),k.moveToBookmark($)}else{let $=_?n_(_):null;_&&$?.data===yd||(P=g.getDoc(),j=Jh(!0).dom,_=P.importNode(j,!0),$=_.firstChild,A.insertNode(_),N=1,i_(g,_)),g.formatter.apply(y,p,_),k.setCursorLocation($,N)}var P,j})(e,t,n):(l.setRng(Wh(l.getRng())),G0(e,()=>{Xf(e,(g,y)=>{const p=y?g:tl(a,g,o);h(a,p,!1)})},Zt),e.nodeChanged()),m_(e.formatter,t).each(g=>{Q((y=>De((p=>{const _=p.getSelectedBlocks(),k=p.getRng();if(p.isCollapsed())return[];if(_.length===1)return f_(k,_[0])&&h_(k,_[0])?_:[];{const x=en(_).filter(O=>f_(k,O)).toArray(),A=Un(_).filter(O=>h_(k,O)).toArray(),N=_.slice(1,-1);return x.concat(N).concat(A)}})(y),g_(y.dom)))(e.selection),y=>M_(a,y,g,n))});((g,y)=>{He(_d,g)&&Q(_d[g],p=>{p(y)})})(t,e)}Vb(e,t,r,n)},P_=(e,t,n,r)=>{(r||e.selection.isEditable())&&WA(e,t,n,r)},L_=e=>He(e,"vars"),B_=e=>e.selection.getStart(),I_=(e,t,n,r,o)=>oi(t,s=>{const i=e.formatter.matchNode(s,n,o??{},r);return!on(i)},s=>!!e_(e,s,n)||!r&&ie(e.formatter.matchNode(s,n,o,!0))),F_=(e,t)=>{const n=t??B_(e);return De(Pu(e.dom,n),r=>xe(r)&&!Is(r))},U_=(e,t,n)=>{const r=F_(e,t);it(n,(o,s)=>{const i=a=>{const l=I_(e,r,s,a.similar,L_(a)?a.vars:void 0),c=l.isSome();if(a.state.get()!==c){a.state.set(c);const d=l.getOr(t);L_(a)?a.callback(c,{node:d,format:s,parents:r}):Q(a.callbacks,m=>m(c,{node:d,format:s,parents:r}))}};Q([o.withSimilar,o.withoutSimilar],i),Q(o.withVars,i)})},j_=oe.explode,H_=()=>{const e={};return{addFilter:(t,n)=>{Q(j_(t),r=>{He(e,r)||(e[r]={name:r,callbacks:[]}),e[r].callbacks.push(n)})},getFilters:()=>Fo(e),removeFilter:(t,n)=>{Q(j_(t),r=>{if(He(e,r))if(ie(n)){const o=e[r],s=De(o.callbacks,i=>i!==n);s.length>0?o.callbacks=s:delete e[r]}else delete e[r]})}}},VA=(e,t,n)=>{var r;const o=Kt();t.convert_fonts_to_spans&&((s,i,a)=>{s.addNodeFilter("font",l=>{Q(l,c=>{const d=i.parse(c.attr("style")),m=c.attr("color"),h=c.attr("face"),v=c.attr("size");m&&(d.color=m),h&&(d["font-family"]=h),v&&as(v).each(g=>{d["font-size"]=a[g-1]}),c.name="span",c.attr("style",i.serialize(d)),((g,y)=>{Q(["color","face","size"],p=>{g.attr(p,null)})})(c)})})})(e,o,oe.explode((r=t.font_size_legacy_values)!==null&&r!==void 0?r:"")),((s,i,a)=>{s.addNodeFilter("strike",l=>{const c=i.type!=="html4";Q(l,d=>{if(c)d.name="s";else{const m=a.parse(d.attr("style"));m["text-decoration"]="line-through",d.name="span",d.attr("style",a.serialize(m))}})})})(e,n,o)},ag=e=>{const[t,...n]=e.split(","),r=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){const s=o[2]===";base64",i=(l=>{try{return decodeURIComponent(l)}catch{return l}})(r),a=s?(l=>{const c=/([a-z0-9+\/=\s]+)/i.exec(l);return c?c[1]:""})(i):i;return S.some({type:o[1],data:a,base64Encoded:s})}return S.none()},Y_=(e,t,n=!0)=>{let r=t;if(n)try{r=atob(t)}catch{return S.none()}const o=new Uint8Array(r.length);for(let s=0;s<o.length;s++)o[s]=r.charCodeAt(s);return S.some(new Blob([o],{type:e}))},$_=e=>new Promise((t,n)=>{const r=new FileReader;r.onloadend=()=>{t(r.result)},r.onerror=()=>{var o;n((o=r.error)===null||o===void 0?void 0:o.message)},r.readAsDataURL(e)});let qA=0;const z_=(e,t,n)=>ag(e).bind(({data:r,type:o,base64Encoded:s})=>{if(t&&!s)return S.none();{const i=s?r:btoa(r);return n(i,o)}}),W_=(e,t,n)=>{const r=e.create("blobid"+qA++,t,n);return e.add(r),r},V_=(e,t,n=!1)=>z_(t,n,(r,o)=>S.from(e.getByData(r,o)).orThunk(()=>Y_(o,r).map(s=>W_(e,s,r)))),GA=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,KA=e=>S.from(e.match(GA)).bind(t=>ft(t,1)).map(t=>_t(t,"www.")?t.substring(4):t),q_=(e,t)=>{S.from(e.attr("src")).bind(KA).forall(n=>!fe(t,n))&&e.attr("sandbox","")},lg=(e,t)=>_t(e,`${t}/`),{entries:G_,setPrototypeOf:K_,isFrozen:XA,getPrototypeOf:ZA,getOwnPropertyDescriptor:QA}=Object;let{freeze:Zr,seal:Jo,create:X_}=Object,{apply:cg,construct:dg}=typeof Reflect<"u"&&Reflect;Zr||(Zr=function(e){return e}),Jo||(Jo=function(e){return e}),cg||(cg=function(e,t,n){return e.apply(t,n)}),dg||(dg=function(e,t){return new e(...t)});const rm=Ro(Array.prototype.forEach),Z_=Ro(Array.prototype.pop),Cd=Ro(Array.prototype.push),om=Ro(String.prototype.toLowerCase),ug=Ro(String.prototype.toString),Q_=Ro(String.prototype.match),kd=Ro(String.prototype.replace),JA=Ro(String.prototype.indexOf),eT=Ro(String.prototype.trim),Es=Ro(Object.prototype.hasOwnProperty),Qr=Ro(RegExp.prototype.test),xd=(J_=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return dg(J_,t)});var J_;function Ro(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return cg(e,t,r)}}function kt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:om;K_&&K_(e,null);let r=t.length;for(;r--;){let o=t[r];if(typeof o=="string"){const s=n(o);s!==o&&(XA(t)||(t[r]=s),o=s)}e[o]=!0}return e}function tT(e){for(let t=0;t<e.length;t++)Es(e,t)||(e[t]=null);return e}function ll(e){const t=X_(null);for(const[n,r]of G_(e))Es(e,n)&&(Array.isArray(r)?t[n]=tT(r):r&&typeof r=="object"&&r.constructor===Object?t[n]=ll(r):t[n]=r);return t}function Sd(e,t){for(;e!==null;){const n=QA(e,t);if(n){if(n.get)return Ro(n.get);if(typeof n.value=="function")return Ro(n.value)}e=ZA(e)}return function(){return null}}const ew=Zr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),mg=Zr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),fg=Zr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),nT=Zr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),hg=Zr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),rT=Zr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),tw=Zr(["#text"]),nw=Zr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),gg=Zr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),rw=Zr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),sm=Zr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),oT=Jo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),sT=Jo(/<%[\w\W]*|[\w\W]*%>/gm),iT=Jo(/\${[\w\W]*}/gm),aT=Jo(/^data-[\-\w.\u00B7-\uFFFF]/),lT=Jo(/^aria-[\-\w]+$/),ow=Jo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),cT=Jo(/^(?:\w+script|data):/i),dT=Jo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),sw=Jo(/^html$/i),uT=Jo(/^[a-z][.\w]*(-[.\w]+)+$/i);var iw=Object.freeze({__proto__:null,MUSTACHE_EXPR:oT,ERB_EXPR:sT,TMPLIT_EXPR:iT,DATA_ATTR:aT,ARIA_ATTR:lT,IS_ALLOWED_URI:ow,IS_SCRIPT_OR_DATA:cT,ATTR_WHITESPACE:dT,DOCTYPE_NAME:sw,CUSTOM_ELEMENT:uT});const mT=function(){return typeof window>"u"?null:window};var pg=function e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mT();const n=Y=>e(Y);if(n.version="3.1.7",n.removed=[],!t||!t.document||t.document.nodeType!==9)return n.isSupported=!1,n;let{document:r}=t;const o=r,s=o.currentScript,{DocumentFragment:i,HTMLTemplateElement:a,Node:l,Element:c,NodeFilter:d,NamedNodeMap:m=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:v,trustedTypes:g}=t,y=c.prototype,p=Sd(y,"cloneNode"),_=Sd(y,"remove"),k=Sd(y,"nextSibling"),x=Sd(y,"childNodes"),A=Sd(y,"parentNode");if(typeof a=="function"){const Y=r.createElement("template");Y.content&&Y.content.ownerDocument&&(r=Y.content.ownerDocument)}let N,O="";const{implementation:L,createNodeIterator:P,createDocumentFragment:j,getElementsByTagName:$}=r,{importNode:D}=o;let B={};n.isSupported=typeof G_=="function"&&typeof A=="function"&&L&&L.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:U,ERB_EXPR:X,TMPLIT_EXPR:re,DATA_ATTR:te,ARIA_ATTR:ye,IS_SCRIPT_OR_DATA:Ee,ATTR_WHITESPACE:Ae,CUSTOM_ELEMENT:Re}=iw;let{IS_ALLOWED_URI:me}=iw,Ce=null;const F=kt({},[...ew,...mg,...fg,...hg,...tw]);let H=null;const q=kt({},[...nw,...gg,...rw,...sm]);let W=Object.seal(X_(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),de=null,ae=null,Te=!0,Pe=!0,ze=!1,$t=!0,zt=!1,mo=!0,pe=!1,We=!1,Xe=!1,Ye=!1,lt=!1,Rt=!1,ge=!0,Le=!1,Nt=!0,At=!1,an={},Vn=null;const As=kt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ur=null;const Lo=kt({},["audio","video","img","source","image","track"]);let On=null;const pl=kt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),xa="http://www.w3.org/1998/Math/MathML",Qs="http://www.w3.org/2000/svg",Bo="http://www.w3.org/1999/xhtml";let Sa=Bo,Ii=!1,Js=null;const Jm=kt({},[xa,Qs,Bo],ug);let Pr=null;const _c=["application/xhtml+xml","text/html"];let wn=null,Fi=null;const rM=r.createElement("form"),kS=function(Y){return Y instanceof RegExp||Y instanceof Function},Jp=function(){let Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!Fi||Fi!==Y){if(Y&&typeof Y=="object"||(Y={}),Y=ll(Y),Pr=_c.indexOf(Y.PARSER_MEDIA_TYPE)===-1?"text/html":Y.PARSER_MEDIA_TYPE,wn=Pr==="application/xhtml+xml"?ug:om,Ce=Es(Y,"ALLOWED_TAGS")?kt({},Y.ALLOWED_TAGS,wn):F,H=Es(Y,"ALLOWED_ATTR")?kt({},Y.ALLOWED_ATTR,wn):q,Js=Es(Y,"ALLOWED_NAMESPACES")?kt({},Y.ALLOWED_NAMESPACES,ug):Jm,On=Es(Y,"ADD_URI_SAFE_ATTR")?kt(ll(pl),Y.ADD_URI_SAFE_ATTR,wn):pl,ur=Es(Y,"ADD_DATA_URI_TAGS")?kt(ll(Lo),Y.ADD_DATA_URI_TAGS,wn):Lo,Vn=Es(Y,"FORBID_CONTENTS")?kt({},Y.FORBID_CONTENTS,wn):As,de=Es(Y,"FORBID_TAGS")?kt({},Y.FORBID_TAGS,wn):{},ae=Es(Y,"FORBID_ATTR")?kt({},Y.FORBID_ATTR,wn):{},an=!!Es(Y,"USE_PROFILES")&&Y.USE_PROFILES,Te=Y.ALLOW_ARIA_ATTR!==!1,Pe=Y.ALLOW_DATA_ATTR!==!1,ze=Y.ALLOW_UNKNOWN_PROTOCOLS||!1,$t=Y.ALLOW_SELF_CLOSE_IN_ATTR!==!1,zt=Y.SAFE_FOR_TEMPLATES||!1,mo=Y.SAFE_FOR_XML!==!1,pe=Y.WHOLE_DOCUMENT||!1,Ye=Y.RETURN_DOM||!1,lt=Y.RETURN_DOM_FRAGMENT||!1,Rt=Y.RETURN_TRUSTED_TYPE||!1,Xe=Y.FORCE_BODY||!1,ge=Y.SANITIZE_DOM!==!1,Le=Y.SANITIZE_NAMED_PROPS||!1,Nt=Y.KEEP_CONTENT!==!1,At=Y.IN_PLACE||!1,me=Y.ALLOWED_URI_REGEXP||ow,Sa=Y.NAMESPACE||Bo,W=Y.CUSTOM_ELEMENT_HANDLING||{},Y.CUSTOM_ELEMENT_HANDLING&&kS(Y.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(W.tagNameCheck=Y.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Y.CUSTOM_ELEMENT_HANDLING&&kS(Y.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(W.attributeNameCheck=Y.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Y.CUSTOM_ELEMENT_HANDLING&&typeof Y.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(W.allowCustomizedBuiltInElements=Y.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),zt&&(Pe=!1),lt&&(Ye=!0),an&&(Ce=kt({},tw),H=[],an.html===!0&&(kt(Ce,ew),kt(H,nw)),an.svg===!0&&(kt(Ce,mg),kt(H,gg),kt(H,sm)),an.svgFilters===!0&&(kt(Ce,fg),kt(H,gg),kt(H,sm)),an.mathMl===!0&&(kt(Ce,hg),kt(H,rw),kt(H,sm))),Y.ADD_TAGS&&(Ce===F&&(Ce=ll(Ce)),kt(Ce,Y.ADD_TAGS,wn)),Y.ADD_ATTR&&(H===q&&(H=ll(H)),kt(H,Y.ADD_ATTR,wn)),Y.ADD_URI_SAFE_ATTR&&kt(On,Y.ADD_URI_SAFE_ATTR,wn),Y.FORBID_CONTENTS&&(Vn===As&&(Vn=ll(Vn)),kt(Vn,Y.FORBID_CONTENTS,wn)),Nt&&(Ce["#text"]=!0),pe&&kt(Ce,["html","head","body"]),Ce.table&&(kt(Ce,["tbody"]),delete de.tbody),Y.TRUSTED_TYPES_POLICY){if(typeof Y.TRUSTED_TYPES_POLICY.createHTML!="function")throw xd('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Y.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw xd('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=Y.TRUSTED_TYPES_POLICY,O=N.createHTML("")}else N===void 0&&(N=function(qe,Fe){if(typeof qe!="object"||typeof qe.createPolicy!="function")return null;let Dt=null;const Xt="data-tt-policy-suffix";Fe&&Fe.hasAttribute(Xt)&&(Dt=Fe.getAttribute(Xt));const wt="dompurify"+(Dt?"#"+Dt:"");try{return qe.createPolicy(wt,{createHTML:er=>er,createScriptURL:er=>er})}catch{return console.warn("TrustedTypes policy "+wt+" could not be created."),null}}(g,s)),N!==null&&typeof O=="string"&&(O=N.createHTML(""));Zr&&Zr(Y),Fi=Y}},xS=kt({},["mi","mo","mn","ms","mtext"]),SS=kt({},["annotation-xml"]),oM=kt({},["title","style","font","a","script"]),ES=kt({},[...mg,...fg,...nT]),NS=kt({},[...hg,...rT]),ei=function(Y){Cd(n.removed,{element:Y});try{A(Y).removeChild(Y)}catch{_(Y)}},qd=function(Y,qe){try{Cd(n.removed,{attribute:qe.getAttributeNode(Y),from:qe})}catch{Cd(n.removed,{attribute:null,from:qe})}if(qe.removeAttribute(Y),Y==="is"&&!H[Y])if(Ye||lt)try{ei(qe)}catch{}else try{qe.setAttribute(Y,"")}catch{}},AS=function(Y){let qe=null,Fe=null;if(Xe)Y="<remove></remove>"+Y;else{const wt=Q_(Y,/^[\r\n\t ]+/);Fe=wt&&wt[0]}Pr==="application/xhtml+xml"&&Sa===Bo&&(Y='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Y+"</body></html>");const Dt=N?N.createHTML(Y):Y;if(Sa===Bo)try{qe=new v().parseFromString(Dt,Pr)}catch{}if(!qe||!qe.documentElement){qe=L.createDocument(Sa,"template",null);try{qe.documentElement.innerHTML=Ii?O:Dt}catch{}}const Xt=qe.body||qe.documentElement;return Y&&Fe&&Xt.insertBefore(r.createTextNode(Fe),Xt.childNodes[0]||null),Sa===Bo?$.call(qe,pe?"html":"body")[0]:pe?qe.documentElement:Xt},TS=function(Y){return P.call(Y.ownerDocument||Y,Y,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},OS=function(Y){return Y instanceof h&&(typeof Y.nodeName!="string"||typeof Y.textContent!="string"||typeof Y.removeChild!="function"||!(Y.attributes instanceof m)||typeof Y.removeAttribute!="function"||typeof Y.setAttribute!="function"||typeof Y.namespaceURI!="string"||typeof Y.insertBefore!="function"||typeof Y.hasChildNodes!="function")},RS=function(Y){return typeof l=="function"&&Y instanceof l},Ui=function(Y,qe,Fe){B[Y]&&rm(B[Y],Dt=>{Dt.call(n,qe,Fe,Fi)})},DS=function(Y){let qe=null;if(Ui("beforeSanitizeElements",Y,null),OS(Y))return ei(Y),!0;const Fe=wn(Y.nodeName);if(Ui("uponSanitizeElement",Y,{tagName:Fe,allowedTags:Ce}),Y.hasChildNodes()&&!RS(Y.firstElementChild)&&Qr(/<[/\w]/g,Y.innerHTML)&&Qr(/<[/\w]/g,Y.textContent)||Y.nodeType===7||mo&&Y.nodeType===8&&Qr(/<[/\w]/g,Y.data))return ei(Y),!0;if(!Ce[Fe]||de[Fe]){if(!de[Fe]&&PS(Fe)&&(W.tagNameCheck instanceof RegExp&&Qr(W.tagNameCheck,Fe)||W.tagNameCheck instanceof Function&&W.tagNameCheck(Fe)))return!1;if(Nt&&!Vn[Fe]){const Dt=A(Y)||Y.parentNode,Xt=x(Y)||Y.childNodes;if(Xt&&Dt)for(let wt=Xt.length-1;wt>=0;--wt){const er=p(Xt[wt],!0);er.__removalCount=(Y.__removalCount||0)+1,Dt.insertBefore(er,k(Y))}}return ei(Y),!0}return Y instanceof c&&!function(Dt){let Xt=A(Dt);Xt&&Xt.tagName||(Xt={namespaceURI:Sa,tagName:"template"});const wt=om(Dt.tagName),er=om(Xt.tagName);return!!Js[Dt.namespaceURI]&&(Dt.namespaceURI===Qs?Xt.namespaceURI===Bo?wt==="svg":Xt.namespaceURI===xa?wt==="svg"&&(er==="annotation-xml"||xS[er]):!!ES[wt]:Dt.namespaceURI===xa?Xt.namespaceURI===Bo?wt==="math":Xt.namespaceURI===Qs?wt==="math"&&SS[er]:!!NS[wt]:Dt.namespaceURI===Bo?!(Xt.namespaceURI===Qs&&!SS[er])&&!(Xt.namespaceURI===xa&&!xS[er])&&!NS[wt]&&(oM[wt]||!ES[wt]):!(Pr!=="application/xhtml+xml"||!Js[Dt.namespaceURI]))}(Y)?(ei(Y),!0):Fe!=="noscript"&&Fe!=="noembed"&&Fe!=="noframes"||!Qr(/<\/no(script|embed|frames)/i,Y.innerHTML)?(zt&&Y.nodeType===3&&(qe=Y.textContent,rm([U,X,re],Dt=>{qe=kd(qe,Dt," ")}),Y.textContent!==qe&&(Cd(n.removed,{element:Y.cloneNode()}),Y.textContent=qe)),Ui("afterSanitizeElements",Y,null),!1):(ei(Y),!0)},MS=function(Y,qe,Fe){if(ge&&(qe==="id"||qe==="name")&&(Fe in r||Fe in rM))return!1;if(!(Pe&&!ae[qe]&&Qr(te,qe))){if(!(Te&&Qr(ye,qe))){if(!H[qe]||ae[qe]){if(!(PS(Y)&&(W.tagNameCheck instanceof RegExp&&Qr(W.tagNameCheck,Y)||W.tagNameCheck instanceof Function&&W.tagNameCheck(Y))&&(W.attributeNameCheck instanceof RegExp&&Qr(W.attributeNameCheck,qe)||W.attributeNameCheck instanceof Function&&W.attributeNameCheck(qe))||qe==="is"&&W.allowCustomizedBuiltInElements&&(W.tagNameCheck instanceof RegExp&&Qr(W.tagNameCheck,Fe)||W.tagNameCheck instanceof Function&&W.tagNameCheck(Fe))))return!1}else if(!On[qe]){if(!Qr(me,kd(Fe,Ae,""))){if((qe!=="src"&&qe!=="xlink:href"&&qe!=="href"||Y==="script"||JA(Fe,"data:")!==0||!ur[Y])&&!(ze&&!Qr(Ee,kd(Fe,Ae,"")))){if(Fe)return!1}}}}}return!0},PS=function(Y){return Y!=="annotation-xml"&&Q_(Y,Re)},LS=function(Y){Ui("beforeSanitizeAttributes",Y,null);const{attributes:qe}=Y;if(!qe)return;const Fe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H};let Dt=qe.length;for(;Dt--;){const Xt=qe[Dt],{name:wt,namespaceURI:er,value:ji}=Xt,ti=wn(wt);let xr=wt==="value"?ji:eT(ji);const iM=xr;if(Fe.attrName=ti,Fe.attrValue=xr,Fe.keepAttr=!0,Fe.forceKeepAttr=void 0,Ui("uponSanitizeAttribute",Y,Fe),xr=Fe.attrValue,Fe.forceKeepAttr)continue;if(!Fe.keepAttr){qd(wt,Y);continue}if(!$t&&Qr(/\/>/i,xr)){qd(wt,Y);continue}zt&&rm([U,X,re],IS=>{xr=kd(xr,IS," ")});const BS=wn(Y.nodeName);if(MS(BS,ti,xr))if(!Le||ti!=="id"&&ti!=="name"||(qd(wt,Y),xr="user-content-"+xr),mo&&Qr(/((--!?|])>)|<\/(style|title)/i,xr))qd(wt,Y);else{if(N&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!er)switch(g.getAttributeType(BS,ti)){case"TrustedHTML":xr=N.createHTML(xr);break;case"TrustedScriptURL":xr=N.createScriptURL(xr)}if(xr!==iM)try{er?Y.setAttributeNS(er,wt,xr):Y.setAttribute(wt,xr),OS(Y)?ei(Y):Z_(n.removed)}catch{}}else qd(wt,Y)}Ui("afterSanitizeAttributes",Y,null)},sM=function Y(qe){let Fe=null;const Dt=TS(qe);for(Ui("beforeSanitizeShadowDOM",qe,null);Fe=Dt.nextNode();)Ui("uponSanitizeShadowNode",Fe,null),DS(Fe)||(Fe.content instanceof i&&Y(Fe.content),LS(Fe));Ui("afterSanitizeShadowDOM",qe,null)};return n.sanitize=function(Y){let qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Fe=null,Dt=null,Xt=null,wt=null;if(Ii=!Y,Ii&&(Y="<!-->"),typeof Y!="string"&&!RS(Y)){if(typeof Y.toString!="function")throw xd("toString is not a function");if(typeof(Y=Y.toString())!="string")throw xd("dirty is not a string, aborting")}if(!n.isSupported)return Y;if(We||Jp(qe),n.removed=[],typeof Y=="string"&&(At=!1),At){if(Y.nodeName){const ti=wn(Y.nodeName);if(!Ce[ti]||de[ti])throw xd("root node is forbidden and cannot be sanitized in-place")}}else if(Y instanceof l)Fe=AS("<!---->"),Dt=Fe.ownerDocument.importNode(Y,!0),Dt.nodeType===1&&Dt.nodeName==="BODY"||Dt.nodeName==="HTML"?Fe=Dt:Fe.appendChild(Dt);else{if(!Ye&&!zt&&!pe&&Y.indexOf("<")===-1)return N&&Rt?N.createHTML(Y):Y;if(Fe=AS(Y),!Fe)return Ye?null:Rt?O:""}Fe&&Xe&&ei(Fe.firstChild);const er=TS(At?Y:Fe);for(;Xt=er.nextNode();)DS(Xt)||(Xt.content instanceof i&&sM(Xt.content),LS(Xt));if(At)return Y;if(Ye){if(lt)for(wt=j.call(Fe.ownerDocument);Fe.firstChild;)wt.appendChild(Fe.firstChild);else wt=Fe;return(H.shadowroot||H.shadowrootmode)&&(wt=D.call(o,wt,!0)),wt}let ji=pe?Fe.outerHTML:Fe.innerHTML;return pe&&Ce["!doctype"]&&Fe.ownerDocument&&Fe.ownerDocument.doctype&&Fe.ownerDocument.doctype.name&&Qr(sw,Fe.ownerDocument.doctype.name)&&(ji="<!DOCTYPE "+Fe.ownerDocument.doctype.name+`>
`+ji),zt&&rm([U,X,re],ti=>{ji=kd(ji,ti," ")}),N&&Rt?N.createHTML(ji):ji},n.setConfig=function(){Jp(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),We=!0},n.clearConfig=function(){Fi=null,We=!1},n.isValidAttribute=function(Y,qe,Fe){Fi||Jp({});const Dt=wn(Y),Xt=wn(qe);return MS(Dt,Xt,Fe)},n.addHook=function(Y,qe){typeof qe=="function"&&(B[Y]=B[Y]||[],Cd(B[Y],qe))},n.removeHook=function(Y){if(B[Y])return Z_(B[Y])},n.removeHooks=function(Y){B[Y]&&(B[Y]=[])},n.removeAllHooks=function(){B={}},n}();const aw=oe.each,fT=oe.trim,hT=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],gT={ftp:21,http:80,https:443,mailto:25},pT=["img","video"],lw=(e,t,n)=>{const r=(o=>{try{return decodeURIComponent(o)}catch{return unescape(o)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(r)||!e.allow_html_data_urls&&(/^data:image\//i.test(r)?((o,s)=>ie(o)?!o:!ie(s)||!fe(pT,s))(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)))};class es{static parseDataUri(t){let n;const r=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(r[0]);return o&&(n=o[1]),{type:n,data:r[1]}}static isDomSafe(t,n,r={}){if(r.allow_script_urls)return!0;{const o=Oe.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!lw(r,o,n)}}static getDocumentBaseUrl(t){var n;let r;return r=t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?(n=t.href)!==null&&n!==void 0?n:"":t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(t,n={}){this.path="",this.directory="",t=fT(t),this.settings=n;const r=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(o.source=t);const s=t.indexOf("//")===0;if(t.indexOf("/")!==0||s||(t=(r&&r.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const a=r?r.path:new es(document.location.href).directory;if(r?.protocol==="")t="//mce_host"+o.toAbsPath(a,t);else{const l=/([^#?]*)([#?]?.*)/.exec(t);l&&(t=(r&&r.protocol||"http")+"://mce_host"+o.toAbsPath(a,l[1])+l[2])}}t=t.replace(/@@/g,"(mce_at)");const i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);i&&aw(hT,(a,l)=>{let c=i[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),o[a]=c}),r&&(o.protocol||(o.protocol=r.protocol),o.userInfo||(o.userInfo=r.userInfo),o.port||o.host!=="mce_host"||(o.port=r.port),o.host&&o.host!=="mce_host"||(o.host=r.host),o.source=""),s&&(o.protocol="")}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const n=new es(t,{base_uri:this});if(n.host!=="mce_host"&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&n.protocol!=="")return n.getURI();const r=this.getURI(),o=n.getURI();if(r===o||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===o)return r;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(t,n){const r=new es(t,{base_uri:this});return r.getURI(n&&this.isSameOrigin(r))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?gT[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let r,o,s=0,i="";const a=t.substring(0,t.lastIndexOf("/")).split("/"),l=n.split("/");if(a.length>=l.length){for(r=0,o=a.length;r<o;r++)if(r>=l.length||a[r]!==l[r]){s=r+1;break}}if(a.length<l.length){for(r=0,o=l.length;r<o;r++)if(r>=a.length||a[r]!==l[r]){s=r+1;break}}if(s===1)return n;for(r=0,o=a.length-(s-1);r<o;r++)i+="../";for(r=s-1,o=l.length;r<o;r++)i+=r!==s-1?"/"+l[r]:l[r];return i}toAbsPath(t,n){let r=0;const o=/\/$/.test(n)?"/":"",s=t.split("/"),i=n.split("/"),a=[];aw(s,m=>{m&&a.push(m)});const l=[];for(let m=i.length-1;m>=0;m--)i[m].length!==0&&i[m]!=="."&&(i[m]!==".."?r>0?r--:l.push(i[m]):r++);const c=a.length-r;let d;return d=c<=0?Fn(l).join("/"):a.slice(0,c).join("/")+"/"+Fn(l).join("/"),d.indexOf("/")!==0&&(d="/"+d),o&&d.lastIndexOf("/")!==d.length-1&&(d+=o),d}getURI(t=!1){let n;return this.source&&!t||(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const bT=oe.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),bg="data-mce-type";let cw=0;const dw=(e,t,n,r,o)=>{var s,i,a,l;const c=t.validate,d=n.getSpecialElements();e.nodeType===8&&!t.allow_conditional_comments&&/^\[if/i.test((s=e.nodeValue)!==null&&s!==void 0?s:"")&&(e.nodeValue=" "+e.nodeValue);const m=(i=o?.tagName)!==null&&i!==void 0?i:e.nodeName.toLowerCase();if(r!=="html"&&n.isValid(r))return void(ie(o)&&(o.allowedTags[m]=!0));if(e.nodeType!==1||m==="body")return;const h=M(e),v=hi(h,bg),g=cn(h,"data-mce-bogus");if(!v&&se(g))return void(g==="all"?Pt(h):bs(h));const y=n.getElementRule(m);if(!c||y){if(ie(o)&&(o.allowedTags[m]=!0),c&&y&&!v){if(Q((a=y.attributesForced)!==null&&a!==void 0?a:[],p=>{tn(h,p.name,p.value==="{$uid}"?"mce_"+cw++:p.value)}),Q((l=y.attributesDefault)!==null&&l!==void 0?l:[],p=>{hi(h,p.name)||tn(h,p.name,p.value==="{$uid}"?"mce_"+cw++:p.value)}),y.attributesRequired&&!yt(y.attributesRequired,p=>hi(h,p))||y.removeEmptyAttrs&&(p=>{const _=p.dom.attributes;return _==null||_.length===0})(h))return void bs(h);y.outputName&&y.outputName!==m&&((p,_)=>{const k=((A,N)=>{const O=Ft(N),L=Ls(A);return Hr(O,L),O})(p,_);ps(p,k);const x=le(p);_i(k,x),Pt(p)})(h,y.outputName)}}else He(d,m)?Pt(h):bs(h)},uw=(e,t,n,r,o,s)=>n!=="html"&&!Ei(r)||!(o in bT&&lw(e,s,r))&&(!e.validate||t.isValid(r,o)||_t(o,"data-")||_t(o,"aria-")),mw=(e,t)=>e.hasAttribute(bg)&&(t==="id"||t==="class"||t==="style"),fw=(e,t)=>e in t.getBoolAttrs(),vT=(e,t,n,r)=>{const{attributes:o}=e;for(let s=o.length-1;s>=0;s--){const i=o[s],a=i.name,l=i.value;uw(t,n,r,e.tagName.toLowerCase(),a,l)||mw(e,a)?fw(a,n)&&e.setAttribute(a,a):e.removeAttribute(a)}},yT=(e,t,n)=>{const r=pg();return r.addHook("uponSanitizeElement",(o,s)=>{dw(o,e,t,n.track(o),s)}),r.addHook("uponSanitizeAttribute",(o,s)=>{((i,a,l,c,d)=>{const m=i.tagName.toLowerCase(),{attrName:h,attrValue:v}=d;d.keepAttr=uw(a,l,c,m,h,v),d.keepAttr?(d.allowedAttributes[h]=!0,fw(h,l)&&(d.attrValue=h),a.allow_svg_data_urls&&_t(v,"data:image/svg+xml")&&(d.forceKeepAttr=!0)):mw(i,h)&&(d.forceKeepAttr=!0)})(o,e,t,n.current(),s)}),r},_T=e=>t=>{const n=Ol(t);if(n==="svg")(r=>{const o=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(i=>`xlink:${i}`),s={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:o};pg().sanitize(r,s)})(t);else{if(n!=="math")throw new Error("Not a namespace element");((r,o)=>{const s=pg();s.addHook("uponSanitizeElement",(i,a)=>{var l;const c=(l=a.tagName)!==null&&l!==void 0?l:i.nodeName.toLowerCase(),d=o.allow_mathml_annotation_encodings;if(c==="annotation"&&ct(d)&&d.length>0){const m=i.getAttribute("encoding");se(m)&&fe(d,m)&&(a.allowedTags[c]=!0)}}),s.sanitize(r,{IN_PLACE:!0,USE_PROFILES:{mathMl:!0}})})(t,e)}},hw=oe.makeMap,gw=oe.extend,pw=(e,t,n,r)=>{const o=e.name,s=o in n&&o!=="title"&&o!=="textarea"&&o!=="noscript",i=t.childNodes;for(let a=0,l=i.length;a<l;a++){const c=i[a],d=new Cr(c.nodeName.toLowerCase(),c.nodeType);if(xe(c)){const m=c.attributes;for(let h=0,v=m.length;h<v;h++){const g=m[h];d.attr(g.name,g.value)}Ei(d.name)&&(r(c),d.value=c.innerHTML)}else ne(c)?(d.value=c.data,s&&(d.raw=!0)):(Fs(c)||rf(c)||xi(c))&&(d.value=c.data);Ei(d.name)||pw(d,c,n,r),e.append(d)}},oc=(e={},t=zn())=>{const n=H_(),r=H_(),o={validate:!0,root_name:"body",sanitize:!0,...e},s=new DOMParser,i=((y,p)=>{const _=(()=>{const k=Cs(),x=()=>k.get().map(Ol).getOr("html");return{track:A=>(Tl(A)?k.set(A):k.get().exists(N=>!N.contains(A))&&k.clear(),x()),current:x,reset:()=>{k.clear()}}})();if(y.sanitize){const k=yT(y,p,_);return{sanitizeHtmlElement:(A,N)=>{k.sanitize(A,((O,L)=>{const P={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1};return P.PARSER_MEDIA_TYPE=L,O.allow_script_urls?P.ALLOWED_URI_REGEXP=/.*/:O.allow_html_data_urls&&(P.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),P})(y,N)),k.removed=[],_.reset()},sanitizeNamespaceElement:_T(y)}}return{sanitizeHtmlElement:(k,x)=>{const A=document.createNodeIterator(k,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let N;for(;N=A.nextNode();){const O=_.track(N);dw(N,y,p,O),xe(N)&&vT(N,y,p,O)}_.reset()},sanitizeNamespaceElement:$e}})(o,t),a=n.addFilter,l=n.getFilters,c=n.removeFilter,d=r.addFilter,m=r.getFilters,h=r.removeFilter,v=(y,p)=>{const _=se(p.attr(bg)),k=p.type===1&&!He(y,p.name)&&!Ic(t,p)&&!Ei(p.name);return p.type===3||k&&!_},g={schema:t,addAttributeFilter:d,getAttributeFilters:m,removeAttributeFilter:h,addNodeFilter:a,getNodeFilters:l,removeNodeFilter:c,parse:(y,p={})=>{var _;const k=o.validate,x=(_=p.context)!==null&&_!==void 0?_:o.root_name,A=((U,X,re="html")=>{const te=re==="xhtml"?"application/xhtml+xml":"text/html",ye=He(t.getSpecialElements(),X.toLowerCase()),Ee=ye?`<${X}>${U}</${X}>`:U,Ae=s.parseFromString(re==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Ee}</body></html>`:/^[\s]*<head/i.test(U)||/^[\s]*<html/i.test(U)||/^[\s]*<!DOCTYPE/i.test(U)?`<html>${Ee}</html>`:`<body>${Ee}</body>`,te).body;return i.sanitizeHtmlElement(Ae,te),ye?Ae.firstChild:Ae})(y,x,p.format);Ha(t,A);const N=new Cr(x,11);pw(N,A,t.getSpecialElements(),i.sanitizeNamespaceElement),A.innerHTML="";const[O,L]=((U,X,re,te)=>{const ye=re.validate,Ee=X.getNonEmptyElements(),Ae=X.getWhitespaceElements(),Re=gw(hw("script,style,head,html,body,title,meta,param"),X.getBlockElements()),me=yn(X),Ce=/[ \t\r\n]+/g,F=/^[ \t\r\n]+/,H=/[ \t\r\n]+$/,q=ae=>{let Te=ae.parent;for(;ie(Te);){if(Te.name in Ae)return!0;Te=Te.parent}return!1},W=ae=>ae.name in Re||Ic(X,ae)||Ei(ae.name)&&ae.parent===U,de=(ae,Te)=>{const Pe=Te?ae.prev:ae.next;return!ie(Pe)&&!Wt(ae.parent)&&W(ae.parent)&&(ae.parent!==U||te.isRootContent===!0)};return[ae=>{var Te;if(ae.type===3&&!q(ae)){let Pe=(Te=ae.value)!==null&&Te!==void 0?Te:"";Pe=Pe.replace(Ce," "),(((ze,$t)=>ie(ze)&&($t(ze)||ze.name==="br"))(ae.prev,W)||de(ae,!0))&&(Pe=Pe.replace(F,"")),Pe.length===0||Pe===" "&&ae.prev&&ae.prev.type===8&&ae.next&&ae.next.type===8?ae.remove():ae.value=Pe}},ae=>{var Te;if(ae.type===1){const Pe=X.getElementRule(ae.name);if(ye&&Pe){const ze=vd(X,Ee,Ae,ae);Pe.paddInEmptyBlock&&ze&&($t=>{let zt=$t;for(;ie(zt);){if(zt.name in me)return vd(X,Ee,Ae,zt);zt=zt.parent}return!1})(ae)?Hh(re,te,W,ae):Pe.removeEmpty&&ze?W(ae)?ae.remove():ae.unwrap():Pe.paddEmpty&&(ze||($t=>{var zt;return Zy($t,"#text")&&((zt=$t?.firstChild)===null||zt===void 0?void 0:zt.value)===Ut})(ae))&&Hh(re,te,W,ae)}}else if(ae.type===3&&!q(ae)){let Pe=(Te=ae.value)!==null&&Te!==void 0?Te:"";(ae.next&&W(ae.next)||de(ae,!1))&&(Pe=Pe.replace(H,"")),Pe.length===0?ae.remove():ae.value=Pe}}]})(N,t,o,p),P=[],j=k?U=>((X,re)=>{zh(t,X)&&re.push(X)})(U,P):$e,$={nodes:{},attributes:{}},D=U=>Gy(l(),m(),U,$);if(((U,X,re)=>{const te=[];for(let ye=U,Ee=ye;ye;Ee=ye,ye=ye.walk()){const Ae=ye;Q(X,Re=>Re(Ae)),Wt(Ae.parent)&&Ae!==U?ye=Ee:te.push(Ae)}for(let ye=te.length-1;ye>=0;ye--){const Ee=te[ye];Q(re,Ae=>Ae(Ee))}})(N,[O,D],[L,j]),P.reverse(),k&&P.length>0)if(p.context){const{pass:U,fail:X}=Kn(P,re=>re.parent===N);$h(X,t,N,D),p.invalid=U.length>0}else $h(P,t,N,D);const B=((U,X)=>{var re;const te=(re=X.forced_root_block)!==null&&re!==void 0?re:U.forced_root_block;return te===!1?"":te===!0?"p":te})(o,p);return B&&(N.name==="body"||p.isRootContent)&&((U,X)=>{const re=gw(hw("script,style,head,html,body,title,meta,param"),t.getBlockElements()),te=/^[ \t\r\n]+/,ye=/[ \t\r\n]+$/;let Ee=U.firstChild,Ae=null;const Re=me=>{var Ce,F;me&&(Ee=me.firstChild,Ee&&Ee.type===3&&(Ee.value=(Ce=Ee.value)===null||Ce===void 0?void 0:Ce.replace(te,"")),Ee=me.lastChild,Ee&&Ee.type===3&&(Ee.value=(F=Ee.value)===null||F===void 0?void 0:F.replace(ye,"")))};if(t.isValidChild(U.name,X.toLowerCase())){for(;Ee;){const me=Ee.next;v(re,Ee)?(Ae||(Ae=new Cr(X,1),Ae.attr(o.forced_root_block_attrs),U.insert(Ae,Ee)),Ae.append(Ee)):(Re(Ae),Ae=null),Ee=me}Re(Ae)}})(N,B),p.invalid||Ky($,p),N}};return((y,p)=>{var _,k;const x=y.schema;y.addAttributeFilter("href",L=>{let P=L.length;const j=$=>{const D=$?oe.trim($):"";return/\b(noopener)\b/g.test(D)?D:(B=>B.split(" ").filter(U=>U.length>0).concat(["noopener"]).sort().join(" "))(D)};if(!p.allow_unsafe_link_target)for(;P--;){const $=L[P];$.name==="a"&&$.attr("target")==="_blank"&&$.attr("rel",j($.attr("rel")))}}),p.allow_html_in_named_anchor||y.addAttributeFilter("id,name",L=>{let P,j,$,D,B=L.length;for(;B--;)if(D=L[B],D.name==="a"&&D.firstChild&&!D.attr("href"))for($=D.parent,P=D.lastChild;P&&$;)j=P.prev,$.insert(P,D),P=j}),p.fix_list_elements&&y.addNodeFilter("ul,ol",L=>{let P,j,$=L.length;for(;$--;)if(P=L[$],j=P.parent,j&&(j.name==="ul"||j.name==="ol"))if(P.prev&&P.prev.name==="li")P.prev.append(P);else{const D=new Cr("li",1);D.attr("style","list-style-type: none"),P.wrap(D)}});const A=x.getValidClasses();p.validate&&A&&y.addAttributeFilter("class",L=>{var P;let j=L.length;for(;j--;){const $=L[j],D=(P=$.attr("class"))!==null&&P!==void 0?P:"",B=oe.explode(D," ");let U="";for(let X=0;X<B.length;X++){const re=B[X];let te=!1,ye=A["*"];ye&&ye[re]&&(te=!0),ye=A[$.name],!te&&ye&&ye[re]&&(te=!0),te&&(U&&(U+=" "),U+=re)}U.length||(U=null),$.attr("class",U)}}),((L,P)=>{const{blob_cache:j}=P;if(j){const $=D=>{const B=D.attr("src");(U=>U.attr("src")===Qe.transparentSrc||ie(U.attr("data-mce-placeholder")))(D)||(U=>ie(U.attr("data-mce-bogus")))(D)||Wt(B)||V_(j,B,!0).each(U=>{D.attr("src",U.blobUri())})};L.addAttributeFilter("src",D=>Q(D,$))}})(y,p);const N=(_=p.sandbox_iframes)!==null&&_!==void 0&&_,O=pr((k=p.sandbox_iframes_exclusions)!==null&&k!==void 0?k:[]);p.convert_unsafe_embeds&&y.addNodeFilter("object,embed",L=>Q(L,P=>{P.replace((({type:j,src:$,width:D,height:B}={},U,X)=>{const re=(ye=>on(ye)?"iframe":lg(ye,"image")?"img":lg(ye,"video")?"video":lg(ye,"audio")?"audio":"iframe")(j),te=new Cr(re,1);return te.attr(re==="audio"?{src:$}:{src:$,width:D,height:B}),re!=="audio"&&re!=="video"||te.attr("controls",""),re==="iframe"&&U&&q_(te,X),te})({type:P.attr("type"),src:P.name==="object"?P.attr("data"):P.attr("src"),width:P.attr("width"),height:P.attr("height")},N,O))})),N&&y.addNodeFilter("iframe",L=>Q(L,P=>q_(P,O)))})(g,o),((y,p,_)=>{p.inline_styles&&VA(y,p,_)})(g,o,t),g},bw=(e,t,n)=>{const r=(s=>Ju(s)?ba({validate:!1}).serialize(s):s)(e),o=t(r);if(o.isDefaultPrevented())return o;if(Ju(e)){if(o.content!==r){const s=oc({validate:!1,forced_root_block:!1,...n}).parse(o.content,{context:e.name});return{...o,content:s}}return{...o,content:e}}return o},vw=e=>({sanitize:h0(e),sandbox_iframes:p0(e),sandbox_iframes_exclusions:Bf(e)}),yw=(e,t)=>{if(t.no_events)return Rr.value(t);{const n=((r,o)=>r.dispatch("BeforeGetContent",o))(e,t);return n.isDefaultPrevented()?Rr.error(Kb(e,{content:"",...n}).content):Rr.value(n)}},_w=(e,t,n)=>n.no_events?t:bw(t,o=>Kb(e,{...n,content:o}),vw(e)).content,vg=(e,t)=>{if(t.no_events)return Rr.value(t);{const n=bw(t.content,r=>((o,s)=>o.dispatch("BeforeSetContent",s))(e,{...t,content:r}),vw(e));return n.isDefaultPrevented()?(Gb(e,n),Rr.error(void 0)):Rr.value(n)}},yg=(e,t,n)=>{n.no_events||Gb(e,{...n,content:t})},_g=(e,t,n)=>({element:e,width:t,rows:n}),ww=(e,t)=>({element:e,cells:t}),wT=(e,t)=>({x:e,y:t}),Cw=(e,t)=>vn(e,t).bind(as).getOr(1),CT=(e,t,n)=>{const r=e.rows;return!!(r[n]?r[n].cells:[])[t]},kw=e=>bn(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),xw=(e,t)=>{const n=e.rows;for(let r=0;r<n.length;r++){const o=n[r].cells;for(let s=0;s<o.length;s++)if(at(o[s],t))return S.some(wT(s,r))}return S.none()},Sw=(e,t,n,r,o)=>{const s=[],i=e.rows;for(let a=n;a<=o;a++){const l=i[a].cells,c=t<r?l.slice(t,r+1):l.slice(r,t+1);s.push(ww(i[a].element,c))}return s},kT=e=>((t,n)=>{const r=Va(t.element),o=Ft("tbody");return _i(o,n),hn(r,o),r})(e,(t=>Me(t.rows,n=>{const r=Me(n.cells,s=>{const i=lb(s);return dn(i,"colspan"),dn(i,"rowspan"),i}),o=Va(n.element);return _i(o,r),o}))(e)),xT=(e,t,n)=>{const r=M(t.commonAncestorContainer),o=Di(r,e),s=De(o,l=>n.isWrapper(Je(l))),i=((l,c)=>Mt(l,d=>Je(d)==="li"&&Gf(d,c)).fold(ce([]),d=>(m=>Mt(m,h=>Je(h)==="ul"||Je(h)==="ol"))(l).map(m=>{const h=Ft(Je(m)),v=Vt(xc(m),(g,y)=>_t(y,"list-style"));return La(h,v),[Ft("li"),h]}).getOr([])))(o,t),a=s.concat(i.length?i:(l=>Hl(l)?u(l).filter(bf).fold(ce([]),c=>[l,c]):bf(l)?[l]:[])(r));return Me(a,Va)},Ew=()=>gh([]),ST=(e,t)=>((n,r)=>Da(r,"table",_e(at,n)))(e,t[0]).bind(n=>{const r=t[0],o=t[t.length-1],s=(i=>{const a=_g(Va(i),0,[]);return Q(Ln(i,"tr"),(l,c)=>{Q(Ln(l,"td,th"),(d,m)=>{((h,v,g,y,p)=>{const _=Cw(p,"rowspan"),k=Cw(p,"colspan"),x=h.rows;for(let A=g;A<g+_;A++){x[A]||(x[A]=ww(lb(y),[]));for(let N=v;N<v+k;N++)x[A].cells[N]=A===g&&N===v?p:Va(p)}})(a,((h,v,g)=>{for(;CT(h,v,g);)v++;return v})(a,m,c),c,l,d)})}),_g(a.element,kw(a.rows),a.rows)})(n);return((i,a,l)=>xw(i,a).bind(c=>xw(i,l).map(d=>((m,h,v)=>{const g=h.x,y=h.y,p=v.x,_=v.y,k=y<_?Sw(m,g,y,p,_):Sw(m,g,_,p,y);return _g(m.element,kw(k),k)})(i,c,d))))(s,r,o).map(i=>gh([kT(i)]))}).getOrThunk(Ew),ET=(e,t,n)=>{const r=W0(t,e);return r.length>0?ST(e,r):((o,s,i)=>s.length>0&&s[0].collapsed?Ew():((a,l,c)=>((d,m)=>{const h=bn(m,(v,g)=>(hn(g,v),g),d);return m.length>0?gh([h]):h})(M(l.cloneContents()),xT(a,l,c)))(o,s[0],i))(e,t,n)},im=(e,t)=>t>=0&&t<e.length&&el(e.charAt(t)),Nw=e=>co(e.innerText),Aw=e=>xe(e)?e.outerHTML:ne(e)?Oe.encodeRaw(e.data,!1):Fs(e)?"<!--"+e.data+"-->":"",NT=(e,t)=>(((n,r)=>{let o=0;Q(n,s=>{s[0]===0?o++:s[0]===1?(((i,a,l)=>{const c=(d=>{let m;const h=document.createElement("div"),v=document.createDocumentFragment();for(d&&(h.innerHTML=d);m=h.firstChild;)v.appendChild(m);return v})(a);if(i.hasChildNodes()&&l<i.childNodes.length){const d=i.childNodes[l];i.insertBefore(c,d)}else i.appendChild(c)})(r,s[1],o),o++):s[0]===2&&((i,a)=>{if(i.hasChildNodes()&&a<i.childNodes.length){const l=i.childNodes[a];i.removeChild(l)}})(r,o)})})(((n,r)=>{const o=n.length+r.length+2,s=new Array(o),i=new Array(o),a=(m,h,v,g,y)=>{const p=c(m,h,v,g);if(p===null||p.start===h&&p.diag===h-g||p.end===m&&p.diag===m-v){let _=m,k=v;for(;_<h||k<g;)_<h&&k<g&&n[_]===r[k]?(y.push([0,n[_]]),++_,++k):h-m>g-v?(y.push([2,n[_]]),++_):(y.push([1,r[k]]),++k)}else{a(m,p.start,v,p.start-p.diag,y);for(let _=p.start;_<p.end;++_)y.push([0,n[_]]);a(p.end,h,p.end-p.diag,g,y)}},l=(m,h,v,g)=>{let y=m;for(;y-h<g&&y<v&&n[y]===r[y-h];)++y;return((p,_,k)=>({start:p,end:_,diag:k}))(m,y,h)},c=(m,h,v,g)=>{const y=h-m,p=g-v;if(y===0||p===0)return null;const _=y-p,k=p+y,x=(k%2==0?k:k+1)/2;let A,N,O,L,P;for(s[1+x]=m,i[1+x]=h+1,A=0;A<=x;++A){for(N=-A;N<=A;N+=2){for(O=N+x,N===-A||N!==A&&s[O-1]<s[O+1]?s[O]=s[O+1]:s[O]=s[O-1]+1,L=s[O],P=L-m+v-N;L<h&&P<g&&n[L]===r[P];)s[O]=++L,++P;if(_%2!=0&&_-A<=N&&N<=_+A&&i[O-_]<=s[O])return l(i[O-_],N+m-v,h,g)}for(N=_-A;N<=_+A;N+=2){for(O=N+x-_,N===_-A||N!==_+A&&i[O+1]<=i[O-1]?i[O]=i[O+1]-1:i[O]=i[O-1],L=i[O]-1,P=L-m+v-N;L>=m&&P>=v&&n[L]===r[P];)i[O]=L--,P--;if(_%2==0&&-A<=N&&N<=A&&i[O]<=s[O+_])return l(i[O],N+m-v,h,g)}}return null},d=[];return a(0,n.length,0,r.length,d),d})(Me(xt(t.childNodes),Aw),e),t),t),AT=Nn(()=>document.implementation.createHTMLDocument("undo")),am=e=>{const t=e.serializer.getTempAttrs(),n=Kv(e.getBody(),t);return(r=>r.querySelector("iframe")!==null)(n)?{type:"fragmented",fragments:De(Me(xt(n.childNodes),pn(co,Aw)),r=>r.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:co(n.innerHTML),bookmark:null,beforeBookmark:null}},wg=(e,t,n)=>{const r=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?NT(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!ie(r)||!U0(r)||!r.isFakeCaret}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},Cg=e=>e.type==="fragmented"?e.fragments.join(""):e.content,Tw=e=>{const t=Ft("body",AT());return kl(t,Cg(e)),Q(Ln(t,"*[data-mce-bogus]"),bs),Zd(t)},kg=(e,t)=>!(!e||!t)&&(!!((n,r)=>Cg(n)===Cg(r))(e,t)||((n,r)=>Tw(n)===Tw(r))(e,t)),xg=e=>e.get()===0,lm=(e,t,n)=>{xg(n)&&(e.typing=t)},Ow=(e,t)=>{e.typing&&(lm(e,!1,t),e.add())},Rw=e=>({init:{bindEvents:$e},undoManager:{beforeChange:(t,n)=>((r,o,s)=>{xg(o)&&s.set(Tf(r.selection))})(e,t,n),add:(t,n,r,o,s,i)=>((a,l,c,d,m,h,v)=>{const g=am(a),y=oe.extend(h||{},g);if(!xg(d)||a.removed)return null;const p=l.data[c.get()];if(a.dispatch("BeforeAddUndo",{level:y,lastLevel:p,originalEvent:v}).isDefaultPrevented()||p&&kg(p,y))return null;l.data[c.get()]&&m.get().each(x=>{l.data[c.get()].beforeBookmark=x});const _=FE(a);if(_&&l.data.length>_){for(let x=0;x<l.data.length-1;x++)l.data[x]=l.data[x+1];l.data.length--,c.set(l.data.length)}y.bookmark=Tf(a.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(y),c.set(l.data.length-1);const k={level:y,lastLevel:p,originalEvent:v};return c.get()>0?(a.setDirty(!0),a.dispatch("AddUndo",k),a.dispatch("change",k)):a.dispatch("AddUndo",k),y})(e,t,n,r,o,s,i),undo:(t,n,r)=>((o,s,i,a)=>{let l;return s.typing&&(s.add(),s.typing=!1,lm(s,!1,i)),a.get()>0&&(a.set(a.get()-1),l=s.data[a.get()],wg(o,l,!0),o.setDirty(!0),o.dispatch("Undo",{level:l})),l})(e,t,n,r),redo:(t,n)=>((r,o,s)=>{let i;return o.get()<s.length-1&&(o.set(o.get()+1),i=s[o.get()],wg(r,i,!1),r.setDirty(!0),r.dispatch("Redo",{level:i})),i})(e,t,n),clear:(t,n)=>((r,o,s)=>{o.data=[],s.set(0),o.typing=!1,r.dispatch("ClearUndos")})(e,t,n),reset:t=>(n=>{n.clear(),n.add()})(t),hasUndo:(t,n)=>((r,o,s)=>s.get()>0||o.typing&&o.data[0]&&!kg(am(r),o.data[0]))(e,t,n),hasRedo:(t,n)=>((r,o)=>o.get()<r.data.length-1&&!r.typing)(t,n),transact:(t,n,r)=>((o,s,i)=>(Ow(o,s),o.beforeChange(),o.ignore(i),o.add()))(t,n,r),ignore:(t,n)=>((r,o)=>{try{r.set(r.get()+1),o()}finally{r.set(r.get()-1)}})(t,n),extra:(t,n,r,o)=>((s,i,a,l,c)=>{if(i.transact(l)){const d=i.data[a.get()].bookmark,m=i.data[a.get()-1];wg(s,m,!0),i.transact(c)&&(i.data[a.get()-1].beforeBookmark=d)}})(e,t,n,r,o)},formatter:{match:(t,n,r,o)=>Qh(e,t,n,r,o),matchAll:(t,n)=>((r,o,s)=>{const i=[],a={},l=r.selection.getStart();return r.dom.getParent(l,c=>{for(let d=0;d<o.length;d++){const m=o[d];!a[m]&&Gs(r,c,m,s)&&(a[m]=!0,i.push(m))}},r.dom.getRoot()),i})(e,t,n),matchNode:(t,n,r,o)=>Gs(e,t,n,r,o),canApply:t=>((n,r)=>{const o=n.formatter.get(r),s=n.dom;if(o&&n.selection.isEditable()){const i=n.selection.getStart(),a=Pu(s,i);for(let l=o.length-1;l>=0;l--){const c=o[l];if(!Ao(c))return!0;for(let d=a.length-1;d>=0;d--)if(s.is(a[d],c.selector))return!0}}return!1})(e,t),closest:t=>((n,r)=>{const o=s=>at(s,M(n.getBody()));return S.from(n.selection.getStart(!0)).bind(s=>Kh(M(s),i=>nr(r,a=>((l,c)=>Gs(n,l.dom,c)?S.some(c):S.none())(i,a)),o)).getOrNull()})(e,t),apply:(t,n,r)=>P_(e,t,n,r),remove:(t,n,r,o)=>R_(e,t,n,r,o),toggle:(t,n,r)=>((o,s,i,a)=>{const l=o.formatter.get(s);l&&(!Qh(o,s,i,a)||"toggle"in l[0]&&!l[0].toggle?P_(o,s,i,a):R_(o,s,i,a))})(e,t,n,r),formatChanged:(t,n,r,o,s)=>((i,a,l,c,d,m)=>(((h,v,g,y,p,_)=>{const k=v.get();Q(g.split(","),x=>{const A=St(k,x).getOrThunk(()=>{const O={withSimilar:{state:kn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:kn(!1),similar:!1,callbacks:[]},withVars:[]};return k[x]=O,O}),N=()=>{const O=F_(h);return I_(h,O,x,p,_).isSome()};if(on(_)){const O=p?A.withSimilar:A.withoutSimilar;O.callbacks.push(y),O.callbacks.length===1&&O.state.set(N())}else A.withVars.push({state:kn(N()),similar:p,vars:_,callback:y})}),v.set(k)})(i,a,l,c,d,m),{unbind:()=>((h,v,g)=>{const y=h.get();Q(v.split(","),p=>St(y,p).each(_=>{y[p]={withSimilar:{..._.withSimilar,callbacks:De(_.withSimilar.callbacks,k=>k!==g)},withoutSimilar:{..._.withoutSimilar,callbacks:De(_.withoutSimilar.callbacks,k=>k!==g)},withVars:De(_.withVars,k=>k.callback!==g)}})),h.set(y)})(a,l,c)}))(e,t,n,r,o,s)},editor:{getContent:t=>((n,r)=>S.from(n.getBody()).fold(ce(r.format==="tree"?new Cr("body",11):""),o=>pA(n,r,o)))(e,t),setContent:(t,n)=>((r,o,s)=>S.from(r.getBody()).map(i=>Ju(o)?((a,l,c,d)=>{Xy(a.parser.getNodeFilters(),a.parser.getAttributeFilters(),c);const m=ba({validate:!1},a.schema).serialize(c),h=co(hu(M(l))?m:oe.trim(m));return Gh(a,h,d.no_selection),{content:c,html:h}})(r,i,o,s):((a,l,c,d)=>{if((c=co(c)).length===0||/^\s+$/.test(c)){const m='<br data-mce-bogus="1">';l.nodeName==="TABLE"?c="<tr><td>"+m+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+m+"</li>");const h=cr(a);return a.schema.isValidChild(l.nodeName.toLowerCase(),h.toLowerCase())?(c=m,c=a.dom.createHTML(h,Jc(a),c)):c||(c=m),Gh(a,c,d.no_selection),{content:c,html:c}}{d.format!=="raw"&&(c=ba({validate:!1},a.schema).serialize(a.parser.parse(c,{isRootContent:!0,insert:!0})));const m=hu(M(l))?c:oe.trim(c);return Gh(a,m,d.no_selection),{content:m,html:m}}})(r,i,o,s)).getOr({content:o,html:Ju(s.content)?"":s.content}))(e,t,n),insertContent:(t,n)=>HA(e,t,n),addVisual:t=>((n,r)=>{const o=n.dom,s=ie(r)?r:n.getBody();Q(o.select("table,a",s),i=>{switch(i.nodeName){case"TABLE":const a=zE(n),l=o.getAttrib(i,"border");l&&l!=="0"||!n.hasVisual?o.removeClass(i,a):o.addClass(i,a);break;case"A":if(!o.getAttrib(i,"href")){const c=o.getAttrib(i,"name")||i.id,d=u0(n);c&&n.hasVisual?o.addClass(i,d):o.removeClass(i,d)}}}),n.dispatch("VisualAid",{element:r,hasVisual:n.hasVisual})})(e,t)},selection:{getContent:(t,n)=>((r,o,s={})=>{const i=((a,l)=>({...a,format:l,get:!0,selection:!0,getInner:!0}))(s,o);return yw(r,i).fold(En,a=>{const l=((c,d)=>{if(d.format==="text")return(m=>S.from(m.selection.getRng()).map(h=>{var v;const g=S.from(m.dom.getParent(h.commonAncestorContainer,m.dom.isBlock)),y=m.getBody(),p=(N=>N.map(O=>O.nodeName).getOr("div").toLowerCase())(g),_=M(h.cloneContents());Xv(_),Zv(_);const k=m.dom.add(y,p,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},_.dom),x=Nw(k),A=co((v=k.textContent)!==null&&v!==void 0?v:"");if(m.dom.remove(k),im(A,0)||im(A,A.length-1)){const N=g.getOr(y),O=Nw(N),L=O.indexOf(x);return L===-1?x:(im(O,L-1)?" ":"")+x+(im(O,L+x.length)?" ":"")}return x}).getOr(""))(c);{const m=((h,v)=>{const g=h.selection.getRng(),y=h.dom.create("body"),p=h.selection.getSel(),_=_h(h,Vf(p)),k=v.contextual?ET(M(h.getBody()),_,h.schema).dom:g.cloneContents();return k&&y.appendChild(k),h.selection.serializer.serialize(y,v)})(c,d);return d.format==="tree"?m:c.selection.isCollapsed()?"":m}})(r,a);return _w(r,l,a)})})(e,t,n)},autocompleter:{addDecoration:$e,removeDecoration:$e},raw:{getModel:()=>S.none()}}),Ks=e=>He(e.plugins,"rtc"),Sg=e=>e.rtcInstance?e.rtcInstance:Rw(e),xn=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},Dw=e=>xn(e).init.bindEvents(),Mw=e=>e.dom.length===0?(Pt(e),S.none()):S.some(e),Pw=(e,t,n,r,o)=>{e.bind(s=>((r?Th:Gu)(s.dom,r?s.dom.length:0,o),t.filter(sn).map(i=>((a,l,c,d,m)=>{const h=a.dom,v=l.dom,g=d?h.length:v.length;d?(Oh(h,v,m,!1,!d),c.setStart(v,g)):(Oh(v,h,m,!1,!d),c.setEnd(v,g))})(s,i,n,r,o)))).orThunk(()=>((i,a)=>i.filter(l=>dd.isBookmarkNode(l.dom)).bind(a?I:E))(t,r).or(t).filter(sn).map(i=>((a,l,c)=>{u(a).each(d=>{const m=a.dom;l&&gd(d,G(m,0),c)?Gu(m,0,c):!l&&pd(d,G(m,m.length),c)&&Th(m,m.length,c)})})(i,r,o)))},Lw=(e,t,n)=>{if(He(e,t)){const r=De(e[t],o=>o!==n);r.length===0?delete e[t]:e[t]=r}},Bw=e=>!(!e||!e.ownerDocument)&&vr(M(e.ownerDocument),M(e)),Iw=(e,t,n,r)=>{let o,s;const{selectorChangedWithUnbind:i}=((p,_)=>{let k,x;const A=(O,L)=>Mt(L,P=>p.is(P,O)),N=O=>p.getParents(O,void 0,p.getRoot());return{selectorChangedWithUnbind:(O,L)=>(k||(k={},x={},_.on("NodeChange",P=>{const j=P.element,$=N(j),D={};it(k,(B,U)=>{A(U,$).each(X=>{x[U]||(Q(B,re=>{re(!0,{node:X,selector:U,parents:$})}),x[U]=B),D[U]=B})}),it(x,(B,U)=>{D[U]||(delete x[U],Q(B,X=>{X(!1,{node:j,selector:U,parents:$})}))})})),k[O]||(k[O]=[]),k[O].push(L),A(O,N(_.selection.getStart())).each(()=>{x[O]=k[O]}),{unbind:()=>{Lw(k,O,L),Lw(x,O,L)}})}})(e,r),a=(p,_)=>((k,x,A={})=>{const N=((O,L)=>({format:"html",...O,set:!0,selection:!0,content:L}))(A,x);vg(k,N).each(O=>{const L=((j,$)=>{if($.format!=="raw"){const D=j.selection.getRng(),B=j.dom.getParent(D.commonAncestorContainer,j.dom.isBlock),U=B?{context:B.nodeName.toLowerCase()}:{},X=j.parser.parse($.content,{forced_root_block:!1,...U,...$});return ba({validate:!1},j.schema).serialize(X)}return $.content})(k,O),P=k.selection.getRng();((j,$,D)=>{const B=S.from($.firstChild).map(M),U=S.from($.lastChild).map(M);j.deleteContents(),j.insertNode($);const X=B.bind(E).filter(sn).bind(Mw),re=U.bind(I).filter(sn).bind(Mw);Pw(X,B,j,!0,D),Pw(re,U,j,!1,D),j.collapse(!1)})(P,P.createContextualFragment(L),k.schema),k.selection.setRng(P),md(k,P),yg(k,L,O)})})(r,p,_),l=p=>{const _=d();_.collapse(!!p),m(_)},c=()=>t.getSelection?t.getSelection():t.document.selection,d=()=>{let p;const _=(x,A,N)=>{try{return A.compareBoundaryPoints(x,N)}catch{return-1}},k=t.document;if(ie(r.bookmark)&&!nc(r)){const x=ah(r);if(x.isSome())return x.map(A=>_h(r,[A])[0]).getOr(k.createRange())}try{const x=c();x&&!Nl(x.anchorNode)&&(p=x.rangeCount>0?x.getRangeAt(0):k.createRange(),p=_h(r,[p])[0])}catch{}if(p||(p=k.createRange()),ja(p.startContainer)&&p.collapsed){const x=e.getRoot();p.setStart(x,0),p.setEnd(x,0)}return o&&s&&(_(p.START_TO_START,p,o)===0&&_(p.END_TO_END,p,o)===0?p=s:(o=null,s=null)),p},m=(p,_)=>{if(!(x=>!!x&&Bw(x.startContainer)&&Bw(x.endContainer))(p))return;const k=c();if(p=r.dispatch("SetSelectionRange",{range:p,forward:_}).range,k){s=p;try{k.removeAllRanges(),k.addRange(p)}catch{}_===!1&&k.extend&&(k.collapse(p.endContainer,p.endOffset),k.extend(p.startContainer,p.startOffset)),o=k.rangeCount>0?k.getRangeAt(0):null}if(!p.collapsed&&p.startContainer===p.endContainer&&k?.setBaseAndExtent&&p.endOffset-p.startOffset<2&&p.startContainer.hasChildNodes()){const x=p.startContainer.childNodes[p.startOffset];x&&x.nodeName==="IMG"&&(k.setBaseAndExtent(p.startContainer,p.startOffset,p.endContainer,p.endOffset),k.anchorNode===p.startContainer&&k.focusNode===p.endContainer||k.setBaseAndExtent(x,0,x,1))}r.dispatch("AfterSetSelectionRange",{range:p,forward:_})},h=()=>{const p=c(),_=p?.anchorNode,k=p?.focusNode;if(!p||!_||!k||Nl(_)||Nl(k))return!0;const x=e.createRng(),A=e.createRng();try{x.setStart(_,p.anchorOffset),x.collapse(!0),A.setStart(k,p.focusOffset),A.collapse(!0)}catch{return!0}return x.compareBoundaryPoints(x.START_TO_START,A)<=0},v={dom:e,win:t,serializer:n,editor:r,expand:(p={type:"word"})=>m(rl(e).expand(d(),p)),collapse:l,setCursorLocation:(p,_)=>{const k=e.createRng();ie(p)&&ie(_)?(k.setStart(p,_),k.setEnd(p,_),m(k),l(!1)):(Kf(e,k,r.getBody(),!0),m(k))},getContent:p=>((_,k={})=>((x,A,N)=>xn(x).selection.getContent(A,N))(_,k.format?k.format:"html",k))(r,p),setContent:a,getBookmark:(p,_)=>g.getBookmark(p,_),moveToBookmark:p=>g.moveToBookmark(p),select:(p,_)=>(((k,x,A)=>S.from(x).bind(N=>S.from(N.parentNode).map(O=>{const L=k.nodeIndex(N),P=k.createRng();return P.setStart(O,L),P.setEnd(O,L+1),A&&(Kf(k,P,N,!0),Kf(k,P,N,!1)),P})))(e,p,_).each(m),p),isCollapsed:()=>{const p=d(),_=c();return!(!p||p.item)&&(p.compareEndPoints?p.compareEndPoints("StartToEnd",p)===0:!_||p.collapsed)},isEditable:()=>{if(r.mode.isReadOnly())return!1;const p=d(),_=r.getBody().querySelectorAll('[data-mce-selected="1"]');return _.length>0?Dn(_,k=>e.isEditable(k.parentElement)):Fv(e,p)},isForward:h,setNode:p=>(a(e.getOuterHTML(p)),p),getNode:()=>((p,_)=>{if(!_)return p;let k=_.startContainer,x=_.endContainer;const A=_.startOffset,N=_.endOffset;let O=_.commonAncestorContainer;_.collapsed||(k===x&&N-A<2&&k.hasChildNodes()&&(O=k.childNodes[A]),ne(k)&&ne(x)&&(k=k.length===A?Yv(k.nextSibling,!0):k.parentNode,x=N===0?Yv(x.previousSibling,!1):x.parentNode,k&&k===x&&(O=k)));const L=ne(O)?O.parentNode:O;return ys(L)?L:p})(r.getBody(),d()),getSel:c,setRng:m,getRng:d,getStart:p=>jv(r.getBody(),d(),p),getEnd:p=>Hv(r.getBody(),d(),p),getSelectedBlocks:(p,_)=>((k,x,A,N)=>{const O=[],L=k.getRoot(),P=k.getParent(A||jv(L,x,x.collapsed),k.isBlock),j=k.getParent(N||Hv(L,x,x.collapsed),k.isBlock);if(P&&P!==L&&O.push(P),P&&j&&P!==j){let $;const D=new Cn(P,L);for(;($=D.next())&&$!==j;)k.isBlock($)&&O.push($)}return j&&P!==j&&j!==L&&O.push(j),O})(e,d(),p,_),normalize:()=>{const p=d(),_=c();if(!(Vf(_).length>1)&&Du(r)){const k=Yu(e,p);return k.each(x=>{m(x,h())}),k.getOr(p)}return p},selectorChanged:(p,_)=>(i(p,_),v),selectorChangedWithUnbind:i,getScrollContainer:()=>{let p,_=e.getRoot();for(;_&&_.nodeName!=="BODY";){if(_.scrollHeight>_.clientHeight){p=_;break}_=_.parentNode}return p},scrollIntoView:(p,_)=>{ie(p)?((k,x,A)=>{(k.inline?oA:iA)(k,x,A)})(r,p,_):md(r,d(),_)},placeCaretAt:(p,_)=>m(Ev(p,_,r.getDoc())),getBoundingClientRect:()=>{const p=d();return p.collapsed?G.fromRangeStart(p).getClientRects()[0]:p.getBoundingClientRect()},destroy:()=>{t=o=s=null,y.destroy()}},g=dd(v),y=Cv(v,r);return v.bookmarkManager=g,v.controlSelection=y,v},TT=(e,t,n)=>{oe.inArray(t,n)===-1&&(e.addAttributeFilter(n,(r,o)=>{let s=r.length;for(;s--;)r[s].attr(o,null)}),t.push(n))},OT=(e,t)=>{const n=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},o=t&&t.dom?t.dom:bt.DOM,s=t&&t.schema?t.schema:zn(r),i=oc(r,s);return((a,l,c)=>{a.addAttributeFilter("data-mce-tabindex",(d,m)=>{let h=d.length;for(;h--;){const v=d[h];v.attr("tabindex",v.attr("data-mce-tabindex")),v.attr(m,null)}}),a.addAttributeFilter("src,href,style",(d,m)=>{const h="data-mce-"+m,v=l.url_converter,g=l.url_converter_scope;let y=d.length;for(;y--;){const p=d[y];let _=p.attr(h);_!==void 0?(p.attr(m,_.length>0?_:null),p.attr(h,null)):(_=p.attr(m),m==="style"?_=c.serializeStyle(c.parseStyle(_),p.name):v&&(_=v.call(g,_,m,p.name)),p.attr(m,_.length>0?_:null))}}),a.addAttributeFilter("class",d=>{let m=d.length;for(;m--;){const h=d[m];let v=h.attr("class");v&&(v=v.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),h.attr("class",v.length>0?v:null))}}),a.addAttributeFilter("data-mce-type",(d,m,h)=>{let v=d.length;for(;v--;){const g=d[v];g.attr("data-mce-type")==="bookmark"&&!h.cleanup&&(S.from(g.firstChild).exists(p=>{var _;return!gu((_=p.value)!==null&&_!==void 0?_:"")})?g.unwrap():g.remove())}}),a.addNodeFilter("script,style",(d,m)=>{var h;const v=y=>y.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=d.length;for(;g--;){const y=d[g],p=y.firstChild,_=(h=p?.value)!==null&&h!==void 0?h:"";if(m==="script"){const k=y.attr("type");k&&y.attr("type",k==="mce-no/type"?null:k.replace(/^mce\-/,"")),l.element_format==="xhtml"&&p&&_.length>0&&(p.value=`// <![CDATA[
`+v(_)+`
// ]]>`)}else l.element_format==="xhtml"&&p&&_.length>0&&(p.value=`<!--
`+v(_)+`
-->`)}}),a.addNodeFilter("#comment",d=>{let m=d.length;for(;m--;){const h=d[m],v=h.value;l.preserve_cdata&&v?.indexOf("[CDATA[")===0?(h.name="#cdata",h.type=4,h.value=c.decode(v.replace(/^\[CDATA\[|\]\]$/g,""))):v?.indexOf("mce:protected ")===0&&(h.name="#text",h.type=3,h.raw=!0,h.value=unescape(v).substr(14))}}),a.addNodeFilter("xml:namespace,input",(d,m)=>{let h=d.length;for(;h--;){const v=d[h];v.type===7?v.remove():v.type===1&&(m!=="input"||v.attr("type")||v.attr("type","text"))}}),a.addAttributeFilter("data-mce-type",d=>{Q(d,m=>{m.attr("data-mce-type")==="format-caret"&&(m.isEmpty(a.schema.getNonEmptyElements())?m.remove():m.unwrap())})}),a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(d,m)=>{let h=d.length;for(;h--;)d[h].attr(m,null)}),l.remove_trailing_brs&&((d,m,h)=>{m.addNodeFilter("br",(v,g,y)=>{const p=oe.extend({},h.getBlockElements()),_=h.getNonEmptyElements(),k=h.getWhitespaceElements();p.body=1;const x=A=>A.name in p||Ic(h,A);for(let A=0,N=v.length;A<N;A++){let O=v[A],L=O.parent;if(L&&x(L)&&O===L.lastChild){let P=O.prev;for(;P;){const j=P.name;if(j!=="span"||P.attr("data-mce-type")!=="bookmark"){j==="br"&&(O=null);break}P=P.prev}if(O&&(O.remove(),vd(h,_,k,L))){const j=h.getElementRule(L.name);j&&(j.removeEmpty?L.remove():j.paddEmpty&&Hh(d,y,x,L))}}else{let P=O;for(;L&&L.firstChild===P&&L.lastChild===P&&(P=L,!p[L.name]);)L=L.parent;if(P===L){const j=new Cr("#text",3);j.value=Ut,O.replace(j)}}}})})(l,a,a.schema)})(i,r,o),{schema:s,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:(a,l={})=>{const c={format:"html",...l},d=((v,g,y)=>((p,_)=>ie(p)&&p.hasEventListeners("PreProcess")&&!_.no_events)(v,y)?((p,_,k)=>{let x;const A=p.dom;let N=_.cloneNode(!0);const O=document.implementation;if(O.createHTMLDocument){const L=O.createHTMLDocument("");oe.each(N.nodeName==="BODY"?N.childNodes:[N],P=>{L.body.appendChild(L.importNode(P,!0))}),N=N.nodeName!=="BODY"?L.body.firstChild:L.body,x=A.doc,A.doc=L}return((L,P)=>{L.dispatch("PreProcess",P)})(p,{...k,node:N}),x&&(A.doc=x),N})(v,g,y):g)(t,a,c),m=((v,g,y)=>{const p=co(y.getInner?g.innerHTML:v.getOuterHTML(g));return y.selection||hu(M(g))?p:oe.trim(p)})(o,d,c),h=((v,g,y)=>{const p=y.selection?{forced_root_block:!1,...y}:y,_=v.parse(g,p);return(k=>{const x=N=>N?.name==="br",A=k.lastChild;if(x(A)){const N=A.prev;x(N)&&(A.remove(),N.remove())}})(_),_})(i,m,c);return c.format==="tree"?h:((v,g,y,p,_)=>{const k=((x,A,N)=>ba(x,A).serialize(N))(g,y,p);return((x,A,N)=>!A.no_events&&x?((L,P)=>L.dispatch("PostProcess",P))(x,{...A,content:N}).content:N)(v,_,k)})(t,r,s,h,c)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:_e(TT,i,n),getTempAttrs:ce(n),getNodeFilters:i.getNodeFilters,getAttributeFilters:i.getAttributeFilters,removeNodeFilter:i.removeNodeFilter,removeAttributeFilter:i.removeAttributeFilter}},Fw=(e,t)=>{const n=OT(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Eg=(e,t,n={})=>{const r=((o,s)=>({format:"html",...o,set:!0,content:s}))(n,t);return vg(e,r).map(o=>{const s=((i,a,l)=>Sg(i).editor.setContent(a,l))(e,o.content,o);return yg(e,s.html,o),s.content}).getOr(t)},RT="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),DT=[],MT="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),Uw=[],jw=(e,t)=>{const n=De(t,r=>He(e,r));return eo(n)},PT=e=>{const t=jw(e,RT),n=e.forced_root_block;return n!==!1&&n!==""||t.push("forced_root_block (false only)"),eo(t)},LT=e=>jw(e,DT),Hw=(e,t)=>{const n=oe.makeMap(e.plugins," "),r=De(t,o=>He(n,o));return eo(r)},BT=e=>Hw(e,MT),IT=e=>Hw(e,Uw.map(t=>t.name)),FT=e=>Mt(Uw,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),cm=bt.DOM,dm=e=>S.from(e).each(t=>t.destroy()),um=(()=>{const e={};return{add:(t,n)=>{e[t]=n},get:t=>e[t]?e[t]:{icons:{}},has:t=>He(e,t)}})(),sc=Wn.ModelManager,Yw=(e,t)=>t.dom[e],$w=(e,t)=>parseInt(io(t,e),10),UT=_e(Yw,"clientWidth"),jT=_e(Yw,"clientHeight"),HT=_e($w,"margin-top"),YT=_e($w,"margin-left"),zw=e=>{const t=[],n=()=>{const l=e.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},r=()=>S.from(t[0]),o=()=>{r().each(l=>{l.reposition()})},s=l=>{he(t,c=>c===l).each(c=>{t.splice(c,1)})},i=(l,c=!0)=>e.removed||!(d=>{return(m=d.inline?d.getBody():d.getContentAreaContainer(),S.from(m).map(M)).map(bi).getOr(!1);var m})(e)?{}:(c&&e.dispatch("BeforeOpenNotification",{notification:l}),Mt(t,d=>{return m=n().getArgs(d),h=l,!(m.type!==h.type||m.text!==h.text||m.progressBar||m.timeout||h.progressBar||h.timeout);var m,h}).getOrThunk(()=>{e.editorManager.setActive(e);const d=n().open(l,()=>{s(d)},()=>uh(e));return(m=>{t.push(m)})(d),o(),e.dispatch("OpenNotification",{notification:{...d}}),d})),a=ce(t);return(l=>{l.on("SkinLoaded",()=>{const c=EE(l);c&&i({text:c,type:"warning",timeout:0},!1),o()}),l.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(o)}),l.on("remove",()=>{Q(t.slice(),c=>{n().close(c)})}),l.on("keydown",c=>{var d;const m=((d=c.key)===null||d===void 0?void 0:d.toLowerCase())==="f12"||c.keyCode===123;c.altKey&&m&&(c.preventDefault(),r().map(h=>M(h.getEl())).each(h=>fv(h)))})})(e),{open:i,close:()=>{r().each(l=>{n().close(l),s(l),o()})},getNotifications:a}},ic=Wn.PluginManager,cl=Wn.ThemeManager,Ww=e=>{let t=[];const n=()=>{const i=e.theme;return i&&i.getWindowManagerImpl?i.getWindowManagerImpl():(()=>{const a=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:a,openUrl:a,alert:a,confirm:a,close:a}})()},r=(i,a)=>(...l)=>a?a.apply(i,l):void 0,o=i=>{(a=>{e.dispatch("CloseWindow",{dialog:a})})(i),t=De(t,a=>a!==i),t.length===0&&e.focus()},s=i=>{e.editorManager.setActive(e),Iu(e),e.ui.show();const a=i();return(l=>{t.push(l),(c=>{e.dispatch("OpenWindow",{dialog:c})})(l)})(a),a};return e.on("remove",()=>{Q(t,i=>{n().close(i)})}),{open:(i,a)=>s(()=>n().open(i,a,o)),openUrl:i=>s(()=>n().openUrl(i,o)),alert:(i,a,l)=>{const c=n();c.alert(i,r(l||c,a))},confirm:(i,a,l)=>{const c=n();c.confirm(i,r(l||c,a))},close:()=>{S.from(t[t.length-1]).each(i=>{n().close(i),o(i)})}}},Vw=(e,t)=>{e.notificationManager.open({type:"error",text:t})},mm=(e,t)=>{e._skinLoaded?Vw(e,t):e.on("SkinLoaded",()=>{Vw(e,t)})},Ed=(e,t,n)=>{Wb(e,t,{message:n}),console.error(n)},Nd=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,fm=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},Ng=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},qw=(e,t,n)=>{so(e,t)&&!n?ar(e,t):n&&ms(e,t)},Gw=e=>{const t=M(e.getBody());qw(t,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),(n=>{S.from(n.selection.getNode()).each(r=>{r.removeAttribute("data-mce-selected")})})(e)},Kw=e=>{const t=M(e.getBody());qw(t,"mce-content-readonly",!1),e.hasEditableRoot()&&Ma(t,!0),((n,r)=>{Ng(n,"StyleWithCSS",r),Ng(n,"enableInlineTableEditing",r),Ng(n,"enableObjectResizing",r)})(e,!1),uh(e)&&e.focus(),(n=>{n.selection.setRng(n.selection.getRng())})(e),e.nodeChanged()},Mi=e=>Su(e),dl="data-mce-contenteditable",Xw=(e,t)=>{const n=M(e.getBody());t?(Gw(e),Ma(n,!1),Q(Ln(n,'*[contenteditable="true"]'),r=>{tn(r,dl,"true"),Ma(r,!1)})):(Q(Ln(n,`*[${dl}="true"]`),r=>{dn(r,dl),Ma(r,!0)}),Kw(e))},Zw=e=>{e.parser.addAttributeFilter("contenteditable",t=>{Mi(e)&&Q(t,n=>{n.attr(dl,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(dl,t=>{Mi(e)&&Q(t,n=>{n.attr("contenteditable",n.attr(dl))})}),e.serializer.addTempAttr(dl)},$T=["copy"],Ag=e=>"content/"+e+"/content.css",Qw=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",r=`content${e.editorManager.suffix}.css`;return Me(t,o=>(s=>tinymce.Resource.has(Ag(s)))(o)?o:(s=>/^[a-z0-9\-]+$/i.test(s))(o)&&!e.inline?`${n}/${o}/${r}`:e.documentBaseURI.toAbsolute(o))},zT=(e,t)=>{const n={};return{findAll:(r,o=Zt)=>{const s=De((a=>a?xt(a.getElementsByTagName("img")):[])(r),a=>{const l=a.src;return!a.hasAttribute("data-mce-bogus")&&!a.hasAttribute("data-mce-placeholder")&&!(!l||l===Qe.transparentSrc)&&(_t(l,"blob:")?!e.isUploaded(l)&&o(a):!!_t(l,"data:")&&o(a))}),i=Me(s,a=>{const l=a.src;if(He(n,l))return n[l].then(c=>se(c)?c:{image:a,blobInfo:c.blobInfo});{const c=((d,m)=>{const h=()=>Promise.reject("Invalid data URI");if(_t(m,"blob:")){const y=d.getByUri(m);return ie(y)?Promise.resolve(y):(v=m,_t(v,"blob:")?(p=>fetch(p).then(_=>_.ok?_.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${p} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})))(v):_t(v,"data:")?(g=v,new Promise((p,_)=>{ag(g).bind(({type:k,data:x,base64Encoded:A})=>Y_(k,x,A)).fold(()=>_("Invalid data URI"),p)})):Promise.reject("Unknown URI format")).then(p=>$_(p).then(_=>z_(_,!1,k=>S.some(W_(d,p,k))).getOrThunk(h)))}var v,g;return _t(m,"data:")?V_(d,m).fold(h,y=>Promise.resolve(y)):Promise.reject("Unknown image data format")})(t,l).then(d=>(delete n[l],{image:a,blobInfo:d})).catch(d=>(delete n[l],d));return n[l]=c,c}});return Promise.all(i)}}},Jw=()=>{let e={};const t=(r,o)=>({status:r,resultUri:o}),n=r=>r in e;return{hasBlobUri:n,getResultUri:r=>{const o=e[r];return o?o.resultUri:null},isPending:r=>!!n(r)&&e[r].status===1,isUploaded:r=>!!n(r)&&e[r].status===2,markPending:r=>{e[r]=t(1,null)},markUploaded:(r,o)=>{e[r]=t(2,o)},removeFailed:r=>{delete e[r]},destroy:()=>{e={}}}};let WT=0;const VT=(e,t)=>{const n={},r=(l,c)=>new Promise((d,m)=>{const h=new XMLHttpRequest;h.open("POST",t.url),h.withCredentials=t.credentials,h.upload.onprogress=g=>{c(g.loaded/g.total*100)},h.onerror=()=>{m("Image upload failed due to a XHR Transport error. Code: "+h.status)},h.onload=()=>{if(h.status<200||h.status>=300)return void m("HTTP Error: "+h.status);const g=JSON.parse(h.responseText);var y,p;g&&se(g.location)?d((y=t.basePath,p=g.location,y?y.replace(/\/$/,"")+"/"+p.replace(/^\//,""):p)):m("Invalid JSON: "+h.responseText)};const v=new FormData;v.append("file",l.blob(),l.filename()),h.send(v)}),o=dt(t.handler)?t.handler:r,s=(l,c)=>({url:c,blobInfo:l,status:!0}),i=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),a=(l,c)=>{oe.each(n[l],d=>{d(c)}),delete n[l]};return{upload:(l,c)=>t.url||o!==r?((d,m)=>(d=oe.grep(d,h=>!e.isUploaded(h.blobUri())),Promise.all(oe.map(d,h=>e.isPending(h.blobUri())?(v=>{const g=v.blobUri();return new Promise(y=>{n[g]=n[g]||[],n[g].push(y)})})(h):((v,g,y)=>(e.markPending(v.blobUri()),new Promise(p=>{let _,k;try{const x=()=>{_&&(_.close(),k=$e)},A=O=>{x(),e.markUploaded(v.blobUri(),O),a(v.blobUri(),s(v,O)),p(s(v,O))},N=O=>{x(),e.removeFailed(v.blobUri()),a(v.blobUri(),i(v,O)),p(i(v,O))};k=O=>{O<0||O>100||S.from(_).orThunk(()=>S.from(y).map(go)).each(L=>{_=L,L.progressBar.value(O)})},g(v,k).then(A,O=>{N(se(O)?{message:O}:O)})}catch(x){p(i(v,x))}})))(h,o,m)))))(l,c):new Promise(d=>{d([])})}},eC=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),tC=(e,t)=>VT(t,{url:fE(e),basePath:hE(e),credentials:gE(e),handler:pE(e)}),qT=e=>{const t=(()=>{let y=[];const p=x=>{if(!x.blob||!x.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const A=x.id||"blobid"+WT+++(()=>{const P=()=>Math.round(4294967295*sb()).toString(36);return"s"+new Date().getTime().toString(36)+P()+P()+P()})(),N=x.name||A,O=x.blob;var L;return{id:ce(A),name:ce(N),filename:ce(x.filename||N+"."+(L=O.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[L.toLowerCase()]||"dat")),blob:ce(O),base64:ce(x.base64),blobUri:ce(x.blobUri||URL.createObjectURL(O)),uri:ce(x.uri)}},_=x=>Mt(y,x).getOrUndefined(),k=x=>_(A=>A.id()===x);return{create:(x,A,N,O,L)=>{if(se(x))return p({id:x,name:O,filename:L,blob:A,base64:N});if(rn(x))return p(x);throw new Error("Unknown input type")},add:x=>{k(x.id())||y.push(x)},get:k,getByUri:x=>_(A=>A.blobUri()===x),getByData:(x,A)=>_(N=>N.base64()===x&&N.blob().type===A),findFirst:_,removeByUri:x=>{y=De(y,A=>A.blobUri()!==x||(URL.revokeObjectURL(A.blobUri()),!1))},destroy:()=>{Q(y,x=>{URL.revokeObjectURL(x.blobUri())}),y=[]}}})();let n,r;const o=Jw(),s=[],i=y=>p=>e.selection?y(p):[],a=(y,p,_)=>{let k=0;do k=y.indexOf(p,k),k!==-1&&(y=y.substring(0,k)+_+y.substr(k+p.length),k+=_.length-p.length+1);while(k!==-1);return y},l=(y,p,_)=>{const k=`src="${_}"${_===Qe.transparentSrc?' data-mce-placeholder="1"':""}`;return y=a(y,`src="${p}"`,k),a(y,'data-mce-src="'+p+'"','data-mce-src="'+_+'"')},c=(y,p)=>{Q(e.undoManager.data,_=>{_.type==="fragmented"?_.fragments=Me(_.fragments,k=>l(k,y,p)):_.content=l(_.content,y,p)})},d=()=>(n||(n=tC(e,o)),v().then(i(y=>{const p=Me(y,_=>_.blobInfo);return n.upload(p,eC(e)).then(i(_=>{const k=[];let x=!1;const A=Me(_,(N,O)=>{const{blobInfo:L,image:P}=y[O];let j=!1;return N.status&&uE(e)?(N.url&&!gt(P.src,N.url)&&(x=!0),t.removeByUri(P.src),Ks(e)||(($,D)=>{const B=e.convertURL(D,"src");var U;c($.src,D),Hr(M($),{src:n0(e)?(U=D,U+(U.indexOf("?")===-1?"?":"&")+new Date().getTime()):D,"data-mce-src":B})})(P,N.url)):N.error&&(N.error.remove&&(c(P.src,Qe.transparentSrc),k.push(P),j=!0),(($,D)=>{mm($,lo.translate(["Failed to upload image: {0}",D]))})(e,N.error.message)),{element:P,status:N.status,uploadUri:N.url,blobInfo:L,removed:j}});return k.length>0&&!Ks(e)?e.undoManager.transact(()=>{Q(Ba(k),N=>{const O=u(N);Pt(N),O.each((L=>P=>{((j,$)=>j.dom.isEmpty($.dom)&&ie(j.schema.getTextBlockElements()[Je($)]))(L,P)&&hn(P,$r('<br data-mce-bogus="1" />'))})(e)),t.removeByUri(N.dom.src)})}):x&&e.undoManager.dispatchChange(),A}))}))),m=()=>t0(e)?d():Promise.resolve([]),h=y=>Dn(s,p=>p(y)),v=()=>(r||(r=zT(o,t)),r.findAll(e.getBody(),h).then(i(y=>{const p=De(y,_=>se(_)?(mm(e,_),!1):_.uriType!=="blob");return Ks(e)||Q(p,_=>{c(_.image.src,_.blobInfo.blobUri()),_.image.src=_.blobInfo.blobUri(),_.image.removeAttribute("data-mce-src")}),p}))),g=y=>y.replace(/src="(blob:[^"]+)"/g,(p,_)=>{const k=o.getResultUri(_);if(k)return'src="'+k+'"';let x=t.getByUri(_);return x||(x=bn(e.editorManager.get(),(A,N)=>A||N.editorUpload&&N.editorUpload.blobCache.getByUri(_),void 0)),x?'src="data:'+x.blob().type+";base64,"+x.base64()+'"':p});return e.on("SetContent",()=>{t0(e)?m():v()}),e.on("RawSaveContent",y=>{y.content=g(y.content)}),e.on("GetContent",y=>{y.source_view||y.format==="raw"||y.format==="tree"||(y.content=g(y.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",y=>{Q(y,p=>{const _=p.attr("src");if(!_||t.getByUri(_))return;const k=o.getResultUri(_);k&&p.attr("src",k)})})}),{blobCache:t,addFilter:y=>{s.push(y)},uploadImages:d,uploadImagesAuto:m,scanForImages:v,destroy:()=>{t.destroy(),o.destroy(),r=n=null}}},nC={remove_similar:!0,inherit:!1},ac={selector:"td,th",...nC},GT={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...ac},tablecellverticalalign:{styles:{"vertical-align":"%value"},...ac},tablecellbordercolor:{styles:{borderColor:"%value"},...ac},tablecellclass:{classes:["%value"],...ac},tableclass:{selector:"table",classes:["%value"],...nC},tablecellborderstyle:{styles:{borderStyle:"%value"},...ac},tablecellborderwidth:{styles:{borderWidth:"%value"},...ac}},KT=ce(GT),hm=oe.each,Do=bt.DOM,Tg=e=>ie(e)&&rn(e),rC=(e,t)=>{const n=t&&t.schema||zn({}),r=i=>{const a=se(i)?{name:i,classes:[],attrs:{}}:i,l=Do.create(a.name);return((c,d)=>{d.classes.length>0&&Do.addClass(c,d.classes.join(" ")),Do.setAttribs(c,d.attrs)})(l,a),l},o=(i,a,l)=>{let c;const d=a[0],m=Tg(d)?d.name:void 0,h=((y,p)=>{const _=n.getElementRule(y.nodeName.toLowerCase()),k=_?.parentsRequired;return!(!k||!k.length)&&(p&&fe(k,p)?p:k[0])})(i,m);if(h)m===h?(c=d,a=a.slice(1)):c=h;else if(d)c=d,a=a.slice(1);else if(!l)return i;const v=c?r(c):Do.create("div");v.appendChild(i),l&&oe.each(l,y=>{const p=r(y);v.insertBefore(p,i)});const g=Tg(c)?c.siblings:void 0;return o(v,a,g)},s=Do.create("div");if(e.length>0){const i=e[0],a=r(i),l=Tg(i)?i.siblings:void 0;s.appendChild(o(a,e.slice(1),l))}return s},XT=e=>{let t="div";const n={name:t,classes:[],attrs:{},selector:e=oe.trim(e)};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,o,s,i,a)=>{switch(o){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":oe.inArray("checked disabled enabled read-only required".split(" "),s)!==-1&&(n.attrs[s]=s)}if(i==="["){const l=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=t||"div",n},ZT=(e,t)=>{let n="",r=OE(e);if(r==="")return"";const o=v=>se(v)?v.replace(/%(\w+)/g,""):"",s=(v,g)=>Do.getStyle(g??e.getBody(),v,!0);if(se(t)){const v=e.formatter.get(t);if(!v)return"";t=v[0]}if("preview"in t){const v=t.preview;if(v===!1)return"";r=v||r}let i,a=t.block||t.inline||"span";const l=(c=t.selector,se(c)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),oe.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),v=>{const g=oe.map(v.split(/(?:~\+|~|\+)/),XT),y=g.pop();return g.length&&(y.siblings=g),y}).reverse()):[]);var c;l.length>0?(l[0].name||(l[0].name=a),a=t.selector,i=rC(l,e)):i=rC([a],e);const d=Do.select(a,i)[0]||i.firstChild;hm(t.styles,(v,g)=>{const y=o(v);y&&Do.setStyle(d,g,y)}),hm(t.attributes,(v,g)=>{const y=o(v);y&&Do.setAttrib(d,g,y)}),hm(t.classes,v=>{const g=o(v);Do.hasClass(d,g)||Do.addClass(d,g)}),e.dispatch("PreviewFormats"),Do.setStyles(i,{position:"absolute",left:-65535}),e.getBody().appendChild(i);const m=s("fontSize"),h=/px$/.test(m)?parseInt(m,10):0;return hm(r.split(" "),v=>{let g=s(v,d);if(!(v==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(g)&&(g=s(v),_n(g).toLowerCase()==="#ffffff")||v==="color"&&_n(g).toLowerCase()==="#000000")){if(v==="font-size"&&/em|%$/.test(g)){if(h===0)return;g=parseFloat(g)/(/%$/.test(g)?100:1)*h+"px"}v==="border"&&g&&(n+="padding:0 2px;"),n+=v+":"+g+";"}}),e.dispatch("AfterPreviewFormats"),Do.remove(i),n},oC=e=>{const t=(r=>{const o={},s=(i,a)=>{i&&(se(i)?(ct(a)||(a=[a]),Q(a,l=>{on(l.deep)&&(l.deep=!Ao(l)),on(l.split)&&(l.split=!Ao(l)||Tn(l)),on(l.remove)&&Ao(l)&&!Tn(l)&&(l.remove="none"),Ao(l)&&Tn(l)&&(l.mixed=!0,l.block_expand=!0),se(l.classes)&&(l.classes=l.classes.split(/\s+/))}),o[i]=a):it(i,(l,c)=>{s(c,l)}))};return s((i=>{const a=i.dom,l=i.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:d=>{a.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:d=>{a.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const d={inline:"span",styles:{textDecoration:"line-through"},exact:!0},m={inline:"strike",remove:"all",preserve_attributes:["class","style"]},h={inline:"s",remove:"all",preserve_attributes:["class","style"]};return l!=="html4"?[h,d,m]:[d,h,m]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(d,m,h)=>xe(d)&&d.hasAttribute("href"),onformat:(d,m,h)=>{oe.each(h,(v,g)=>{a.setAttrib(d,g,v)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":d=>{var m;return(m=d?.customValue)!==null&&m!==void 0?m:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return oe.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),d=>{c[d]={block:d,remove:"all"}}),c})(r)),s(KT()),s(TE(r)),{get:i=>ie(i)?o[i]:o,has:i=>He(o,i),register:s,unregister:i=>(i&&o[i]&&delete o[i],o)}})(e),n=kn({});return(r=>{r.addShortcut("meta+b","","Bold"),r.addShortcut("meta+i","","Italic"),r.addShortcut("meta+u","","Underline");for(let o=1;o<=6;o++)r.addShortcut("access+"+o,"",["FormatBlock",!1,"h"+o]);r.addShortcut("access+7","",["FormatBlock",!1,"p"]),r.addShortcut("access+8","",["FormatBlock",!1,"div"]),r.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),(r=>{r.on("mouseup keydown",o=>{var s;((i,a,l)=>{const c=i.selection,d=i.getBody();tg(i,null,l),a!==8&&a!==46||!c.isCollapsed()||c.getStart().innerHTML!==yd||tg(i,Ja(d,c.getStart()),!0),a!==37&&a!==39||tg(i,Ja(d,c.getStart()),!0)})(r,o.keyCode,(s=r.selection.getRng().endContainer,ne(s)&&Zn(s.data,Ut)))})})(e),Ks(e)||((r,o)=>{r.set({}),o.on("NodeChange",s=>{U_(o,s.element,r.get())}),o.on("FormatApply FormatRemove",s=>{const i=S.from(s.node).map(a=>ld(a)?a:a.startContainer).bind(a=>xe(a)?S.some(a):S.from(a.parentElement)).getOrThunk(()=>B_(o));U_(o,i,r.get())})})(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(r,o,s)=>{((i,a,l,c)=>{xn(i).formatter.apply(a,l,c)})(e,r,o,s)},remove:(r,o,s,i)=>{((a,l,c,d,m)=>{xn(a).formatter.remove(l,c,d,m)})(e,r,o,s,i)},toggle:(r,o,s)=>{((i,a,l,c)=>{xn(i).formatter.toggle(a,l,c)})(e,r,o,s)},match:(r,o,s,i)=>((a,l,c,d,m)=>xn(a).formatter.match(l,c,d,m))(e,r,o,s,i),closest:r=>((o,s)=>xn(o).formatter.closest(s))(e,r),matchAll:(r,o)=>((s,i,a)=>xn(s).formatter.matchAll(i,a))(e,r,o),matchNode:(r,o,s,i)=>((a,l,c,d,m)=>xn(a).formatter.matchNode(l,c,d,m))(e,r,o,s,i),canApply:r=>((o,s)=>xn(o).formatter.canApply(s))(e,r),formatChanged:(r,o,s,i)=>((a,l,c,d,m,h)=>xn(a).formatter.formatChanged(l,c,d,m,h))(e,n,r,o,s,i),getCssText:_e(ZT,e)}},sC=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},iC=e=>{const t=Cs(),n=kn(0),r=kn(0),o={data:[],typing:!1,beforeChange:()=>{((s,i,a)=>{xn(s).undoManager.beforeChange(i,a)})(e,n,t)},add:(s,i)=>((a,l,c,d,m,h,v)=>xn(a).undoManager.add(l,c,d,m,h,v))(e,o,r,n,t,s,i),dispatchChange:()=>{e.setDirty(!0);const s=am(e);s.bookmark=Tf(e.selection),e.dispatch("change",{level:s,lastLevel:ft(o.data,r.get()).getOrUndefined()})},undo:()=>((s,i,a,l)=>xn(s).undoManager.undo(i,a,l))(e,o,n,r),redo:()=>((s,i,a)=>xn(s).undoManager.redo(i,a))(e,r,o.data),clear:()=>{((s,i,a)=>{xn(s).undoManager.clear(i,a)})(e,o,r)},reset:()=>{((s,i)=>{xn(s).undoManager.reset(i)})(e,o)},hasUndo:()=>((s,i,a)=>xn(s).undoManager.hasUndo(i,a))(e,o,r),hasRedo:()=>((s,i,a)=>xn(s).undoManager.hasRedo(i,a))(e,o,r),transact:s=>((i,a,l,c)=>xn(i).undoManager.transact(a,l,c))(e,o,n,s),ignore:s=>{((i,a,l)=>{xn(i).undoManager.ignore(a,l)})(e,n,s)},extra:(s,i)=>{((a,l,c,d,m)=>{xn(a).undoManager.extra(l,c,d,m)})(e,o,r,s,i)}};return Ks(e)||((s,i,a)=>{const l=kn(!1),c=d=>{lm(i,!1,a),i.add({},d)};s.on("init",()=>{i.add()}),s.on("BeforeExecCommand",d=>{const m=d.command;sC(m)||(Ow(i,a),i.beforeChange())}),s.on("ExecCommand",d=>{const m=d.command;sC(m)||c(d)}),s.on("ObjectResizeStart cut",()=>{i.beforeChange()}),s.on("SaveContent ObjectResized blur",c),s.on("dragend",c),s.on("keyup",d=>{const m=d.keyCode;if(d.isDefaultPrevented())return;const h=Qe.os.isMacOS()&&d.key==="Meta";(m>=33&&m<=36||m>=37&&m<=40||m===45||d.ctrlKey||h)&&(c(),s.nodeChanged()),m!==46&&m!==8||s.nodeChanged(),l.get()&&i.typing&&!kg(am(s),i.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())}),s.on("keydown",d=>{const m=d.keyCode;if(d.isDefaultPrevented())return;if(m>=33&&m<=36||m>=37&&m<=40||m===45)return void(i.typing&&c(d));const h=d.ctrlKey&&!d.altKey||d.metaKey;if((m<16||m>20)&&m!==224&&m!==91&&!i.typing&&!h)return i.beforeChange(),lm(i,!0,a),i.add({},d),void l.set(!0);(Qe.os.isMacOS()?d.metaKey:d.ctrlKey&&!d.altKey)&&i.beforeChange()}),s.on("mousedown",d=>{i.typing&&c(d)}),s.on("input",d=>{var m;d.inputType&&(d.inputType==="insertReplacementText"||(m=d).inputType==="insertText"&&m.data===null||(h=>h.inputType==="insertFromPaste"||h.inputType==="insertFromDrop")(d))&&c(d)}),s.on("AddUndo Undo Redo ClearUndos",d=>{d.isDefaultPrevented()||s.nodeChanged()})})(e,o,n),(s=>{s.addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo")})(e),o},QT=[9,27,ve.HOME,ve.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ve.DOWN,ve.UP,ve.LEFT,ve.RIGHT].concat(Qe.browser.isFirefox()?[224]:[]),aC="data-mce-placeholder",lC=e=>e.type==="keydown"||e.type==="keyup",cC=e=>{const t=e.keyCode;return t===ve.BACKSPACE||t===ve.DELETE},JT=(e,t)=>({from:e,to:t}),Og=(e,t)=>{const n=M(e),r=M(t.container());return Xu(n,r).map(o=>((s,i)=>({block:s,position:i}))(o,t))},dC=(e,t)=>Bs(t,n=>Gc(n)||qr(n.dom),n=>at(n,e)).filter(Yn).getOr(e),uC=(e,t)=>{const n=((r,o)=>{const s=le(r);return he(s,i=>o.isBlock(Je(i))).fold(ce(s),i=>s.slice(0,i))})(e,t);return Q(n,Pt),n},mC=(e,t,n)=>{const r=Di(n,t);return Mt(r.reverse(),o=>$n(e,o)).each(Pt)},eO=(e,t,n,r,o)=>{if($n(r,n))return ua(n),dr(n.dom);((i,a)=>De(K(a),l=>!$n(i,l)).length===0)(r,o)&&$n(r,t)&&lr(o,Ft("br"));const s=Xr(n.dom,G.before(o.dom));return Q(uC(t,r),i=>{lr(o,i)}),mC(r,e,t),s},tO=(e,t,n,r)=>{if($n(r,n)){if($n(r,t)){const s=a=>{const l=(c,d)=>ke(c).fold(()=>d,m=>((h,v)=>h.isInline(Je(v)))(r,m)?l(m,d.concat(Va(m))):d);return l(a,[])},i=Nr(s(n),(a,l)=>(Xd(a,l),l),Yl());ra(t),hn(t,i)}return Pt(n),dr(t.dom)}const o=Qo(n.dom);return Q(uC(t,r),s=>{hn(n,s)}),mC(r,e,t),o},fC=(e,t)=>{Xl(e,t.dom).bind(n=>S.from(n.getNode())).map(M).filter(Ga).each(Pt)},hC=(e,t,n,r)=>(fC(!0,t),fC(!1,n),((o,s)=>vr(s,o)?((i,a)=>{const l=Di(a,i);return S.from(l[l.length-1])})(s,o):S.none())(t,n).fold(_e(tO,e,t,n,r),_e(eO,e,t,n,r))),gC=(e,t,n,r,o)=>t?hC(e,r,n,o):hC(e,n,r,o),Rg=(e,t)=>{const n=M(e.getBody());return((o,s,i,a)=>a.collapsed?((l,c,d,m)=>{const h=Og(c,G.fromRangeStart(m)),v=h.bind(g=>So(d,c,g.position).bind(y=>Og(c,y).map(p=>((_,k,x,A)=>jt(A.position.getNode())&&!$n(_,A.block)?Xl(!1,A.block.dom).bind(N=>N.isEqual(A.position)?So(x,k,N).bind(O=>Og(k,O)):S.some(A)).getOr(A):A)(l,c,d,p))));return Bt(h,v,JT).filter(g=>(y=>!at(y.from.block,y.to.block))(g)&&((y,p)=>{const _=M(y);return at(dC(_,p.from.block),dC(_,p.to.block))})(c,g)&&(y=>Lt(y.from.block.dom)===!1&&Lt(y.to.block.dom)===!1)(g)&&(y=>{const p=_=>ub(_)||ks(_.dom)||Hl(_);return p(y.from.block)&&p(y.to.block)})(g)&&(y=>!(vr(y.to.block,y.from.block)||vr(y.from.block,y.to.block)))(g))})(o,s,i,a):S.none())(e.schema,n.dom,t,e.selection.getRng()).map(o=>()=>{gC(n,t,o.from.block,o.to.block,e.schema).each(s=>{e.selection.setRng(s.toRange())})})},pC=(e,t)=>{const n=M(t),r=_e(at,e);return gs(n,Gc,r).isSome()},nO=e=>{const t=M(e.getBody());return((n,r)=>{const o=Xr(n.dom,G.fromRangeStart(r)).isNone(),s=Dr(n.dom,G.fromRangeEnd(r)).isNone();return!((i,a)=>pC(i,a.startContainer)||pC(i,a.endContainer))(n,r)&&o&&s})(t,e.selection.getRng())?(n=>S.some(()=>{n.setContent(""),n.selection.setCursorLocation()}))(e):((n,r,o)=>{const s=r.getRng();return Bt(Xu(n,M(s.startContainer)),Xu(n,M(s.endContainer)),(i,a)=>at(i,a)?S.none():S.some(()=>{s.deleteContents(),gC(n,!0,i,a,o).each(l=>{r.setRng(l.toRange())})})).getOr(S.none())})(t,e.selection,e.schema)},Dg=(e,t)=>e.selection.isCollapsed()?S.none():nO(e),Pi=(e,t,n,r,o)=>S.from(t._selectionOverrides.showCaret(e,n,r,o)),Ad=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?S.none():S.some((n=>{const r=n.ownerDocument.createRange();return r.selectNode(n),r})(t)),Mg=(e,t,n)=>t.collapsed?((r,o,s)=>{const i=Uf(1,r.getBody(),o),a=G.fromRangeStart(i),l=a.getNode();if(td(l))return Pi(1,r,l,!a.isAtEnd(),!1);const c=a.getNode(!0);if(td(c))return Pi(1,r,c,!1,!1);const d=il(r.dom.getRoot(),a.getNode());return td(d)?Pi(1,r,d,!1,s):S.none()})(e,t,n).getOr(t):t,rO=e=>ya(e)||fd(e),oO=e=>_a(e)||hd(e),bC=(e,t,n,r,o,s)=>{Pi(r,e,s.getNode(!o),o,!0).each(i=>{if(t.collapsed){const a=t.cloneRange();o?a.setEnd(i.startContainer,i.startOffset):a.setStart(i.endContainer,i.endOffset),a.deleteContents()}else t.deleteContents();e.selection.setRng(i)}),((i,a)=>{ne(a)&&a.data.length===0&&i.remove(a)})(e.dom,n)},Pg=(e,t)=>((n,r)=>{const o=n.selection.getRng();if(!ne(o.commonAncestorContainer))return S.none();const s=r?In.Forwards:In.Backwards,i=Vs(n.getBody()),a=_e(jf,r?i.next:i.prev),l=r?rO:oO,c=id(s,n.getBody(),o),d=a(c),m=d&&Oo(r,d);if(!m||!Au(c,m))return S.none();if(l(m))return S.some(()=>bC(n,o,c.getNode(),s,r,m));const h=a(m);return h&&l(h)&&Au(m,h)?S.some(()=>bC(n,o,c.getNode(),s,r,h)):S.none()})(e,t),Lg=(e,t)=>{const n=e.getBody();return t?dr(n).filter(ya):Qo(n).filter(_a)},Bg=e=>{const t=e.selection.getRng();return!t.collapsed&&(Lg(e,!0).exists(n=>n.isEqual(G.fromRangeStart(t)))||Lg(e,!1).exists(n=>n.isEqual(G.fromRangeEnd(t))))},Mo=$s([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),vC=(e,t,n,r)=>So(t,e,n).bind(o=>{return s=o.getNode(),ie(s)&&(Gc(M(s))||Hl(M(s)))||((i,a,l,c,d)=>{const m=h=>d.isInline(h.nodeName.toLowerCase())&&!zs(l,c,i);return T0(!a,l).fold(()=>T0(a,c).fold(ht,m),m)})(e,t,n,o,r)?S.none():t&&Lt(o.getNode())||!t&&Lt(o.getNode(!0))?((i,a,l,c,d)=>{const m=d.getNode(!l);return Xu(M(a),M(c.getNode())).map(h=>$n(i,h)?Mo.remove(h.dom):Mo.moveToElement(m)).orThunk(()=>S.some(Mo.moveToElement(m)))})(r,e,t,n,o):t&&_a(n)||!t&&ya(n)?S.some(Mo.moveToPosition(o)):S.none();var s}),yC=(e,t)=>S.from(il(e.getBody(),t)),sO=(e,t)=>{const n=e.selection.getNode();return yC(e,n).filter(Lt).fold(()=>((r,o,s,i)=>{const a=Uf(o?1:-1,r,s),l=G.fromRangeStart(a),c=M(r);return!o&&_a(l)?S.some(Mo.remove(l.getNode(!0))):o&&ya(l)?S.some(Mo.remove(l.getNode())):!o&&ya(l)&&qu(c,l,i)?fy(c,l,i).map(d=>Mo.remove(d.getNode())):o&&_a(l)&&Eh(c,l,i)?kA(c,l,i).map(d=>Mo.remove(d.getNode())):((d,m,h,v)=>((g,y)=>{const p=y.getNode(!g),_=g?"after":"before";return xe(p)&&p.getAttribute("data-mce-caret")===_})(m,h)?((g,y)=>Wt(y)?S.none():g&&Lt(y.nextSibling)?S.some(Mo.moveToElement(y.nextSibling)):!g&&Lt(y.previousSibling)?S.some(Mo.moveToElement(y.previousSibling)):S.none())(m,h.getNode(!m)).orThunk(()=>vC(d,m,h,v)):vC(d,m,h,v).bind(g=>((y,p,_)=>_.fold(k=>S.some(Mo.remove(k)),k=>S.some(Mo.moveToElement(k)),k=>zs(p,k,y)?S.none():S.some(Mo.moveToPosition(k))))(d,h,g)))(r,o,l,i)})(e.getBody(),t,e.selection.getRng(),e.schema).map(r=>()=>r.fold(((o,s)=>i=>(o._selectionOverrides.hideFakeCaret(),ol(o,s,M(i)),!0))(e,t),((o,s)=>i=>{const a=s?G.before(i):G.after(i);return o.selection.setRng(a.toRange()),!0})(e,t),(o=>s=>(o.selection.setRng(s.toRange()),!0))(e))),()=>S.some($e))},_C=e=>{const t=e.dom,n=e.selection,r=il(e.getBody(),n.getNode());if(qr(r)&&t.isBlock(r)&&t.isEmpty(r)){const o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(r,""),r.appendChild(o),n.setRng(G.before(o).toRange())}return!0},Ig=(e,t)=>e.selection.isCollapsed()?sO(e,t):((n,r)=>{const o=n.selection.getNode();return Lt(o)&&!_s(o)?yC(n,o.parentNode).filter(Lt).fold(()=>S.some(()=>{var s;s=M(n.getBody()),Q(Ln(s,".mce-offscreen-selection"),Pt),ol(n,r,M(n.selection.getNode())),Rh(n)}),()=>S.some($e)):Bg(n)?S.some(()=>{Ly(n,n.selection.getRng(),M(n.getBody()))}):S.none()})(e,t),wC=e=>e.hasOwnProperty("text"),CC=e=>e.hasOwnProperty("marker"),kC=(e,t)=>{const n=(o,s)=>{if(ne(o))return{text:o,offset:s};{const i=t(),a=o.childNodes;return s<a.length?(o.insertBefore(i,a[s]),{marker:i,before:!0}):(o.appendChild(i),{marker:i,before:!1})}},r=n(e.endContainer,e.endOffset);return{start:n(e.startContainer,e.startOffset),end:r}},xC=e=>{var t,n;const{start:r,end:o}=e,s=new window.Range;return wC(r)?s.setStart(r.text,r.offset):CC(r)&&(r.before?s.setStartBefore(r.marker):s.setStartAfter(r.marker),(t=r.marker.parentNode)===null||t===void 0||t.removeChild(r.marker)),wC(o)?s.setEnd(o.text,o.offset):CC(o)&&(o.before?s.setEndBefore(o.marker):s.setEndAfter(o.marker),(n=o.marker.parentNode)===null||n===void 0||n.removeChild(o.marker)),s},Fg=(e,t)=>{var n;const r=e.dom,o=r.getParent(e.selection.getStart(),r.isBlock),s=r.getParent(e.selection.getEnd(),r.isBlock),i=e.getBody();if(((n=o?.nodeName)===null||n===void 0?void 0:n.toLowerCase())==="div"&&o&&s&&o===i.firstChild&&s===i.lastChild&&!r.isEmpty(i)){const a=o.cloneNode(!1),l=()=>{if(t?Dy(e):Ku(e),i.firstChild!==o){const c=kC(e.selection.getRng(),()=>document.createElement("span"));Array.from(i.childNodes).forEach(d=>a.appendChild(d)),i.appendChild(a),e.selection.setRng(xC(c))}};return S.some(l)}return S.none()},Ug=(e,t)=>e.selection.isCollapsed()?((n,r)=>{const o=G.fromRangeStart(n.selection.getRng());return So(r,n.getBody(),o).filter(s=>r?vA(s):yA(s)).bind(s=>Ff(r?0:-1,s)).map(s=>()=>n.selection.select(s))})(e,t):S.none(),lc=ne,SC=e=>lc(e)&&e.data[0]===Bn,EC=e=>lc(e)&&e.data[e.data.length-1]===Bn,NC=e=>{var t;return((t=e.ownerDocument)!==null&&t!==void 0?t:document).createTextNode(Bn)},gm=(e,t)=>e?(n=>{var r;if(lc(n.previousSibling))return EC(n.previousSibling)||n.previousSibling.appendData(Bn),n.previousSibling;if(lc(n))return SC(n)||n.insertData(0,Bn),n;{const o=NC(n);return(r=n.parentNode)===null||r===void 0||r.insertBefore(o,n),o}})(t):(n=>{var r,o;if(lc(n.nextSibling))return SC(n.nextSibling)||n.nextSibling.insertData(0,Bn),n.nextSibling;if(lc(n))return EC(n)||n.appendData(Bn),n;{const s=NC(n);return n.nextSibling?(r=n.parentNode)===null||r===void 0||r.insertBefore(s,n.nextSibling):(o=n.parentNode)===null||o===void 0||o.appendChild(s),s}})(t),iO=_e(gm,!0),aO=_e(gm,!1),AC=(e,t)=>ne(e.container())?gm(t,e.container()):gm(t,e.getNode()),TC=(e,t)=>{const n=t.get();return n&&e.container()===n&&ma(n)},jg=(e,t)=>t.fold(n=>{Za(e.get());const r=iO(n);return e.set(r),S.some(G(r,r.length-1))},n=>dr(n).map(r=>{if(TC(r,e)){const o=e.get();return G(o,1)}{Za(e.get());const o=AC(r,!0);return e.set(o),G(o,1)}}),n=>Qo(n).map(r=>{if(TC(r,e)){const o=e.get();return G(o,o.length-1)}{Za(e.get());const o=AC(r,!1);return e.set(o),G(o,o.length-1)}}),n=>{Za(e.get());const r=aO(n);return e.set(r),S.some(G(r,1))}),OC=(e,t)=>{for(let n=0;n<e.length;n++){const r=e[n].apply(null,t);if(r.isSome())return r}return S.none()},kr=$s([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),RC=(e,t)=>ga(t,e)||e,lO=(e,t,n)=>{const r=Ty(n),o=RC(t,r.container());return wa(e,o,r).fold(()=>Dr(o,r).bind(_e(wa,e,o)).map(s=>kr.before(s)),S.none)},cO=(e,t)=>Ja(e,t)===null,DC=(e,t,n)=>wa(e,t,n).filter(_e(cO,t)),dO=(e,t,n)=>{const r=Oy(n);return DC(e,t,r).bind(o=>Xr(o,r).isNone()?S.some(kr.start(o)):S.none())},uO=(e,t,n)=>{const r=Ty(n);return DC(e,t,r).bind(o=>Dr(o,r).isNone()?S.some(kr.end(o)):S.none())},mO=(e,t,n)=>{const r=Oy(n),o=RC(t,r.container());return wa(e,o,r).fold(()=>Xr(o,r).bind(_e(wa,e,o)).map(s=>kr.after(s)),S.none)},MC=e=>!Ay(Hg(e)),Xs=(e,t,n)=>OC([lO,dO,uO,mO],[e,t,n]).filter(MC),Hg=e=>e.fold(En,En,En,En),PC=e=>e.fold(ce("before"),ce("start"),ce("end"),ce("after")),pm=e=>e.fold(kr.before,kr.before,kr.after,kr.after),Yg=e=>e.fold(kr.start,kr.start,kr.end,kr.end),fO=(e,t,n,r,o,s)=>Bt(wa(t,n,r),wa(t,n,o),(i,a)=>i!==a&&((l,c,d)=>{const m=ga(c,l),h=ga(d,l);return ie(m)&&m===h})(n,i,a)?kr.after(e?i:a):s).getOr(s),hO=(e,t)=>e.fold(Zt,n=>{return o=t,!(PC(r=n)===PC(o)&&Hg(r)===Hg(o));var r,o}),gO=(e,t)=>e?t.fold(pn(S.some,kr.start),S.none,pn(S.some,kr.after),S.none):t.fold(S.none,pn(S.some,kr.before),S.none,pn(S.some,kr.end)),LC=(e,t,n)=>{const r=e?1:-1;return t.setRng(G(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0};var Zs;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Zs||(Zs={}));const bm=(e,t)=>e===In.Backwards?Fn(t):t,pO=(e,t,n)=>e===In.Forwards?t.next(n):t.prev(n),bO=(e,t,n,r)=>jt(r.getNode(t===In.Forwards))?Zs.Br:zs(n,r)===!1?Zs.Block:Zs.Wrap,BC=(e,t,n,r)=>{const o=Vs(n);let s=r;const i=[];for(;s;){const a=pO(t,o,s);if(!a)break;if(jt(a.getNode(!1)))return t===In.Forwards?{positions:bm(t,i).concat([a]),breakType:Zs.Br,breakAt:S.some(a)}:{positions:bm(t,i),breakType:Zs.Br,breakAt:S.some(a)};if(a.isVisible()){if(e(s,a)){const l=bO(0,t,s,a);return{positions:bm(t,i),breakType:l,breakAt:S.some(a)}}i.push(a),s=a}else s=a}return{positions:bm(t,i),breakType:Zs.Eol,breakAt:S.none()}},IC=(e,t,n,r)=>t(n,r).breakAt.map(o=>{const s=t(n,o).positions;return e===In.Backwards?s.concat(o):[o].concat(s)}).getOr([]),$g=(e,t)=>bn(e,(n,r)=>n.fold(()=>S.some(r),o=>Bt(en(o.getClientRects()),en(r.getClientRects()),(s,i)=>{const a=Math.abs(t-s.left);return Math.abs(t-i.left)<=a?r:o}).or(n)),S.none()),vm=(e,t)=>en(t.getClientRects()).bind(n=>$g(e,n.left)),Td=_e(BC,G.isAbove,-1),Od=_e(BC,G.isBelow,1),FC=_e(IC,-1,Td),UC=_e(IC,1,Od),jC=(e,t)=>Td(e,t).breakAt.isNone(),HC=(e,t)=>Od(e,t).breakAt.isNone(),vO=(e,t)=>vm(FC(e,t),t),yO=(e,t)=>vm(UC(e,t),t),_O=Lt,YC=(e,t)=>Math.abs(e.left-t),$C=(e,t)=>Math.abs(e.right-t),zC=(e,t)=>si(e,(n,r)=>{const o=Math.min(YC(n,t),$C(n,t)),s=Math.min(YC(r,t),$C(r,t));return s===o&&no(r,"node")&&_O(r.node)||s<o?r:n}),wO=e=>{const t=n=>Me(n,r=>{const o=Ka(r);return o.node=e,o});if(xe(e))return t(e.getClientRects());if(ne(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},WC=e=>gr(e,wO);var Rd;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Rd||(Rd={}));const VC=(e,t,n,r,o,s)=>{let i=0;const a=[],l=m=>{let h=WC([m]);e===-1&&(h=h.reverse());for(let v=0;v<h.length;v++){const g=h[v];if(!n(g,c)){if(a.length>0&&t(g,br(a))&&i++,g.line=i,o(g))return!0;a.push(g)}}return!1},c=br(s.getClientRects());if(!c)return a;const d=s.getNode();return d&&(l(d),((m,h,v,g)=>{let y=g;for(;y=rd(y,m,_b,h);)if(v(y))return})(e,r,l,d)),a},CO=_e(VC,Rd.Up,Kc,Xc),kO=_e(VC,Rd.Down,Xc,Kc),qC=e=>br(e.getClientRects()),GC=e=>t=>((n,r)=>r.line>n)(e,t),zg=e=>t=>((n,r)=>r.line===n)(e,t),Li=(e,t)=>{e.selection.setRng(t),md(e,e.selection.getRng())},Wg=(e,t,n)=>S.some(Mg(e,t,n)),KC=(e,t,n,r,o,s)=>{const i=t===In.Forwards,a=Vs(e.getBody()),l=_e(jf,i?a.next:a.prev),c=i?r:o;if(!n.collapsed){const g=vu(n);if(s(g))return Pi(t,e,g,t===In.Backwards,!1);if(Bg(e)){const y=n.cloneRange();return y.collapse(t===In.Backwards),S.from(y)}}const d=id(t,e.getBody(),n);if(c(d))return Ad(e,d.getNode(!i));let m=l(d);const h=fb(n);if(!m)return h?S.some(n):S.none();if(m=Oo(i,m),c(m))return Pi(t,e,m.getNode(!i),i,!1);const v=l(m);return v&&c(v)&&Au(m,v)?Pi(t,e,v.getNode(!i),i,!1):h?Wg(e,m.toRange(),!1):S.none()},XC=(e,t,n,r,o,s)=>{const i=id(t,e.getBody(),n),a=br(i.getClientRects()),l=t===Rd.Down,c=e.getBody();if(!a)return S.none();if(Bg(e)){const y=l?G.fromRangeEnd(n):G.fromRangeStart(n);return(l?yO:vO)(c,y).orThunk(()=>S.from(y)).map(p=>p.toRange())}const d=(l?kO:CO)(c,GC(1),i),m=De(d,zg(1)),h=a.left,v=zC(m,h);if(v&&s(v.node)){const y=Math.abs(h-v.left),p=Math.abs(h-v.right);return Pi(t,e,v.node,y<p,!1)}let g;if(g=r(i)?i.getNode():o(i)?i.getNode(!0):vu(n),g){const y=((_,k,x,A)=>{const N=Vs(k);let O,L,P,j;const $=[];let D=0;_===1?(O=N.next,L=Xc,P=Kc,j=G.after(A)):(O=N.prev,L=Kc,P=Xc,j=G.before(A));const B=qC(j);do{if(!j.isVisible())continue;const U=qC(j);if(P(U,B))continue;$.length>0&&L(U,br($))&&D++;const X=Ka(U);if(X.position=j,X.line=D,x(X))return $;$.push(X)}while(j=O(j));return $})(t,c,GC(1),g);let p=zC(De(y,zg(1)),h);if(p||(p=br(De(y,zg(0))),p))return Wg(e,p.position.toRange(),!1)}return m.length===0?Vg(e,l).filter(l?o:r).map(y=>Mg(e,y.toRange(),!1)):S.none()},Vg=(e,t)=>{const n=e.selection.getRng(),r=t?G.fromRangeEnd(n):G.fromRangeStart(n),o=(s=r.container(),i=e.getBody(),gs(M(s),a=>NN(a.dom),a=>a.dom===i).map(a=>a.dom).getOr(i));var s,i;if(t){const a=Od(o,r);return Un(a.positions)}{const a=Td(o,r);return en(a.positions)}},ZC=(e,t,n)=>Vg(e,t).filter(n).exists(r=>(e.selection.setRng(r.toRange()),!0)),ym=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},QC=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},JC=(e,t,n)=>jg(t,n).map(r=>(ym(e,r),n)),xO=(e,t,n)=>{const r=e.getBody(),o=((s,i,a)=>{const l=G.fromRangeStart(s);if(s.collapsed)return l;{const c=G.fromRangeEnd(s);return a?Xr(i,c).getOr(c):Dr(i,l).getOr(l)}})(e.selection.getRng(),r,n);return((s,i,a,l)=>{const c=Oo(s,l),d=Xs(i,a,c);return Xs(i,a,c).bind(_e(gO,s)).orThunk(()=>((m,h,v,g,y)=>{const p=Oo(m,y);return So(m,v,p).map(_e(Oo,m)).fold(()=>g.map(pm),_=>Xs(h,v,_).map(_e(fO,m,h,v,p,_)).filter(_e(hO,g))).filter(MC)})(s,i,a,d,l))})(n,_e(sl,e),r,o).bind(s=>JC(e,t,s))},e1=(e,t,n)=>!!ed(e)&&xO(e,t,n).isSome(),t1=(e,t,n)=>!!ed(t)&&((r,o)=>{const s=o.selection.getRng(),i=r?G.fromRangeEnd(s):G.fromRangeStart(s);return!!(a=>dt(a.selection.getSel().modify))(o)&&(r&&vf(i)?LC(!0,o.selection,i):!(r||!yf(i))&&LC(!1,o.selection,i))})(e,t),SO=e=>{const t=kn(null),n=_e(sl,e);return e.on("NodeChange",r=>{ed(e)&&(((o,s,i)=>{const a=Me(Ln(M(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),d=>d.dom),l=De(a,o),c=De(i,o);Q(ot(l,c),_e(QC,!1)),Q(ot(c,l),_e(QC,!0))})(n,e.dom,r.parents),((o,s)=>{const i=s.get();if(o.selection.isCollapsed()&&!o.composing&&i){const a=G.fromRangeStart(o.selection.getRng());G.isTextPosition(a)&&!(l=>vf(l)||yf(l))(a)&&(ym(o,CN(i,a)),s.set(null))}})(e,t),((o,s,i,a)=>{if(s.selection.isCollapsed()){const l=De(a,o);Q(l,c=>{const d=G.fromRangeStart(s.selection.getRng());Xs(o,s.getBody(),d).bind(m=>JC(s,i,m))})}})(n,e,t,r.parents))}),t},EO=_e(t1,!0),NO=_e(t1,!1),_m=(e,t,n)=>{if(ed(e)){const r=Vg(e,t).getOrThunk(()=>{const o=e.selection.getRng();return t?G.fromRangeEnd(o):G.fromRangeStart(o)});return Xs(_e(sl,e),e.getBody(),r).exists(o=>{const s=pm(o);return jg(n,s).exists(i=>(ym(e,i),!0))})}return!1},n1=(e,t)=>n=>jg(t,n).map(r=>()=>ym(e,r)),r1=(e,t,n,r)=>{const o=e.getBody(),s=_e(sl,e);e.undoManager.ignore(()=>{e.selection.setRng(((i,a)=>{const l=document.createRange();return l.setStart(i.container(),i.offset()),l.setEnd(a.container(),a.offset()),l})(n,r)),Ku(e),Xs(s,o,G.fromRangeStart(e.selection.getRng())).map(Yg).bind(n1(e,t)).each(Z)}),e.nodeChanged()},qg=(e,t,n)=>{if(e.selection.isCollapsed()&&ed(e)){const r=G.fromRangeStart(e.selection.getRng());return((o,s,i,a)=>{const l=((m,h)=>ga(h,m)||m)(o.getBody(),a.container()),c=_e(sl,o),d=Xs(c,l,a);return d.bind(m=>i?m.fold(ce(S.some(Yg(m))),S.none,ce(S.some(pm(m))),S.none):m.fold(S.none,ce(S.some(pm(m))),S.none,ce(S.some(Yg(m))))).map(n1(o,s)).getOrThunk(()=>{const m=Kl(i,l,a),h=m.bind(v=>Xs(c,l,v));return Bt(d,h,()=>wa(c,l,a).bind(v=>(g=>Bt(dr(g),Qo(g),(y,p)=>{const _=Oo(!0,y),k=Oo(!1,p);return Dr(g,_).forall(x=>x.isEqual(k))}).getOr(!0))(v)?S.some(()=>{ol(o,i,M(v))}):S.none())).getOrThunk(()=>h.bind(()=>m.map(v=>()=>{i?r1(o,s,a,v):r1(o,s,v,a)})))})})(e,t,n,r)}return S.none()},o1=(e,t)=>{const n=M(e.getBody()),r=M(e.selection.getStart()),o=Di(r,n);return he(o,t).fold(ce(o),s=>o.slice(0,s))},AO=e=>Ke(e)===1,s1=(e,t)=>{const n=_e(c_,e);return gr(t,r=>n(r)?[r.dom]:[])},i1=e=>{const t=(n=>o1(n,r=>n.schema.isBlock(Je(r))))(e);return s1(e,t)},TO=(e,t)=>{const n=De((r=>o1(r,o=>r.schema.isBlock(Je(o))||(s=>Ke(s)>1)(o)))(e),AO);return Un(n).bind(r=>{const o=G.fromRangeStart(e.selection.getRng());return My(t,o,r.dom)&&!oh(r)?S.some(()=>((s,i,a,l)=>{const c=s1(i,l);if(c.length===0)ol(i,s,a);else{const d=l_(a.dom,c);i.selection.setRng(d.toRange())}})(t,e,r,n)):S.none()})},a1=(e,t)=>{const n=e.selection.getStart(),r=((o,s)=>{const i=s.parentElement;return jt(s)&&!Tt(i)&&o.dom.isEmpty(i)})(e,n)||oh(M(n))?l_(n,t):((o,s)=>{const{caretContainer:i,caretPosition:a}=a_(s);return o.insertNode(i.dom),a})(e.selection.getRng(),t);e.selection.setRng(r.toRange())},l1=e=>ne(e.startContainer),OO=e=>{const t=e.selection.getRng();return(n=>n.startOffset===0&&l1(n))(t)&&((n,r)=>{const o=r.startContainer.parentElement;return!Tt(o)&&c_(n,M(o))})(e,t)&&(n=>(r=>(o=>{const s=o.startContainer.parentNode,i=o.endContainer.parentNode;return!Tt(s)&&!Tt(i)&&s.isEqualNode(i)})(r)&&(o=>{const s=o.endContainer;return o.endOffset===(ne(s)?s.length:s.childNodes.length)})(r))(n)||(r=>!r.endContainer.isEqualNode(r.commonAncestorContainer))(n))(t)},Gg=(e,t)=>e.selection.isCollapsed()?TO(e,t):(n=>{if(OO(n)){const r=i1(n);return S.some(()=>{Ku(n),((o,s)=>{const i=ot(s,i1(o));i.length>0&&a1(o,i)})(n,r)})}return S.none()})(e),Dd=e=>((t=>{const n=t.selection.getRng();return n.collapsed&&(l1(n)||t.dom.isEmpty(n.startContainer))&&!(r=>{return o=M(r.selection.getStart()),s=r.schema,tu(o,i=>Eo(i.dom),i=>s.isBlock(Je(i)));var o,s})(t)})(e)&&a1(e,[]),!0),Kg=(e,t,n)=>ie(n)?S.some(()=>{e._selectionOverrides.hideFakeCaret(),ol(e,t,M(n))}):S.none(),Xg=(e,t)=>e.selection.isCollapsed()?((n,r)=>{const o=r?fd:hd,s=r?In.Forwards:In.Backwards,i=id(s,n.getBody(),n.selection.getRng());return o(i)?Kg(n,r,i.getNode(!r)):S.from(Oo(r,i)).filter(a=>o(a)&&Au(i,a)).bind(a=>Kg(n,r,a.getNode(!r)))})(e,t):((n,r)=>{const o=n.selection.getNode();return wo(o)?Kg(n,r,o):S.none()})(e,t),Zg=e=>as(e??"").getOr(0),c1=(e,t)=>(e||Je(t)==="table"?"margin":"padding")+(io(t,"direction")==="rtl"?"-right":"-left"),d1=e=>{const t=m1(e);return!e.mode.isReadOnly()&&(t.length>1||((n,r)=>Dn(r,o=>{const s=c1(s0(n),o),i=Cl(o,s).map(Zg).getOr(0);return n.dom.getContentEditable(o.dom)!=="false"&&i>0}))(e,t))},u1=e=>bf(e)||Hl(e),m1=e=>De(Ba(e.selection.getSelectedBlocks()),t=>!u1(t)&&!(n=>u(n).exists(u1))(t)&&Bs(t,n=>qr(n.dom)||Lt(n.dom)).exists(n=>qr(n.dom))),f1=(e,t)=>{var n,r;if(e.mode.isReadOnly())return;const{dom:o}=e,s=yE(e),i=(r=(n=/[a-z%]+$/i.exec(s))===null||n===void 0?void 0:n[0])!==null&&r!==void 0?r:"px",a=Zg(s),l=s0(e);Q(m1(e),c=>{((d,m,h,v,g,y)=>{const p=c1(h,M(y)),_=Zg(d.getStyle(y,p));if(m==="outdent"){const k=Math.max(0,_-v);d.setStyle(y,p,k?k+g:"")}else{const k=_+v+g;d.setStyle(y,p,k)}})(o,t,l,a,i,c.dom)})},h1=e=>f1(e,"outdent"),g1=e=>{if(e.selection.isCollapsed()&&d1(e)){const t=e.dom,n=e.selection.getRng(),r=G.fromRangeStart(n),o=t.getParent(n.startContainer,t.isBlock);if(o!==null&&Sh(M(o),r,e.schema))return S.some(()=>h1(e))}return S.none()},p1=(e,t,n)=>nr([g1,Ig,Pg,(r,o)=>qg(r,t,o),Rg,Uh,Ug,Xg,Dg,Gg,Fg],r=>r(e,n)).filter(r=>e.selection.isEditable()),b1=e=>e.touches===void 0||e.touches.length!==1?S.none():S.some(e.touches[0]),Qg=(e,t)=>He(e,t.nodeName),RO=(e,t)=>!!ne(t)||!!xe(t)&&!(Qg(e.getBlockElements(),t)||No(t)||Ni(e,t)||Tl(t)),DO=(e,t)=>{if(ne(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||Qg(e,t.nextSibling)||Tl(t.nextSibling)}return!1},Jg=e=>e.dom.create(cr(e),Jc(e)),v1=(e,t,n)=>{const r=M(Jg(e)),o=Yl();hn(r,o),n(t,r);const s=document.createRange();return s.setStartBefore(o.dom),s.setEndBefore(o.dom),s},y1=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,MO=(e,t,n)=>function(r){const o=arguments,s=o[o.length-2],i=s>0?t.charAt(s-1):"";if(i==='"')return r;if(i===">"){const a=t.lastIndexOf("<",s);if(a!==-1&&t.substring(a,s).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode(typeof o[1]=="string"?o[1]:o[0])+"</span>"},PO=(e,t)=>Dn(e,n=>{const r=t.match(n);return r!==null&&r[0].length===t.length}),_1=(e,t)=>{t.hasAttribute("data-mce-caret")&&(_f(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},LO=(e,t)=>{const n=(r=>wl(M(r.getBody()),"*[data-mce-caret]").map(o=>o.dom).getOrNull())(e);if(n)return t.type==="compositionstart"?(t.preventDefault(),t.stopPropagation(),void _1(e,n)):void(mb(n)&&(_1(e,n),e.undoManager.add()))},w1=Lt,C1=(e,t,n)=>{const r=Vs(e.getBody()),o=_e(jf,t===1?r.next:r.prev);if(n.collapsed){const s=e.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!o(G.fromRangeStart(n))){const i=M((a=>{const l=a.dom.create(cr(a));return l.innerHTML='<br data-mce-bogus="1">',l})(e));t===1?ps(M(s),i):lr(M(s),i),e.selection.select(i.dom,!0),e.selection.collapse()}}},k1=(e,t)=>((n,r)=>{const o=r?In.Forwards:In.Backwards,s=n.selection.getRng();return((i,a,l)=>KC(a,i,l,ya,_a,w1))(o,n,s).orThunk(()=>(C1(n,o,s),S.none()))})(e,((n,r)=>{const o=r?n.getEnd(!0):n.getStart(!0);return Ay(o)?!r:r})(e.selection,t)).exists(n=>(Li(e,n),!0)),x1=(e,t)=>((n,r)=>{const o=r?1:-1,s=n.selection.getRng();return((i,a,l)=>XC(a,i,l,c=>ya(c)||ay(c),c=>_a(c)||kh(c),w1))(o,n,s).orThunk(()=>(C1(n,o,s),S.none()))})(e,t).exists(n=>(Li(e,n),!0)),S1=(e,t)=>ZC(e,t,t?_a:ya),wm=(e,t)=>Lg(e,!t).map(n=>{const r=n.toRange(),o=e.selection.getRng();return t?r.setStart(o.startContainer,o.startOffset):r.setEnd(o.endContainer,o.endOffset),r}).exists(n=>(Li(e,n),!0)),BO=e=>fe(["figcaption"],Je(e)),E1=(e,t)=>!!e.selection.isCollapsed()&&((n,r)=>{const o=M(n.getBody()),s=G.fromRangeStart(n.selection.getRng());return((i,a,l)=>{const c=_e(at,a);return Bs(M(i.container()),d=>l.isBlock(Je(d)),c).filter(BO)})(s,o,n.schema).exists(()=>{if(((i,a,l)=>a?HC(i.dom,l):jC(i.dom,l))(o,r,s)){const i=v1(n,o,r?hn:Ec);return n.selection.setRng(i),!0}return!1})})(e,t),N1=(e,t)=>((n,r)=>r?S.from(n.dom.getParent(n.selection.getNode(),"details")).map(o=>((s,i)=>{const a=s.selection.getRng(),l=G.fromRangeStart(a);return!(s.getBody().lastChild!==i||!HC(i,l)||(s.execCommand("InsertNewBlockAfter"),0))})(n,o)).getOr(!1):S.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(o=>S.from(n.dom.getParent(o,"details")).map(s=>((i,a,l)=>{const c=i.selection.getRng(),d=G.fromRangeStart(c);return!(i.getBody().firstChild!==a||!jC(l,d)||(i.execCommand("InsertNewBlockBefore"),0))})(n,s,o))).getOr(!1))(e,t),A1={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},T1=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,Ie=(e,...t)=>()=>e.apply(null,t),Md=(e,t)=>Mt(((n,r)=>gr((o=>Me(o,s=>({...A1,...s})))(n),o=>T1(o,r)?[o]:[]))(e,t),n=>n.action()),O1=(e,t)=>nr(((n,r)=>gr((o=>Me(o,s=>({...A1,...s})))(n),o=>T1(o,r)?[o]:[]))(e,t),n=>n.action()),R1=(e,t)=>{const n=t?In.Forwards:In.Backwards,r=e.selection.getRng();return KC(e,n,r,fd,hd,wo).exists(o=>(Li(e,o),!0))},D1=(e,t)=>{const n=t?1:-1,r=e.selection.getRng();return XC(e,n,r,fd,hd,wo).exists(o=>(Li(e,o),!0))},M1=(e,t)=>ZC(e,t,t?hd:fd),P1=$s([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Pd={...P1,none:e=>P1.none(e)},L1=(e,t,n)=>gr(le(e),r=>fn(r,t)?n(r)?[r]:[]:L1(r,t,n)),B1=(e,t)=>vi(e,"table",t),ep=(e,t,n,r,o=Zt)=>{const s=r===1;if(!s&&n<=0)return Pd.first(e[0]);if(s&&n>=e.length-1)return Pd.last(e[e.length-1]);{const i=n+r,a=e[i];return o(a)?Pd.middle(t,a):ep(e,t,i,r,o)}},I1=(e,t)=>B1(e,t).bind(n=>{const r=L1(n,"th,td",Zt);return he(r,o=>at(e,o)).map(o=>({index:o,all:r}))}),IO=["img","br"],FO=e=>{return(t=e,pf.getOption(t)).filter(n=>n.trim().length!==0||n.indexOf(Ut)>-1).isSome()||fe(IO,Je(e))||(n=>fi(n)&&cn(n,"contenteditable")==="false")(e);var t},F1=(e,t,n,r,o)=>{const s=Ln(M(n),"td,th,caption").map(a=>a.dom),i=De(((a,l)=>gr(l,c=>{const d=((m,h)=>({left:m.left-h,top:m.top-h,right:m.right+-2,bottom:m.bottom+-2,width:m.width+h,height:m.height+h}))(Ka(c.getBoundingClientRect()),-1);return[{x:d.left,y:a(d),cell:c},{x:d.right,y:a(d),cell:c}]}))(e,s),a=>t(a,o));return((a,l,c)=>bn(a,(d,m)=>d.fold(()=>S.some(m),h=>{const v=Math.sqrt(Math.abs(h.x-l)+Math.abs(h.y-c)),g=Math.sqrt(Math.abs(m.x-l)+Math.abs(m.y-c));return S.some(g<v?m:h)}),S.none()))(i,r,o).map(a=>a.cell)},UO=_e(F1,e=>e.bottom,(e,t)=>e.y<t),jO=_e(F1,e=>e.top,(e,t)=>e.y>t),U1=(e,t,n)=>{const r=e(t,n);return(o=>o.breakType===Zs.Wrap&&o.positions.length===0)(r)||!jt(n.getNode())&&(o=>o.breakType===Zs.Br&&o.positions.length===1)(r)?!((o,s,i)=>i.breakAt.exists(a=>o(s,a).breakAt.isSome()))(e,t,r):r.breakAt.isNone()},HO=_e(U1,Td),YO=_e(U1,Od),$O=(e,t,n,r)=>{const o=e.selection.getRng(),s=t?1:-1;return!(!k0()||!((i,a,l)=>{const c=G.fromRangeStart(a);return Xl(!i,l).exists(d=>d.isEqual(c))})(t,o,n)||(Pi(s,e,n,!t,!1).each(i=>{Li(e,i)}),0))},j1=(e,t,n)=>{const r=((s,i)=>{const a=i.getNode(s);return Or(a)?S.some(a):S.none()})(!!t,n),o=t===!1;r.fold(()=>Li(e,n.toRange()),s=>Xl(o,e.getBody()).filter(i=>i.isEqual(n)).fold(()=>Li(e,n.toRange()),i=>((a,l,c)=>{l.undoManager.transact(()=>{const d=a?ps:lr,m=v1(l,M(c),d);Li(l,m)})})(t,e,s)))},zO=(e,t,n,r)=>{const o=e.selection.getRng(),s=G.fromRangeStart(o),i=e.getBody();if(!t&&HO(r,s)){const a=((l,c,d)=>((m,h)=>en(h.getClientRects()).bind(v=>UO(m,v.left,v.top)).bind(v=>{return vm(Qo(g=v).map(y=>Td(g,y).positions.concat(y)).getOr([]),h);var g}))(c,d).orThunk(()=>en(d.getClientRects()).bind(m=>$g(FC(l,G.before(c)),m.left))).getOr(G.before(c)))(i,n,s);return j1(e,t,a),!0}if(t&&YO(r,s)){const a=((l,c,d)=>((m,h)=>Un(h.getClientRects()).bind(v=>jO(m,v.left,v.top)).bind(v=>{return vm(dr(g=v).map(y=>[y].concat(Od(g,y).positions)).getOr([]),h);var g}))(c,d).orThunk(()=>en(d.getClientRects()).bind(m=>$g(UC(l,G.after(c)),m.left))).getOr(G.after(c)))(i,n,s);return j1(e,t,a),!0}return!1},H1=(e,t,n)=>S.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>S.from(e.dom.getParent(r,"table")).map(o=>n(e,t,o,r))).getOr(!1),Y1=(e,t)=>H1(e,t,$O),tp=(e,t)=>H1(e,t,zO),$1=(e,t,n)=>n.fold(S.none,S.none,(r,o)=>{return(s=o,ta(s,FO)).map(i=>(a=>{const l=ec.exact(a,0,a,0);return KN(l)})(i));var s},r=>e.mode.isReadOnly()?S.none():(e.execCommand("mceTableInsertRowAfter"),z1(e,t,r))),z1=(e,t,n)=>{return $1(e,t,(o=yi,I1(r=n,void 0).fold(()=>Pd.none(r),s=>ep(s.all,r,s.index,1,o))));var r,o},WO=(e,t,n)=>{return $1(e,t,(o=yi,I1(r=n,void 0).fold(()=>Pd.none(),s=>ep(s.all,r,s.index,-1,o))));var r,o},W1=(e,t)=>{const n=["table","li","dl"],r=M(e.getBody()),o=i=>{const a=Je(i);return at(i,r)||fe(n,a)},s=e.selection.getRng();return((i,a)=>((l,c,d=ht)=>d(c)?S.none():fe(l,Je(c))?S.some(c):Da(c,l.join(","),m=>fn(m,"table")||d(m)))(["td","th"],i,a))(M(t?s.endContainer:s.startContainer),o).map(i=>(B1(i,o).each(a=>{e.model.table.clearSelectedCells(a.dom)}),e.selection.collapse(!t),(t?z1:WO)(e,o,i).each(a=>{e.selection.setRng(a)}),!0)).getOr(!1)},Ns=(e,t)=>({container:e,offset:t}),Cm=bt.DOM,km=e=>t=>e===t?-1:0,np=(e,t,n)=>{if(ne(e)&&t>=0)return S.some(Ns(e,t));{const r=qa(Cm);return S.from(r.backwards(e,t,km(e),n)).map(o=>Ns(o.container,o.container.data.length))}},rp=(e,t,n)=>{if(!ne(e))return S.none();const r=e.data;if(t>=0&&t<=r.length)return S.some(Ns(e,t));{const o=qa(Cm);return S.from(o.backwards(e,t,km(e),n)).bind(s=>{const i=s.container.data;return rp(s.container,t+i.length,n)})}},V1=(e,t,n)=>{if(!ne(e))return S.none();const r=e.data;if(t<=r.length)return S.some(Ns(e,t));{const o=qa(Cm);return S.from(o.forwards(e,t,km(e),n)).bind(s=>V1(s.container,t-r.length,n))}},op=(e,t,n,r,o)=>{const s=qa(e,(i=>a=>i.isBlock(a)||fe(["BR","IMG","HR","INPUT"],a.nodeName)||i.getContentEditable(a)==="false")(e));return S.from(s.backwards(t,n,r,o))},q1=e=>e!==""&&` \xA0\uFEFF\f
\r	\v`.indexOf(e)!==-1,VO=(e,t)=>e.substring(t.length),sp=(e,t,n,r=!1)=>{if(!(o=t).collapsed||!ne(o.startContainer))return S.none();var o;const s={text:"",offset:0},i=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return op(e,t.startContainer,t.startOffset,(a,l,c)=>(s.text=c+s.text,s.offset+=l,((d,m,h,v=!1)=>{let g;const y=h.charAt(0);for(g=m-1;g>=0;g--){const p=d.charAt(g);if(!v&&q1(p))return S.none();if(y===p&&gt(d,h,g,m))break}return S.some(g)})(s.text,s.offset,n,r).getOr(l)),i).bind(a=>{const l=t.cloneRange();if(l.setStart(a.container,a.offset),l.setEnd(t.endContainer,t.endOffset),l.collapsed)return S.none();const c=(d=>co(d.toString().replace(/\u00A0/g," ")))(l);return c.lastIndexOf(n)!==0?S.none():S.some({text:VO(c,n),range:l,trigger:n})})},G1=e=>{if((t=>t.nodeType===3)(e))return Ns(e,e.data.length);{const t=e.childNodes;return t.length>0?G1(t[t.length-1]):Ns(e,t.length)}},K1=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?K1(n[t],0):n.length>0&&(r=>r.nodeType===1)(e)&&n.length===t?G1(n[n.length-1]):Ns(e,t)},X1=(e,t,n,r={})=>{var o;const s=t(),i=(o=e.selection.getRng().startContainer.nodeValue)!==null&&o!==void 0?o:"",a=De(s.lookupByTrigger(n.trigger),c=>n.text.length>=c.minChars&&c.matches.getOrThunk(()=>(d=>m=>{const h=K1(m.startContainer,m.startOffset);return!((v,g)=>{var y;const p=(y=v.getParent(g.container,v.isBlock))!==null&&y!==void 0?y:v.getRoot();return op(v,g.container,g.offset,(_,k)=>k===0?-1:k,p).filter(_=>{const k=_.container.data.charAt(_.offset-1);return!q1(k)}).isSome()})(d,h)})(e.dom))(n.range,i,n.text));if(a.length===0)return S.none();const l=Promise.all(Me(a,c=>c.fetch(n.text,c.maxResults,r).then(d=>({matchText:n.text,items:d,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))));return S.some({lookupData:l,context:n})};var ts;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(ts||(ts={}));const ip=(e,t,n)=>e.stype===ts.Error?t(e.serror):n(e.svalue),cc=e=>({stype:ts.Value,svalue:e}),Ld=e=>({stype:ts.Error,serror:e}),qO=ip,ap=e=>rn(e)&&Ct(e).length>100?" removed due to size":JSON.stringify(e,null,2),xm=(e,t)=>Ld([{path:e,getErrorInfo:t}]),GO=(e,t)=>({extract:(n,r)=>St(r,e).fold(()=>((o,s)=>xm(o,()=>'Choice schema did not contain choice key: "'+s+'"'))(n,e),o=>((s,i,a,l)=>St(a,l).fold(()=>((c,d,m)=>xm(c,()=>'The chosen schema: "'+m+'" did not exist in branches: '+ap(d)))(s,a,l),c=>c.extract(s.concat(["branch: "+l]),i)))(n,r,t,o)),toString:()=>"chooseOn("+e+"). Possible values: "+Ct(t)}),Z1=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let r=0;r<t.length;r++){const o=t[r];for(const s in o)He(o,s)&&(n[s]=e(n[s],o[s]))}return n},lp=Z1((e,t)=>Sn(e)&&Sn(t)?lp(e,t):t),KO=Z1((e,t)=>t),Q1=e=>({tag:"defaultedThunk",process:ce(e)}),J1=e=>{const t=(r=>{const o=[],s=[];return Q(r,i=>{ip(i,a=>s.push(a),a=>o.push(a))}),{values:o,errors:s}})(e);return t.errors.length>0?(n=t.errors,pn(Ld,Be)(n)):cc(t.values);var n},ek=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},cp=e=>({extract:(t,n)=>{return r=e(n),o=s=>((i,a)=>xm(i,ce(a)))(t,s),r.stype===ts.Error?o(r.serror):r;var r,o},toString:ce("val")}),XO=cp(cc),tk=(e,t,n,r)=>r(St(e,t).getOrThunk(()=>n(e))),ZO=(e,t,n,r,o)=>{const s=a=>o.extract(t.concat([r]),a),i=a=>a.fold(()=>cc(S.none()),l=>{return d=o.extract(t.concat([r]),l),m=S.some,d.stype===ts.Value?{stype:ts.Value,svalue:m(d.svalue)}:d;var d,m});switch(e.tag){case"required":return((a,l,c,d)=>St(l,c).fold(()=>((m,h,v)=>xm(m,()=>'Could not find valid *required* value for "'+h+'" in '+ap(v)))(a,c,l),d))(t,n,r,s);case"defaultedThunk":return tk(n,r,e.process,s);case"option":return((a,l,c)=>c(St(a,l)))(n,r,i);case"defaultedOptionThunk":return((a,l,c,d)=>d(St(a,l).map(m=>m===!0?c(a):m)))(n,r,e.process,i);case"mergeWithThunk":return tk(n,r,ce({}),a=>{const l=lp(e.process(n),a);return s(l)})}},Sm=e=>({extract:(t,n)=>((r,o,s)=>{const i={},a=[];for(const l of s)ek(l,(c,d,m,h)=>{const v=ZO(m,r,o,c,h);qO(v,g=>{a.push(...g)},g=>{i[d]=g})},(c,d)=>{i[c]=d(o)});return a.length>0?Ld(a):cc(i)})(t,n,e),toString:()=>`obj{
`+Me(e,n=>ek(n,(r,o,s,i)=>r+" -> "+i.toString(),(r,o)=>"state("+r+")")).join(`
`)+"}"}),dp=e=>({extract:(t,n)=>{const r=Me(n,(o,s)=>e.extract(t.concat(["["+s+"]"]),o));return J1(r)},toString:()=>"array("+e.toString()+")"}),QO=pn(dp,Sm),JO=(e,t,n)=>{return r=((o,s,i)=>((a,l)=>a.stype===ts.Error?{stype:ts.Error,serror:l(a.serror)}:a)(s.extract([o],i),a=>({input:i,errors:a})))(e,t,n),ip(r,Rr.error,Rr.value);var r},up=(e,t)=>GO(e,Ir(t,Sm)),eR=ce(XO),Em=(e,t)=>cp(n=>{const r=typeof n;return e(n)?cc(n):Ld(`Expected type: ${t} but got: ${r}`)}),tR=Em(Jt,"number"),dc=Em(se,"string"),nR=Em(hr,"boolean"),mp=Em(dt,"function"),uc=(e,t,n,r)=>({tag:"field",key:e,newKey:t,presence:n,prop:r}),nk=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),rk=e=>{return t=n=>fe(e,n)?Rr.value(n):Rr.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`),cp(n=>t(n).fold(Ld,cc));var t},fp=(e,t)=>uc(e,e,{tag:"required",process:{}},t),ok=e=>fp(e,dc),hp=(e,t)=>uc(e,e,{tag:"required",process:{}},rk(t)),sk=e=>fp(e,mp),ik=(e,t)=>uc(e,e,{tag:"required",process:{}},dp(t)),gp=(e,t)=>uc(e,e,{tag:"option",process:{}},t),ul=e=>gp(e,dc),mc=(e,t,n)=>uc(e,e,Q1(t),n),ak=(e,t)=>mc(e,t,tR),Nm=(e,t)=>mc(e,t,dc),lk=(e,t,n)=>mc(e,t,rk(n)),pp=(e,t)=>mc(e,t,nR),Bi=(e,t)=>mc(e,t,mp),rR=ok("type"),oR=sk("fetch"),bp=sk("onAction"),sR=Bi("onSetup",()=>$e),iR=ul("text"),aR=ul("icon"),lR=ul("tooltip"),cR=ul("label"),dR=pp("active",!1),uR=pp("enabled",!0),ck=pp("primary",!1),Bd=e=>Nm("type",e),mR=Sm([rR,ok("trigger"),ak("minChars",1),((e,t)=>uc(e,e,Q1(1),eR()))("columns"),ak("maxResults",10),gp("matches",mp),oR,bp,(dk=dc,mc("highlightOn",[],dp(dk)))]);var dk;const vp=[uR,lR,aR,iR,sR,Nm("context","mode:design")],uk=[dR].concat(vp),Am=[Bi("predicate",ht),lk("scope","node",["node","editor"]),lk("position","selection",["node","selection","line"])],fR=vp.concat([Bd("contextformbutton"),Nm("align","end"),ck,bp,nk("original",En)]),hR=uk.concat([Bd("contextformbutton"),Nm("align","end"),ck,bp,nk("original",En)]),gR=vp.concat([Bd("contextformbutton")]),pR=uk.concat([Bd("contextformtogglebutton")]),yp=[cR,ik("commands",up("type",{contextformbutton:fR,contextformtogglebutton:hR})),gp("launch",up("type",{contextformbutton:gR,contextformtogglebutton:pR})),Bi("onInput",$e),Bi("onSetup",$e)];up("type",{contextform:[...Am,...yp,hp("type",["contextform"]),Bi("initValue",ce("")),ul("placeholder")],contextsliderform:[...Am,...yp,hp("type",["contextsliderform"]),Bi("initValue",ce(0)),Bi("min",ce(0)),Bi("max",ce(100))],contextsizeinputform:[...Am,...yp,hp("type",["contextsizeinputform"]),Bi("initValue",ce({width:"",height:""}))]}),Sm([Bd("contexttoolbar"),fp("items",((e,t)=>{const n=En;return{extract:(r,o)=>{const s=[];for(const i of e){const a=i.extract(r,o);if(a.stype===ts.Value)return{stype:ts.Value,svalue:n(a.svalue)};s.push(a)}return J1(s)},toString:()=>"oneOf("+Me(e,r=>r.toString()).join(", ")+")"}})([dc,QO([ul("name"),ul("label"),ik("items",dc)])]))].concat(Am));const bR=e=>{const t=e.ui.registry.getAll().popups,n=Ir(t,s=>{return(i=s,JO("Autocompleter",mR,i)).fold(a=>{throw new Error(`Errors: 
`+(c=>{const d=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:ce("... (only showing first ten failures)")}]):c;return Me(d,m=>"Failed path: ("+m.path.join(" > ")+`)
`+m.getErrorInfo())})((l=a).errors).join(`
`)+`

Input object: `+ap(l.input));var l},En);var i}),r=Na(to(n,s=>s.trigger)),o=Fo(n);return{dataset:n,triggers:r,lookupByTrigger:s=>De(o,i=>i.trigger===s)}},vR=e=>{const t=Cs(),n=kn(!1),r=t.isSet,o=()=>{r()&&((l=>{l.dispatch("AutocompleterEnd")})(e),n.set(!1),t.clear())},s=Nn(()=>bR(e)),i=l=>{(c=>t.get().map(d=>sp(e.dom,e.selection.getRng(),d.trigger,!0).bind(m=>X1(e,s,m,c))).getOrThunk(()=>((d,m)=>{const h=m(),v=d.selection.getRng();return((g,y,p)=>nr(p.triggers,_=>sp(g,y,_)))(d.dom,v,h).bind(g=>X1(d,m,g))})(e,s)))(l).fold(o,c=>{(d=>{r()||t.set({trigger:d.trigger,matchLength:d.text.length})})(c.context),c.lookupData.then(d=>{t.get().map(m=>{const h=c.context;m.trigger===h.trigger&&(t.set({...m,matchLength:h.text.length}),n.get()?(Rf(e,{range:h.range}),((v,g)=>{v.dispatch("AutocompleterUpdate",g)})(e,{lookupData:d})):(n.set(!0),Rf(e,{range:h.range}),((v,g)=>{v.dispatch("AutocompleterStart",g)})(e,{lookupData:d})))})})})},a=()=>t.get().bind(({trigger:l})=>{const c=e.selection.getRng();return sp(e.dom,c,l,n.get()).filter(({range:d})=>((m,h)=>{const v=m.compareBoundaryPoints(window.Range.START_TO_START,h),g=m.compareBoundaryPoints(window.Range.END_TO_END,h);return v>=0&&g<=0})(c,d)).map(({range:d})=>d)});e.addCommand("mceAutocompleterReload",(l,c)=>{const d=rn(c)?c.fetchOptions:{};i(d)}),e.addCommand("mceAutocompleterClose",o),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{a().each(l=>{Rf(e,{range:l})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>a().isSome()),((l,c)=>{const d=Yc(c.load,50);l.on("input",m=>{(m.inputType!=="insertCompositionText"||l.composing)&&d.throttle()}),l.on("keydown",m=>{const h=m.which;h===8?d.throttle():h===27?(d.cancel(),c.cancelIfNecessary()):h!==38&&h!==40||d.cancel()},!0),l.on("remove",d.cancel)})(e,{cancelIfNecessary:o,load:i})},yR=pt().browser.isSafari(),mk=e=>ua(M(e)),fk=(e,t)=>{var n;return e.startOffset===0&&e.endOffset===((n=t.textContent)===null||n===void 0?void 0:n.length)},Tm=(e,t)=>S.from(e.getParent(t.container(),"details")),hk=(e,t)=>Tm(e,t).isSome(),gk=(e,t)=>{const n=t.getNode();on(n)||e.selection.setCursorLocation(n,t.offset())},pk=(e,t,n)=>{const r=e.dom.getParent(t.container(),"details");if(r&&!r.open){const o=e.dom.select("summary",r)[0];o&&(n?dr(o):Qo(o)).each(s=>gk(e,s))}else gk(e,t)},bk=(e,t,n)=>{const{dom:r,selection:o}=e,s=e.getBody();if(n==="character"){const i=G.fromRangeStart(o.getRng()),a=r.getParent(i.container(),r.isBlock),l=Tm(r,i),c=a&&r.isEmpty(a),d=Tt(a?.previousSibling),m=Tt(a?.nextSibling);return!!(c&&(t?m:d)&&Kl(!t,s,i).exists(h=>hk(r,h)&&!Ra(l,Tm(r,h))))||Kl(t,s,i).fold(ht,h=>{const v=Tm(r,h);if(hk(r,h)&&!Ra(l,v)){if(t||pk(e,h,!1),a&&c){if(t&&d||!t&&m)return!0;pk(e,h,t),e.dom.remove(a)}return!0}return!1})}return!1},_R=(e,t,n,r)=>{const o=e.selection.getRng(),s=G.fromRangeStart(o),i=e.getBody();return r==="selection"?((a,l)=>{const c=l.startSummary.exists(h=>h.contains(a.startContainer)),d=l.startSummary.exists(h=>h.contains(a.endContainer)),m=l.startDetails.forall(h=>l.endDetails.forall(v=>h!==v));return(c||d)&&!(c&&d)||m})(o,t):n?((a,l)=>l.startSummary.exists(c=>((d,m)=>Qo(m).exists(h=>jt(h.getNode())&&Xr(m,h).exists(v=>v.isEqual(d))||h.isEqual(d)))(a,c)))(s,t)||((a,l,c)=>c.startDetails.exists(d=>Dr(a,l).forall(m=>!d.contains(m.container()))))(i,s,t):((a,l)=>l.startSummary.exists(c=>((d,m)=>dr(m).exists(h=>h.isEqual(d)))(a,c)))(s,t)||((a,l)=>l.startDetails.exists(c=>Xr(c,a).forall(d=>l.startSummary.exists(m=>!m.contains(a.container())&&m.contains(d.container())))))(s,t)},ml=(e,t,n)=>((r,o,s)=>((i,a)=>{const l=S.from(i.getParent(a.startContainer,"details")),c=S.from(i.getParent(a.endContainer,"details"));if(l.isSome()||c.isSome()){const d=l.bind(m=>S.from(i.select("summary",m)[0]));return S.some({startSummary:d,startDetails:l,endDetails:c})}return S.none()})(r.dom,r.selection.getRng()).fold(()=>bk(r,o,s),i=>_R(r,i,o,s)||bk(r,o,s)))(e,t,n)||yR&&((r,o,s)=>{const i=r.selection,a=i.getNode(),l=i.getRng(),c=G.fromRangeStart(l);return!!sf(a)&&(s==="selection"&&fk(l,a)||My(o,c,a)?mk(a):r.undoManager.transact(()=>{const d=i.getSel();let{anchorNode:m,anchorOffset:h,focusNode:v,focusOffset:g}=d??{};const y=()=>{ie(m)&&ie(h)&&ie(v)&&ie(g)&&d?.setBaseAndExtent(m,h,v,g)},p=(k,x)=>{Q(k.childNodes,A=>{ld(A)&&x.appendChild(A)})},_=r.dom.create("span",{"data-mce-bogus":"1"});p(a,_),a.appendChild(_),y(),s!=="word"&&s!=="line"||d==null||d.modify("extend",o?"right":"left",s),!i.isCollapsed()&&fk(i.getRng(),_)?mk(a):(r.execCommand(o?"ForwardDelete":"Delete"),m=d?.anchorNode,h=d?.anchorOffset,v=d?.focusNode,g=d?.focusOffset,p(_,a),y()),r.dom.remove(_)}),!0)})(e,t,n)?S.some($e):S.none(),vk=e=>(t,n,r={})=>{const o=t.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:$e,inputType:n},i=Kr(new InputEvent(e));return t.dispatch(e,{...i,...s,...r})},Id=vk("input"),Om=vk("beforeinput"),yk=pt(),_k=yk.os,wk=_k.isMacOS()||_k.isiOS(),wR=yk.browser.isFirefox(),fc=(e,t)=>{const n=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const s=(i=>{for(;i;){if(xe(i)||ne(i)&&i.data&&/[\r\n\s]/.test(i.data))return i;i=i.nextSibling}return null})(t.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&t.insertBefore(n.doc.createTextNode(Ut),t.firstChild)}const o=n.createRng();if(t.normalize(),t.hasChildNodes()){const s=new Cn(t,t);let i,a=t;for(;i=s.current();){if(ne(i)){o.setStart(i,0),o.setEnd(i,0);break}if(r[i.nodeName.toLowerCase()]){o.setStartBefore(i),o.setEndBefore(i);break}a=i,i=s.next()}i||(o.setStart(a,0),o.setEnd(a,0))}else jt(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),md(e,o)},Fd=(e,t)=>{const n=e.getRoot();let r,o=t;for(;o!==n&&o&&e.getContentEditable(o)!=="false";){if(e.getContentEditable(o)==="true"){r=o;break}o=o.parentNode}return o!==n?r:n},_p=e=>S.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),wp=e=>{e.innerHTML='<br data-mce-bogus="1">'},Ud=(e,t)=>{cr(e).toLowerCase()===t.tagName.toLowerCase()&&((n,r,o)=>{const s=n.dom;S.from(o.style).map(s.parseStyle).each(d=>{const m={...xc(M(r)),...d};s.setStyles(r,m)});const i=S.from(o.class).map(d=>d.split(/\s+/)),a=S.from(r.className).map(d=>De(d.split(/\s+/),m=>m!==""));Bt(i,a,(d,m)=>{const h=De(m,g=>!fe(d,g)),v=[...d,...h];s.setAttrib(r,"class",v.join(" "))});const l=["style","class"],c=Vt(o,(d,m)=>!fe(l,m));s.setAttribs(r,c)})(e,t,Jc(e))},Ck=(e,t,n,r,o=!0,s,i)=>{const a=e.dom,l=e.schema,c=cr(e),d=n?n.nodeName.toUpperCase():"";let m=t;const h=l.getTextInlineElements();let v;v=s||d==="TABLE"||d==="HR"?a.create(s||c,i||{}):n.cloneNode(!1);let g=v;if(o)do if(h[m.nodeName]){if(Eo(m)||No(m))continue;const y=m.cloneNode(!1);a.setAttrib(y,"id",""),v.hasChildNodes()?(y.appendChild(v.firstChild),v.appendChild(y)):(g=y,v.appendChild(y))}while((m=m.parentNode)&&m!==r);else a.setAttrib(v,"style",null),a.setAttrib(v,"class",null);return Ud(e,v),wp(g),v},kk=(e,t)=>{const n=e?.parentNode;return ie(n)&&n.nodeName===t},xk=e=>ie(e)&&/^(OL|UL|LI)$/.test(e.nodeName),Cp=e=>ie(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Rm=e=>{const t=e.parentNode;return Cp(t)?t:e},Dm=(e,t,n)=>{let r=e[n?"firstChild":"lastChild"];for(;r&&!xe(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},Sk=e=>bn(to(xc(M(e)),(t,n)=>`${n}: ${t};`),(t,n)=>t+n,""),CR=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),kp=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,xp=(e,t)=>ie(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false",Sp=(e,t,n)=>ne(t)?e?n===1&&t.data.charAt(n-1)===Bn?0:n:n===t.data.length-1&&t.data.charAt(n)===Bn?t.data.length:n:n,Ek={insert:(e,t)=>{let n,r,o,s,i=!1;const a=e.dom,l=e.schema.getNonEmptyElements(),c=e.selection.getRng(),d=cr(e),m=M(c.startContainer),h=we(m,c.startOffset),v=h.exists(j=>fi(j)&&!yi(j)),g=c.collapsed&&v,y=(j,$)=>Ck(e,n,N,A,cE(e),j,$),p=j=>{const $=Sp(j,n,r);if(ne(n)&&(j?$>0:$<n.data.length))return!1;if((n.parentNode===N||n===N)&&i&&!j||j&&xe(n)&&n===N.firstChild)return!0;if(kp(n,"TABLE")||kp(n,"HR"))return((U,X)=>U.nodeName==="BR"||U.nextSibling&&U.nextSibling.nodeName==="BR")(n)?!j:i&&!j||!i&&j;const D=new Cn(n,N);let B;for(ne(n)&&(j&&$===0?D.prev():j||$!==n.data.length||D.next());B=D.current();){if(xe(B)){if(!B.getAttribute("data-mce-bogus")){const U=B.nodeName.toLowerCase();if(l[U]&&U!=="br")return!1}}else if(ne(B)&&!sa(B.data))return!1;j?D.prev():D.next()}return!0},_=()=>{let j;return j=/^(H[1-6]|PRE|FIGURE)$/.test(o)&&O!=="HGROUP"?y(d):y(),(($,D)=>{const B=dE($);return!Wt(D)&&(se(B)?fe(oe.explode(B),D.nodeName.toLowerCase()):B)})(e,s)&&xp(a,s)&&a.isEmpty(N,void 0,{includeZwsp:!0})?j=a.split(s,N):a.insertAfter(j,N),fc(e,j),j};Yu(a,c).each(j=>{c.setStart(j.startContainer,j.startOffset),c.setEnd(j.endContainer,j.endOffset)}),n=c.startContainer,r=c.startOffset;const k=!(!t||!t.shiftKey),x=!(!t||!t.ctrlKey);xe(n)&&n.hasChildNodes()&&!g&&(i=r>n.childNodes.length-1,n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,r=i&&ne(n)?n.data.length:0);const A=Fd(a,n);if(!A||((j,$)=>{const D=j.dom.getParent($,"ol,ul,dl");return D!==null&&j.dom.getContentEditableParent(D)==="false"})(e,n))return;k||(n=((j,$,D,B,U)=>{var X,re;const te=j.dom,ye=(X=Fd(te,B))!==null&&X!==void 0?X:te.getRoot();let Ee=te.getParent(B,te.isBlock);if(!Ee||!xp(te,Ee)){if(Ee=Ee||ye,!Ee.hasChildNodes()){const Ce=te.create($);return Ud(j,Ce),Ee.appendChild(Ce),D.setStart(Ce,0),D.setEnd(Ce,0),Ce}let Ae,Re=B;for(;Re&&Re.parentNode!==Ee;)Re=Re.parentNode;for(;Re&&!te.isBlock(Re);)Ae=Re,Re=Re.previousSibling;const me=(re=Ae?.parentElement)===null||re===void 0?void 0:re.nodeName;if(Ae&&me&&j.schema.isValidChild(me,$.toLowerCase())){const Ce=Ae.parentNode,F=te.create($);for(Ud(j,F),Ce.insertBefore(F,Ae),Re=Ae;Re&&!te.isBlock(Re);){const H=Re.nextSibling;F.appendChild(Re),Re=H}D.setStart(B,U),D.setEnd(B,U)}}return B})(e,d,c,n,r));let N=a.getParent(n,a.isBlock)||a.getRoot();s=ie(N?.parentNode)?a.getParent(N.parentNode,a.isBlock):null,o=N?N.nodeName.toUpperCase():"";const O=s?s.nodeName.toUpperCase():"";if(O!=="LI"||x||(N=s,s=s.parentNode,o=O),xe(s)&&((j,$,D)=>!$&&D.nodeName.toLowerCase()===cr(j)&&j.dom.isEmpty(D)&&((B,U,X)=>{let re=U;for(;re&&re!==B&&Tt(re.nextSibling);){const ye=re.parentElement;if(!ye||(te=ye,!He(j.schema.getTextBlockElements(),te.nodeName.toLowerCase())))return Dc(ye);re=ye}var te;return!1})(j.getBody(),D))(e,k,N))return((j,$,D)=>{var B,U,X;const re=$(cr(j)),te=((ye,Ee)=>ye.dom.getParent(Ee,Dc))(j,D);te&&(j.dom.insertAfter(re,te),fc(j,re),((X=(U=(B=D.parentElement)===null||B===void 0?void 0:B.childNodes)===null||U===void 0?void 0:U.length)!==null&&X!==void 0?X:0)>1&&j.dom.remove(D))})(e,y,N);if(/^(LI|DT|DD)$/.test(o)&&xe(s)&&a.isEmpty(N))return void((j,$,D,B,U)=>{const X=j.dom,re=j.selection.getRng(),te=D.parentNode;if(D===j.getBody()||!te)return;var ye;xk(ye=D)&&xk(ye.parentNode)&&(U="LI");const Ee=Cp(B)?Sk(B):void 0;let Ae=Cp(B)&&Ee?$(U,{style:Sk(B)}):$(U);if(Dm(D,B,!0)&&Dm(D,B,!1))if(kk(D,"LI")){const Re=Rm(D);X.insertAfter(Ae,Re),(me=>{var Ce;return((Ce=me.parentNode)===null||Ce===void 0?void 0:Ce.firstChild)===me})(D)?X.remove(Re):X.remove(D)}else X.replace(Ae,D);else if(Dm(D,B,!0))kk(D,"LI")?(X.insertAfter(Ae,Rm(D)),Ae.appendChild(X.doc.createTextNode(" ")),Ae.appendChild(D)):te.insertBefore(Ae,D),X.remove(B);else if(Dm(D,B,!1))X.insertAfter(Ae,Rm(D)),X.remove(B);else{D=Rm(D);const Re=re.cloneRange();Re.setStartAfter(B),Re.setEndAfter(D);const me=Re.extractContents();if(U==="LI"&&((Ce,F)=>Ce.firstChild&&Ce.firstChild.nodeName==="LI")(me)){const Ce=De(Me(Ae.children,M),Jr(us("br")));Ae=me.firstChild,X.insertAfter(me,D),Q(Ce,F=>Ec(M(Ae),F)),Ee&&Ae.setAttribute("style",Ee)}else X.insertAfter(me,D),X.insertAfter(Ae,D);X.remove(B)}fc(j,Ae)})(e,y,s,N,d);if(!(g||N!==e.getBody()&&xp(a,N)))return;const L=N.parentNode;let P;if(g)P=y(d),h.fold(()=>{hn(m,M(P))},j=>{lr(j,M(P))}),e.selection.setCursorLocation(P,0);else if(zl(N))P=_f(N),a.isEmpty(N)&&wp(N),Ud(e,P),fc(e,P);else if(p(!1))P=_();else if(p(!0)&&L){const j=G.fromRangeStart(c),$=kh(j),D=M(N),B=qu(D,j,e.schema)?fy(D,j,e.schema).bind(X=>S.from(X.getNode())):S.none();P=L.insertBefore(y(),N);const U=kp(N,"HR")||$?P:B.getOr(N);fc(e,U)}else{const j=(D=>{const B=D.cloneRange();return B.setStart(D.startContainer,Sp(!0,D.startContainer,D.startOffset)),B.setEnd(D.endContainer,Sp(!1,D.endContainer,D.endOffset)),B})(c).cloneRange();j.setEndAfter(N);const $=j.extractContents();(D=>{Q(Tc(M(D),sn),B=>{const U=B.dom;U.nodeValue=co(U.data)})})($),(D=>{let B=D;do ne(B)&&(B.data=B.data.replace(/^[\r\n]+/,"")),B=B.firstChild;while(B)})($),P=$.firstChild,a.insertAfter($,N),((D,B,U)=>{var X;const re=[];if(!U)return;let te=U;for(;te=te.firstChild;){if(D.isBlock(te))return;xe(te)&&!B[te.nodeName.toLowerCase()]&&re.push(te)}let ye=re.length;for(;ye--;)te=re[ye],(!te.hasChildNodes()||te.firstChild===te.lastChild&&((X=te.firstChild)===null||X===void 0?void 0:X.nodeValue)===""||CR(D,te))&&D.remove(te)})(a,l,P),((D,B)=>{B.normalize();const U=B.lastChild;(!U||xe(U)&&/^(left|right)$/gi.test(D.getStyle(U,"float",!0)))&&D.add(B,"br")})(a,N),a.isEmpty(N)&&wp(N),P.normalize(),a.isEmpty(P)?(a.remove(P),_()):(Ud(e,P),fc(e,P))}a.setAttrib(P,"id",""),e.dispatch("NewBlock",{newBlock:P})},fakeEventName:"insertParagraph"},Nk=(e,t,n)=>{const r=e.dom.createRng();n?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),e.selection.setRng(r),md(e,r)},kR=(e,t)=>{const n=Ft("br");lr(M(t),n),e.undoManager.add()},xR=(e,t)=>{SR(e.getBody(),t)||ps(M(t),Ft("br"));const n=Ft("br");ps(M(t),n),Nk(e,n.dom,!1),e.undoManager.add()},SR=(e,t)=>{return n=G.after(t),!!jt(n.getNode())||Dr(e,G.after(t)).map(r=>jt(r.getNode())).getOr(!1);var n},Ak=e=>e&&e.nodeName==="A"&&"href"in e,ER=e=>e.fold(ht,Ak,Ak,ht),NR=(e,t)=>{t.fold($e,_e(kR,e),_e(xR,e),$e)},Tk={insert:(e,t)=>{const n=(r=>{const o=_e(sl,r),s=G.fromRangeStart(r.selection.getRng());return Xs(o,r.getBody(),s).filter(ER)})(e);n.isSome()?n.each(_e(NR,e)):((r,o)=>{const s=r.selection,i=r.dom,a=s.getRng();let l,c=!1;Yu(i,a).each(p=>{a.setStart(p.startContainer,p.startOffset),a.setEnd(p.endContainer,p.endOffset)});let d=a.startOffset,m=a.startContainer;if(xe(m)&&m.hasChildNodes()){const p=d>m.childNodes.length-1;m=m.childNodes[Math.min(d,m.childNodes.length-1)]||m,d=p&&ne(m)?m.data.length:0}let h=i.getParent(m,i.isBlock);const v=h&&h.parentNode?i.getParent(h.parentNode,i.isBlock):null,g=v?v.nodeName.toUpperCase():"",y=!(!o||!o.ctrlKey);g!=="LI"||y||(h=v),ne(m)&&d>=m.data.length&&(((p,_,k)=>{const x=new Cn(_,k);let A;const N=p.getNonEmptyElements();for(;A=x.next();)if(N[A.nodeName.toLowerCase()]||ne(A)&&A.length>0)return!0;return!1})(r.schema,m,h||i.getRoot())||(l=i.create("br"),a.insertNode(l),a.setStartAfter(l),a.setEndAfter(l),c=!0)),l=i.create("br"),Ef(i,a,l),Nk(r,l,c),r.undoManager.add()})(e,t)},fakeEventName:"insertLineBreak"},Ok=(e,t)=>_p(e).filter(n=>t.length>0&&fn(M(n),t)).isSome(),uo=$s([{br:[]},{block:[]},{none:[]}]),AR=(e,t)=>(n=>Ok(n,lE(n)))(e),Rk=e=>(t,n)=>(r=>_p(r).filter(o=>Hl(M(o))).isSome())(t)===e,Dk=(e,t)=>(n,r)=>(s=>_p(s).fold(ce(""),i=>i.nodeName.toUpperCase()))(n)===e.toUpperCase()===t,TR=e=>{const t=Fd(e.dom,e.selection.getStart());return Wt(t)},jd=e=>Dk("pre",e),Mm=e=>(t,n)=>sE(t)===e,OR=(e,t)=>(n=>Ok(n,aE(n)))(e),Pm=(e,t)=>t,RR=e=>{const t=cr(e),n=Fd(e.dom,e.selection.getStart());return ie(n)&&e.schema.isValidChild(n.nodeName,t)},DR=e=>{const t=e.selection.getRng(),n=M(t.startContainer),r=we(n,t.startOffset).map(o=>fi(o)&&!yi(o));return t.collapsed&&r.getOr(!0)},Po=(e,t)=>(n,r)=>bn(e,(o,s)=>o&&s(n,r),!0)?S.some(t):S.none(),Lm=(e,t,n)=>{if(!t.mode.isReadOnly()){if(t.selection.isCollapsed()||(r=>{r.execCommand("delete")})(t),ie(n)&&Om(t,e.fakeEventName).isDefaultPrevented())return;e.insert(t,n),ie(n)&&Id(t,e.fakeEventName)}},Mk=(e,t)=>{if(e.mode.isReadOnly())return;const n=()=>Lm(Tk,e,t),r=()=>Lm(Ek,e,t),o=((s,i)=>OC([Po([AR],uo.none()),Po([jd(!0),TR],uo.none()),Po([Dk("summary",!0)],uo.br()),Po([jd(!0),Mm(!1),Pm],uo.br()),Po([jd(!0),Mm(!1)],uo.block()),Po([jd(!0),Mm(!0),Pm],uo.block()),Po([jd(!0),Mm(!0)],uo.br()),Po([Rk(!0),Pm],uo.br()),Po([Rk(!0)],uo.block()),Po([OR],uo.br()),Po([Pm],uo.br()),Po([RR],uo.block()),Po([DR],uo.block())],[s,!(!i||!i.shiftKey)]).getOr(uo.none()))(e,t);switch(iE(e)){case"linebreak":o.fold(n,n,$e);break;case"block":o.fold(r,r,$e);break;case"invert":o.fold(r,n,$e);break;default:o.fold(n,r,$e)}},Pk=pt(),MR=Pk.os.isiOS()&&Pk.browser.isSafari(),Lk=(e,t)=>{var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact(()=>{Mk(e,t)}))},PR=pt(),Bk=e=>e.stopImmediatePropagation(),Ik=e=>e.keyCode===ve.PAGE_UP||e.keyCode===ve.PAGE_DOWN,Fk=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",Bk,!0):!n&&e.get()&&t.off("NodeChange",Bk),e.set(n)},Uk=(e,t)=>e===t||e.contains(t),jk=(e,t)=>{const n=t.container(),r=t.offset();return ne(n)?(n.insertData(r,e),S.some(G(n,r+e.length))):Nu(t).map(o=>{const s=zr(e);return t.isAtEnd()?ps(o,s):lr(o,s),G(s.dom,e.length)})},Hk=_e(jk,Ut),Yk=_e(jk," "),$k=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},LR=e=>{const t=G.fromRangeStart(e.selection.getRng()),n=M(e.getBody());if(e.selection.isCollapsed()){const r=_e(sl,e),o=G.fromRangeStart(e.selection.getRng());return Xs(r,e.getBody(),o).bind((s=>i=>i.fold(a=>Xr(s.dom,G.before(a)),a=>dr(a),a=>Qo(a),a=>Dr(s.dom,G.after(a))))(n)).map(s=>()=>((i,a,l)=>c=>yy(i,c,l)?Hk(a):Yk(a))(n,t,e.schema)(s).each($k(e)))}return S.none()},BR=e=>{return Pn(Qe.browser.isFirefox()&&e.selection.isEditable()&&(t=e.dom,n=e.selection.getRng().startContainer,t.isEditable(t.getParent(n,"summary"))),()=>{const r=M(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete"),((o,s,i)=>yy(o,s,i)?Hk(s):Yk(s))(r,G.fromRangeStart(e.selection.getRng()),e.schema).each($k(e))});var t,n},IR=e=>gN(e)?[{keyCode:ve.TAB,action:Ie(W1,e,!0)},{keyCode:ve.TAB,shiftKey:!0,action:Ie(W1,e,!1)}]:[],FR=e=>{if(e.addShortcut("Meta+P","","mcePrint"),vR(e),Ks(e))return kn(null);{const t=SO(e);return(n=>{n.on("beforeinput",r=>{n.selection.isEditable()&&!yt(r.getTargetRanges(),o=>!((s,i)=>!Uk(s.getBody(),i.startContainer)||!Uk(s.getBody(),i.endContainer)||Fv(s.dom,i))(n,o))||r.preventDefault()})})(e),(n=>{n.on("keyup compositionstart",_e(LO,n))})(e),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((s,i,a)=>{const l=Qe.os.isMacOS()||Qe.os.isiOS();Md([{keyCode:ve.RIGHT,action:Ie(k1,s,!0)},{keyCode:ve.LEFT,action:Ie(k1,s,!1)},{keyCode:ve.UP,action:Ie(x1,s,!1)},{keyCode:ve.DOWN,action:Ie(x1,s,!0)},...l?[{keyCode:ve.UP,action:Ie(wm,s,!1),metaKey:!0,shiftKey:!0},{keyCode:ve.DOWN,action:Ie(wm,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ve.RIGHT,action:Ie(Y1,s,!0)},{keyCode:ve.LEFT,action:Ie(Y1,s,!1)},{keyCode:ve.UP,action:Ie(tp,s,!1)},{keyCode:ve.DOWN,action:Ie(tp,s,!0)},{keyCode:ve.UP,action:Ie(tp,s,!1)},{keyCode:ve.UP,action:Ie(N1,s,!1)},{keyCode:ve.DOWN,action:Ie(N1,s,!0)},{keyCode:ve.RIGHT,action:Ie(R1,s,!0)},{keyCode:ve.LEFT,action:Ie(R1,s,!1)},{keyCode:ve.UP,action:Ie(D1,s,!1)},{keyCode:ve.DOWN,action:Ie(D1,s,!0)},{keyCode:ve.RIGHT,action:Ie(e1,s,i,!0)},{keyCode:ve.LEFT,action:Ie(e1,s,i,!1)},{keyCode:ve.RIGHT,ctrlKey:!l,altKey:l,action:Ie(EO,s,i)},{keyCode:ve.LEFT,ctrlKey:!l,altKey:l,action:Ie(NO,s,i)},{keyCode:ve.UP,action:Ie(E1,s,!1)},{keyCode:ve.DOWN,action:Ie(E1,s,!0)}],a).each(c=>{a.preventDefault()})})(n,r,o)})})(e,t),((n,r)=>{let o=!1;n.on("keydown",s=>{o=s.keyCode===ve.BACKSPACE,s.isDefaultPrevented()||((i,a,l)=>{const c=l.keyCode===ve.BACKSPACE?"deleteContentBackward":"deleteContentForward",d=i.selection.isCollapsed(),m=d?"character":"selection",h=v=>d?v?"word":"line":"selection";O1([{keyCode:ve.BACKSPACE,action:Ie(g1,i)},{keyCode:ve.BACKSPACE,action:Ie(Ig,i,!1)},{keyCode:ve.DELETE,action:Ie(Ig,i,!0)},{keyCode:ve.BACKSPACE,action:Ie(Pg,i,!1)},{keyCode:ve.DELETE,action:Ie(Pg,i,!0)},{keyCode:ve.BACKSPACE,action:Ie(qg,i,a,!1)},{keyCode:ve.DELETE,action:Ie(qg,i,a,!0)},{keyCode:ve.BACKSPACE,action:Ie(Uh,i,!1)},{keyCode:ve.DELETE,action:Ie(Uh,i,!0)},{keyCode:ve.BACKSPACE,action:Ie(ml,i,!1,m)},{keyCode:ve.DELETE,action:Ie(ml,i,!0,m)},...wk?[{keyCode:ve.BACKSPACE,altKey:!0,action:Ie(ml,i,!1,h(!0))},{keyCode:ve.DELETE,altKey:!0,action:Ie(ml,i,!0,h(!0))},{keyCode:ve.BACKSPACE,metaKey:!0,action:Ie(ml,i,!1,h(!1))}]:[{keyCode:ve.BACKSPACE,ctrlKey:!0,action:Ie(ml,i,!1,h(!0))},{keyCode:ve.DELETE,ctrlKey:!0,action:Ie(ml,i,!0,h(!0))}],{keyCode:ve.BACKSPACE,action:Ie(Ug,i,!1)},{keyCode:ve.DELETE,action:Ie(Ug,i,!0)},{keyCode:ve.BACKSPACE,action:Ie(Xg,i,!1)},{keyCode:ve.DELETE,action:Ie(Xg,i,!0)},{keyCode:ve.BACKSPACE,action:Ie(Dg,i,!1)},{keyCode:ve.DELETE,action:Ie(Dg,i,!0)},{keyCode:ve.BACKSPACE,action:Ie(Rg,i,!1)},{keyCode:ve.DELETE,action:Ie(Rg,i,!0)},{keyCode:ve.BACKSPACE,action:Ie(Gg,i,!1)},{keyCode:ve.DELETE,action:Ie(Gg,i,!0)},{keyCode:ve.BACKSPACE,action:Ie(Fg,i,!1)},{keyCode:ve.DELETE,action:Ie(Fg,i,!0)}],l).filter(v=>i.selection.isEditable()).each(v=>{l.preventDefault(),Om(i,c).isDefaultPrevented()||(v(),Id(i,c))})})(n,r,s)}),n.on("keyup",s=>{s.isDefaultPrevented()||((i,a,l)=>{Md([{keyCode:ve.BACKSPACE,action:Ie(_C,i)},{keyCode:ve.DELETE,action:Ie(_C,i)},...wk?[{keyCode:ve.BACKSPACE,altKey:!0,action:Ie(Dd,i)},{keyCode:ve.DELETE,altKey:!0,action:Ie(Dd,i)},...l?[{keyCode:wR?224:91,action:Ie(Dd,i)}]:[]]:[{keyCode:ve.BACKSPACE,ctrlKey:!0,action:Ie(Dd,i)},{keyCode:ve.DELETE,ctrlKey:!0,action:Ie(Dd,i)}]],a)})(n,s,o),o=!1})})(e,t),(n=>{let r=S.none();n.on("keydown",o=>{o.keyCode===ve.ENTER&&(MR&&(s=>{if(!s.collapsed)return!1;const i=s.startContainer;if(ne(i)){const a=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=i.data.charAt(s.startOffset-1);return a.test(l)}return!1})(n.selection.getRng())?(s=>{r=S.some(s.selection.getBookmark()),s.undoManager.add()})(n):Lk(n,o))}),n.on("keyup",o=>{o.keyCode===ve.ENTER&&r.each(()=>((s,i)=>{s.undoManager.undo(),r.fold($e,a=>s.selection.moveToBookmark(a)),Lk(s,i),r=S.none()})(n,o))})})(e),(n=>{n.on("keydown",r=>{r.isDefaultPrevented()||((o,s)=>{O1([{keyCode:ve.SPACEBAR,action:Ie(LR,o)},{keyCode:ve.SPACEBAR,action:Ie(BR,o)}],s).each(i=>{s.preventDefault(),Om(o,"insertText",{data:" "}).isDefaultPrevented()||(i(),Id(o,"insertText",{data:" "}))})})(n,r)})})(e),(n=>{n.on("input",r=>{r.isComposing||(o=>{const s=M(o.getBody());o.selection.isCollapsed()&&xA(s,G.fromRangeStart(o.selection.getRng()),o.schema).each(i=>{o.selection.setRng(i.toRange())})})(n)})})(e),(n=>{n.on("keydown",r=>{r.isDefaultPrevented()||((o,s)=>{Md([...IR(o)],s).each(i=>{s.preventDefault()})})(n,r)})})(e),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((s,i,a)=>{const l=Qe.os.isMacOS()||Qe.os.isiOS();Md([{keyCode:ve.END,action:Ie(S1,s,!0)},{keyCode:ve.HOME,action:Ie(S1,s,!1)},...l?[]:[{keyCode:ve.HOME,action:Ie(wm,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ve.END,action:Ie(wm,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ve.END,action:Ie(M1,s,!0)},{keyCode:ve.HOME,action:Ie(M1,s,!1)},{keyCode:ve.END,action:Ie(_m,s,!0,i)},{keyCode:ve.HOME,action:Ie(_m,s,!1,i)}],a).each(c=>{a.preventDefault()})})(n,r,o)})})(e,t),((n,r)=>{if(PR.os.isMacOS())return;const o=kn(!1);n.on("keydown",s=>{Ik(s)&&Fk(o,n,!0)}),n.on("keyup",s=>{s.isDefaultPrevented()||((i,a,l)=>{Md([{keyCode:ve.PAGE_UP,action:Ie(_m,i,!1,a)},{keyCode:ve.PAGE_DOWN,action:Ie(_m,i,!0,a)}],l)})(n,r,s),Ik(s)&&o.get()&&(Fk(o,n,!1),n.nodeChanged())})})(e,t),t}};class UR{constructor(t){let n;this.lastPath=[],this.editor=t;const r=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",o=>{const s=t.selection.getRng(),i={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};o.type!=="nodechange"&&ph(i,n)||t.dispatch("SelectionChange"),n=i}),t.on("contextmenu",()=>{Iu(t),t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const o=t.selection.getStart(!0);o&&Du(t)&&!r.isSameElementPath(o)&&t.dom.isChildOf(o,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",o=>{!o.isDefaultPrevented()&&Du(t)&&(t.selection.getNode().nodeName==="IMG"?To.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const n=this.editor,r=n.selection;let o;if(n.initialized&&r&&!UE(n)&&!Su(n)){const s=n.getBody();o=r.getStart(!0)||s,o.ownerDocument===n.getDoc()&&n.dom.isChildOf(o,s)||(o=s);const i=[];n.dom.getParent(o,a=>a===s||(i.push(a),!1)),n.dispatch("NodeChange",{...t,element:o,parents:i})}}isSameElementPath(t){let n;const r=this.editor,o=Fn(r.dom.getParents(t,Zt,r.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=o,!0}return this.lastPath=o,!1}}const zk=Vc("image"),Ep=Vc("event"),Bm=e=>t=>{t[Ep]=e},Wk=Bm(0),jR=Bm(2),HR=Bm(1),YR=e=>{const t=e;return S.from(t[Ep]).exists(n=>n===0)},Np=Vc("mode"),Im=e=>t=>{t[Np]=e},Vk=(e,t)=>Im(t)(e),qk=Im(0),Ap=Im(2),$R=Im(1),Gk=e=>t=>{const n=t;return S.from(n[Np]).exists(r=>r===e)},hc=Gk(0),Kk=Gk(1),zR=["none","copy","link","move"],WR=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],Tp=()=>{const e=new window.DataTransfer;let t="move",n="all";const r={get dropEffect(){return t},set dropEffect(o){fe(zR,o)&&(t=o)},get effectAllowed(){return n},set effectAllowed(o){YR(r)&&fe(WR,o)&&(n=o)},get items(){return((o,s)=>({...s,get length(){return s.length},add:(i,a)=>{if(hc(o)){if(!se(i))return s.add(i);if(!on(a))return s.add(i,a)}return null},remove:i=>{hc(o)&&s.remove(i)},clear:()=>{hc(o)&&s.clear()}}))(r,e.items)},get files(){return Kk(r)?Object.freeze({length:0,item:o=>null}):e.files},get types(){return e.types},setDragImage:(o,s,i)=>{var a;hc(r)&&(a={image:o,x:s,y:i},r[zk]=a,e.setDragImage(o,s,i))},getData:o=>Kk(r)?"":e.getData(o),setData:(o,s)=>{hc(r)&&e.setData(o,s)},clearData:o=>{hc(r)&&e.clearData(o)}};return qk(r),r},Xk=(e,t)=>e.setData("text/html",t),Zk="x-tinymce/html",Fm=ce(Zk),Op="<!-- "+Zk+" -->",VR=e=>Op+e,Qk=e=>e.indexOf(Op)!==-1,Jk="%MCEPASTEBIN%",Rp=e=>e.dom.get("mcepastebin"),qR=e=>ie(e)&&e.id==="mcepastebin",ex=e=>e===Jk,tx=(e,t)=>(oe.each(t,n=>{e=Rn(n,RegExp)?e.replace(n,""):e.replace(n[0],n[1])}),e),nx=e=>tx(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(t,n,r)=>n||r?Ut:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),rx=(e,t)=>({content:e,cancelled:t}),Dp=(e,t)=>(e.insertContent(t,{merge:rN(e),paste:!0}),!0),Mp=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),GR=(e,t,n)=>!(e.selection.isCollapsed()||!Mp(t))&&((r,o,s)=>(r.undoManager.extra(()=>{s(r,o)},()=>{r.execCommand("mceInsertLink",!1,o)}),!0))(e,t,n),KR=(e,t,n)=>!!((r,o)=>Mp(o)&&yt(g0(r),s=>Zn(o.toLowerCase(),`.${s.toLowerCase()}`)))(e,t)&&((r,o,s)=>(r.undoManager.extra(()=>{s(r,o)},()=>{r.insertContent('<img src="'+o+'">')}),!0))(e,t,n),XR=(e=>{let t=0;return()=>"mceclip"+t++})(),ZR=e=>{const t=Tp();return Xk(t,e),Ap(t),t},ox=(e,t,n,r,o)=>{const s=((i,a,l)=>((c,d,m)=>{const h=((g,y,p)=>g.dispatch("PastePreProcess",{content:y,internal:p}))(c,d,m),v=((g,y)=>{const p=oc({sanitize:h0(g),sandbox_iframes:p0(g),sandbox_iframes_exclusions:Bf(g),convert_unsafe_embeds:vN(g)},g.schema);p.addNodeFilter("meta",k=>{oe.each(k,x=>{x.remove()})});const _=p.parse(y,{forced_root_block:!1,isRootContent:!0});return ba({validate:!0},g.schema).serialize(_)})(c,h.content);return c.hasEventListeners("PastePostProcess")&&!h.isDefaultPrevented()?((g,y,p)=>{const _=g.dom.create("div",{style:"display:none"},y),k=((x,A,N)=>x.dispatch("PastePostProcess",{node:A,internal:N}))(g,_,p);return rx(k.node.innerHTML,k.isDefaultPrevented())})(c,v,m):rx(v,h.isDefaultPrevented())})(i,a,l))(e,t,n);if(!s.cancelled){const i=s.content,a=()=>((l,c,d)=>{d||!oN(l)?Dp(l,c):((m,h)=>{oe.each([GR,KR,Dp],v=>!v(m,h,Dp))})(l,c)})(e,i,r);o?Om(e,"insertFromPaste",{dataTransfer:ZR(i)}).isDefaultPrevented()||(a(),Id(e,"insertFromPaste")):a()}},Um=(e,t,n,r)=>{const o=n||Qk(t);ox(e,(s=>s.replace(Op,""))(t),o,!1,r)},Pp=(e,t,n)=>{const r=e.dom.encode(t).replace(/\r\n/g,`
`),o=((s,i,a)=>{const l=s.split(/\n\n/),c=((h,v)=>{let g="<"+h;const y=to(v,(p,_)=>_+'="'+Oe.encodeAllRaw(p)+'"');return y.length&&(g+=" "+y.join(" ")),g+">"})(i,a),d="</"+i+">",m=Me(l,h=>h.split(/\n/).join("<br />"));return m.length===1?m[0]:Me(m,h=>c+h+d).join("")})(ou(r,iN(e)),cr(e),Jc(e));ox(e,o,!1,!0,n)},sx=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const r=e.types[n];try{t[r]=e.getData(r)}catch{t[r]=""}}return t},Ca=(e,t)=>t in e&&e[t].length>0,ix=e=>Ca(e,"text/html")||Ca(e,"text/plain"),ax=(e,t,n)=>{const r=t.type==="paste"?t.clipboardData:t.dataTransfer;var o;if(xu(e)&&r){const s=((i,a)=>{const l=a.items?gr(xt(a.items),d=>d.kind==="file"?[d.getAsFile()]:[]):[],c=a.files?xt(a.files):[];return De(l.length>0?l:c,(d=>{const m=g0(d);return h=>_t(h.type,"image/")&&yt(m,v=>(g=>{const y=g.toLowerCase(),p={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return oe.hasOwn(p,y)?"image/"+p[y]:"image/"+y})(v)===h.type)})(i))})(e,r);if(s.length>0)return t.preventDefault(),(o=s,Promise.all(Me(o,i=>$_(i).then(a=>({file:i,uri:a}))))).then(i=>{n&&e.selection.setRng(n),Q(i,a=>{((l,c)=>{ag(c.uri).each(({data:d,type:m,base64Encoded:h})=>{const v=h?d:btoa(d),g=c.file,y=l.editorUpload.blobCache,p=y.getByData(v,m),_=p??((k,x,A,N)=>{const O=XR(),L=n0(k)&&ie(A.name),P=L?((D,B)=>{const U=B.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ie(U)?D.dom.encode(U[1]):void 0})(k,A.name):O,j=L?A.name:void 0,$=x.create(O,A,N,P,j);return x.add($),$})(l,y,g,v);Um(l,`<img src="${_.blobUri()}">`,!1,!0)})})(e,a)})}),!0}return!1},Lp=(e,t,n,r,o)=>{let s=nx(n);const i=Ca(t,Fm())||Qk(n),a=!i&&(c=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(c))(s),l=Mp(s);(ex(s)||!s.length||a&&!l)&&(r=!0),(r||l)&&(s=Ca(t,"text/plain")&&a?t["text/plain"]:(c=>{const d=zn(),m=oc({},d);let h="";const v=d.getVoidElements(),g=oe.makeMap("script noscript style textarea video audio iframe object"," "),y=d.getBlockElements(),p=_=>{const k=_.name,x=_;if(k!=="br"){if(k!=="wbr")if(v[k]&&(h+=" "),g[k])h+=" ";else{if(_.type===3&&(h+=_.value),!(_.name in d.getVoidElements())){let A=_.firstChild;if(A)do p(A);while(A=A.next)}y[k]&&x.next&&(h+=`
`,k==="p"&&(h+=`
`))}}else h+=`
`};return c=tx(c,[/<!\[[^\]]+\]>/g]),p(m.parse(c)),h})(s)),ex(s)||(r?Pp(e,s,o):Um(e,s,i,o))},QR=(e,t,n)=>{((r,o,s)=>{let i;r.on("keydown",a=>{(l=>ve.metaKeyPressed(l)&&l.keyCode===86||l.shiftKey&&l.keyCode===45)(a)&&!a.isDefaultPrevented()&&(i=a.shiftKey&&a.keyCode===86)}),r.on("paste",a=>{if(a.isDefaultPrevented()||(d=>{var m,h;return Qe.os.isAndroid()&&((h=(m=d.clipboardData)===null||m===void 0?void 0:m.items)===null||h===void 0?void 0:h.length)===0})(a))return;const l=s.get()==="text"||i;i=!1;const c=sx(a.clipboardData);!ix(c)&&ax(r,a,o.getLastRng()||r.selection.getRng())||(Ca(c,"text/html")?(a.preventDefault(),Lp(r,c,c["text/html"],l,!0)):Ca(c,"text/plain")&&Ca(c,"text/uri-list")?(a.preventDefault(),Lp(r,c,c["text/plain"],l,!0)):(o.create(),To.setEditorTimeout(r,()=>{const d=o.getHtml();o.remove(),Lp(r,c,d,l,!1)},0)))})})(e,t,n),(r=>{const o=i=>_t(i,"webkit-fake-url"),s=i=>_t(i,"data:");r.parser.addNodeFilter("img",(i,a,l)=>{if(!xu(r)&&(c=>{var d;return((d=c.data)===null||d===void 0?void 0:d.paste)===!0})(l))for(const c of i){const d=c.attr("src");se(d)&&!c.attr("data-mce-object")&&d!==Qe.transparentSrc&&(o(d)||!aN(r)&&s(d))&&c.remove()}})})(e)},lx=(e,t,n,r)=>{((o,s,i)=>{if(!o)return!1;try{return o.clearData(),o.setData("text/html",s),o.setData("text/plain",i),o.setData(Fm(),s),!0}catch{return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},cx=e=>(t,n)=>{const{dom:r,selection:o}=e,s=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=r.create("div",{contenteditable:"true"},t);r.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(i),r.add(e.getBody(),s);const a=o.getRng();i.focus();const l=r.createRng();l.selectNodeContents(i),o.setRng(l),To.setEditorTimeout(e,()=>{o.setRng(a),r.remove(s),n()},0)},dx=e=>({html:VR(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),ux=e=>!e.selection.isCollapsed()||(t=>!!t.dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody()))(e),mx=(e,t)=>{var n,r;return rl.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(r=t.clientY)!==null&&r!==void 0?r:0,e.getDoc())},fx=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},JR=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,hx=e=>oe.trim(e).replace(JR,_n).toLowerCase(),eD=(e,t,n)=>{const r=tN(e);if(n||r==="all"||!nN(e))return t;const o=r?r.split(/[, ]/):[];if(o&&r!=="none"){const s=e.dom,i=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(a,l,c,d)=>{const m=s.parseStyle(s.decode(c)),h={};for(let g=0;g<o.length;g++){const y=m[o[g]];let p=y,_=s.getStyle(i,o[g],!0);/color/.test(o[g])&&(p=hx(p),_=hx(_)),_!==p&&(h[o[g]]=y)}const v=s.serializeStyle(h,"span");return v?l+' style="'+v+'"'+d:l+d})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,i,a,l)=>i+' style="'+a+'"'+l),t},tD=e=>{const t=kn(!1),n=kn(sN(e)?"text":"html"),r=(o=>{const s=kn(null);return{create:()=>((i,a)=>{const{dom:l,selection:c}=i,d=i.getBody();a.set(c.getRng());const m=l.add(i.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Jk);Qe.browser.isFirefox()&&l.setStyle(m,"left",l.getStyle(d,"direction",!0)==="rtl"?65535:-65535),l.bind(m,"beforedeactivate focusin focusout",h=>{h.stopPropagation()}),m.focus(),c.select(m,!0)})(o,s),remove:()=>((i,a)=>{const l=i.dom;if(Rp(i)){let c;const d=a.get();for(;c=Rp(i);)l.remove(c),l.unbind(c);d&&i.selection.setRng(d)}a.set(null)})(o,s),getEl:()=>Rp(o),getHtml:()=>(i=>{const a=i.dom,l=(h,v)=>{h.appendChild(v),a.remove(v,!0)},[c,...d]=De(i.getBody().childNodes,qR);Q(d,h=>{l(c,h)});const m=a.select("div[id=mcepastebin]",c);for(let h=m.length-1;h>=0;h--){const v=a.create("div");c.insertBefore(v,m[h]),l(v,m[h])}return c?c.innerHTML:""})(o),getLastRng:s.get}})(e);(o=>{(Qe.browser.isChromium()||Qe.browser.isSafari())&&((s,i)=>{s.on("PastePreProcess",a=>{a.content=i(s,a.content,a.internal)})})(o,eD)})(e),((o,s)=>{o.addCommand("mceTogglePlainTextPaste",()=>{((i,a)=>{a.get()==="text"?(a.set("html"),Xb(i,!1)):(a.set("text"),Xb(i,!0)),i.focus()})(o,s)}),o.addCommand("mceInsertClipboardContent",(i,a)=>{a.html&&Um(o,a.html,a.internal,!1),a.text&&Pp(o,a.text,!1)})})(e,n),(o=>{const s=l=>c=>{l(o,c)},i=QE(o);dt(i)&&o.on("PastePreProcess",s(i));const a=JE(o);dt(a)&&o.on("PastePostProcess",s(a))})(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>n.get()==="text"),e.on("PreInit",()=>{(o=>{o.on("cut",(s=>i=>{!i.isDefaultPrevented()&&ux(s)&&s.selection.isEditable()&&lx(i,dx(s),cx(s),()=>{if(Qe.browser.isChromium()||Qe.browser.isFirefox()){const a=s.selection.getRng();To.setEditorTimeout(s,()=>{s.selection.setRng(a),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(o)),o.on("copy",(s=>i=>{!i.isDefaultPrevented()&&ux(s)&&lx(i,dx(s),cx(s),$e)})(o))})(e),((o,s)=>{ZE(o)&&o.on("dragend dragover draggesture dragdrop drop drag",i=>{i.preventDefault(),i.stopPropagation()}),xu(o)||o.on("drop",i=>{const a=i.dataTransfer;a&&(l=>yt(l.files,c=>/^image\//.test(c.type)))(a)&&i.preventDefault()}),o.on("drop",i=>{if(i.isDefaultPrevented())return;const a=mx(o,i);if(Wt(a))return;const l=sx(i.dataTransfer),c=Ca(l,Fm());if((!ix(l)||(g=>{const y=g["text/plain"];return!!y&&y.indexOf("file://")===0})(l))&&ax(o,i,a))return;const d=l[Fm()],m=d||l["text/html"]||l["text/plain"],h=((g,y,p,_)=>{const k=g.getParent(p,x=>Ni(y,x));if(!Tt(g.getParent(p,"summary")))return!0;if(k&&He(_,"text/html")){const x=new DOMParser().parseFromString(_["text/html"],"text/html").body;return!Tt(x.querySelector(k.nodeName.toLowerCase()))}return!1})(o.dom,o.schema,a.startContainer,l),v=s.get();v&&!h||m&&(i.preventDefault(),To.setEditorTimeout(o,()=>{o.undoManager.transact(()=>{(d||v&&h)&&o.execCommand("Delete"),fx(o,a);const g=nx(m);l["text/html"]?Um(o,g,c,!0):Pp(o,g,!0)})}))}),o.on("dragstart",i=>{s.set(!0)}),o.on("dragover dragend",i=>{xu(o)&&!s.get()&&(i.preventDefault(),fx(o,mx(o,i))),i.type==="dragend"&&s.set(!1)}),(i=>{i.on("input",a=>{const l=c=>Tt(c.querySelector("summary"));if(a.inputType==="deleteByDrag"){const c=De(i.dom.select("details"),l);Q(c,d=>{jt(d.firstChild)&&d.firstChild.remove();const m=i.dom.create("summary");m.appendChild(Yl().dom),d.prepend(m)})}})})(o)})(e,t),QR(e,r,n)})},nD=jt,gx=ne,rD=e=>Lt(e.dom),px=e=>t=>at(M(e),t),bx=(e,t)=>Bs(M(e),rD,px(t)),vx=(e,t,n)=>{const r=new Cn(e,t),o=n?r.next.bind(r):r.prev.bind(r);let s=e;for(let i=n?e:o();i&&!nD(i);i=o())xs(i)&&(s=i);return s},oD=e=>{const t=((n,r,o)=>{const s=G.fromRangeStart(n).getNode(),i=((d,m,h)=>Bs(M(d),v=>(g=>qr(g.dom))(v)||h.isBlock(Je(v)),px(m)).getOr(M(m)).dom)(s,r,o),a=vx(s,i,!1),l=vx(s,i,!0),c=document.createRange();return bx(a,i).fold(()=>{gx(a)?c.setStart(a,0):c.setStartBefore(a)},d=>c.setStartBefore(d.dom)),bx(l,i).fold(()=>{gx(l)?c.setEnd(l,l.data.length):c.setEndAfter(l)},d=>c.setEndAfter(d.dom)),c})(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Wh(t))};var gc;(function(e){e.Before="before",e.After="after"})(gc||(gc={}));const sD=(e,t)=>Math.abs(e.left-t),iD=(e,t)=>Math.abs(e.right-t),aD=(e,t)=>(n=>bn(n,(r,o)=>r.fold(()=>S.some(o),s=>{const i=Math.min(o.left,s.left),a=Math.min(o.top,s.top),l=Math.max(o.right,s.right),c=Math.max(o.bottom,s.bottom);return S.some({top:a,right:l,bottom:c,left:i,width:l-i,height:c-a})}),S.none()))(De(e,n=>{return(r=t)>=(o=n).top&&r<=o.bottom;var r,o})).fold(()=>[[],e],n=>{const{pass:r,fail:o}=Kn(e,s=>((i,a)=>{const l=((c,d)=>Math.max(0,Math.min(c.bottom,d.bottom)-Math.max(c.top,d.top)))(i,a)/Math.min(i.height,a.height);return((c,d)=>c.top<d.bottom&&c.bottom>d.top)(i,a)&&l>.5})(s,n));return[r,o]}),lD=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),Bp=(e,t,n,r)=>{const o=d=>xs(d.node)?S.some(d):xe(d.node)?Bp(xt(d.node.childNodes),t,n,!1):S.none(),s=(d,m)=>{const h=eo(d,(v,g)=>m(v,t,n)-m(g,t,n));return nr(h,o).map(v=>r&&!ne(v.node)&&h.length>1?((g,y,p)=>o(y).filter(_=>Math.abs(p(g,t,n)-p(_,t,n))<2&&ne(_.node)))(v,h[1],m).getOr(v):v)},[i,a]=aD(WC(e),n),{pass:l,fail:c}=Kn(a,d=>d.top<n);return s(i,lD).orThunk(()=>s(c,pb)).orThunk(()=>s(l,pb))},yx=(e,t,n)=>((r,o,s)=>{const i=M(r),a=Wr(i),l=_l(a,o,s).filter(c=>vr(i,c)).getOr(i);return((c,d,m,h)=>{const v=(g,y)=>{const p=De(g.dom.childNodes,Jr(_=>xe(_)&&_.classList.contains("mce-drag-container")));return y.fold(()=>Bp(p,m,h,!0),_=>{const k=De(p,x=>x!==_.dom);return Bp(k,m,h,!0)}).orThunk(()=>(at(g,c)?S.none():b(g)).bind(_=>v(_,S.some(g))))};return v(d,S.none())})(i,l,o,s)})(e,t,n).filter(r=>nd(r.node)).map(r=>((o,s)=>({node:o.node,position:sD(o,s)<iD(o,s)?gc.Before:gc.After}))(r,t)),_x=e=>{var t,n;const r=e.getBoundingClientRect(),o=e.ownerDocument,s=o.documentElement,i=o.defaultView;return{top:r.top+((t=i?.scrollY)!==null&&t!==void 0?t:0)-s.clientTop,left:r.left+((n=i?.scrollX)!==null&&n!==void 0?n:0)-s.clientLeft}},wx=e=>({target:e,srcElement:e}),cD=(e,t,n,r)=>{const o=((s,i)=>{const a=(l=>{const c=Tp(),d=(m=>{const h=m;return S.from(h[Np])})(l);return Ap(l),Wk(c),c.dropEffect=l.dropEffect,c.effectAllowed=l.effectAllowed,(m=>{const h=m;return S.from(h[zk])})(l).each(m=>c.setDragImage(m.image,m.x,m.y)),Q(l.types,m=>{m!=="Files"&&c.setData(m,l.getData(m))}),Q(l.files,m=>c.items.add(m)),(m=>{const h=m;return S.from(h[Ep])})(l).each(m=>{((h,v)=>{Bm(v)(h)})(c,m)}),d.each(m=>{Vk(l,m),Vk(c,m)}),c})(s);return i==="dragstart"?(Wk(a),qk(a)):i==="drop"?(jR(a),Ap(a)):(HR(a),$R(a)),a})(n,e);return on(r)?((s,i,a)=>{const l=Hi("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:$e,stopImmediatePropagation:$e,stopPropagation:$e,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:a,...wx(i)}})(e,t,o):((s,i,a,l)=>({...i,dataTransfer:l,type:s,...wx(a)}))(e,r,t,o)},Cx=Lt,dD=((...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1})(Cx,qr),uD=(e,t,n,r)=>{const o=e.dom,s=t.cloneNode(!0);o.setStyles(s,{width:n,height:r}),o.setAttrib(s,"data-mce-selected",null);const i=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),o.setStyles(s,{margin:0,boxSizing:"border-box"}),i.appendChild(s),i},jm=(e,t)=>n=>()=>{const r=e==="left"?n.scrollX:n.scrollY;n.scroll({[e]:r+t,behavior:"smooth"})},kx=jm("left",-32),xx=jm("left",32),Sx=jm("top",-32),Ex=jm("top",32),Nx=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Hd=(e,t,n,r,o)=>{t==="dragstart"&&Xk(r,e.dom.getOuterHTML(n));const s=cD(t,n,r,o);return e.dispatch(t,s)},mD=(e,t)=>{const n=Fl((o,s)=>((i,a,l)=>{i._selectionOverrides.hideFakeCaret(),yx(i.getBody(),a,l).fold(()=>i.selection.placeCaretAt(a,l),c=>{const d=i._selectionOverrides.showCaret(1,c.node,c.position===gc.Before,!1);d?i.selection.setRng(d):i.selection.placeCaretAt(a,l)})})(t,o,s),0);t.on("remove",n.cancel);const r=e;return o=>e.on(s=>{const i=Math.max(Math.abs(o.screenX-s.screenX),Math.abs(o.screenY-s.screenY));if(!s.dragging&&i>10){const c=Hd(t,"dragstart",s.element,s.dataTransfer,o);if(ie(c.dataTransfer)&&(s.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;s.dragging=!0,t.focus()}if(s.dragging){const c=o.currentTarget===t.getDoc().documentElement,d=((m,h)=>({pageX:h.pageX-m.relX,pageY:h.pageY+5}))(s,((m,h)=>{return v=(p=>p.inline?_x(p.getBody()):{left:0,top:0})(m),g=(p=>{const _=p.getBody();return p.inline?{left:_.scrollLeft,top:_.scrollTop}:{left:0,top:0}})(m),y=((p,_)=>{if(_.target.ownerDocument!==p.getDoc()){const k=_x(p.getContentAreaContainer()),x=(A=>{const N=A.getBody(),O=A.getDoc().documentElement,L={left:N.scrollLeft,top:N.scrollTop},P={left:N.scrollLeft||O.scrollLeft,top:N.scrollTop||O.scrollTop};return A.inline?L:P})(p);return{left:_.pageX-k.left+x.left,top:_.pageY-k.top+x.top}}return{left:_.pageX,top:_.pageY}})(m,h),{pageX:y.left-v.left+g.left,pageY:y.top-v.top+g.top};var v,g,y})(t,o));a=s.ghost,l=t.getBody(),a.parentNode!==l&&l.appendChild(a),((m,h,v,g,y,p,_,k,x,A,N,O)=>{let L=0,P=0;m.style.left=h.pageX+"px",m.style.top=h.pageY+"px",h.pageX+v>y&&(L=h.pageX+v-y),h.pageY+g>p&&(P=h.pageY+g-p),m.style.width=v-L+"px",m.style.height=g-P+"px";const j=x.clientHeight,$=x.clientWidth,D=_+x.getBoundingClientRect().top,B=k+x.getBoundingClientRect().left;N.on(U=>{U.intervalId.clear(),U.dragging&&O&&(_+8>=j?U.intervalId.set(Ex(A)):_-8<=0?U.intervalId.set(Sx(A)):k+8>=$?U.intervalId.set(xx(A)):k-8<=0?U.intervalId.set(kx(A)):D+16>=window.innerHeight?U.intervalId.set(Ex(window)):D-16<=0?U.intervalId.set(Sx(window)):B+16>=window.innerWidth?U.intervalId.set(xx(window)):B-16<=0&&U.intervalId.set(kx(window)))})})(s.ghost,d,s.width,s.height,s.maxX,s.maxY,o.clientY,o.clientX,t.getContentAreaContainer(),t.getWin(),r,c),n.throttle(o.clientX,o.clientY)}var a,l})},Ax=(e,t,n)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&n.fold(()=>Hd(t,"dragend",r.element,r.dataTransfer),o=>Hd(t,"dragend",r.element,r.dataTransfer,o))}),Tx(e)},Tx=e=>{e.on(t=>{t.intervalId.clear(),Nx(t.ghost)}),e.clear()},fD=e=>{const t=Cs(),n=bt.DOM,r=document,o=((l,c)=>d=>{if((m=>m.button===0)(d)){const m=Mt(c.dom.getParents(d.target),dD).getOr(null);if(ie(m)&&((h,v,g)=>Cx(g)&&g!==v&&h.isEditable(g.parentElement))(c.dom,c.getBody(),m)){const h=c.dom.getPos(m),v=c.getBody(),g=c.getDoc().documentElement;l.set({element:m,dataTransfer:Tp(),dragging:!1,screenX:d.screenX,screenY:d.screenY,maxX:(c.inline?v.scrollWidth:g.offsetWidth)-2,maxY:(c.inline?v.scrollHeight:g.offsetHeight)-2,relX:d.pageX-h.x,relY:d.pageY-h.y,width:m.offsetWidth,height:m.offsetHeight,ghost:uD(c,m,m.offsetWidth,m.offsetHeight),intervalId:lf(100)})}}})(t,e),s=mD(t,e),i=((l,c)=>d=>{l.on(m=>{var h;if(m.intervalId.clear(),m.dragging){if(((v,g,y)=>!Wt(g)&&g!==y&&!v.dom.isChildOf(g,y)&&v.dom.isEditable(g))(c,(v=>{const g=v.getSel();if(ie(g)){const y=g.getRangeAt(0).startContainer;return ne(y)?y.parentNode:y}return null})(c.selection),m.element)){const v=(h=c.getDoc().elementFromPoint(d.clientX,d.clientY))!==null&&h!==void 0?h:c.getBody();Hd(c,"drop",v,m.dataTransfer,d).isDefaultPrevented()||c.undoManager.transact(()=>{((g,y)=>{const p=g.getParent(y.parentNode,g.isBlock);Nx(y),p&&p!==g.getRoot()&&g.isEmpty(p)&&ua(M(p))})(c.dom,m.element),(g=>{const y=g.getData("text/html");return y===""?S.none():S.some(y)})(m.dataTransfer).each(g=>c.insertContent(g)),c._selectionOverrides.hideFakeCaret()})}Hd(c,"dragend",c.getBody(),m.dataTransfer,d)}}),Tx(l)})(t,e),a=((l,c)=>d=>Ax(l,c,S.some(d)))(t,e);e.on("mousedown",o),e.on("mousemove",s),e.on("mouseup",i),n.bind(r,"mousemove",s),n.bind(r,"mouseup",a),e.on("remove",()=>{n.unbind(r,"mousemove",s),n.unbind(r,"mouseup",a)}),e.on("keydown",l=>{l.keyCode===ve.ESC&&Ax(t,e,S.none())})},Yd=Lt,Ox=(e,t)=>il(e.getBody(),t),hD=e=>{const t=e.selection,n=e.dom,r=e.getBody(),o=EN(e,r,n.isBlock,()=>nc(e)),s="sel-"+n.uniqueId(),i="data-mce-selected";let a;const l=p=>p!==r&&(Yd(p)||wo(p))&&n.isChildOf(p,r)&&n.isEditable(p.parentNode),c=(p,_,k,x=!0)=>e.dispatch("ShowCaret",{target:_,direction:p,before:k}).isDefaultPrevented()?null:(x&&t.scrollIntoView(_,p===-1),o.show(k,_)),d=p=>xo(p)||pu(p)||bu(p),m=p=>d(p.startContainer)||d(p.endContainer),h=p=>{const _=e.schema.getVoidElements(),k=n.createRng(),x=p.startContainer,A=p.startOffset,N=p.endContainer,O=p.endOffset;return He(_,x.nodeName.toLowerCase())?A===0?k.setStartBefore(x):k.setStartAfter(x):k.setStart(x,A),He(_,N.nodeName.toLowerCase())?O===0?k.setEndBefore(N):k.setEndAfter(N):k.setEnd(N,O),k},v=(p,_)=>{if(!p)return null;if(p.collapsed){if(!m(p)){const N=_?1:-1,O=id(N,r,p),L=O.getNode(!_);if(ie(L)){if(nd(L))return c(N,L,!!_&&!O.isAtEnd(),!1);if(ma(L)&&Lt(L.nextSibling)){const j=n.createRng();return j.setStart(L,0),j.setEnd(L,0),j}}const P=O.getNode(_);if(ie(P)){if(nd(P))return c(N,P,!_&&!O.isAtEnd(),!1);if(ma(P)&&Lt(P.previousSibling)){const j=n.createRng();return j.setStart(P,1),j.setEnd(P,1),j}}}return null}let k=p.startContainer,x=p.startOffset;const A=p.endOffset;if(ne(k)&&x===0&&Yd(k.parentNode)&&(k=k.parentNode,x=n.nodeIndex(k),k=k.parentNode),!xe(k))return null;if(A===x+1&&k===p.endContainer){const N=k.childNodes[x];if(l(N))return(O=>{const L=O.cloneNode(!0),P=e.dispatch("ObjectSelected",{target:O,targetClone:L});if(P.isDefaultPrevented())return null;const j=((D,B)=>{const U=M(e.getBody()),X=e.getDoc(),re=wl(U,"#"+s).getOrThunk(()=>{const Ee=$r('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',X);return tn(Ee,"id",s),hn(U,Ee),Ee}),te=n.createRng();ra(re),_i(re,[zr(Ut,X),M(B),zr(Ut,X)]),te.setStart(re.dom.firstChild,1),te.setEnd(re.dom.lastChild,0),La(re,{top:n.getPos(D,e.getBody()).y+"px"}),fv(re);const ye=t.getSel();return ye&&(ye.removeAllRanges(),ye.addRange(te)),te})(O,P.targetClone),$=M(O);return Q(Ln(M(e.getBody()),`*[${i}]`),D=>{at($,D)||dn(D,i)}),n.getAttrib(O,i)||O.setAttribute(i,"1"),a=O,y(),j})(N)}return null},g=()=>{a&&a.removeAttribute(i),wl(M(e.getBody()),"#"+s).each(Pt),a=null},y=()=>{o.hide()};return Ks(e)||(e.on("click",p=>{n.isEditable(p.target)||(p.preventDefault(),e.focus())}),e.on("blur NewBlock",g),e.on("ResizeWindow FullscreenStateChanged",o.reposition),e.on("tap",p=>{const _=p.target,k=Ox(e,_);Yd(k)?(p.preventDefault(),Ad(e,k).each(v)):l(_)&&Ad(e,_).each(v)},!0),e.on("mousedown",p=>{const _=p.target;if(_!==r&&_.nodeName!=="HTML"&&!n.isChildOf(_,r)||!((x,A,N)=>{const O=M(x.getBody()),L=x.inline?O:M(Wr(O).dom.documentElement),P=((j,$,D,B)=>{const U=(X=>X.dom.getBoundingClientRect())($);return{x:D-(j?U.left+$.dom.clientLeft+YT($):0),y:B-(j?U.top+$.dom.clientTop+HT($):0)}})(x.inline,L,A,N);return((j,$,D)=>{const B=UT(j),U=jT(j);return $>=0&&D>=0&&$<=B&&D<=U})(L,P.x,P.y)})(e,p.clientX,p.clientY))return;g(),y();const k=Ox(e,_);Yd(k)?(p.preventDefault(),Ad(e,k).each(v)):yx(r,p.clientX,p.clientY).each(x=>{var A;p.preventDefault(),(A=c(1,x.node,x.position===gc.Before,!1))&&t.setRng(A),ys(k)?k.focus():e.getBody().focus()})}),e.on("keypress",p=>{ve.modifierPressed(p)||Yd(t.getNode())&&p.preventDefault()}),e.on("GetSelectionRange",p=>{let _=p.range;if(a){if(!a.parentNode)return void(a=null);_=_.cloneRange(),_.selectNode(a),p.range=_}}),e.on("SetSelectionRange",p=>{p.range=h(p.range);const _=v(p.range,p.forward);_&&(p.range=_)}),e.on("AfterSetSelectionRange",p=>{const _=p.range,k=_.startContainer.parentElement;var x;m(_)||xe(x=k)&&x.id==="mcepastebin"||y(),(A=>ie(A)&&n.hasClass(A,"mce-offscreen-selection"))(k)||g()}),(p=>{fD(p),YE(p)&&(_=>{const k=N=>{if(!N.isDefaultPrevented()){const O=N.dataTransfer;O&&(fe(O.types,"Files")||O.files.length>0)&&(N.preventDefault(),N.type==="drop"&&mm(_,"Dropped file type is not supported"))}},x=N=>{Fu(_,N.target)&&k(N)},A=()=>{const N=bt.DOM,O=_.dom,L=document,P=_.inline?_.getBody():_.getDoc(),j=["drop","dragover"];Q(j,$=>{N.bind(L,$,x),O.bind(P,$,k)}),_.on("remove",()=>{Q(j,$=>{N.unbind(L,$,x),O.unbind(P,$,k)})})};_.on("init",()=>{To.setEditorTimeout(_,A,0)})})(p)})(e),(p=>{const _=Fl(()=>{if(!p.removed&&p.getBody().contains(document.activeElement)){const k=p.selection.getRng();if(k.collapsed){const x=Mg(p,k,!1);p.selection.setRng(x)}}},0);p.on("focus",()=>{_.throttle()}),p.on("blur",()=>{_.cancel()})})(e),(p=>{p.on("init",()=>{p.on("focusin",_=>{const k=_.target;if(wo(k)){const x=il(p.getBody(),k),A=Lt(x)?x:k;p.selection.getNode()!==A&&Ad(p,A).each(N=>p.selection.setRng(N))}})})})(e)),{showCaret:c,showBlockCaretContainer:p=>{p.hasAttribute("data-mce-caret")&&(_f(p),t.scrollIntoView(p))},hideFakeCaret:y,destroy:()=>{o.destroy(),a=null}}},gD=(e,t)=>{let n=t;for(let r=e.previousSibling;ne(r);r=r.previousSibling)n+=r.data.length;return n},Rx=(e,t,n,r,o)=>{if(ne(n)&&(r<0||r>n.data.length))return[];const s=o&&ne(n)?[gD(n,r)]:[r];let i=n;for(;i!==t&&i.parentNode;)s.push(e.nodeIndex(i,o)),i=i.parentNode;return i===t?s.reverse():[]},Ip=(e,t,n,r,o,s,i=!1)=>({start:Rx(e,t,n,r,i),end:Rx(e,t,o,s,i)}),Dx=(e,t)=>{const n=t.slice(),r=n.pop();return Jt(r)?bn(n,(o,s)=>o.bind(i=>S.from(i.childNodes[s])),S.some(e)).bind(o=>ne(o)&&(r<0||r>o.data.length)?S.none():S.some({node:o,offset:r})):S.none()},Mx=(e,t)=>Dx(e,t.start).bind(({node:n,offset:r})=>Dx(e,t.end).map(({node:o,offset:s})=>{const i=document.createRange();return i.setStart(n,r),i.setEnd(o,s),i})),pc=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const r=t.parentNode;e.remove(t,ne(t.firstChild)&&sa(t.firstChild.data)),pc(e,r,n)}},Hm=(e,t,n,r=!0)=>{const o=t.startContainer.parentNode,s=t.endContainer.parentNode;t.deleteContents(),r&&!n(t.startContainer)&&(ne(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),ne(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),pc(e,o,n),o!==s&&pc(e,s,n))},Ym=(e,t)=>S.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),Fp=(e,t,n)=>{const r=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:Yb(r).concat(e.blockPatterns),inlinePatterns:$b(r).concat(e.inlinePatterns)}},Up=(e,t,n,r)=>{const o=e.createRng();return o.setStart(t,0),o.setEnd(n,r),o.toString()},Px=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),$m=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},Lx=(e,t,n)=>{const r=Mx(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=r.startContainer,s=r.endContainer,i=r.endOffset===0?s:s.splitText(r.endOffset),a=r.startOffset===0?o:o.splitText(r.startOffset),l=a.parentNode;return{prefix:t,end:i.parentNode.insertBefore(Px(e,t+"-end"),i),start:l.insertBefore(Px(e,t+"-start"),a)}},Bx=(e,t,n)=>{pc(e,e.get(t.prefix+"-end"),n),pc(e,e.get(t.prefix+"-start"),n)},jp=e=>e.start.length===0,Ix=(e,t,n,r)=>{const o=t.start;var s;return op(e,r.container,r.offset,(s=o,(i,a)=>{const l=i.data.substring(0,a),c=l.lastIndexOf(s.charAt(s.length-1)),d=l.lastIndexOf(s);return d!==-1?d+s.length:c!==-1?c+1:-1}),n).bind(i=>{var a,l;const c=(l=(a=n.textContent)===null||a===void 0?void 0:a.indexOf(o))!==null&&l!==void 0?l:-1;if(c!==-1&&i.offset>=c+o.length){const d=e.createRng();return d.setStart(i.container,i.offset-o.length),d.setEnd(i.container,i.offset),S.some(d)}{const d=i.offset-o.length;return rp(i.container,d,n).map(m=>{const h=e.createRng();return h.setStart(m.container,m.offset),h.setEnd(i.container,i.offset),h}).filter(m=>m.toString()===o).orThunk(()=>Ix(e,t,n,Ns(i.container,0)))}})},pD=(e,t,n,r)=>{const o=e.dom,s=o.getRoot(),i=n.pattern,a=n.position.container,l=n.position.offset;return rp(a,l-n.pattern.end.length,t).bind(c=>{const d=Ip(o,s,c.container,c.offset,a,l,r);if(jp(i))return S.some({matches:[{pattern:i,startRng:d,endRng:d}],position:c});{const m=zm(e,n.remainingPatterns,c.container,c.offset,t,r),h=m.getOr({matches:[],position:c}),v=h.position;return((y,p,_,k,x,A=!1)=>{if(p.start.length===0&&!A){const N=y.createRng();return N.setStart(_,k),N.setEnd(_,k),S.some(N)}return np(_,k,x).bind(N=>Ix(y,p,x,N).bind(O=>{var L;return A&&(O.endContainer===N.container&&O.endOffset===N.offset||N.offset===0&&((L=O.endContainer.textContent)===null||L===void 0?void 0:L.length)===O.endOffset)?S.none():S.some(O)}))})(o,i,v.container,v.offset,t,m.isNone()).map(y=>{const p=((_,k,x,A=!1)=>Ip(_,k,x.startContainer,x.startOffset,x.endContainer,x.endOffset,A))(o,s,y,r);return{matches:h.matches.concat([{pattern:i,startRng:p,endRng:d}]),position:Ns(y.startContainer,y.startOffset)}})}})},zm=(e,t,n,r,o,s)=>{const i=e.dom;return np(n,r,i.getRoot()).bind(a=>{const l=Up(i,o,n,r);for(let c=0;c<t.length;c++){const d=t[c];if(!Zn(l,d.end))continue;const m=t.slice();m.splice(c,1);const h=pD(e,o,{pattern:d,remainingPatterns:m,position:a},s);if(h.isNone()&&r>0)return zm(e,t,n,r-1,o,s);if(h.isSome())return h}return S.none()})},Fx=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?Q(t.format,r=>{e.formatter.apply(r)}):e.execCommand(t.cmd,!1,t.value)},Ux=(e,t,n,r,o,s)=>{var i;return((a,l)=>{const c=Dn(a,d=>yt(l,m=>d.pattern.start===m.pattern.start&&d.pattern.end===m.pattern.end));return a.length===l.length?c?a:l:a.length>l.length?a:l})(zm(e,o.inlinePatterns,n,r,t,s).fold(()=>[],a=>a.matches),zm(e,(i=o.inlinePatterns,eo(i,(a,l)=>l.end.length-a.end.length)),n,r,t,s).fold(()=>[],a=>a.matches))},jx=(e,t)=>{if(t.length===0)return;const n=e.dom,r=e.selection.getBookmark(),o=((s,i)=>{const a=Vc("mce_textpattern"),l=Nr(i,(c,d)=>{const m=Lx(s,a+`_end${c.length}`,d.endRng);return c.concat([{...d,endMarker:m}])},[]);return Nr(l,(c,d)=>{const m=l.length-c.length-1,h=jp(d.pattern)?d.endMarker:Lx(s,a+`_start${m}`,d.startRng);return c.concat([{...d,startMarker:h}])},[])})(n,t);Q(o,s=>{const i=n.getParent(s.startMarker.start,n.isBlock),a=l=>l===i;jp(s.pattern)?((l,c,d,m)=>{const h=$m(l.dom,d);Hm(l.dom,h,m),Fx(l,c,h)})(e,s.pattern,s.endMarker,a):((l,c,d,m,h)=>{const v=l.dom,g=$m(v,m),y=$m(v,d);Hm(v,y,h),Hm(v,g,h);const p={prefix:d.prefix,start:d.end,end:m.start},_=$m(v,p);Fx(l,c,_)})(e,s.pattern,s.startMarker,s.endMarker,a),Bx(n,s.endMarker,a),Bx(n,s.startMarker,a)}),e.selection.moveToBookmark(r)},Hx=(e,t,n)=>((r,o,s)=>{if(ne(r)&&0>=r.length)return S.some(Ns(r,0));{const i=qa(Cm);return S.from(i.forwards(r,0,km(r),s)).map(a=>Ns(a.container,0))}})(t,0,t).map(r=>{const o=r.container;return V1(o,n.start.length,t).each(s=>{const i=e.createRng();i.setStart(o,0),i.setEnd(s.container,s.offset),Hm(e,i,a=>a===t)}),o}),Yx=e=>(t,n)=>{const r=t.dom,o=n.pattern,s=Mx(r.getRoot(),n.range).getOrDie("Unable to resolve path range");return Ym(t,s).each(i=>{o.type==="block-format"?((a,l)=>{const c=l.get(a);return ct(c)&&en(c).exists(d=>He(d,"block"))})(o.format,t.formatter)&&t.undoManager.transact(()=>{e(t.dom,i,o),t.formatter.apply(o.format)}):o.type==="block-command"&&t.undoManager.transact(()=>{e(t.dom,i,o),t.execCommand(o.cmd,!1,o.value)})}),!0},$x=e=>(t,n)=>{const r=(s=>eo(s,(i,a)=>a.start.length-i.start.length))(t),o=n.replace(Ut," ");return Mt(r,s=>e(s,n,o))},zx=(e,t)=>(n,r,o,s,i)=>{var a;i===void 0&&(i=(a=r.textContent)!==null&&a!==void 0?a:"");const l=n.dom,c=cr(n);return l.is(r,c)?e(o.blockPatterns,i).map(d=>t&&oe.trim(i).length===d.start.length?[]:[{pattern:d,range:Ip(l,l.getRoot(),r,0,r,0,s)}]).getOr([]):[]},bD=Yx((e,t,n)=>{Hx(e,t,n).each(r=>{const o=M(r),s=qc(o);/^\s[^\s]/.test(s)&&db(o,s.slice(1))})}),vD=$x((e,t,n)=>t.indexOf(e.start)===0||n.indexOf(e.start)===0),yD=zx(vD,!0),_D=Yx(Hx),wD=$x((e,t,n)=>t===e.start||n===e.start),CD=zx(wD,!1),Wx=(e,t,n)=>{for(let r=0;r<e.length;r++)if(n(e[r],t))return!0;return!1},kD=e=>{const t=[",",".",";",":","!","?"],n=[32],r=()=>{return i=lN(e).filter(l=>l.type!=="inline-command"&&l.type!=="block-command"||e.queryCommandSupported(l.cmd)),a=cN(e),{inlinePatterns:$b(i),blockPatterns:Yb(i),dynamicPatternsLookup:a};var i,a},o=()=>(i=>i.options.isSet("text_patterns_lookup"))(e);e.on("keydown",i=>{if(i.keyCode===13&&!ve.modifierPressed(i)&&e.selection.isCollapsed()&&e.selection.isEditable()){const a=Of(r(),"enter");(a.inlinePatterns.length>0||a.blockPatterns.length>0||o())&&((l,c)=>((d,m)=>{const h=d.selection.getRng();return Ym(d,h).map(v=>{var g;const y=Math.max(0,h.startOffset),p=Fp(m,v,(g=v.textContent)!==null&&g!==void 0?g:"");return{inlineMatches:Ux(d,v,h.startContainer,y,p,!0),blockMatches:yD(d,v,p,!0)}}).filter(({inlineMatches:v,blockMatches:g})=>g.length>0||v.length>0)})(l,c).fold(ht,({inlineMatches:d,blockMatches:m})=>(l.undoManager.add(),l.undoManager.extra(()=>{l.execCommand("mceInsertNewLine")},()=>{(g=>{g.insertContent(Bn,{preserve_zwsp:!0})})(l),jx(l,d),((g,y)=>{if(y.length===0)return;const p=g.selection.getBookmark();Q(y,_=>bD(g,_)),g.selection.moveToBookmark(p)})(l,m);const h=l.selection.getRng(),v=np(h.startContainer,h.startOffset,l.dom.getRoot());l.execCommand("mceInsertNewLine"),v.each(g=>{const y=g.container;y.data.charAt(g.offset-1)===Fa&&(y.deleteData(g.offset-1,1),pc(l.dom,y.parentNode,p=>p===l.dom.getRoot()))})}),!0)))(e,a)&&i.preventDefault()}},!0),e.on("keydown",i=>{if(i.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const a=Of(r(),"space");(a.blockPatterns.length>0||o())&&((l,c)=>((d,m)=>{const h=d.selection.getRng();return Ym(d,h).map(v=>{const g=Math.max(0,h.startOffset),y=Up(d.dom,v,h.startContainer,g),p=Fp(m,v,y);return CD(d,v,p,!1,y)}).filter(v=>v.length>0)})(l,c).fold(ht,d=>(l.undoManager.transact(()=>{((m,h)=>{Q(h,v=>_D(m,v))})(l,d)}),!0)))(e,a)&&i.preventDefault()}},!0);const s=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const i=Of(r(),"space");(i.inlinePatterns.length>0||o())&&((a,l)=>{const c=a.selection.getRng();Ym(a,c).map(d=>{const m=Math.max(0,c.startOffset-1),h=Up(a.dom,d,c.startContainer,m),v=Fp(l,d,h),g=Ux(a,d,c.startContainer,m,v,!1);g.length>0&&a.undoManager.transact(()=>{jx(a,g)})})})(e,i)}};e.on("keyup",i=>{Wx(n,i,(a,l)=>a===l.keyCode&&!ve.modifierPressed(l))&&s()}),e.on("keypress",i=>{Wx(t,i,(a,l)=>a.charCodeAt(0)===l.charCode)&&To.setEditorTimeout(e,s)})},xD=e=>{const t=oe.each,n=ve.BACKSPACE,r=ve.DELETE,o=e.dom,s=e.selection,i=e.parser,a=Qe.browser,l=a.isFirefox(),c=a.isChromium()||a.isSafari(),d=Qe.deviceType.isiPhone()||Qe.deviceType.isiPad(),m=Qe.os.isMacOS()||Qe.os.isiOS(),h=(D,B)=>{try{e.getDoc().execCommand(D,!1,String(B))}catch{}},v=D=>D.isDefaultPrevented(),g=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},y=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",D=>{let B;if(D.target===e.getDoc().documentElement)if(B=s.getRng(),e.getBody().focus(),D.type==="mousedown"){if(xo(B.startContainer))return;s.placeCaretAt(D.clientX,D.clientY)}else s.setRng(B)})},p=()=>{Range.prototype.getClientRects||e.on("mousedown",D=>{if(!v(D)&&D.target.nodeName==="HTML"){const B=e.getBody();B.blur(),To.setEditorTimeout(e,()=>{B.focus()})}})},_=()=>{const D=u0(e);e.on("click",B=>{const U=B.target;/^(IMG|HR)$/.test(U.nodeName)&&o.isEditable(U)&&(B.preventDefault(),e.selection.select(U),e.nodeChanged()),U.nodeName==="A"&&o.hasClass(U,D)&&U.childNodes.length===0&&o.isEditable(U.parentNode)&&(B.preventDefault(),s.select(U))})},k=()=>{e.on("keydown",D=>{if(!v(D)&&D.keyCode===n&&s.isCollapsed()&&s.getRng().startOffset===0){const B=s.getNode().previousSibling;if(B&&B.nodeName&&B.nodeName.toLowerCase()==="table")return D.preventDefault(),!1}return!0})},x=()=>{c0(e)||e.on("BeforeExecCommand mousedown",()=>{h("StyleWithCSS",!1),h("enableInlineTableEditing",!1),a0(e)||h("enableObjectResizing",!1)})},A=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},N=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},O=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",D=>{let B;D.target.nodeName==="HTML"&&(B=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(B),e.selection.normalize(),e.nodeChanged())}))},L=()=>{m&&e.on("keydown",D=>{!ve.metaKeyPressed(D)||D.shiftKey||D.keyCode!==37&&D.keyCode!==39||(D.preventDefault(),e.selection.getSel().modify("move",D.keyCode===37?"backward":"forward","lineboundary"))})},P=()=>{e.on("click",D=>{let B=D.target;do if(B.tagName==="A")return void D.preventDefault();while(B=B.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},j=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",D=>{D.preventDefault()})})},$=$e;return Ks(e)?(c&&(y(),_(),j(),g(),d&&(N(),O(),P())),l&&(p(),x(),A(),L())):(e.on("keydown",D=>{if(v(D)||D.keyCode!==ve.BACKSPACE)return;let B=s.getRng();const U=B.startContainer,X=B.startOffset,re=o.getRoot();let te=U;if(B.collapsed&&X===0){for(;te.parentNode&&te.parentNode.firstChild===te&&te.parentNode!==re;)te=te.parentNode;te.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,te),B=o.createRng(),B.setStart(U,0),B.setEnd(U,0),s.setRng(B))}}),(()=>{const D=B=>{const U=o.create("body"),X=B.cloneContents();return U.appendChild(X),s.serializer.serialize(U,{format:"html"})};e.on("keydown",B=>{const U=B.keyCode;if(!v(B)&&(U===r||U===n)&&e.selection.isEditable()){const X=e.selection.isCollapsed(),re=e.getBody();if(X&&!ws(e.schema,re)||!X&&!(te=>{const ye=D(te),Ee=o.createRng();return Ee.selectNode(e.getBody()),ye===D(Ee)})(e.selection.getRng()))return;B.preventDefault(),e.setContent(""),re.firstChild&&o.isBlock(re.firstChild)?e.selection.setCursorLocation(re.firstChild,0):e.selection.setCursorLocation(re,0),e.nodeChanged()}})})(),Qe.windowsPhone||e.on("keyup focusin mouseup",D=>{ve.modifierPressed(D)||(B=>{const U=B.getBody(),X=B.selection.getRng();return X.startContainer===X.endContainer&&X.startContainer===U&&X.startOffset===0&&X.endOffset===U.childNodes.length})(e)||s.normalize()},!0),c&&(y(),_(),e.on("init",()=>{h("DefaultParagraphSeparator",cr(e))}),j(),k(),i.addNodeFilter("br",D=>{let B=D.length;for(;B--;)D[B].attr("class")==="Apple-interchange-newline"&&D[B].remove()}),d?(N(),O(),P()):g()),l&&(e.on("keydown",D=>{if(!v(D)&&D.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&s.getRng().startOffset===0){const B=s.getNode(),U=B.previousSibling;if(B.nodeName==="HR")return o.remove(B),void D.preventDefault();U&&U.nodeName&&U.nodeName.toLowerCase()==="hr"&&(o.remove(U),D.preventDefault())}}}),p(),(()=>{const D=()=>{const U=o.getAttribs(s.getStart().cloneNode(!1));return()=>{const X=s.getStart();X!==e.getBody()&&(o.setAttrib(X,"style",null),t(U,re=>{X.setAttributeNode(re.cloneNode(!0))}))}},B=()=>!s.isCollapsed()&&o.getParent(s.getStart(),o.isBlock)!==o.getParent(s.getEnd(),o.isBlock);e.on("keypress",U=>{let X;return!(!(v(U)||U.keyCode!==8&&U.keyCode!==46)&&B()&&(X=D(),e.getDoc().execCommand("delete",!1),X(),U.preventDefault(),1))}),o.bind(e.getDoc(),"cut",U=>{if(!v(U)&&B()){const X=D();To.setEditorTimeout(e,()=>{X()})}})})(),x(),e.on("SetContent ExecCommand",D=>{D.type!=="setcontent"&&D.command!=="mceInsertLink"||t(o.select("a:not([data-mce-block])"),B=>{var U;let X=B.parentNode;const re=o.getRoot();if(X?.lastChild===B){for(;X&&!o.isBlock(X);){if(((U=X.parentNode)===null||U===void 0?void 0:U.lastChild)!==X||X===re)return;X=X.parentNode}o.add(X,"br",{"data-mce-bogus":1})}})}),A(),L(),k())),{refreshContentEditable:$,isHidden:()=>{if(!l||e.removed)return!1;const D=e.selection.getSel();return!D||!D.rangeCount||D.rangeCount===0}}},Hp=bt.DOM,SD=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Yp=e=>Vt(e,t=>on(t)===!1),Vx=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return Yp({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_mathml_annotation_encodings:t("allow_mathml_annotation_encodings"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:SD(e),sandbox_iframes:t("sandbox_iframes"),sandbox_iframes_exclusions:Bf(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},qx=e=>{const t=e.options.get;return Yp({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},$p=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,Gx=e=>{const t=$p(e),n=i0(e),r=e.contentCSS,o=()=>{t.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(n)},s=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let l="";oe.each(e.contentStyles,c=>{l+=c+`\r
`}),e.dom.addStyle(l)}const i=Promise.all(((l,c,d)=>{const{pass:m,fail:h}=Kn(c,y=>tinymce.Resource.has(Ag(y))),v=m.map(y=>{const p=tinymce.Resource.get(Ag(y));return se(p)?Promise.resolve($p(l).loadRawCss(y,p)):Promise.resolve()}),g=[...v,$p(l).loadAll(h)];return l.inline?g:g.concat([l.ui.styleSheetLoader.loadAll(d)])})(e,r,n)).then(s).catch(s),a=wE(e);return a&&((l,c)=>{const d=M(l.getBody()),m=yr(qt(d)),h=Ft("style");tn(h,"type","text/css"),hn(h,zr(c)),hn(m,h),l.on("remove",()=>{Pt(h)})})(e,a),i},zp=e=>{e.removed!==!0&&((t=>{Ks(t)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"})})(e),(t=>{t.bindPendingEventDelegates(),t.initialized=!0,(r=>{r.dispatch("Init")})(t),t.focus(!0),(r=>{const o=r.dom.getRoot();r.inline||Du(r)&&r.selection.getStart(!0)!==o||dr(o).each(s=>{const i=s.getNode(),a=Or(i)?dr(i).getOr(s):s;r.selection.setRng(a.toRange())})})(t),t.nodeChanged({initial:!0});const n=VE(t);dt(n)&&n.call(t,t),(r=>{const o=GE(r);o&&To.setEditorTimeout(r,()=>{let s;s=o===!0?r:r.editorManager.get(o),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(t),Mi(t)&&Xw(t,!0)})(e))},Kx=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(Hp.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const r=e.getBody();r.disabled=!0,e.readonly=c0(e),e._editableRoot=jE(e),!Su(e)&&e.hasEditableRoot()&&(e.inline&&Hp.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=qT(e),e.schema=zn(qx(e)),e.dom=bt(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:bE(e),referrerPolicy:Mf(e),onSetAttrib:i=>{e.dispatch("SetAttrib",i)}}),e.parser=(i=>{const a=oc(Vx(i),i.schema);return a.addAttributeFilter("src,href,style,tabindex",(l,c)=>{const d=i.dom,m="data-mce-"+c;let h=l.length;for(;h--;){const v=l[h];let g=v.attr(c);if(g&&!v.attr(m)){if(g.indexOf("data:")===0||g.indexOf("blob:")===0)continue;c==="style"?(g=d.serializeStyle(d.parseStyle(g),v.name),g.length||(g=null),v.attr(m,g),v.attr(c,g)):c==="tabindex"?(v.attr(m,g),v.attr(c,null)):v.attr(m,i.convertURL(g,c,v.name))}}}),a.addNodeFilter("script",l=>{let c=l.length;for(;c--;){const d=l[c],m=d.attr("type")||"no/type";m.indexOf("mce-")!==0&&d.attr("type","mce-"+m)}}),mN(i)&&a.addNodeFilter("#cdata",l=>{var c;let d=l.length;for(;d--;){const m=l[d];m.type=8,m.name="#comment",m.value="[CDATA["+i.dom.encode((c=m.value)!==null&&c!==void 0?c:"")+"]]"}}),a.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let c=l.length;const d=i.schema.getNonEmptyElements();for(;c--;){const m=l[c];m.isEmpty(d)&&m.getAll("br").length===0&&m.append(new Cr("br",1))}}),a})(e),e.serializer=Fw((i=>{const a=i.options.get;return{...Vx(i),...qx(i),...Yp({remove_trailing_brs:a("remove_trailing_brs"),pad_empty_with_br:a("pad_empty_with_br"),url_converter:a("url_converter"),url_converter_scope:a("url_converter_scope"),element_format:a("element_format"),entities:a("entities"),entity_encoding:a("entity_encoding"),indent:a("indent"),indent_after:a("indent_after"),indent_before:a("indent_before")})}})(e),e),e.selection=Iw(e.dom,e.getWin(),e.serializer,e),e.annotator=dv(e),e.formatter=oC(e),e.undoManager=iC(e),e._nodeChangeDispatcher=new UR(e),e._selectionOverrides=hD(e),(i=>{const a=Cs(),l=kn(!1),c=Yc(d=>{i.dispatch("longpress",{...d,type:"longpress"}),l.set(!0)},400);i.on("touchstart",d=>{b1(d).each(m=>{c.cancel();const h={x:m.clientX,y:m.clientY,target:d.target};c.throttle(d),l.set(!1),a.set(h)})},!0),i.on("touchmove",d=>{c.cancel(),b1(d).each(m=>{a.on(h=>{((v,g)=>{const y=Math.abs(v.clientX-g.x),p=Math.abs(v.clientY-g.y);return y>5||p>5})(m,h)&&(a.clear(),l.set(!1),i.dispatch("longpresscancel"))})})},!0),i.on("touchend touchcancel",d=>{c.cancel(),d.type!=="touchcancel"&&a.get().filter(m=>m.target.isEqualNode(d.target)).each(()=>{l.get()?d.preventDefault():i.dispatch("tap",{...d,type:"tap"})})},!0)})(e),(i=>{(a=>{a.on("click",l=>{a.dom.getParent(l.target,"details")&&l.preventDefault()})})(i),(a=>{a.parser.addNodeFilter("details",l=>{const c=pN(a);Q(l,d=>{c==="expanded"?d.attr("open","open"):c==="collapsed"&&d.attr("open",null)})}),a.serializer.addNodeFilter("details",l=>{const c=bN(a);Q(l,d=>{c==="expanded"?d.attr("open","open"):c==="collapsed"&&d.attr("open",null)})})})(i)})(e),(i=>{const a="contenteditable",l=" "+oe.trim(dN(i))+" ",c=" "+oe.trim(f0(i))+" ",d=y1(l),m=y1(c),h=uN(i);h.length>0&&i.on("BeforeSetContent",v=>{((g,y,p)=>{let _=y.length,k=p.content;if(p.format!=="raw"){for(;_--;)k=k.replace(y[_],MO(g,k,f0(g)));p.content=k}})(i,h,v)}),i.parser.addAttributeFilter("class",v=>{let g=v.length;for(;g--;){const y=v[g];d(y)?y.attr(a,"true"):m(y)&&y.attr(a,"false")}}),i.serializer.addAttributeFilter(a,v=>{let g=v.length;for(;g--;){const y=v[g];if(!d(y)&&!m(y))continue;const p=y.attr("data-mce-content");h.length>0&&p?PO(h,p)?(y.name="#text",y.type=3,y.raw=!0,y.value=p):y.remove():y.attr(a,null)}})})(e),Ks(e)||((i=>{i.on("mousedown",a=>{a.detail>=3&&(a.preventDefault(),oD(i))})})(e),(i=>{kD(i)})(e));const o=FR(e);((i,a)=>{i.addCommand("delete",()=>{((l,c)=>{p1(l,c,!1).fold(()=>{l.selection.isEditable()&&(Ku(l),Rh(l))},Z)})(i,a)}),i.addCommand("forwardDelete",()=>{((l,c)=>{p1(l,c,!0).fold(()=>{l.selection.isEditable()&&Dy(l)},Z)})(i,a)})})(e,o),(i=>{i.on("NodeChange",()=>(a=>{const l=a.dom,c=a.selection,d=a.schema,m=d.getBlockElements(),h=c.getStart(),v=a.getBody();let g,y,p=null;const _=cr(a);if(!h||!xe(h))return;const k=v.nodeName.toLowerCase();if(!d.isValidChild(k,_.toLowerCase())||((A,N,O)=>yt(ly(M(O),M(N)),L=>Qg(A,L.dom)))(m,v,h))return;if(v.firstChild===v.lastChild&&jt(v.firstChild))return g=Jg(a),g.appendChild(Yl().dom),v.replaceChild(g,v.firstChild),a.selection.setCursorLocation(g,0),void a.nodeChanged();let x=v.firstChild;for(;x;)if(xe(x)&&cf(d,x),RO(d,x)){if(DO(m,x)){y=x,x=x.nextSibling,l.remove(y);continue}if(!g){if(!p&&a.hasFocus()&&(p=kC(a.selection.getRng(),()=>document.createElement("span"))),!x.parentNode){x=null;break}g=Jg(a),v.insertBefore(g,x)}y=x,x=x.nextSibling,g.appendChild(y)}else g=null,x=x.nextSibling;p&&(a.selection.setRng(xC(p)),a.nodeChanged())})(i))})(e),(i=>{var a;const l=i.dom,c=cr(i),d=(a=SE(i))!==null&&a!==void 0?a:"",m=(h,v)=>{if((p=>{if(lC(p)){const _=p.keyCode;return!cC(p)&&(ve.metaKeyPressed(p)||p.altKey||_>=112&&_<=123||fe(QT,_))}return!1})(h))return;const g=i.getBody(),y=!(p=>lC(p)&&!(cC(p)||p.type==="keyup"&&p.keyCode===229))(h)&&((p,_,k)=>{if(p.isEmpty(_,void 0,{skipBogus:!1,includeZwsp:!0})){const x=_.firstElementChild;return!x||!p.getStyle(_.firstElementChild,"padding-left")&&!p.getStyle(_.firstElementChild,"padding-right")&&k===x.nodeName.toLowerCase()}return!1})(l,g,c);(l.getAttrib(g,aC)!==""!==y||v)&&(l.setAttrib(g,aC,y?d:null),((p,_)=>{p.dispatch("PlaceholderToggle",{state:_})})(i,y),i.on(y?"keydown":"keyup",m),i.off(y?"keyup":"keydown",m))};jn(d)&&i.on("init",h=>{m(h,!0),i.on("change SetContent ExecCommand",m),i.on("paste",v=>To.setEditorTimeout(i,()=>m(v)))})})(e),tD(e);const s=(i=>{const a=i;return(l=>St(l.plugins,"rtc").bind(c=>S.from(c.setup)))(i).fold(()=>(a.rtcInstance=Rw(i),S.none()),l=>(a.rtcInstance=(()=>{const c=ce(null),d=ce("");return{init:{bindEvents:$e},undoManager:{beforeChange:$e,add:c,undo:c,redo:c,clear:$e,reset:$e,hasUndo:ht,hasRedo:ht,transact:c,ignore:$e,extra:$e},formatter:{match:ht,matchAll:ce([]),matchNode:ce(void 0),canApply:ht,closest:d,apply:$e,remove:$e,toggle:$e,formatChanged:ce({unbind:$e})},editor:{getContent:d,setContent:ce({content:"",html:""}),insertContent:ce(""),addVisual:$e},selection:{getContent:d},autocompleter:{addDecoration:$e,removeDecoration:$e},raw:{getModel:ce(S.none())}}})(),S.some(()=>l().then(c=>(a.rtcInstance=(d=>{const m=x=>rn(x)?x:{},{init:h,undoManager:v,formatter:g,editor:y,selection:p,autocompleter:_,raw:k}=d;return{init:{bindEvents:h.bindEvents},undoManager:{beforeChange:v.beforeChange,add:v.add,undo:v.undo,redo:v.redo,clear:v.clear,reset:v.reset,hasUndo:v.hasUndo,hasRedo:v.hasRedo,transact:(x,A,N)=>v.transact(N),ignore:(x,A)=>v.ignore(A),extra:(x,A,N,O)=>v.extra(N,O)},formatter:{match:(x,A,N,O)=>g.match(x,m(A),O),matchAll:g.matchAll,matchNode:g.matchNode,canApply:x=>g.canApply(x),closest:x=>g.closest(x),apply:(x,A,N)=>g.apply(x,m(A)),remove:(x,A,N,O)=>g.remove(x,m(A)),toggle:(x,A,N)=>g.toggle(x,m(A)),formatChanged:(x,A,N,O,L)=>g.formatChanged(A,N,O,L)},editor:{getContent:x=>y.getContent(x),setContent:(x,A)=>({content:y.setContent(x,A),html:""}),insertContent:(x,A)=>(y.insertContent(x),""),addVisual:y.addVisual},selection:{getContent:(x,A)=>p.getContent(A)},autocompleter:{addDecoration:_.addDecoration,removeDecoration:_.removeDecoration},raw:{getModel:()=>S.some(k.getRawModel())}}})(c),c.rtc.isRemote)))))})(e);(i=>{const a=i.getDoc(),l=i.getBody();(m=>{m.dispatch("PreInit")})(i),KE(i)||(a.body.spellcheck=!1,Hp.setAttrib(l,"spellcheck","false")),i.quirks=xD(i),(m=>{m.dispatch("PostRender")})(i);const c=CE(i);c!==void 0&&(l.dir=c);const d=XE(i);d&&i.on("BeforeSetContent",m=>{oe.each(d,h=>{m.content=m.content.replace(h,v=>"<!--mce:protected "+escape(v)+"-->")})}),i.on("SetContent",()=>{i.addVisual(i.getBody())}),i.on("compositionstart compositionend",m=>{i.composing=m.type==="compositionstart"})})(e),(i=>{const a=yN(i);se(_N(i))||!on(a)&&(l=>(c=>c.toLowerCase()==="gpl")(l)||(c=>c.length>=64&&c.length<=255)(l)?"VALID":"INVALID")(a)!=="INVALID"||console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")})(e),s.fold(()=>{const i=(a=>{let l=!1;const c=setTimeout(()=>{l||a.setProgressState(!0)},500);return()=>{clearTimeout(c),l=!0,a.setProgressState(!1)}})(e);Gx(e).then(()=>{zp(e),i()})},i=>{e.setProgressState(!0),Gx(e).then(()=>{i().then(a=>{e.setProgressState(!1),zp(e),Dw(e)},a=>{e.notificationManager.open({type:"error",text:String(a)}),zp(e),Dw(e)})})})},ED=Zt,Wp=bt.DOM,Xx=bt.DOM,Zx=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),Qx=e=>{const t=e.getElement();return e.inline?Zx(null):(n=>{const r=Xx.create("div");return Xx.insertAfter(r,n),Zx(r,r)})(t)},ND=async e=>{e.dispatch("ScriptsLoaded"),(n=>{const r=oe.trim(r0(n)),o=n.ui.registry.getAll().icons,s={...um.get("default").icons,...um.get(r).icons};it(s,(i,a)=>{He(o,a)||n.ui.registry.addIcon(a,i)})})(e),(n=>{const r=Vl(n);if(se(r)){const o=cl.get(r);n.theme=o(n,cl.urls[r])||{},dt(n.theme.init)&&n.theme.init(n,cl.urls[r]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(e),(n=>{const r=Pf(n),o=sc.get(r);n.model=o(n,sc.urls[r])})(e),(n=>{const r=[];Q(ku(n),o=>{((s,i,a)=>{const l=ic.get(a),c=ic.urls[a]||s.documentBaseUrl.replace(/\/$/,"");if(a=oe.trim(a),l&&oe.inArray(i,a)===-1){if(s.plugins[a])return;try{const d=l(s,c)||{};s.plugins[a]=d,dt(d.init)&&(d.init(s,c),i.push(a))}catch(d){((m,h,v)=>{const g=lo.translate(["Failed to initialize plugin: {0}",h]);Wb(m,"PluginLoadError",{message:g}),fm(g,v),mm(m,g)})(s,a,d)}}})(n,r,(s=>s.replace(/^\-/,""))(o))})})(e);const t=await(n=>{const r=n.getElement();return n.orgDisplay=r.style.display,se(Vl(n))?(o=>{const s=o.theme.renderUI;return s?s():Qx(o)})(n):dt(Vl(n))?(o=>{const s=o.getElement(),i=Vl(o)(o,s);return i.editorContainer.nodeType&&(i.editorContainer.id=i.editorContainer.id||o.id+"_parent"),i.iframeContainer&&i.iframeContainer.nodeType&&(i.iframeContainer.id=i.iframeContainer.id||o.id+"_iframecontainer"),i.height=i.iframeHeight?i.iframeHeight:s.offsetHeight,i})(n):Qx(n)})(e);((n,r)=>{const o={show:S.from(r.show).getOr($e),hide:S.from(r.hide).getOr($e),isEnabled:S.from(r.isEnabled).getOr(Zt),setEnabled:s=>{s&&(n.mode.get()==="readonly"||Mi(n))||S.from(r.setEnabled).each(i=>i(s))}};n.ui={...n.ui,...o}})(e,S.from(t.api).getOr({})),e.editorContainer=t.editorContainer,(n=>{n.contentCSS=n.contentCSS.concat((r=>Qw(r,_E(r)))(n),(r=>Qw(r,i0(r)))(n))})(e),e.inline?Kx(e):((n,r)=>{((o,s)=>{const i=Qe.browser.isFirefox()?m0(o):"Rich Text Area",a=o.translate(i),l=vn(M(o.getElement()),"tabindex").bind(as),c=((d,m,h,v)=>{const g=Ft("iframe");return v.each(y=>tn(g,"tabindex",y)),Hr(g,h),Hr(g,{id:d+"_ifr",frameBorder:"0",allowTransparency:"true",title:m}),ms(g,"tox-edit-area__iframe"),g})(o.id,a,tE(o),l).dom;c.onload=()=>{c.onload=null,o.dispatch("load")},o.contentAreaContainer=s.iframeContainer,o.iframeElement=c,o.iframeHTML=(d=>{let m=nE(d)+"<html><head>";Jb(d)!==d.documentBaseUrl&&(m+='<base href="'+d.documentBaseURI.getURI()+'" />'),m+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const h=rE(d),v=oE(d),g=d.translate(m0(d));return e0(d)&&(m+='<meta http-equiv="Content-Security-Policy" content="'+e0(d)+'" />'),m+=`</head><body id="${h}" class="mce-content-body ${v}" data-id="${d.id}" aria-label="${g}"><br></body></html>`,m})(o),Wp.add(s.iframeContainer,c)})(n,r),r.editorContainer&&(r.editorContainer.style.display=n.orgDisplay,n.hidden=Wp.isHidden(r.editorContainer)),n.getElement().style.display="none",Wp.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(o=>{const s=o.iframeElement,i=()=>{o.contentDocument=s.contentDocument,Kx(o)};if(hN(o)||Qe.browser.isFirefox()){const l=o.getDoc();l.open(),l.write(o.iframeHTML),l.close(),i()}else{const l=(a=M(s),wi(a,"load",ED,()=>{l.unbind(),i()}));s.srcdoc=o.iframeHTML}var a})(n)})(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},fl=bt.DOM,Jx=e=>e.charAt(0)==="-",eS=(e,t,n)=>S.from(t).filter(r=>jn(r)&&!um.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${n}.js`,name:S.some(r)})),AD=(e,t)=>{const n=Zo.ScriptLoader,r=()=>{!e.removed&&(o=>{const s=Vl(o);return!se(s)||ie(cl.get(s))})(e)&&(o=>{const s=Pf(o);return ie(sc.get(s))})(e)&&ND(e)};((o,s)=>{const i=Vl(o);if(se(i)&&!Jx(i)&&!He(cl.urls,i)){const a=NE(o),l=a?o.documentBaseURI.toAbsolute(a):`themes/${i}/theme${s}.js`;cl.load(i,l).catch(()=>{((c,d,m)=>{Ed(c,"ThemeLoadError",Nd("theme",d,m))})(o,l,i)})}})(e,t),((o,s)=>{const i=Pf(o);if(i!=="plugin"&&!He(sc.urls,i)){const a=AE(o),l=se(a)?o.documentBaseURI.toAbsolute(a):`models/${i}/model${s}.js`;sc.load(i,l).catch(()=>{((c,d,m)=>{Ed(c,"ModelLoadError",Nd("model",d,m))})(o,l,i)})}})(e,t),((o,s)=>{const i=o0(s),a=vE(s);if(!lo.hasCode(i)&&i!=="en"){const l=jn(a)?a:`${s.editorManager.baseURL}/langs/${i}.js`;o.add(l).catch(()=>{((c,d,m)=>{Ed(c,"LanguageLoadError",Nd("language",d,m))})(s,l,i)})}})(n,e),((o,s,i)=>{const a=eS(s,"default",i),l=(c=>S.from(mE(c)).filter(jn).map(d=>({url:d,name:S.none()})))(s).orThunk(()=>eS(s,r0(s),""));Q((c=>{const d=[],m=h=>{d.push(h)};for(let h=0;h<c.length;h++)c[h].each(m);return d})([a,l]),c=>{o.add(c.url).catch(()=>{((d,m,h)=>{Ed(d,"IconsLoadError",Nd("icons",m,h))})(s,c.url,c.name.getOrUndefined())})})})(n,e,t),((o,s)=>{const i=(a,l)=>{ic.load(a,l).catch(()=>{((c,d,m)=>{Ed(c,"PluginLoadError",Nd("plugin",d,m))})(o,l,a)})};it(HE(o),(a,l)=>{i(l,a),o.options.set("plugins",ku(o).concat(l))}),Q(ku(o),a=>{!(a=oe.trim(a))||ic.urls[a]||Jx(a)||i(a,`plugins/${a}/plugin${s}.js`)})})(e,t),n.loadQueue().then(r,r)},tS=pt().deviceType,nS=tS.isPhone(),TD=tS.isTablet(),$d=e=>{if(Wt(e))return[];{const t=ct(e)?e:e.split(/[ ,]/),n=Me(t,Fr);return De(n,jn)}},OD=(e,t)=>{const n=((s,i)=>{const a={},l={};return os(s,(c,d)=>fe(e,d),Ea(a),Ea(l)),{t:a,f:l}})(t);return r=n.t,o=n.f,{sections:ce(r),options:ce(o)};var r,o},Vp=(e,t)=>He(e.sections(),t),RD=(e,t)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:St(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}}),DD=(e,t)=>{var n;const r=(n=t.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?oe.extend({},e.external_plugins,r):r},MD=(e,t,n,r,o)=>{var s;const i=e?{mobile:RD((s=o.mobile)!==null&&s!==void 0?s:{},t)}:{},a=OD(["mobile"],lp(i,o)),l=oe.extend(n,r,a.options(),((c,d)=>c&&Vp(d,"mobile"))(e,a)?((c,d,m={})=>{const h=c.sections(),v=St(h,d).getOr({});return oe.extend({},m,v)})(a,"mobile"):{},{external_plugins:DD(r,a.options())});return((c,d,m,h)=>{const v=$d(m.forced_plugins),g=$d(h.plugins),y=((k,x)=>Vp(k,x)?k.sections()[x]:{})(d,"mobile"),p=((k,x,A,N)=>k&&Vp(x,"mobile")?N:A)(c,d,g,y.plugins?$d(y.plugins):g),_=((k,x)=>[...$d(k),...$d(x)])(v,p);return oe.extend(h,{forced_plugins:v,plugins:_})})(e,a,r,l)},PD=e=>{(t=>{const n=r=>()=>{Q("left,center,right,justify".split(","),o=>{r!==o&&t.formatter.remove("align"+o)}),r!=="none"&&((o,s)=>{t.formatter.toggle(o,void 0),t.nodeChanged()})("align"+r)};t.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(e),(t=>{const n=r=>()=>{const o=t.selection,s=o.isCollapsed()?[t.dom.getParent(o.getNode(),t.dom.isBlock)]:o.getSelectedBlocks();return yt(s,i=>ie(t.formatter.matchNode(i,r)))};t.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(e)},LD=(e,t)=>{const n=e.selection,r=e.dom;return/^ | $/.test(t)?((o,s,i,a)=>{const l=M(o.getRoot());return i=gd(l,G.fromRangeStart(s),a)?i.replace(/^ /,"&nbsp;"):i.replace(/^&nbsp;/," "),pd(l,G.fromRangeEnd(s),a)?i.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):i.replace(/&nbsp;(<br( \/)?>)?$/," ")})(r,n.getRng(),t,e.schema):t},Wm=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:r}=(o=>{if(typeof o!="string"){const s=oe.extend({paste:o.paste,data:{paste:o.paste}},o);return{content:o.content,details:s}}return{content:o,details:{}}})(t);vg(e,{...r,content:LD(e,n),format:"html",set:!1,selection:!0}).each(o=>{const s=((i,a,l)=>Sg(i).editor.insertContent(a,l))(e,o.content,r);yg(e,s,o),e.addVisual()})}},BD={"font-size":"size","font-family":"face"},ID=us("font"),rS=e=>(t,n)=>S.from(n).map(M).filter(Yn).bind(r=>((o,s,i)=>Kh(M(i),a=>(l=>Cl(l,o).orThunk(()=>ID(l)?St(BD,o).bind(c=>vn(l,c)):S.none()))(a),a=>at(M(s),a)))(e,t,r.dom).or(((o,s)=>S.from(bt.DOM.getStyle(s,o,!0)))(e,r.dom))).getOr(""),FD=rS("font-size"),UD=pn(e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),rS("font-family")),jD=e=>dr(e.getBody()).bind(t=>{const n=t.container();return S.from(ne(n)?n.parentNode:n)}),qp=(e,t)=>((n,r)=>(o=>S.from(o.selection.getRng()).bind(s=>{const i=o.getBody();return s.startContainer===i&&s.startOffset===0?S.none():S.from(o.selection.getStart(!0))}))(n).orThunk(_e(jD,n)).map(M).filter(Yn).bind(r))(e,ri(S.some,t)),oS=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const r=(s=>oe.explode(s.options.get("font_size_style_values")))(e),o=(s=>oe.explode(s.options.get("font_size_classes")))(e);return o.length>0?o[n-1]||t:r[n-1]||t}return t}return t},HD=e=>{const t=e.split(/\s*,\s*/);return Me(t,n=>n.indexOf(" ")===-1||_t(n,'"')||_t(n,"'")?n:`'${n}'`).join(",")},sS=(e,t)=>{if(e.mode.isReadOnly())return;const n=e.dom,r=e.selection.getRng(),o=t?e.selection.getStart():e.selection.getEnd(),s=t?r.startContainer:r.endContainer,i=Fd(n,s);if(!i||!i.isContentEditable)return;const a=t?lr:ps,l=cr(e);((c,d,m,h)=>{const v=c.dom,g=p=>v.isBlock(p)&&p.parentElement===m,y=g(d)?d:v.getParent(h,g,m);return S.from(y).map(M)})(e,o,i,s).each(c=>{const d=Ck(e,s,c.dom,i,!1,l);a(c,M(d)),e.selection.setCursorLocation(d,0),e.dispatch("NewBlock",{newBlock:d}),Id(e,"insertParagraph")})},YD=e=>{PD(e),(t=>{t.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const r=t.getDoc();let o;try{r.execCommand(n)}catch{o=!0}if(n!=="paste"||r.queryCommandEnabled(n)||(o=!0),o||!r.queryCommandSupported(n)){let s=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Qe.os.isMacOS()||Qe.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),t.notificationManager.open({text:s,type:"error"})}}})})(e),(t=>{t.editorCommands.addCommands({mceAddUndoLevel:()=>{t.undoManager.add()},mceEndUndoLevel:()=>{t.undoManager.add()},Undo:()=>{t.undoManager.undo()},Redo:()=>{t.undoManager.redo()}})})(e),(t=>{t.editorCommands.addCommands({mceSelectNodeDepth:(n,r,o)=>{let s=0;t.dom.getParent(t.selection.getNode(),i=>!xe(i)||s++!==o||(t.selection.select(i),!1),t.getBody())},mceSelectNode:(n,r,o)=>{t.selection.select(o)},selectAll:()=>{const n=t.dom.getParent(t.selection.getStart(),qr);if(n){const r=t.dom.createRng();r.selectNodeContents(n),t.selection.setRng(r)}}})})(e),(t=>{t.editorCommands.addCommands({mceCleanup:()=>{const n=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(n)},insertImage:(n,r,o)=>{Wm(t,t.dom.createHTML("img",{src:o}))},insertHorizontalRule:()=>{t.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,r,o)=>{Wm(t,t.dom.encode(o))},insertHTML:(n,r,o)=>{Wm(t,o)},mceInsertContent:(n,r,o)=>{Wm(t,o)},mceSetContent:(n,r,o)=>{t.setContent(o)},mceReplaceContent:(n,r,o)=>{t.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceNewDocument:()=>{t.setContent(eN(t))}})})(e),(t=>{const n=(r,o,s)=>{if(t.mode.isReadOnly())return;const i=se(s)?{href:s}:s,a=t.dom.getParent(t.selection.getNode(),"a");rn(i)&&se(i.href)&&(i.href=i.href.replace(/ /g,"%20"),a&&i.href||t.formatter.remove("link"),i.href&&t.formatter.apply("link",i,a))};t.editorCommands.addCommands({unlink:()=>{if(t.selection.isEditable()){if(t.selection.isCollapsed()){const r=t.dom.getParent(t.selection.getStart(),"a");return void(r&&t.dom.remove(r,!0))}t.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(e),(t=>{t.editorCommands.addCommands({Indent:()=>{(n=>{f1(n,"indent")})(t)},Outdent:()=>{h1(t)}}),t.editorCommands.addCommands({Outdent:()=>d1(t)},"state")})(e),(t=>{t.editorCommands.addCommands({InsertNewBlockBefore:()=>{(n=>{sS(n,!0)})(t)},InsertNewBlockAfter:()=>{(n=>{sS(n,!1)})(t)}})})(e),(t=>{t.editorCommands.addCommands({insertParagraph:()=>{Lm(Ek,t)},mceInsertNewLine:(n,r,o)=>{Mk(t,o)},InsertLineBreak:(n,r,o)=>{Lm(Tk,t)}})})(e),(t=>{(n=>{const r=(o,s)=>{n.formatter.toggle(o,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{r(o)},"ForeColor,HiliteColor":(o,s,i)=>{r(o,{value:i})},BackColor:(o,s,i)=>{r("hilitecolor",{value:i})},FontName:(o,s,i)=>{((a,l)=>{const c=oS(a,l);a.formatter.toggle("fontname",{value:HD(c)}),a.nodeChanged()})(n,i)},FontSize:(o,s,i)=>{((a,l)=>{a.formatter.toggle("fontsize",{value:oS(a,l)}),a.nodeChanged()})(n,i)},LineHeight:(o,s,i)=>{((a,l)=>{a.formatter.toggle("lineheight",{value:String(l)}),a.nodeChanged()})(n,i)},Lang:(o,s,i)=>{var a;r(o,{value:i.code,customValue:(a=i.customCode)!==null&&a!==void 0?a:null})},RemoveFormat:o=>{n.formatter.remove(o)},mceBlockQuote:()=>{r("blockquote")},FormatBlock:(o,s,i)=>{r(se(i)?i:"p")},mceToggleFormat:(o,s,i)=>{r(i)}})})(t),(n=>{const r=o=>n.formatter.match(o);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>r(o),mceBlockQuote:()=>r("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>(o=>qp(o,s=>UD(o.getBody(),s.dom)).getOr(""))(n)),n.editorCommands.addQueryValueHandler("FontSize",()=>(o=>qp(o,s=>FD(o.getBody(),s.dom)).getOr(""))(n)),n.editorCommands.addQueryValueHandler("LineHeight",()=>(o=>qp(o,s=>{const i=M(o.getBody());return Kh(s,l=>Cl(l,"line-height"),_e(at,i)).getOrThunk(()=>{const l=parseFloat(io(s,"line-height")),c=parseFloat(io(s,"font-size"));return String(l/c)})}).getOr(""))(n))})(t)})(e),(t=>{t.editorCommands.addCommands({mceRemoveNode:(n,r,o)=>{const s=o??t.selection.getNode();if(s!==t.getBody()){const i=t.selection.getBookmark();t.dom.remove(s,!0),t.selection.moveToBookmark(i)}},mcePrint:()=>{t.getWin().print()},mceFocus:(n,r,o)=>{((s,i)=>{s.removed||(i?mh(s):(a=>{const l=a.selection,c=a.getBody();let d=l.getRng();a.quirks.refreshContentEditable();const m=v=>{ah(v).each(g=>{v.selection.setRng(g),d=g})};!nc(a)&&a.hasEditableRoot()&&m(a);const h=((v,g)=>v.dom.getParent(g,y=>v.dom.getContentEditable(y)==="true"))(a,l.getNode());if(h&&a.dom.isChildOf(h,c))return((v,g)=>v.dom.getParent(g,y=>v.dom.getContentEditable(y)==="false")!==null)(a,h)||Uu(c),Uu(h),a.hasEditableRoot()||m(a),_v(a,d),void mh(a);a.inline||(Qe.browser.isOpera()||Uu(c),a.getWin().focus()),(Qe.browser.isFirefox()||a.inline)&&(Uu(c),_v(a,d)),mh(a)})(s))})(t,o===!0)},mceToggleVisualAid:()=>{t.hasVisual=!t.hasVisual,t.addVisual()}})})(e)},$D=["toggleview"],iS=e=>fe($D,e.toLowerCase());class aS{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,r,o){const s=this.editor,i=t.toLowerCase(),a=o?.skip_focus;if(s.removed||(i!=="mcefocus"&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)||a?(c=>{ah(c).each(d=>c.selection.setRng(d))})(s):s.focus()),s.dispatch("BeforeExecCommand",{command:t,ui:n,value:r}).isDefaultPrevented()))return!1;const l=this.commands.exec[i];return!!dt(l)&&(l(i,n,r),s.dispatch("ExecCommand",{command:t,ui:n,value:r}),!0)}queryCommandState(t){if(!iS(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),r=this.commands.state[n];return!!dt(r)&&r(n)}queryCommandValue(t){if(!iS(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),r=this.commands.value[n];return dt(r)?r(n):""}addCommands(t,n="exec"){const r=this.commands;it(t,(o,s)=>{Q(s.toLowerCase().split(","),i=>{r[n][i]=o})})}addCommand(t,n,r){const o=t.toLowerCase();this.commands.exec[o]=(s,i,a)=>n.call(r??this.editor,i,a)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,r){this.commands.state[t.toLowerCase()]=()=>n.call(r??this.editor)}addQueryValueHandler(t,n,r){this.commands.value[t.toLowerCase()]=()=>n.call(r??this.editor)}}const zD=oe.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Gp{static isNative(t){return!!zD[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||ht}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const r=t.toLowerCase(),o=Xo(r,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const s=this.bindings[r];if(s)for(let i=0,a=s.length;i<a;i++){const l=s[i];if(!l.removed){if(l.once&&this.off(r,l.func),o.isImmediatePropagationStopped())return o;if(l.func.call(this.scope,o)===!1)return o.preventDefault(),o}}return o}on(t,n,r,o){if(n===!1&&(n=ht),n){const s={func:n,removed:!1};o&&oe.extend(s,o);const i=t.toLowerCase().split(" ");let a=i.length;for(;a--;){const l=i[a];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=r?[s,...c]:[...c,s],this.bindings[l]=c}}return this}off(t,n){if(t){const r=t.toLowerCase().split(" ");let o=r.length;for(;o--;){const s=r[o];let i=this.bindings[s];if(!s)return it(this.bindings,(a,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(i){if(n){const a=Kn(i,l=>l.func===n);i=a.fail,this.bindings[s]=i,Q(a.pass,l=>{l.removed=!0})}else i.length=0;i.length||(this.toggleEvent(t,!1),delete this.bindings[s])}}}else it(this.bindings,(r,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(t,n,r){return this.on(t,n,r,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||n.length===0)}}const zd=e=>(e._eventDispatcher||(e._eventDispatcher=new Gp({scope:e,toggleEvent:(t,n)=>{Gp.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),Kp={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return Xo(e.toLowerCase(),t??{},r);const o=zd(r).dispatch(e,t);if(n!==!1&&r.parent){let s=r.parent();for(;s&&!o.isPropagationStopped();)s.dispatch(e,o,!1),s=s.parent?s.parent():void 0}return o},on(e,t,n){return zd(this).on(e,t,n)},off(e,t){return zd(this).off(e,t)},once(e,t){return zd(this).once(e,t)},hasEventListeners(e){return zd(this).has(e)}},Vm=bt.DOM;let hl;const qm=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=l0(e);return n?(e.eventRoot||(e.eventRoot=Vm.select(n)[0]),e.eventRoot):e.getBody()},lS=(e,t,n)=>{(r=>!r.hidden&&!Mi(r))(e)?e.dispatch(t,n):Mi(e)&&((r,o)=>{if((s=>s.type==="click")(o)&&!ve.metaKeyPressed(o)){const s=M(o.target);((i,a)=>vi(a,"a",l=>at(l,M(i.getBody()))).bind(l=>vn(l,"href")))(r,s).each(i=>{if(o.preventDefault(),/^#/.test(i)){const a=r.dom.select(`${i},[name="${jo(i,"#")}"]`);a.length&&r.selection.scrollIntoView(a[0],!0)}else window.open(i,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else(s=>fe($T,s.type))(o)&&r.dispatch(o.type,o)})(e,n)},cS=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=qm(e,t);if(l0(e)){if(hl||(hl={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||hl&&(it(hl,(o,s)=>{e.dom.unbind(qm(e,s))}),hl=null)})),hl[t])return;const r=o=>{const s=o.target,i=e.editorManager.get();let a=i.length;for(;a--;){const l=i[a].getBody();(l===s||Vm.isChildOf(s,l))&&lS(i[a],t,o)}};hl[t]=r,Vm.bind(n,t,r)}else{const r=o=>{lS(e,t,o)};Vm.bind(n,t,r),e.delegates[t]=r}},dS={...Kp,bindPendingEventDelegates(){const e=this;oe.each(e._pendingNativeEvents,t=>{cS(e,t)})},toggleNativeEvent(e,t){const n=this;e!=="focus"&&e!=="blur"&&(n.removed||(t?n.initialized?cS(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(qm(n,e),e,n.delegates[e]),delete n.delegates[e])))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(it(e.delegates,(r,o)=>{e.dom.unbind(qm(e,o),o,r)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},WD=e=>se(e)?{value:e.split(/[ ,]/),valid:!0}:ho(e,se)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},uS=(e,t)=>e+(ro(t.message)?"":`. ${t.message}`),mS=e=>e.valid,Xp=(e,t,n="")=>{const r=t(e);return hr(r)?r?{value:e,valid:!0}:{valid:!1,message:n}:r},Wd=e=>e.readonly,VD=["design","readonly"],fS=(e,t,n,r)=>{const o=n[t.get()],s=n[r];try{s.activate()}catch(i){return void console.error(`problem while activating editor mode ${r}:`,i)}o.deactivate(),o.editorReadOnly!==s.editorReadOnly&&((i,a)=>{const l=M(i.getBody());a?(i.readonly=!0,i.hasEditableRoot()&&(l.dom.contentEditable="true"),Gw(i)):(i.readonly=!1,Kw(i))})(e,s.editorReadOnly),t.set(r),((i,a)=>{i.dispatch("SwitchMode",{mode:a})})(e,r)},qD=e=>{const t=kn("design"),n=kn({design:{activate:$e,deactivate:$e,editorReadOnly:!1},readonly:{activate:$e,deactivate:$e,editorReadOnly:!0}});return(r=>{r.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",o=>{Wd(r)&&o.preventDefault()}),r.on("BeforeExecCommand",o=>{o.command!=="Undo"&&o.command!=="Redo"||!Wd(r)||o.preventDefault()}),r.on("input",o=>{if(!o.isComposing&&Wd(r)){const s=r.undoManager.add();ie(s)&&r.undoManager.undo()}}),r.on("compositionend",()=>{if(Wd(r)){const o=r.undoManager.add();ie(o)&&r.undoManager.undo()}})})(e),(r=>{(o=>{o.serializer?Zw(o):o.on("PreInit",()=>{Zw(o)})})(r),(o=>{o.on("ShowCaret ObjectSelected",s=>{Mi(o)&&s.preventDefault()}),o.on("DisabledStateChange",s=>{s.isDefaultPrevented()||Xw(o,s.state)})})(r)})(e),{isReadOnly:()=>Wd(e),set:r=>((o,s,i,a)=>{if(!(a===i.get()||o.initialized&&Mi(o))){if(!He(s,a))throw new Error(`Editor mode '${a}' is invalid`);o.initialized?fS(o,i,s,a):o.on("init",()=>fS(o,i,s,a))}})(e,n.get(),t,r),get:()=>t.get(),register:(r,o)=>{n.set(((s,i,a)=>{if(fe(VD,i))throw new Error(`Cannot override default mode ${i}`);return{...s,[i]:{...a,deactivate:()=>{try{a.deactivate()}catch(l){console.error(`problem while deactivating editor mode ${i}:`,l)}}}}})(n.get(),r,o))}}},Zp=oe.each,Qp=oe.explode,GD={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},hS=oe.makeMap("alt,ctrl,shift,meta,access"),KD=e=>{const t={},n=Qe.os.isMacOS()||Qe.os.isiOS();Zp(Qp(e.toLowerCase(),"+"),s=>{(i=>i in hS)(s)?t[s]=!0:/^[0-9]{2,}$/.test(s)?t.keyCode=parseInt(s,10):(t.charCode=s.charCodeAt(0),t.keyCode=GD[s]||s.toUpperCase().charCodeAt(0))});const r=[t.keyCode];let o;for(o in hS)t[o]?r.push(o):t[o]=!1;return t.id=r.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class gS{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",r=>{!n.hasModifier(r)&&!n.isFunctionKey(r)||r.isDefaultPrevented()||(Zp(n.shortcuts,o=>{n.matchShortcut(r,o)&&(n.pendingPatterns=o.subpatterns.slice(0),r.type==="keydown"&&n.executeShortcutAction(o))}),n.matchShortcut(r,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&r.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,r,o){const s=this,i=s.normalizeCommandFunc(r);return Zp(Qp(oe.trim(t)),a=>{const l=s.createShortcut(a,n,i,o);s.shortcuts[l.id]=l}),!0}remove(t){const n=this.createShortcut(t);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(t){const n=this,r=t;return typeof r=="string"?()=>{n.editor.execCommand(r,!1,null)}:oe.isArray(r)?()=>{n.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(t,n,r,o){const s=oe.map(Qp(t,">"),KD);return s[s.length-1]=oe.extend(s[s.length-1],{func:r,scope:o||this.editor}),oe.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!!n&&n.ctrl===t.ctrlKey&&n.meta===t.metaKey&&n.alt===t.altKey&&n.shift===t.shiftKey&&!!(t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode)&&(t.preventDefault(),!0)}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const XD=()=>{const e=(()=>{const t={},n={},r={},o={},s={},i={},a={},l={},c={},d=(h,v)=>(g,y)=>{h[g.toLowerCase()]={...y,type:v}};return{addButton:d(t,"button"),addGroupToolbarButton:d(t,"grouptoolbarbutton"),addToggleButton:d(t,"togglebutton"),addMenuButton:d(t,"menubutton"),addSplitButton:d(t,"splitbutton"),addMenuItem:d(n,"menuitem"),addNestedMenuItem:d(n,"nestedmenuitem"),addToggleMenuItem:d(n,"togglemenuitem"),addAutocompleter:d(r,"autocompleter"),addContextMenu:d(s,"contextmenu"),addContextToolbar:d(i,"contexttoolbar"),addContextForm:(m=i,(h,v)=>{m[h.toLowerCase()]={type:"contextform",...v}}),addSidebar:d(l,"sidebar"),addView:d(c,"views"),addIcon:(h,v)=>o[h.toLowerCase()]=v,addContext:(h,v)=>a[h.toLowerCase()]=v,getAll:()=>({buttons:t,menuItems:n,icons:o,popups:r,contextMenus:s,contextToolbars:i,sidebars:l,views:c,contexts:a})};var m})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},gl=bt.DOM,pS=oe.extend,ZD=oe.each;class Gm{constructor(t,n,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,pS(this,dS);const o=this;this.id=t,this.hidden=!1;const s=((v,g)=>{const y=KO(g);return MD(nS||TD,nS,y,v,y)})(r.defaultOptions,n);this.options=((v,g,y=g)=>{const p={},_={},k=(A,N,O)=>{const L=Xp(N,O);return mS(L)?(_[A]=L.value,!0):(console.warn(uS(`Invalid value passed for the ${A} option`,L)),!1)},x=A=>He(p,A);return{register:(A,N)=>{const O=(P=>se(P.processor))(N)?(P=>{const j=(()=>{switch(P){case"array":return ct;case"boolean":return hr;case"function":return dt;case"number":return Jt;case"object":return rn;case"string":return se;case"string[]":return WD;case"object[]":return $=>ho($,rn);case"regexp":return $=>Rn($,RegExp);default:return Zt}})();return $=>Xp($,j,`The value must be a ${P}.`)})(N.processor):N.processor,L=((P,j,$)=>{if(!on(j)){const D=Xp(j,$);if(mS(D))return D.value;console.error(uS(`Invalid default value passed for the "${P}" option`,D))}})(A,N.default,O);p[A]={...N,default:L,processor:O},St(_,A).orThunk(()=>St(g,A)).each(P=>k(A,P,O))},isRegistered:x,get:A=>St(_,A).orThunk(()=>St(p,A).map(N=>N.default)).getOrUndefined(),set:(A,N)=>{if(x(A)){const O=p[A];return O.immutable?(console.error(`"${A}" is an immutable option and cannot be updated`),!1):k(A,N,O.processor)}return console.warn(`"${A}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:A=>{const N=x(A);return N&&delete _[A],N},isSet:A=>He(_,A),debug:()=>{try{console.log(JSON.parse(JSON.stringify(y,(A,N)=>hr(N)||Jt(N)||se(N)||Tt(N)||ct(N)||Sn(N)?N:Object.prototype.toString.call(N))))}catch(A){console.error(A)}}}})(0,s,n),(v=>{const g=v.options.register;g("id",{processor:"string",default:v.id}),g("selector",{processor:"string"}),g("target",{processor:"object"}),g("suffix",{processor:"string"}),g("cache_suffix",{processor:"string"}),g("base_url",{processor:"string"}),g("referrer_policy",{processor:"string",default:""}),g("language_load",{processor:"boolean",default:!0}),g("inline",{processor:"boolean",default:!1}),g("iframe_attrs",{processor:"object",default:{}}),g("doctype",{processor:"string",default:"<!DOCTYPE html>"}),g("document_base_url",{processor:"string",default:v.documentBaseUrl}),g("body_id",{processor:Qb(v,"tinymce"),default:"tinymce"}),g("body_class",{processor:Qb(v),default:""}),g("content_security_policy",{processor:"string",default:""}),g("br_in_pre",{processor:"boolean",default:!0}),g("forced_root_block",{processor:y=>{const p=se(y)&&jn(y);return p?{value:y,valid:p}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),g("forced_root_block_attrs",{processor:"object",default:{}}),g("newline_behavior",{processor:y=>{const p=fe(["block","linebreak","invert","default"],y);return p?{value:y,valid:p}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),g("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),g("no_newline_selector",{processor:"string",default:""}),g("keep_styles",{processor:"boolean",default:!0}),g("end_container_on_empty_block",{processor:y=>hr(y)||se(y)?{valid:!0,value:y}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),g("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),g("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),g("font_size_classes",{processor:"string",default:""}),g("automatic_uploads",{processor:"boolean",default:!0}),g("images_reuse_filename",{processor:"boolean",default:!1}),g("images_replace_blob_uris",{processor:"boolean",default:!0}),g("icons",{processor:"string",default:""}),g("icons_url",{processor:"string",default:""}),g("images_upload_url",{processor:"string",default:""}),g("images_upload_base_path",{processor:"string",default:""}),g("images_upload_credentials",{processor:"boolean",default:!1}),g("images_upload_handler",{processor:"function"}),g("language",{processor:"string",default:"en"}),g("language_url",{processor:"string",default:""}),g("entity_encoding",{processor:"string",default:"named"}),g("indent",{processor:"boolean",default:!0}),g("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_use_margin",{processor:"boolean",default:!1}),g("indentation",{processor:"string",default:"40px"}),g("content_css",{processor:y=>{const p=y===!1||se(y)||ho(y,se);return p?se(y)?{value:Me(y.split(","),Fr),valid:p}:ct(y)?{value:y,valid:p}:y===!1?{value:[],valid:p}:{value:y,valid:p}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Lf(v)?[]:["default"]}),g("content_style",{processor:"string"}),g("content_css_cors",{processor:"boolean",default:!1}),g("font_css",{processor:y=>{const p=se(y)||ho(y,se);return p?{value:ct(y)?y:Me(y.split(","),Fr),valid:p}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),g("inline_boundaries",{processor:"boolean",default:!0}),g("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),g("object_resizing",{processor:y=>{const p=hr(y)||se(y);return p?y===!1||Df.isiPhone()||Df.isiPad()?{value:"",valid:p}:{value:y===!0?"table,img,figure.image,div,video,iframe":y,valid:p}:{valid:!1,message:"Must be boolean or a string"}},default:!JS}),g("resize_img_proportional",{processor:"boolean",default:!0}),g("event_root",{processor:"string"}),g("service_message",{processor:"string"}),g("theme",{processor:y=>y===!1||se(y)||dt(y),default:"silver"}),g("theme_url",{processor:"string"}),g("formats",{processor:"object"}),g("format_empty_lines",{processor:"boolean",default:!1}),g("format_noneditable_selector",{processor:"string",default:""}),g("preview_styles",{processor:y=>{const p=y===!1||se(y);return p?{value:y===!1?"":y,valid:p}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),g("custom_ui_selector",{processor:"string",default:""}),g("hidden_input",{processor:"boolean",default:!0}),g("submit_patch",{processor:"boolean",default:!0}),g("encoding",{processor:"string"}),g("add_form_submit_trigger",{processor:"boolean",default:!0}),g("add_unload_trigger",{processor:"boolean",default:!0}),g("custom_undo_redo_levels",{processor:"number",default:0}),g("disable_nodechange",{processor:"boolean",default:!1}),g("disabled",{processor:y=>hr(y)?(v.initialized&&Su(v)!==y&&Promise.resolve().then(()=>{((p,_)=>{p.dispatch("DisabledStateChange",{state:_})})(v,y)}),{valid:!0,value:y}):{valid:!1,message:"The value must be a boolean."},default:!1}),g("readonly",{processor:"boolean",default:!1}),g("editable_root",{processor:"boolean",default:!0}),g("plugins",{processor:"string[]",default:[]}),g("external_plugins",{processor:"object"}),g("forced_plugins",{processor:"string[]"}),g("model",{processor:"string",default:v.hasPlugin("rtc")?"plugin":"dom"}),g("model_url",{processor:"string"}),g("block_unsupported_drop",{processor:"boolean",default:!0}),g("visual",{processor:"boolean",default:!0}),g("visual_table_class",{processor:"string",default:"mce-item-table"}),g("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),g("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),g("setup",{processor:"function"}),g("init_instance_callback",{processor:"function"}),g("url_converter",{processor:"function",default:v.convertURL}),g("url_converter_scope",{processor:"object",default:v}),g("urlconverter_callback",{processor:"function"}),g("allow_conditional_comments",{processor:"boolean",default:!1}),g("allow_html_data_urls",{processor:"boolean",default:!1}),g("allow_svg_data_urls",{processor:"boolean"}),g("allow_html_in_named_anchor",{processor:"boolean",default:!1}),g("allow_script_urls",{processor:"boolean",default:!1}),g("allow_unsafe_link_target",{processor:"boolean",default:!1}),g("allow_mathml_annotation_encodings",{processor:y=>{const p=ho(y,se);return p?{value:y,valid:p}:{valid:!1,message:"Must be an array of strings."}},default:[]}),g("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),g("fix_list_elements",{processor:"boolean",default:!1}),g("preserve_cdata",{processor:"boolean",default:!1}),g("remove_trailing_brs",{processor:"boolean",default:!0}),g("pad_empty_with_br",{processor:"boolean",default:!1}),g("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),g("element_format",{processor:"string",default:"html"}),g("entities",{processor:"string"}),g("schema",{processor:"string",default:"html5"}),g("convert_urls",{processor:"boolean",default:!0}),g("relative_urls",{processor:"boolean",default:!0}),g("remove_script_host",{processor:"boolean",default:!0}),g("custom_elements",{processor:Cu}),g("extended_valid_elements",{processor:"string"}),g("invalid_elements",{processor:"string"}),g("invalid_styles",{processor:Cu}),g("valid_children",{processor:"string"}),g("valid_classes",{processor:Cu}),g("valid_elements",{processor:"string"}),g("valid_styles",{processor:Cu}),g("verify_html",{processor:"boolean",default:!0}),g("auto_focus",{processor:y=>se(y)||y===!0}),g("browser_spellcheck",{processor:"boolean",default:!1}),g("protect",{processor:"array"}),g("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),g("deprecation_warnings",{processor:"boolean",default:!0}),g("a11y_advanced_options",{processor:"boolean",default:!1}),g("api_key",{processor:"string"}),g("license_key",{processor:"string"}),g("paste_block_drop",{processor:"boolean",default:!1}),g("paste_data_images",{processor:"boolean",default:!0}),g("paste_preprocess",{processor:"function"}),g("paste_postprocess",{processor:"function"}),g("paste_webkit_styles",{processor:"string",default:"none"}),g("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),g("paste_merge_formats",{processor:"boolean",default:!0}),g("smart_paste",{processor:"boolean",default:!0}),g("paste_as_text",{processor:"boolean",default:!1}),g("paste_tab_spaces",{processor:"number",default:4}),g("text_patterns",{processor:y=>ho(y,rn)||y===!1?{value:zb(y===!1?[]:y),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),g("text_patterns_lookup",{processor:y=>{return dt(y)?{value:(p=y,_=>{const k=p(_);return zb(k)}),valid:!0}:{valid:!1,message:"Must be a single function"};var p},default:y=>[]}),g("noneditable_class",{processor:"string",default:"mceNonEditable"}),g("editable_class",{processor:"string",default:"mceEditable"}),g("noneditable_regexp",{processor:y=>ho(y,Zb)?{value:y,valid:!0}:Zb(y)?{value:[y],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),g("table_tab_navigation",{processor:"boolean",default:!0}),g("highlight_on_focus",{processor:"boolean",default:!0}),g("xss_sanitization",{processor:"boolean",default:!0}),g("details_initial_state",{processor:y=>{const p=fe(["inherited","collapsed","expanded"],y);return p?{value:y,valid:p}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("details_serialized_state",{processor:y=>{const p=fe(["inherited","collapsed","expanded"],y);return p?{value:y,valid:p}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("init_content_sync",{processor:"boolean",default:!1}),g("newdocument_content",{processor:"string",default:""}),g("sandbox_iframes",{processor:"boolean",default:!0}),g("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),g("convert_unsafe_embeds",{processor:"boolean",default:!0}),v.on("ScriptsLoaded",()=>{g("directionality",{processor:"string",default:lo.isRtl()?"rtl":void 0}),g("placeholder",{processor:"string",default:eE.getAttrib(v.getElement(),"placeholder")})})})(o);const i=this.options.get;i("deprecation_warnings")&&((v,g)=>{((y,p)=>{const _=PT(y),k=BT(p),x=k.length>0,A=_.length>0,N=p.theme==="mobile";if(x||A||N){const O=`
- `,L=N?`

Themes:${O}mobile`:"",P=x?`

Plugins:${O}${k.join(O)}`:"",j=A?`

Options:${O}${_.join(O)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+L+P+j)}})(v,g),((y,p)=>{const _=LT(y),k=IT(p),x=k.length>0,A=_.length>0;if(x||A){const N=`
- `,O=x?`

Plugins:${N}${k.map(FT).join(N)}`:"",L=A?`

Options:${N}${_.join(N)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+O+L)}})(v,g)})(n,s);const a=i("suffix");a&&(r.suffix=a),this.suffix=r.suffix;const l=i("base_url");l&&r._setBaseUrl(l),this.baseUri=r.baseURI;const c=Mf(o);c&&(Zo.ScriptLoader._setReferrerPolicy(c),bt.DOM.styleSheetLoader._setReferrerPolicy(c));const d=d0(o);ie(d)&&bt.DOM.styleSheetLoader._setContentCssCors(d),Wn.languageLoad=i("language_load"),Wn.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new es(Jb(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Lf(o),this.hasVisual=$E(o),this.shortcuts=new gS(this),this.editorCommands=new aS(this),YD(this);const m=i("cache_suffix");m&&(Qe.cacheSuffix=m.replace(/^[\?\&]+/,"")),this.ui={registry:XD(),styleSheetLoader:void 0,show:$e,hide:$e,setEnabled:$e,isEnabled:Zt},this.mode=qD(o),r.dispatch("SetupEditor",{editor:this});const h=WE(o);dt(h)&&h.call(o,o)}render(){(t=>{const n=t.id;lo.setCode(o0(t));const r=()=>{fl.unbind(window,"ready",r),t.render()};if(!Ai.Event.domLoaded)return void fl.bind(window,"ready",r);if(!t.getElement())return;const o=M(t.getElement()),s=Ls(o);t.on("remove",()=>{rs(o.dom.attributes,a=>dn(o,a.name)),Hr(o,s)}),t.ui.styleSheetLoader=((a,l)=>Fc.forElement(a,{contentCssCors:d0(l),referrerPolicy:Mf(l)}))(o,t),Lf(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");const i=t.getElement().form||fl.getParent(n,"form");i&&(t.formElement=i,PE(t)&&!Oc(t.getElement())&&(fl.insertAfter(fl.create("input",{type:"hidden",name:n}),n),t.hasHiddenInput=!0),t.formEventDelegate=a=>{t.dispatch(a.type,a)},fl.bind(i,"submit reset",t.formEventDelegate),t.on("reset",()=>{t.resetContent()}),!LE(t)||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),i._mceOldSubmit(i)))),t.windowManager=Ww(t),t.notificationManager=zw(t),(a=>a.options.get("encoding")==="xml")(t)&&t.on("GetContent",a=>{a.save&&(a.content=fl.encode(a.content))}),BE(t)&&t.on("submit",()=>{t.initialized&&t.save()}),IE(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),AD(t,t.suffix)})(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return nc(this)}translate(t){return lo.translate(t)}getParam(t,n,r){const o=this.options;return o.isRegistered(t)||(ie(r)?o.register(t,{processor:r,default:n}):o.register(t,{processor:Zt,default:n})),o.isSet(t)||on(n)?o.get(t):n}hasPlugin(t,n){return!(!fe(ku(this),t)||n&&ic.get(t)===void 0)}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,r){this.editorCommands.addCommand(t,n,r)}addQueryStateHandler(t,n,r){this.editorCommands.addQueryStateHandler(t,n,r)}addQueryValueHandler(t,n,r){this.editorCommands.addQueryValueHandler(t,n,r)}addShortcut(t,n,r,o){this.shortcuts.add(t,n,r,o)}execCommand(t,n,r,o){return this.editorCommands.execCommand(t,n,r,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(gl.show(t.getContainer()),gl.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(gl.hide(t.getContainer()),gl.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,r=n.getElement();if(n.removed)return"";if(r){const o={...t,load:!0},s=Oc(r)?r.value:r.innerHTML,i=n.setContent(s,o);return o.no_events||n.dispatch("LoadContent",{...o,element:r}),i}return""}save(t={}){const n=this;let r=n.getElement();if(!r||!n.initialized||n.removed)return"";const o={...t,save:!0,element:r};let s=n.getContent(o);const i={...o,content:s};if(i.no_events||n.dispatch("SaveContent",i),i.format==="raw"&&n.dispatch("RawSaveContent",i),s=i.content,Oc(r))r.value=s;else{!t.is_removing&&n.inline||(r.innerHTML=s);const a=gl.getParent(n.id,"form");a&&ZD(a.elements,l=>l.name!==n.id||(l.value=s,!1))}return i.element=o.element=r=null,i.set_dirty!==!1&&n.setDirty(!1),s}setContent(t,n){return Eg(this,t,n)}getContent(t){return((n,r={})=>{const o=((s,i)=>({...s,format:i,get:!0,getInner:!0}))(r,r.format?r.format:"html");return yw(n,o).fold(En,s=>{const i=((a,l)=>Sg(a).editor.getContent(l))(n,s);return _w(n,i,s)})})(this,t)}insertContent(t,n){n&&(t=pS({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?Eg(this,this.startContent,{format:"raw"}):Eg(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||gl.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=gl.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const r=this.getDoc();return(n=(t=this.bodyElement)!==null&&t!==void 0?t:r?.body)!==null&&n!==void 0?n:null}convertURL(t,n,r){const o=this,s=o.options.get,i=qE(o);if(dt(i))return i.call(o,t,r,!0,n);if(!s("convert_urls")||r==="link"||rn(r)&&r.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0)return t;const a=new es(t);return a.protocol!=="http"&&a.protocol!=="https"&&a.protocol!==""?t:s("relative_urls")?o.documentBaseURI.toRelative(t):t=o.documentBaseURI.toAbsolute(t,s("remove_script_host"))}addVisual(t){((n,r)=>{((o,s)=>{xn(o).editor.addVisual(s)})(n,r)})(this,t)}setEditableRoot(t){((n,r)=>{n._editableRoot!==r&&(n._editableRoot=r,Mi(n)||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),((o,s)=>{o.dispatch("EditableRootStateChange",{state:s})})(n,r))})(this,t)}hasEditableRoot(){return this._editableRoot}remove(){(t=>{if(!t.removed){const{_selectionOverrides:n,editorUpload:r}=t,o=t.getBody(),s=t.getElement();o&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&ie(s?.nextSibling)&&cm.remove(s.nextSibling),(i=>{i.dispatch("remove")})(t),t.editorManager.remove(t),!t.inline&&o&&(i=>{cm.setStyle(i.id,"display",i.orgDisplay)})(t),(i=>{i.dispatch("detach")})(t),cm.remove(t.getContainer()),dm(n),dm(r),t.destroy()}})(this)}destroy(t){((n,r)=>{const{selection:o,dom:s}=n;n.destroyed||(r||n.removed?(r||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),dm(o),dm(s)),(i=>{const a=i.formElement;a&&(a._mceOldSubmit&&(a.submit=a._mceOldSubmit,delete a._mceOldSubmit),cm.unbind(a,"submit reset",i.formEventDelegate))})(n),(i=>{const a=i;a.contentAreaContainer=a.formElement=a.container=a.editorContainer=null,a.bodyElement=a.contentDocument=a.contentWindow=null,a.iframeElement=a.targetElm=null;const l=i.selection;if(l){const c=l.dom;a.selection=l.win=l.dom=c.doc=null}})(n),n.destroyed=!0):n.remove())})(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const bc=bt.DOM,Km=oe.each;let Xm,bS=!1,Mr=[];const Zm=e=>{const t=e.type;Km(ka.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}})},vS=e=>{if(e!==bS){const t=bt.DOM;e?(t.bind(window,"resize",Zm),t.bind(window,"scroll",Zm)):(t.unbind(window,"resize",Zm),t.unbind(window,"scroll",Zm)),bS=e}},yS=e=>{const t=Mr;return Mr=De(Mr,n=>e!==n),ka.activeEditor===e&&(ka.activeEditor=Mr.length>0?Mr[0]:null),ka.focusedEditor===e&&(ka.focusedEditor=null),t.length!==Mr.length},QD=document.compatMode!=="CSS1Compat",ka={...Kp,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"6.1",releaseDate:"2025-01-22",i18n:lo,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",r=es.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,n=o.suffix;else{const i=document.getElementsByTagName("script");for(let a=0;a<i.length;a++){const l=i[a].src||"";if(l==="")continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){c.indexOf(".min")!==-1&&(n=".min"),t=l.substring(0,l.lastIndexOf("/"));break}}if(!t&&document.currentScript){const a=document.currentScript.src;a.indexOf(".min")!==-1&&(n=".min"),t=a.substring(0,a.lastIndexOf("/"))}}var s;e.baseURL=new es(r).toAbsolute(t),e.documentBaseURL=r,e.baseURI=new es(e.baseURL),e.suffix=n,(s=e).on("AddEditor",_e(VN,s)),s.on("RemoveEditor",_e(qN,s))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&it(r,(o,s)=>{Wn.PluginManager.urls[s]=o})},init(e){const t=this;let n;const r=oe.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let o=i=>{n=i};const s=()=>{let i=0;const a=[];let l;bc.unbind(window,"ready",s),(c=>{const d=e.onpageload;d&&d.apply(t,[])})(),l=pr((c=>Qe.browser.isIE()||Qe.browser.isEdge()?(fm("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):QD?(fm("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):se(c.selector)?bc.select(c.selector):ie(c.target)?[c.target]:[])(e)),oe.each(l,c=>{var d;(d=t.get(c.id))&&d.initialized&&!(d.getContainer()||d.getBody()).parentNode&&(yS(d),d.unbindAllNativeEvents(),d.destroy(!0),d.removed=!0)}),l=oe.grep(l,c=>!t.get(c.id)),l.length===0?o([]):Km(l,c=>{((d,m)=>d.inline&&m.tagName.toLowerCase()in r)(e,c)?fm("Could not initialize inline editor on invalid inline target element",c):((d,m,h)=>{const v=new Gm(d,m,t);a.push(v),v.on("init",()=>{++i===l.length&&o(a)}),v.targetElm=v.targetElm||h,v.render()})((d=>{let m=d.id;return m||(m=St(d,"name").filter(h=>!bc.get(h)).getOrThunk(bc.uniqueId),d.setAttribute("id",m)),m})(c),e,c)})};return bc.bind(window,"ready",s),new Promise(i=>{n?i(n):o=a=>{i(a)}})},get(e){return arguments.length===0?Mr.slice(0):se(e)?Mt(Mr,t=>t.id===e).getOr(null):Jt(e)&&Mr[e]?Mr[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(n===null&&Mr.push(e),vS(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),Xm||(Xm=r=>{const o=t.dispatch("BeforeUnload");if(o.returnValue)return r.preventDefault(),r.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",Xm))),e},createEditor(e,t){return this.add(new Gm(e,t,this))},remove(e){const t=this;let n;if(e){if(!se(e))return n=e,Tt(t.get(n.id))?null:(yS(n)&&t.dispatch("RemoveEditor",{editor:n}),Mr.length===0&&window.removeEventListener("beforeunload",Xm),n.remove(),vS(Mr.length>0),n);Km(bc.select(e),r=>{n=t.get(r.id),n&&t.remove(n)})}else for(let r=Mr.length-1;r>=0;r--)t.remove(Mr[r])},execCommand(e,t,n){var r;const o=this,s=rn(n)?(r=n.id)!==null&&r!==void 0?r:n.index:n;switch(e){case"mceAddEditor":if(!o.get(s)){const i=n.options;new Gm(s,i,o).render()}return!0;case"mceRemoveEditor":{const i=o.get(s);return i&&i.remove(),!0}case"mceToggleEditor":{const i=o.get(s);return i?(i.isHidden()?i.show():i.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return!!o.activeEditor&&o.activeEditor.execCommand(e,t,n)},triggerSave:()=>{Km(Mr,e=>{e.save()})},addI18n:(e,t)=>{lo.add(e,t)},translate:e=>lo.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new es(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new es(this.baseURL)}};ka.setup();const JD=(()=>{const e=Cs();return{FakeClipboardItem:t=>({items:t,types:Ct(t),getType:n=>St(t,n).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),_S=Math.min,vc=Math.max,Qm=Math.round,wS=(e,t,n)=>{let r=t.x,o=t.y;const s=e.w,i=e.h,a=t.w,l=t.h,c=(n||"").split("");return c[0]==="b"&&(o+=l),c[1]==="r"&&(r+=a),c[0]==="c"&&(o+=Qm(l/2)),c[1]==="c"&&(r+=Qm(a/2)),c[3]==="b"&&(o-=i),c[4]==="r"&&(r-=s),c[3]==="c"&&(o-=Qm(i/2)),c[4]==="c"&&(r-=Qm(s/2)),yc(r,o,s,i)},yc=(e,t,n,r)=>({x:e,y:t,w:n,h:r}),eM={inflate:(e,t,n)=>yc(e.x-t,e.y-n,e.w+2*t,e.h+2*n),relativePosition:wS,findBestRelativePosition:(e,t,n,r)=>{for(let o=0;o<r.length;o++){const s=wS(e,t,r[o]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return r[o]}return null},intersect:(e,t)=>{const n=vc(e.x,t.x),r=vc(e.y,t.y),o=_S(e.x+e.w,t.x+t.w),s=_S(e.y+e.h,t.y+t.h);return o-n<0||s-r<0?null:yc(n,r,o-n,s-r)},clamp:(e,t,n)=>{let r=e.x,o=e.y,s=e.x+e.w,i=e.y+e.h;const a=t.x+t.w,l=t.y+t.h,c=vc(0,t.x-r),d=vc(0,t.y-o),m=vc(0,s-a),h=vc(0,i-l);return r+=c,o+=d,n&&(s+=c,i+=d,r-=m,o-=h),s-=m,i-=h,yc(r,o,s-r,i-o)},create:yc,fromClientRect:e=>yc(e.left,e.top,e.width,e.height)},tM=(()=>{const e={},t={},n={};return{load:(r,o)=>{const s=`Script at URL "${o}" failed to load`,i=`Script at URL "${o}" did not call \`tinymce.Resource.add('${r}', data)\` within 1 second`;if(e[r]!==void 0)return e[r];{const a=new Promise((l,c)=>{const d=((m,h,v=1e3)=>{let g=!1,y=null;const p=x=>(...A)=>{g||(g=!0,y!==null&&(clearTimeout(y),y=null),x.apply(null,A))},_=p(m),k=p(h);return{start:(...x)=>{g||y!==null||(y=setTimeout(()=>k.apply(null,x),v))},resolve:_,reject:k}})(l,c);t[r]=d.resolve,Zo.ScriptLoader.loadScript(o).then(()=>d.start(i),()=>d.reject(s))});return e[r]=a,a}},add:(r,o)=>{t[r]!==void 0&&(t[r](o),delete t[r]),e[r]=Promise.resolve(o),n[r]=o},has:r=>r in n,get:r=>n[r],unload:r=>{delete e[r],delete n[r]}}})();let Vd;try{const e="__storage_test__";Vd=window.localStorage,Vd.setItem(e,e),Vd.removeItem(e)}catch{Vd=(()=>{let t={},n=[];const r={getItem:o=>t[o]||null,setItem:(o,s)=>{n.push(o),t[o]=String(s)},key:o=>n[o],removeItem:o=>{n=n.filter(s=>s===o),delete t[o]},clear:()=>{n=[],t={}},length:0};return Object.defineProperty(r,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),r})()}const nM={geom:{Rect:eM},util:{Delay:To,Tools:oe,VK:ve,URI:es,EventDispatcher:Gp,Observable:Kp,I18n:lo,LocalStorage:Vd,ImageUploader:e=>{const t=Jw(),n=tC(e,t);return{upload:(r,o=!0)=>n.upload(r,o?eC(e):void 0)}}},dom:{EventUtils:Ai,TreeWalker:Cn,TextSeeker:qa,DOMUtils:bt,ScriptLoader:Zo,RangeUtils:rl,Serializer:Fw,StyleSheetLoader:uu,ControlSelection:Cv,BookmarkManager:dd,Selection:Iw,Event:Ai.Event},html:{Styles:Kt,Entities:Oe,Node:Cr,Schema:zn,DomParser:oc,Writer:Jv,Serializer:ba},Env:Qe,AddOnManager:Wn,Annotator:dv,Formatter:oC,UndoManager:iC,EditorCommands:aS,WindowManager:Ww,NotificationManager:zw,EditorObservable:dS,Shortcuts:gS,Editor:Gm,FocusManager:yv,EditorManager:ka,DOM:bt.DOM,ScriptLoader:Zo.ScriptLoader,PluginManager:ic,ThemeManager:cl,ModelManager:sc,IconManager:um,Resource:tM,FakeClipboard:JD,trim:oe.trim,isArray:oe.isArray,is:oe.is,toArray:oe.toArray,makeMap:oe.makeMap,each:oe.each,map:oe.map,grep:oe.grep,inArray:oe.inArray,extend:oe.extend,walk:oe.walk,resolve:oe.resolve,explode:oe.explode,_addCacheSuffix:oe._addCacheSuffix},CS=oe.extend(ka,nM);(e=>{window.tinymce=e,window.tinyMCE=e})(CS),(e=>{if(typeof module=="object")try{module.exports=e}catch{}})(CS)}();
